

========== saga.client\.vscode\launch.json ==========

{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "edge",
      "request": "launch",
      "name": "localhost (Edge)",
      "url": "https://localhost:57419",
      "webRoot": "${workspaceFolder}"
    },
    {
      "type": "chrome",
      "request": "launch",
      "name": "localhost (Chrome)",
      "url": "https://localhost:57419",
      "webRoot": "${workspaceFolder}"
    }
  ]
}


========== saga.client\src\components\layout\index.ts ==========

export { VoidLayout } from './VoidLayout';


========== saga.client\src\components\layout\VoidLayout.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VOID LAYOUT - Global Layout Styles
   SAGA VOID/GOLD Theme
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.void-layout {
  --void: #030304;
  --void-light: #0a0a0c;
  --void-surface: #111115;
  --void-elevated: #18181c;
  --void-border: rgba(255, 255, 255, 0.08);
  
  --gold: #d4a853;
  --gold-light: #e4b863;
  --gold-dim: rgba(212, 168, 83, 0.15);
  --gold-glow: rgba(212, 168, 83, 0.3);
  
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.85);
  --text-muted: rgba(255, 255, 255, 0.5);

  --font-display: 'Cinzel', serif;
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;

  min-height: 100vh;
  background: var(--void);
  font-family: var(--font-body);
}

.void-layout-content {
  padding-top: 70px;
  padding-bottom: 100px;
  min-height: 100vh;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER - Scroll'da solan Ã¼st bar
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.void-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  padding: 0 16px;
  height: 60px;
  background: linear-gradient(to bottom, rgba(3, 3, 4, 0.95), transparent);
  transition: all 0.4s ease;
}

.void-header.scrolled {
  background: rgba(3, 3, 4, 0.98);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.void-header-content {
  max-width: 1200px;
  margin: 0 auto;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

/* Left Section */
.void-header-left {
  display: flex;
  align-items: center;
  min-width: 80px;
}

.void-header-logo {
  font-family: 'Cinzel', serif;
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: 3px;
  background: linear-gradient(to bottom, #fff, var(--gold));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-decoration: none;
  filter: drop-shadow(0 0 12px var(--gold-glow));
  transition: opacity 0.2s;
}

.void-header-logo:hover {
  opacity: 0.85;
}

/* Center Section */
.void-header-center {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  max-width: 400px;
}

.void-header-title {
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: 1px;
}

/* Right Section */
.void-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 80px;
  justify-content: flex-end;
}

/* Header Buttons */
.void-header-btn {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--void-border);
  border-radius: 50%;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.void-header-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--gold);
  border-color: var(--gold);
}

.void-header-btn svg {
  width: 20px;
  height: 20px;
}

/* Notification Button with Badge */
.void-notification-btn {
  position: relative;
}

.void-notification-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  background: var(--gold);
  color: #000;
  font-size: 0.65rem;
  font-weight: 700;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SEARCH - Inline Search Input
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.void-search-container {
  position: relative;
  width: 100%;
  display: flex;
  align-items: center;
}

.void-search-icon {
  position: absolute;
  left: 12px;
  color: var(--text-muted);
  pointer-events: none;
}

.void-search-input {
  width: 100%;
  height: 40px;
  padding: 0 40px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--void-border);
  border-radius: 20px;
  color: var(--text-primary);
  font-size: 0.9rem;
  transition: all 0.2s ease;
}

.void-search-input::placeholder {
  color: var(--text-muted);
}

.void-search-input:focus {
  outline: none;
  border-color: var(--gold);
  background: rgba(255, 255, 255, 0.08);
}

.void-search-close {
  position: absolute;
  right: 8px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 50%;
  transition: all 0.2s;
}

.void-search-close:hover {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.1);
}

/* Search Results Dropdown */
.void-search-results {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  right: 0;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  z-index: 1000;
}

.void-search-loading {
  padding: 16px;
  text-align: center;
  color: var(--text-muted);
  font-size: 0.85rem;
}

.void-search-result {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px 16px;
  background: none;
  border: none;
  cursor: pointer;
  transition: background 0.2s;
  text-align: left;
}

.void-search-result:hover {
  background: var(--void-elevated);
}

.void-search-result:not(:last-child) {
  border-bottom: 1px solid var(--void-border);
}

.void-search-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
}

.void-search-avatar-placeholder {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--void-elevated);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.void-search-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.void-search-username {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-primary);
}

.void-search-name {
  font-size: 0.8rem;
  color: var(--text-muted);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

@media (max-width: 768px) {
  .void-header {
    padding: 0 12px;
  }

  .void-header-title {
    font-size: 0.9rem;
  }

  .void-header-btn {
    width: 36px;
    height: 36px;
  }

  .void-header-btn svg {
    width: 18px;
    height: 18px;
  }

  .void-search-input {
    height: 36px;
    font-size: 0.85rem;
  }
}

@media (max-width: 480px) {
  .void-header-logo {
    font-size: 1.3rem;
    letter-spacing: 2px;
  }

  .void-header-center {
    max-width: 200px;
  }

  .void-layout-content {
    padding-bottom: 80px;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE DROPDOWN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.void-profile-wrapper {
  position: relative;
}

.void-profile-btn {
  width: 40px;
  height: 40px;
  padding: 0;
  background: none;
  border: 2px solid var(--void-border);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s ease;
  overflow: hidden;
}

.void-profile-btn:hover {
  border-color: var(--gold);
}

.void-profile-avatar {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.void-profile-avatar-placeholder {
  width: 100%;
  height: 100%;
  background: var(--void-surface);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.void-profile-menu {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  min-width: 180px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
  animation: slideDown 0.2s ease;
  z-index: 1000;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.void-profile-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 14px 16px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-family: var(--font-body);
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.void-profile-menu-item:hover {
  background: var(--void-elevated);
  color: var(--gold);
}

.void-profile-menu-item.logout {
  color: #ef4444;
}

.void-profile-menu-item.logout:hover {
  background: rgba(239, 68, 68, 0.1);
  color: #f87171;
}

.void-profile-menu-divider {
  height: 1px;
  background: var(--void-border);
  margin: 4px 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BOTTOM NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.void-bottom-nav {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: rgba(17, 17, 20, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 50px;
  border: 1px solid var(--void-border);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  z-index: 1000;
}

.void-nav-logo {
  font-family: 'Cinzel', serif;
  font-size: 1rem;
  font-weight: 700;
  letter-spacing: 2px;
  padding: 0 12px;
  border-right: 1px solid var(--void-border);
  margin-right: 4px;
  text-decoration: none;
  background: linear-gradient(to bottom, #fff, var(--gold));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 8px var(--gold-glow));
  transition: opacity 0.2s ease;
}

.void-nav-logo:hover {
  opacity: 0.8;
}

.void-nav-item {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  text-decoration: none;
}

.void-nav-item svg {
  width: 22px;
  height: 22px;
  color: var(--text-muted);
  transition: all 0.3s ease;
}

.void-nav-item:hover {
  background: rgba(255, 255, 255, 0.05);
}

.void-nav-item:hover svg {
  color: var(--text-secondary);
}

.void-nav-item.active {
  background: var(--gold);
}

.void-nav-item.active svg {
  color: var(--void);
}

/* Bottom Nav Responsive */
@media (max-width: 768px) {
  .void-bottom-nav {
    bottom: 16px;
    padding: 10px 12px;
    gap: 4px;
  }

  .void-nav-logo {
    font-size: 0.85rem;
    padding: 0 10px;
  }

  .void-nav-item {
    width: 40px;
    height: 40px;
  }

  .void-nav-item svg {
    width: 20px;
    height: 20px;
  }
}

@media (max-width: 480px) {
  .void-bottom-nav {
    bottom: 12px;
    padding: 8px 10px;
    gap: 2px;
  }

  .void-nav-logo {
    font-size: 0.8rem;
    padding: 0 8px;
    margin-right: 2px;
  }

  .void-nav-item {
    width: 36px;
    height: 36px;
  }

  .void-nav-item svg {
    width: 18px;
    height: 18px;
  }
}


========== saga.client\src\components\layout\VoidLayout.tsx ==========

import { useState, useEffect, useRef, useCallback } from 'react';
import { Outlet, useLocation, useNavigate, Link } from 'react-router-dom';
import { Search, Bell, ArrowLeft, X, User, Settings, LogOut } from 'lucide-react';
import { useAuth } from '../../context/AuthContext';
import { kullaniciApi, bildirimApi } from '../../services/api';
import './VoidLayout.css';

// ============================================
// PAGE TITLES
// ============================================

const PAGE_TITLES: Record<string, string> = {
  '/': 'AkÄ±ÅŸ',
  '/akis': 'AkÄ±ÅŸ',
  '/kesfet': 'KeÅŸfet',
  '/kutuphane': 'KÃ¼tÃ¼phanem',
  '/listelerim': 'Listelerim',
  '/bildirimler': 'Bildirimler',
  '/ayarlar': 'Ayarlar',
  '/begeniler': 'BeÄŸeniler',
};

function getPageTitle(pathname: string): string {
  if (PAGE_TITLES[pathname]) return PAGE_TITLES[pathname];
  if (pathname.startsWith('/profil/')) return 'Profil';
  if (pathname.startsWith('/liste/')) return 'Liste';
  if (pathname.startsWith('/icerik/')) return '';
  return '';
}

function shouldShowBack(pathname: string): boolean {
  const backPaths = ['/profil/', '/ayarlar', '/liste/', '/bildirimler', '/icerik/', '/begeniler'];
  return backPaths.some(path => pathname.includes(path));
}

// ============================================
// HEADER COMPONENT
// ============================================

interface SearchResult {
  id: string;
  kullaniciAdi: string;
  profilResmi?: string;
  ad?: string;
}

function VoidHeader() {
  const location = useLocation();
  const navigate = useNavigate();
  const { user, isAuthenticated, signOut } = useAuth();
  const title = getPageTitle(location.pathname);
  const showBack = shouldShowBack(location.pathname);
  
  const [scrolled, setScrolled] = useState(false);
  const [showSearch, setShowSearch] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);
  const [searching, setSearching] = useState(false);
  const [showProfileMenu, setShowProfileMenu] = useState(false);
  const [okunmamisBildirimSayisi, setOkunmamisBildirimSayisi] = useState(0);
  const searchInputRef = useRef<HTMLInputElement>(null);
  const searchTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);
  const profileMenuRef = useRef<HTMLDivElement>(null);

  // OkunmamÄ±ÅŸ bildirim sayÄ±sÄ±nÄ± Ã§ek
  const fetchBildirimSayisi = useCallback(async () => {
    if (!isAuthenticated) return;
    try {
      const response = await bildirimApi.getOkunmamis();
      setOkunmamisBildirimSayisi(response.okunmamisSayisi || 0);
    } catch (error) {
      console.error('Bildirim sayÄ±sÄ± alÄ±namadÄ±:', error);
    }
  }, [isAuthenticated]);

  // Ä°lk yÃ¼kleme ve periyodik gÃ¼ncelleme
  useEffect(() => {
    fetchBildirimSayisi();
    
    // Her 30 saniyede bir gÃ¼ncelle
    const interval = setInterval(fetchBildirimSayisi, 30000);
    return () => clearInterval(interval);
  }, [fetchBildirimSayisi]);

  // Sayfa deÄŸiÅŸtiÄŸinde bildirim sayÄ±sÄ±nÄ± gÃ¼ncelle
  useEffect(() => {
    fetchBildirimSayisi();
  }, [location.pathname, fetchBildirimSayisi]);

  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  // Profil menÃ¼sÃ¼ dÄ±ÅŸÄ±na tÄ±klanÄ±nca kapat
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (profileMenuRef.current && !profileMenuRef.current.contains(event.target as Node)) {
        setShowProfileMenu(false);
      }
    };
    if (showProfileMenu) {
      document.addEventListener('mousedown', handleClickOutside);
    }
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, [showProfileMenu]);

  useEffect(() => {
    if (showSearch && searchInputRef.current) {
      searchInputRef.current.focus();
    }
  }, [showSearch]);

  useEffect(() => {
    if (searchQuery.trim().length < 2) {
      setSearchResults([]);
      return;
    }

    if (searchTimeoutRef.current) {
      clearTimeout(searchTimeoutRef.current);
    }

    searchTimeoutRef.current = setTimeout(async () => {
      try {
        setSearching(true);
        const results = await kullaniciApi.ara(searchQuery.trim());
        setSearchResults(results.slice(0, 5));
      } catch (err) {
        console.error('Arama hatasÄ±:', err);
      } finally {
        setSearching(false);
      }
    }, 300);

    return () => {
      if (searchTimeoutRef.current) {
        clearTimeout(searchTimeoutRef.current);
      }
    };
  }, [searchQuery]);

  const handleSearchClose = () => {
    setShowSearch(false);
    setSearchQuery('');
    setSearchResults([]);
  };

  const handleResultClick = (kullaniciAdi: string) => {
    handleSearchClose();
    navigate(`/profil/${kullaniciAdi}`);
  };

  const handleLogout = async () => {
    setShowProfileMenu(false);
    await signOut();
    navigate('/giris');
  };

  const handleSettingsClick = () => {
    setShowProfileMenu(false);
    navigate('/ayarlar');
  };

  const handleProfileClick = () => {
    setShowProfileMenu(false);
    if (user?.kullaniciAdi) {
      navigate(`/profil/${user.kullaniciAdi}`);
    }
  };

  return (
    <header className={`void-header ${scrolled ? 'scrolled' : ''}`}>
      <div className="void-header-content">
        {/* Sol: Geri veya Logo */}
        <div className="void-header-left">
          {showBack ? (
            <button className="void-header-btn" onClick={() => navigate(-1)}>
              <ArrowLeft size={20} />
            </button>
          ) : (
            <Link to="/" className="void-header-logo">SAGA</Link>
          )}
        </div>

        {/* Orta: Title veya Search Input */}
        <div className="void-header-center">
          {showSearch ? (
            <div className="void-search-container">
              <Search size={18} className="void-search-icon" />
              <input
                ref={searchInputRef}
                type="text"
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                placeholder="KullanÄ±cÄ± ara..."
                className="void-search-input"
              />
              <button className="void-search-close" onClick={handleSearchClose}>
                <X size={18} />
              </button>
              
              {/* Arama SonuÃ§larÄ± */}
              {(searchResults.length > 0 || searching) && (
                <div className="void-search-results">
                  {searching ? (
                    <div className="void-search-loading">AranÄ±yor...</div>
                  ) : (
                    searchResults.map((user) => (
                      <button
                        key={user.id}
                        className="void-search-result"
                        onClick={() => handleResultClick(user.kullaniciAdi)}
                      >
                        {user.profilResmi ? (
                          <img src={user.profilResmi} alt="" className="void-search-avatar" />
                        ) : (
                          <div className="void-search-avatar-placeholder">
                            <User size={16} />
                          </div>
                        )}
                        <div className="void-search-info">
                          <span className="void-search-username">@{user.kullaniciAdi}</span>
                          {user.ad && <span className="void-search-name">{user.ad}</span>}
                        </div>
                      </button>
                    ))
                  )}
                </div>
              )}
            </div>
          ) : (
            <span className="void-header-title">{title}</span>
          )}
        </div>

        {/* SaÄŸ: Aksiyonlar */}
        <div className="void-header-right">
          {!showSearch && (
            <button className="void-header-btn" onClick={() => setShowSearch(true)}>
              <Search size={20} />
            </button>
          )}
          <button className="void-header-btn void-notification-btn" onClick={() => navigate('/bildirimler')}>
            <Bell size={20} />
            {okunmamisBildirimSayisi > 0 && (
              <span className="void-notification-badge">
                {okunmamisBildirimSayisi > 99 ? '99+' : okunmamisBildirimSayisi}
              </span>
            )}
          </button>
          
          {/* Profil Dropdown - Sadece giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±lar iÃ§in */}
          {isAuthenticated ? (
            <div className="void-profile-wrapper" ref={profileMenuRef}>
              <button 
                className="void-profile-btn"
                onClick={() => setShowProfileMenu(!showProfileMenu)}
              >
                {user?.profilResmi ? (
                  <img src={user.profilResmi} alt="" className="void-profile-avatar" />
                ) : (
                  <div className="void-profile-avatar-placeholder">
                    <User size={18} />
                  </div>
                )}
              </button>
              
              {showProfileMenu && (
                <div className="void-profile-menu">
                  <button className="void-profile-menu-item" onClick={handleProfileClick}>
                    <User size={18} />
                    <span>Profilim</span>
                  </button>
                  <button className="void-profile-menu-item" onClick={handleSettingsClick}>
                    <Settings size={18} />
                    <span>Ayarlar</span>
                  </button>
                  <div className="void-profile-menu-divider" />
                  <button className="void-profile-menu-item logout" onClick={handleLogout}>
                    <LogOut size={18} />
                    <span>Ã‡Ä±kÄ±ÅŸ Yap</span>
                  </button>
                </div>
              )}
            </div>
          ) : (
            <button 
              className="void-header-btn void-login-btn"
              onClick={() => navigate('/giris')}
            >
              <User size={20} />
            </button>
          )}
        </div>
      </div>
    </header>
  );
}

// ============================================
// BOTTOM NAV COMPONENT
// ============================================

// SVG Icons (FloatingNav tarzÄ±nda)
const HomeIcon = () => (
  <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
  </svg>
);

const ExploreIcon = () => (
  <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
  </svg>
);

const LibraryIcon = () => (
  <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
  </svg>
);

const ProfileIcon = () => (
  <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
  </svg>
);

function VoidBottomNav() {
  const location = useLocation();
  const { user, isAuthenticated } = useAuth();

  const getActiveState = () => {
    const path = location.pathname;
    if (path === '/' || path === '/akis') return 'feed';
    if (path.startsWith('/kesfet')) return 'explore';
    if (path.startsWith('/kutuphane') || path.startsWith('/listelerim')) return 'library';
    if (path.startsWith('/profil')) return 'profile';
    return 'feed';
  };

  const active = getActiveState();
  const profileLink = isAuthenticated && user?.kullaniciAdi 
    ? `/profil/${user.kullaniciAdi}` 
    : '/giris';

  return (
    <nav className="void-bottom-nav">
      <Link to="/" className="void-nav-logo">SAGA</Link>
      
      <Link to="/" className={`void-nav-item ${active === 'feed' ? 'active' : ''}`}>
        <HomeIcon />
      </Link>
      
      <Link to="/kesfet" className={`void-nav-item ${active === 'explore' ? 'active' : ''}`}>
        <ExploreIcon />
      </Link>
      
      <Link to="/kutuphane" className={`void-nav-item ${active === 'library' ? 'active' : ''}`}>
        <LibraryIcon />
      </Link>
      
      <Link to={profileLink} className={`void-nav-item ${active === 'profile' ? 'active' : ''}`}>
        <ProfileIcon />
      </Link>
    </nav>
  );
}

// ============================================
// MAIN LAYOUT COMPONENT
// ============================================

export function VoidLayout() {
  return (
    <div className="void-layout">
      <VoidHeader />
      <main className="void-layout-content">
        <Outlet />
      </main>
      <VoidBottomNav />
    </div>
  );
}

export default VoidLayout;


========== saga.client\src\components\modals\CreateModal.tsx ==========

import { useState, useEffect, useCallback } from 'react';
import { useNavigate } from 'react-router-dom';
import {
  X,
  Search,
  List,
  Film,
  BookOpen,
  Star,
  Plus,
  Loader2,
  Check,
  Globe,
  Lock,
} from 'lucide-react';
import { icerikApi, listeApi } from '../../services/api';
import type { IcerikListItem } from '../../services/api';

interface CreateModalProps {
  isOpen: boolean;
  onClose: () => void;
}

type TabType = 'icerik' | 'liste';

// Debounce hook
function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value);
  useEffect(() => {
    const handler = setTimeout(() => setDebouncedValue(value), delay);
    return () => clearTimeout(handler);
  }, [value, delay]);
  return debouncedValue;
}

export function CreateModal({ isOpen, onClose }: CreateModalProps) {
  const navigate = useNavigate();
  const [activeTab, setActiveTab] = useState<TabType>('icerik');
  
  // Ä°Ã§erik arama state
  const [searchQuery, setSearchQuery] = useState('');
  const [searchResults, setSearchResults] = useState<IcerikListItem[]>([]);
  const [searchLoading, setSearchLoading] = useState(false);
  
  // Liste oluÅŸturma state
  const [listeAd, setListeAd] = useState('');
  const [listeAciklama, setListeAciklama] = useState('');
  const [listeHerkesaAcik, setListeHerkesaAcik] = useState(false);
  const [listeLoading, setListeLoading] = useState(false);
  const [listeSuccess, setListeSuccess] = useState(false);
  const [listeError, setListeError] = useState('');

  const debouncedSearch = useDebounce(searchQuery, 300);

  // Arama fonksiyonu
  const performSearch = useCallback(async (query: string) => {
    if (!query.trim()) {
      setSearchResults([]);
      return;
    }
    
    setSearchLoading(true);
    try {
      const result = await icerikApi.ara(query, { limit: 10 });
      setSearchResults(result.data);
    } catch (err) {
      console.error('Arama hatasÄ±:', err);
      setSearchResults([]);
    } finally {
      setSearchLoading(false);
    }
  }, []);

  useEffect(() => {
    performSearch(debouncedSearch);
  }, [debouncedSearch, performSearch]);

  // Liste oluÅŸtur
  const handleCreateListe = async () => {
    if (!listeAd.trim()) {
      setListeError('Liste adÄ± gereklidir.');
      return;
    }

    setListeLoading(true);
    setListeError('');
    
    try {
      const yeniListe = await listeApi.create({
        ad: listeAd,
        aciklama: listeAciklama || undefined,
        herkeseAcik: listeHerkesaAcik,
        tur: 'ozel',
      });
      
      setListeSuccess(true);
      setTimeout(() => {
        onClose();
        navigate(`/liste/${yeniListe.id}`);
      }, 1000);
    } catch (err) {
      console.error('Liste oluÅŸturma hatasÄ±:', err);
      setListeError('Liste oluÅŸturulurken bir hata oluÅŸtu.');
    } finally {
      setListeLoading(false);
    }
  };

  // Ä°Ã§eriÄŸe git
  const handleContentClick = (item: IcerikListItem) => {
    onClose();
    navigate(`/icerik/${item.id}`);
  };

  // Modal kapandÄ±ÄŸÄ±nda state'leri sÄ±fÄ±rla
  useEffect(() => {
    if (!isOpen) {
      setActiveTab('icerik');
      setSearchQuery('');
      setSearchResults([]);
      setListeAd('');
      setListeAciklama('');
      setListeHerkesaAcik(false);
      setListeSuccess(false);
      setListeError('');
    }
  }, [isOpen]);

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center">
      {/* Backdrop */}
      <div 
        className="absolute inset-0 bg-black/60 backdrop-blur-sm"
        onClick={onClose}
      />
      
      {/* Modal */}
      <div className="
        relative w-full max-w-lg mx-4
        bg-[rgba(20,20,35,0.95)]
        backdrop-blur-xl
        border border-[rgba(255,255,255,0.1)]
        rounded-2xl
        shadow-2xl
        max-h-[80vh]
        flex flex-col
        animate-scale-in
      ">
        {/* Header */}
        <div className="flex items-center justify-between p-5 border-b border-[rgba(255,255,255,0.08)]">
          <h2 className="text-lg font-semibold text-white">Yeni OluÅŸtur</h2>
          <button
            onClick={onClose}
            className="p-2 rounded-lg hover:bg-[rgba(255,255,255,0.1)] transition-colors text-[rgba(255,255,255,0.6)]"
          >
            <X size={20} />
          </button>
        </div>

        {/* Tabs */}
        <div className="flex border-b border-[rgba(255,255,255,0.08)]">
          <button
            onClick={() => setActiveTab('icerik')}
            className={`
              flex-1 px-4 py-3 flex items-center justify-center gap-2
              text-sm font-medium transition-colors
              ${activeTab === 'icerik' 
                ? 'text-white border-b-2 border-[#6C5CE7]' 
                : 'text-[rgba(255,255,255,0.5)] hover:text-white'
              }
            `}
          >
            <Search size={16} />
            Ä°Ã§erik Bul
          </button>
          <button
            onClick={() => setActiveTab('liste')}
            className={`
              flex-1 px-4 py-3 flex items-center justify-center gap-2
              text-sm font-medium transition-colors
              ${activeTab === 'liste' 
                ? 'text-white border-b-2 border-[#6C5CE7]' 
                : 'text-[rgba(255,255,255,0.5)] hover:text-white'
              }
            `}
          >
            <List size={16} />
            Liste OluÅŸtur
          </button>
        </div>

        {/* Content */}
        <div className="flex-1 overflow-y-auto p-5">
          {activeTab === 'icerik' && (
            <div className="space-y-4">
              {/* Search Input */}
              <div className="relative">
                <Search 
                  size={18} 
                  className="absolute left-4 top-1/2 -translate-y-1/2 text-[rgba(255,255,255,0.4)]" 
                />
                <input
                  type="text"
                  placeholder="Film, dizi veya kitap ara..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  autoFocus
                  className="
                    w-full pl-11 pr-4 py-3
                    rounded-xl
                    bg-[rgba(255,255,255,0.05)]
                    border border-[rgba(255,255,255,0.1)]
                    text-white text-sm
                    placeholder-[rgba(255,255,255,0.35)]
                    focus:outline-none focus:border-[#6C5CE7]
                    transition-all
                  "
                />
              </div>

              {/* Results */}
              <div className="space-y-2">
                {searchLoading ? (
                  <div className="flex items-center justify-center py-8">
                    <Loader2 size={24} className="animate-spin text-[#6C5CE7]" />
                  </div>
                ) : searchResults.length > 0 ? (
                  searchResults.map((item) => (
                    <button
                      key={item.id}
                      onClick={() => handleContentClick(item)}
                      className="
                        w-full p-3 rounded-xl
                        flex items-center gap-3
                        bg-[rgba(255,255,255,0.03)]
                        hover:bg-[rgba(255,255,255,0.08)]
                        transition-colors
                        text-left
                      "
                    >
                      {item.posterUrl ? (
                        <img 
                          src={item.posterUrl} 
                          alt={item.baslik}
                          className="w-12 h-16 rounded-lg object-cover"
                        />
                      ) : (
                        <div className="w-12 h-16 rounded-lg bg-[rgba(255,255,255,0.1)] flex items-center justify-center">
                          {item.tur === 'kitap' ? <BookOpen size={20} /> : <Film size={20} />}
                        </div>
                      )}
                      <div className="flex-1 min-w-0">
                        <p className="text-sm font-medium text-white truncate">{item.baslik}</p>
                        <div className="flex items-center gap-2 mt-1">
                          <span className="text-xs text-[rgba(255,255,255,0.5)] capitalize">{item.tur}</span>
                          {item.yayinTarihi && (
                            <span className="text-xs text-[rgba(255,255,255,0.4)]">
                              {new Date(item.yayinTarihi).getFullYear()}
                            </span>
                          )}
                        </div>
                      </div>
                      {item.ortalamaPuan > 0 && (
                        <div className="flex items-center gap-1 text-[#FF9F0A]">
                          <Star size={14} className="fill-current" />
                          <span className="text-sm font-semibold">{item.ortalamaPuan.toFixed(1)}</span>
                        </div>
                      )}
                    </button>
                  ))
                ) : searchQuery && !searchLoading ? (
                  <div className="text-center py-8">
                    <p className="text-[rgba(255,255,255,0.5)]">SonuÃ§ bulunamadÄ±</p>
                    <button
                      onClick={() => {
                        onClose();
                        navigate(`/kesfet?q=${encodeURIComponent(searchQuery)}`);
                      }}
                      className="mt-3 text-sm text-[#6C5CE7] hover:underline"
                    >
                      KeÅŸfet'te ara â†’
                    </button>
                  </div>
                ) : (
                  <div className="text-center py-8 text-[rgba(255,255,255,0.4)]">
                    <p>Film, dizi veya kitap aramaya baÅŸlayÄ±n</p>
                    <p className="text-sm mt-2">Ä°Ã§erik sayfasÄ±nda puanlama ve yorum yapabilirsiniz</p>
                  </div>
                )}
              </div>
            </div>
          )}

          {activeTab === 'liste' && (
            <div className="space-y-4">
              {/* Liste AdÄ± */}
              <div>
                <label className="block text-sm text-[rgba(255,255,255,0.7)] mb-2">
                  Liste AdÄ± *
                </label>
                <input
                  type="text"
                  value={listeAd}
                  onChange={(e) => setListeAd(e.target.value)}
                  placeholder="Ã–r: Ä°zlenecek Filmler"
                  className="
                    w-full px-4 py-3
                    rounded-xl
                    bg-[rgba(255,255,255,0.05)]
                    border border-[rgba(255,255,255,0.1)]
                    text-white text-sm
                    placeholder-[rgba(255,255,255,0.35)]
                    focus:outline-none focus:border-[#6C5CE7]
                    transition-all
                  "
                />
              </div>

              {/* Liste AÃ§Ä±klamasÄ± */}
              <div>
                <label className="block text-sm text-[rgba(255,255,255,0.7)] mb-2">
                  AÃ§Ä±klama
                </label>
                <textarea
                  value={listeAciklama}
                  onChange={(e) => setListeAciklama(e.target.value)}
                  placeholder="Bu liste hakkÄ±nda kÄ±sa bir aÃ§Ä±klama..."
                  rows={3}
                  className="
                    w-full px-4 py-3
                    rounded-xl
                    bg-[rgba(255,255,255,0.05)]
                    border border-[rgba(255,255,255,0.1)]
                    text-white text-sm
                    placeholder-[rgba(255,255,255,0.35)]
                    focus:outline-none focus:border-[#6C5CE7]
                    resize-none
                    transition-all
                  "
                />
              </div>

              {/* Gizlilik */}
              <div className="flex items-center justify-between p-4 rounded-xl bg-[rgba(255,255,255,0.03)]">
                <div className="flex items-center gap-3">
                  {listeHerkesaAcik ? (
                    <Globe size={20} className="text-[#00CEC9]" />
                  ) : (
                    <Lock size={20} className="text-[rgba(255,255,255,0.5)]" />
                  )}
                  <div>
                    <p className="text-sm font-medium text-white">
                      {listeHerkesaAcik ? 'Herkese AÃ§Ä±k' : 'Gizli Liste'}
                    </p>
                    <p className="text-xs text-[rgba(255,255,255,0.4)]">
                      {listeHerkesaAcik 
                        ? 'Herkes bu listeyi gÃ¶rebilir' 
                        : 'Sadece sen gÃ¶rebilirsin'
                      }
                    </p>
                  </div>
                </div>
                <button
                  onClick={() => setListeHerkesaAcik(!listeHerkesaAcik)}
                  className={`
                    w-12 h-6 rounded-full
                    transition-colors
                    ${listeHerkesaAcik 
                      ? 'bg-[#6C5CE7]' 
                      : 'bg-[rgba(255,255,255,0.2)]'
                    }
                    relative
                  `}
                >
                  <div className={`
                    absolute top-1 w-4 h-4 rounded-full bg-white
                    transition-transform
                    ${listeHerkesaAcik ? 'right-1' : 'left-1'}
                  `} />
                </button>
              </div>

              {/* Error */}
              {listeError && (
                <p className="text-sm text-red-400">{listeError}</p>
              )}

              {/* Create Button */}
              <button
                onClick={handleCreateListe}
                disabled={listeLoading || !listeAd.trim() || listeSuccess}
                className="
                  w-full py-3 px-4
                  rounded-xl
                  bg-gradient-to-r from-[#6C5CE7] to-[#00CEC9]
                  text-white font-semibold
                  flex items-center justify-center gap-2
                  disabled:opacity-50 disabled:cursor-not-allowed
                  hover:shadow-lg hover:shadow-[#6C5CE7]/30
                  transition-all
                "
              >
                {listeLoading ? (
                  <Loader2 size={18} className="animate-spin" />
                ) : listeSuccess ? (
                  <>
                    <Check size={18} />
                    Liste OluÅŸturuldu!
                  </>
                ) : (
                  <>
                    <Plus size={18} />
                    Liste OluÅŸtur
                  </>
                )}
              </button>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}


========== saga.client\src\components\ui\ContentCard.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT CARD - Ortak Poster KartÄ± Stilleri
   TÃ¼m sayfalarda kullanÄ±lan tutarlÄ± poster kartÄ± tasarÄ±mÄ±
   VOID THEME with GOLD ACCENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* CSS Variables - Void Theme */
.content-card {
  --card-void: #030304;
  --card-void-light: #0a0a0c;
  --card-void-surface: #111115;
  --card-void-elevated: #18181d;
  --card-void-border: #25252d;
  --card-gold: #d4a853;
  --card-gold-dim: rgba(212, 168, 83, 0.15);
  --card-gold-glow: rgba(212, 168, 83, 0.3);
  --card-gold-light: #e4b863;
  --card-text-primary: #ffffff;
  --card-text-secondary: rgba(255, 255, 255, 0.7);
  --card-text-muted: rgba(255, 255, 255, 0.45);
  /* Accent renkleri - altÄ±n tonlarÄ± */
  --card-accent-saga: #d4a853;
  --card-accent-tmdb: #d4a853;
  --card-accent-google: #7dd3fc;
}

/* ========================================
   CONTENT GRID
======================================== */
.content-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 20px;
}

.content-grid.size-sm {
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 16px;
}

.content-grid.size-lg {
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 24px;
}

/* ========================================
   HORIZONTAL SCROLL GRID (for trending)
======================================== */
.content-grid--horizontal {
  display: flex;
  gap: 20px;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  padding-bottom: 12px;
  scrollbar-width: thin;
  scrollbar-color: var(--card-gold) var(--card-void-surface);
}

.content-grid--horizontal::-webkit-scrollbar {
  display: none;
}

.content-grid--horizontal {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.content-grid--horizontal .content-card {
  flex: 0 0 180px;
  width: 180px;
}

.content-grid--horizontal .content-card.size-lg {
  flex: 0 0 240px;
  width: 240px;
}

/* ========================================
   CONTENT CARD BASE
======================================== */
.content-card {
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  display: flex;
  flex-direction: column;
  background: var(--card-void-surface);
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid var(--card-void-border);
}

.content-card:hover {
  transform: translateY(-6px);
  border-color: var(--card-gold);
  box-shadow: 0 8px 24px rgba(0,0,0,0.4), 0 0 20px var(--card-gold-glow);
}

/* Size variants */
.content-card.size-sm {
  border-radius: 10px;
}

.content-card.size-lg {
  border-radius: 14px;
}

/* ========================================
   POSTER AREA
======================================== */
.content-card__poster {
  width: 100%;
  aspect-ratio: 2/3;
  overflow: hidden;
  position: relative;
  background: var(--card-void);
}

.content-card__poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transition: transform 0.3s ease;
}

.content-card:hover .content-card__poster img {
  transform: scale(1.05);
}

.content-card__poster-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--card-text-muted);
  background: var(--card-void-surface);
}

.content-card__poster-placeholder svg {
  width: 40px;
  height: 40px;
}

.content-card.size-sm .content-card__poster-placeholder svg {
  width: 32px;
  height: 32px;
}

/* ========================================
   TYPE BADGE (Sol Ã¼st) - Film/Dizi/Kitap ayrÄ±mÄ±
======================================== */
.content-card__badge {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 4px 10px;
  font-size: 0.65rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 6px;
  z-index: 3;
  background: var(--card-gold);
  color: var(--card-void);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* When rank exists, move badge to right to avoid overlap */
.content-card:has(.content-card__rank) .content-card__badge {
  left: auto;
  right: 8px;
}

/* ========================================
   TRENDING RANK
======================================== */
.content-card__rank {
  position: absolute;
  top: 8px;
  left: 8px;
  font-size: 32px;
  font-weight: 900;
  color: var(--card-gold);
  text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9),
               -1px -1px 0 rgba(0, 0, 0, 0.8),
               1px -1px 0 rgba(0, 0, 0, 0.8),
               -1px 1px 0 rgba(0, 0, 0, 0.8),
               1px 1px 0 rgba(0, 0, 0, 0.8);
  z-index: 5;
  line-height: 1;
  font-family: 'Inter', -apple-system, system-ui, sans-serif;
}

.content-card.size-sm .content-card__rank {
  font-size: 28px;
  top: 6px;
  left: 6px;
}

.content-card.size-lg .content-card__rank {
  font-size: 36px;
  top: 10px;
  left: 10px;
}

/* Film badge - AltÄ±n */
.content-card__badge--film {
  background: var(--card-gold);
  color: var(--card-void);
}

/* Dizi badge - Koyu yeÅŸil/teal tonu */
.content-card__badge--dizi {
  background: #0d9488;
  color: white;
}

/* Kitap badge - Koyu mavi */
.content-card__badge--kitap {
  background: #2563eb;
  color: white;
}

/* ========================================
   RATINGS CONTAINER (Footer'da - altta)
======================================== */
.content-card__ratings {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 4px;
}

.content-card__rating {
  display: flex;
  align-items: center;
  gap: 3px;
}

/* Default (harici puan - gri) */
.content-card__rating svg {
  width: 12px;
  height: 12px;
  fill: #9ca3af;
  color: #9ca3af;
}

.content-card__rating-value {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-secondary, #9ca3af);
}

/* SAGA platform rating style - AltÄ±n (Ã¶ncelikli) */
.content-card__rating--saga svg {
  fill: var(--card-gold, #d4a853);
  color: var(--card-gold, #d4a853);
}

.content-card__rating--saga .content-card__rating-value {
  color: var(--card-gold, #d4a853);
  font-weight: 700;
}

/* ========================================
   STATUS BADGE (KÃ¼tÃ¼phane durumu) - AltÄ±n tema
======================================== */
.content-card__status {
  position: absolute;
  bottom: 8px;
  left: 8px;
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(8px);
  border-radius: 6px;
  font-size: 0.65rem;
  font-weight: 600;
  color: white;
  z-index: 3;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.content-card__status svg {
  width: 12px;
  height: 12px;
}

/* Durum renkleri - AltÄ±n tonlarÄ± */
.content-card__status--izleniyor {
  color: var(--card-gold);
  border-color: rgba(212, 168, 83, 0.3);
}

.content-card__status--tamamlandi {
  color: #10B981;
  border-color: rgba(16, 185, 129, 0.3);
}

.content-card__status--beklemede {
  color: var(--card-gold-light);
  border-color: rgba(228, 184, 99, 0.3);
}

.content-card__status--birakti {
  color: #ef4444;
  border-color: rgba(239, 68, 68, 0.3);
}

/* ========================================
   IMPORT OVERLAY
======================================== */
.content-card__overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 4;
}

.content-card__poster:hover .content-card__overlay {
  opacity: 1;
}

.content-card__overlay-btn {
  padding: 10px 24px;
  font-size: 0.85rem;
  font-weight: 600;
  background: var(--card-gold);
  border: none;
  border-radius: 8px;
  color: var(--card-void);
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.content-card__overlay-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 16px var(--card-gold-glow);
}

.content-card__overlay-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none;
}

/* ========================================
   MATCH PERCENTAGE (Sana Ã–zel iÃ§in) - AltÄ±n tema
======================================== */
.content-card__match {
  position: absolute;
  bottom: 8px;
  right: 8px;
  padding: 4px 10px;
  background: rgba(212, 168, 83, 0.9);
  backdrop-filter: blur(8px);
  border-radius: 6px;
  font-size: 0.7rem;
  font-weight: 700;
  color: var(--card-void);
  z-index: 3;
  box-shadow: 0 2px 8px rgba(212, 168, 83, 0.3);
}

/* ========================================
   FOOTER AREA
======================================== */
.content-card__footer {
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  background: var(--card-void-surface);
}

.content-card.size-sm .content-card__footer {
  padding: 8px;
}

.content-card.size-lg .content-card__footer {
  padding: 12px;
}

.content-card__title {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--card-text-primary);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.3;
  word-break: break-word;
  margin: 0;
}

.content-card.size-sm .content-card__title {
  font-size: 0.8rem;
}

.content-card__meta {
  font-size: 0.7rem;
  color: var(--card-text-muted);
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.content-card__year {
  color: var(--card-gold);
  font-weight: 500;
}

.content-card__duration,
.content-card__season-info,
.content-card__page-count {
  color: var(--card-text-secondary, #9ca3af);
  font-size: 0.7rem;
}

.content-card__duration::before,
.content-card__season-info::before,
.content-card__page-count::before {
  content: "â€¢";
  margin-right: 6px;
  color: var(--card-text-muted, #6b7280);
}

.content-card__genres {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
}

.content-card__genre-tag {
  padding: 2px 8px;
  background: var(--card-gold-dim);
  border: 1px solid rgba(212, 168, 83, 0.2);
  border-radius: 4px;
  font-size: 0.65rem;
  color: var(--card-gold);
  white-space: nowrap;
  font-weight: 500;
}

.content-card__author {
  font-size: 0.7rem;
  color: var(--card-text-secondary);
  display: -webkit-box;
  -webkit-line-clamp: 1;
  line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ========================================
   SKELETON LOADING
======================================== */
.content-card--skeleton .content-card__poster,
.content-card--skeleton .content-card__title,
.content-card--skeleton .content-card__meta {
  background: linear-gradient(90deg, 
    rgba(255,255,255,0.05) 0%, 
    rgba(255,255,255,0.1) 50%, 
    rgba(255,255,255,0.05) 100%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s infinite;
}

@keyframes skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.content-card--skeleton .content-card__poster {
  border-radius: 8px;
}

.content-card--skeleton .content-card__title {
  height: 16px;
  border-radius: 4px;
}

.content-card--skeleton .content-card__meta {
  height: 12px;
  width: 60%;
  border-radius: 4px;
}

/* ========================================
   RESPONSIVE
======================================== */
@media (max-width: 640px) {
  .content-grid {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 12px;
  }
  
  .content-card__badge {
    padding: 3px 6px;
    font-size: 0.55rem;
  }
  
  .content-card__rating {
    padding: 3px 6px;
  }
  
  .content-card__rating-label {
    font-size: 0.5rem;
  }
  
  .content-card__rating-value {
    font-size: 0.65rem;
  }
  
  .content-card__title {
    font-size: 0.75rem;
  }
  
  .content-card__footer {
    padding: 8px;
  }
}


========== saga.client\src\components\ui\ContentCard.tsx ==========

import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Film, BookOpen, Tv, Star, Loader2, Play, CheckCircle, Clock, AlertTriangle, BookMarked } from 'lucide-react';
import { icerikApi } from '../../services/api';
import './ContentCard.css';

// ============================================
// TYPES
// ============================================

export type ContentType = 'film' | 'kitap' | 'tv' | 'dizi';
export type CardSize = 'sm' | 'md' | 'lg';
// Backend enum deÄŸerleri: izlendi, izlenecek, okundu, okunacak, devam_ediyor
export type LibraryStatus = 'izlendi' | 'izlenecek' | 'okundu' | 'okunacak' | 'devam_ediyor' | 'izleniyor' | 'tamamlandi' | 'beklemede' | 'birakti' | 'okunuyor';

// ============================================
// NORMALIZE TYPE HELPER
// Backend'den "Film", "Dizi", "Kitap", "TV", "movie" gibi
// deÄŸerler gelir, bunlarÄ± lowercase ContentType'a Ã§evirir
// ============================================

export function normalizeContentType(tur?: string | null): ContentType {
  if (!tur) return 'film';
  const lower = tur.toLowerCase().trim();
  
  // Dizi varyasyonlarÄ± (tv Ã¶nce kontrol - movie'den Ã¶nce)
  if (lower === 'dizi' || lower === 'tv' || lower === 'series' || lower === 'tv series' || lower === 'tvseries') {
    return 'dizi';
  }
  
  // Kitap varyasyonlarÄ±
  if (lower === 'kitap' || lower === 'book' || lower === 'books') {
    return 'kitap';
  }
  
  // Film varyasyonlarÄ± - movie, film vs hepsi film
  if (lower === 'film' || lower === 'movie' || lower === 'movies') {
    return 'film';
  }
  
  // Default film
  return 'film';
}

export interface ContentCardData {
  id: string | number;
  title: string;
  posterUrl?: string;
  type: ContentType;
  year?: string;
  genres?: string[];
  authors?: string[]; // Kitaplar iÃ§in
  
  // Rating bilgileri
  tmdbRating?: number;
  googleRating?: number;
  sagaRating?: number;
  
  // Ä°Ã§erik detaylarÄ±
  duration?: number; // Film sÃ¼resi (dakika)
  seasonCount?: number; // Dizi sezon sayÄ±sÄ±
  episodeCount?: number; // Dizi bÃ¶lÃ¼m sayÄ±sÄ±
  pageCount?: number; // Kitap sayfa sayÄ±sÄ±
  
  // VeritabanÄ± bilgisi
  dbId?: number; // EÄŸer iÃ§erik veritabanÄ±nda varsa
  
  // KÃ¼tÃ¼phane durumu
  libraryStatus?: LibraryStatus;
  
  // Match percentage (Sana Ã–zel iÃ§in)
  matchPercentage?: number;
  
  // Trending rank (PopÃ¼ler iÃ§erikler iÃ§in)
  rank?: number;
  
  // Harici API'den mi geldi
  isExternal?: boolean;
}

export interface ContentCardProps {
  data: ContentCardData;
  size?: CardSize;
  showImportOverlay?: boolean;
  onImport?: () => void;
  importing?: boolean;
  onClick?: () => void;
  showRatings?: boolean;
  showBadge?: boolean;
  showStatus?: boolean;
  showMatch?: boolean;
  rank?: number; // Trending rank to display
  className?: string;
}

// ============================================
// SAGA RATING CACHE
// ============================================

interface SagaRatingCacheEntry {
  saga?: number;
  harici?: number;
  updatedAt: number;
}

const sagaRatingsCache = new Map<number, SagaRatingCacheEntry>();
const CACHE_TTL = 5 * 60 * 1000; // 5 dakika

// Rating update event handler
interface SagaRatingUpdateDetail {
  icerikId: number;
  newRating?: number;
  newAverage?: number;
}

function applySagaRatingUpdate(detail: SagaRatingUpdateDetail) {
  const existing = sagaRatingsCache.get(detail.icerikId);
  if (existing) {
    sagaRatingsCache.set(detail.icerikId, {
      ...existing,
      saga: detail.newAverage ?? existing.saga,
      updatedAt: Date.now(),
    });
  }
}

// ============================================
// CONTENT CARD COMPONENT
// ============================================

export function ContentCard({
  data,
  size = 'md',
  showImportOverlay = false,
  onImport,
  importing = false,
  onClick,
  showRatings = true,
  showBadge = true,
  showStatus = false,
  showMatch = false,
  rank,
  className = '',
}: ContentCardProps) {
  const navigate = useNavigate();
  const [dbRatings, setDbRatings] = useState<SagaRatingCacheEntry | undefined>(
    () => data.dbId ? sagaRatingsCache.get(data.dbId) : undefined
  );

  // VeritabanÄ± rating'lerini yÃ¼kle
  useEffect(() => {
    if (!data.dbId) {
      setDbRatings(undefined);
      return;
    }

    const cached = sagaRatingsCache.get(data.dbId);
    if (cached && Date.now() - cached.updatedAt < CACHE_TTL) {
      setDbRatings(cached);
      return;
    }

    let cancelled = false;
    (async () => {
      try {
        const detail = await icerikApi.getById(data.dbId!);
        const payload: SagaRatingCacheEntry = {
          saga: detail.ortalamaPuan ?? undefined,
          harici: detail.hariciPuan ?? undefined,
          updatedAt: Date.now(),
        };
        sagaRatingsCache.set(data.dbId!, payload);
        if (!cancelled) {
          setDbRatings(payload);
        }
      } catch (error) {
        console.error('Saga rating fetch failed', error);
      }
    })();

    return () => { cancelled = true; };
  }, [data.dbId]);

  // Rating update event listener
  useEffect(() => {
    if (!data.dbId) return;

    const handleSagaRatingUpdate = (event: Event) => {
      const detail = (event as CustomEvent<SagaRatingUpdateDetail>).detail;
      if (!detail || detail.icerikId !== data.dbId) return;
      applySagaRatingUpdate(detail);
      setDbRatings(sagaRatingsCache.get(data.dbId!));
    };

    window.addEventListener('saga-rating-updated', handleSagaRatingUpdate as EventListener);
    return () => window.removeEventListener('saga-rating-updated', handleSagaRatingUpdate as EventListener);
  }, [data.dbId]);

  // Click handler
  const handleClick = () => {
    if (onClick) {
      onClick();
    } else if (data.dbId) {
      navigate(`/icerik/${data.dbId}`);
    } else if (showImportOverlay && onImport && !importing) {
      onImport();
    }
  };

  // Normalize the type for consistent display
  const normalizedType = normalizeContentType(data.type);

  // Type badge text
  const getBadgeText = () => {
    switch (normalizedType) {
      case 'dizi':
        return 'Dizi';
      case 'kitap':
        return 'Kitap';
      case 'film':
      default:
        return 'Film';
    }
  };

  // Type badge class
  const getBadgeClass = () => {
    switch (normalizedType) {
      case 'dizi':
        return 'content-card__badge--dizi';
      case 'kitap':
        return 'content-card__badge--kitap';
      case 'film':
      default:
        return 'content-card__badge--film';
    }
  };

  // Status icon
  const getStatusIcon = () => {
    switch (data.libraryStatus) {
      case 'izleniyor':
      case 'okunuyor':
      case 'devam_ediyor':
        return <Play size={12} />;
      case 'tamamlandi':
      case 'izlendi':
      case 'okundu':
        return <CheckCircle size={12} />;
      case 'beklemede':
      case 'izlenecek':
      case 'okunacak':
        return <Clock size={12} />;
      case 'birakti':
        return <AlertTriangle size={12} />;
      default:
        return <BookMarked size={12} />;
    }
  };

  // Status class
  const getStatusClass = () => {
    switch (data.libraryStatus) {
      case 'izleniyor':
      case 'okunuyor':
      case 'devam_ediyor':
        return 'content-card__status--izleniyor';
      case 'tamamlandi':
      case 'izlendi':
      case 'okundu':
        return 'content-card__status--tamamlandi';
      case 'beklemede':
      case 'izlenecek':
      case 'okunacak':
        return 'content-card__status--beklemede';
      case 'birakti':
        return 'content-card__status--birakti';
      default:
        return '';
    }
  };

  // Status text - iÃ§erik tÃ¼rÃ¼ne gÃ¶re doÄŸru metin
  const getStatusText = () => {
    const isKitap = normalizedType === 'kitap';
    
    switch (data.libraryStatus) {
      case 'izleniyor':
        return isKitap ? 'Okunuyor' : 'Ä°zleniyor';
      case 'devam_ediyor':
        return isKitap ? 'Okunuyor' : 'Ä°zleniyor';
      case 'okunuyor':
        return 'Okunuyor';
      case 'tamamlandi':
        return isKitap ? 'Okundu' : 'Ä°zlendi';
      case 'izlendi':
        return isKitap ? 'Okundu' : 'Ä°zlendi';
      case 'okundu':
        return 'Okundu';
      case 'beklemede':
        return 'Beklemede';
      case 'izlenecek':
        return isKitap ? 'Okunacak' : 'Ä°zlenecek';
      case 'okunacak':
        return 'Okunacak';
      case 'birakti':
        return 'BÄ±rakÄ±ldÄ±';
      default:
        return '';
    }
  };

  // Poster placeholder icon
  const getPlaceholderIcon = () => {
    switch (normalizedType) {
      case 'dizi':
        return <Tv />;
      case 'kitap':
        return <BookOpen />;
      case 'film':
      default:
        return <Film />;
    }
  };

  // Calculate displayed ratings - SAGA Ã¶ncelikli, yoksa harici
  const primaryRating = normalizedType === 'kitap'
    ? (dbRatings?.harici ?? data.googleRating)
    : (dbRatings?.harici ?? data.tmdbRating);
  
  const sagaRating = dbRatings?.saga ?? data.sagaRating;
  
  // SAGA puanÄ± varsa sadece onu gÃ¶ster, yoksa harici puanÄ± gÃ¶ster
  const displayRating = (sagaRating !== undefined && sagaRating > 0) ? sagaRating : primaryRating;
  const isSagaRating = sagaRating !== undefined && sagaRating > 0;

  return (
    <div
      className={`content-card ${size !== 'md' ? `size-${size}` : ''} ${className}`}
      onClick={handleClick}
    >
      <div className="content-card__poster">
        {data.posterUrl ? (
          <img src={data.posterUrl} alt={data.title} />
        ) : (
          <div className="content-card__poster-placeholder">
            {getPlaceholderIcon()}
          </div>
        )}

        {/* Trending Rank */}
        {rank !== undefined && (
          <span className="content-card__rank">{rank}</span>
        )}

        {/* Type Badge */}
        {showBadge && (
          <span className={`content-card__badge ${getBadgeClass()}`}>
            {getBadgeText()}
          </span>
        )}

        {/* Library Status */}
        {showStatus && data.libraryStatus && (
          <div className={`content-card__status ${getStatusClass()}`}>
            {getStatusIcon()}
            <span>{getStatusText()}</span>
          </div>
        )}

        {/* Match Percentage */}
        {showMatch && data.matchPercentage !== undefined && (
          <div className="content-card__match">
            %{data.matchPercentage} EÅŸleÅŸme
          </div>
        )}

        {/* Import Overlay */}
        {showImportOverlay && !data.dbId && (
          <div className="content-card__overlay">
            <button
              className="content-card__overlay-btn"
              onClick={(e) => {
                e.stopPropagation();
                onImport?.();
              }}
              disabled={importing}
            >
              {importing ? <Loader2 size={14} className="animate-spin" /> : 'Ekle'}
            </button>
          </div>
        )}
      </div>

      {/* Footer */}
      <div className="content-card__footer">
        <h3 className="content-card__title">{data.title}</h3>
        
        {/* Rating - SAGA varsa SAGA, yoksa harici */}
        {showRatings && displayRating !== undefined && displayRating > 0 && (
          <div className="content-card__ratings">
            <div className={`content-card__rating ${isSagaRating ? 'content-card__rating--saga' : ''}`}>
              <Star size={12} />
              <span className="content-card__rating-value">{displayRating.toFixed(1)}</span>
            </div>
          </div>
        )}
        
        <div className="content-card__meta">
          {data.year && <span className="content-card__year">{data.year}</span>}
          
          {/* SÃ¼re/Sezon-BÃ¶lÃ¼m/Sayfa bilgisi */}
          {data.duration && normalizedType === 'film' && (
            <span className="content-card__duration">
              {Math.floor(data.duration / 60)}s {data.duration % 60}dk
            </span>
          )}
          
          {normalizedType === 'dizi' && data.seasonCount && (
            <span className="content-card__season-info">
              {data.seasonCount} Sezon
              {data.episodeCount && ` Â· ${data.episodeCount} BÃ¶lÃ¼m`}
            </span>
          )}
          
          {normalizedType === 'kitap' && data.pageCount && (
            <span className="content-card__page-count">
              {data.pageCount} sayfa
            </span>
          )}
        </div>
        {/* Genres or Authors */}
        {(data.genres?.length || data.authors?.length) && (
          <div className="content-card__genres">
            {data.authors?.length ? (
              <span className="content-card__author">{data.authors.slice(0, 1).join(', ')}</span>
            ) : (
              data.genres?.slice(0, 2).map((genre, i) => (
                <span key={i} className="content-card__genre-tag">{genre}</span>
              ))
            )}
          </div>
        )}
      </div>
    </div>
  );
}

// ============================================
// CONTENT CARD SKELETON
// ============================================

export function ContentCardSkeleton({ size = 'md' }: { size?: CardSize }) {
  return (
    <div className={`content-card content-card--skeleton ${size !== 'md' ? `size-${size}` : ''}`}>
      <div className="content-card__poster" />
      <div className="content-card__footer">
        <div className="content-card__title" />
        <div className="content-card__meta" />
      </div>
    </div>
  );
}

// ============================================
// CONTENT GRID COMPONENT
// ============================================

export interface ContentGridProps {
  children: React.ReactNode;
  size?: CardSize;
  className?: string;
}

export function ContentGrid({ children, size = 'md', className = '' }: ContentGridProps) {
  return (
    <div className={`content-grid ${size !== 'md' ? `size-${size}` : ''} ${className}`}>
      {children}
    </div>
  );
}

// ============================================
// HELPER: Convert API data to ContentCardData
// ============================================

import type { TmdbFilm, GoogleBook, IcerikListItem, KutuphaneDurumu } from '../../services/api';

// TMDB genre mapping
const TMDB_GENRES: Record<number, string> = {
  28: 'Aksiyon', 12: 'Macera', 16: 'Animasyon', 35: 'Komedi',
  80: 'SuÃ§', 99: 'Belgesel', 18: 'Drama', 10751: 'Aile',
  14: 'Fantastik', 36: 'Tarih', 27: 'Korku', 10402: 'MÃ¼zik',
  9648: 'Gizem', 10749: 'Romantik', 878: 'Bilim Kurgu',
  10770: 'TV Film', 53: 'Gerilim', 10752: 'SavaÅŸ', 37: 'Western',
  10759: 'Aksiyon & Macera', 10762: 'Ã‡ocuk', 10763: 'Haber',
  10764: 'Reality', 10765: 'Sci-Fi & Fantasy', 10766: 'Pembe Dizi',
  10767: 'Talk Show', 10768: 'War & Politics'
};

export function tmdbToCardData(film: TmdbFilm, dbId?: number): ContentCardData {
  const posterUrl = film.posterUrl || (film.posterPath
    ? `https://image.tmdb.org/t/p/w500${film.posterPath}`
    : undefined);
  
  const genres = film.turler?.slice(0, 2) ||
    film.turIds?.slice(0, 3).map(id => TMDB_GENRES[id]).filter(Boolean) ||
    [];

  // TÃ¼r belirleme: Ã¶nce mediaType, sonra tur alanÄ±
  let contentType: ContentType = 'film';
  if (film.mediaType === 'tv' || film.tur === 'Dizi' || film.tur === 'dizi' || film.tur === 'TV') {
    contentType = 'dizi';
  } else if (film.tur === 'Kitap' || film.tur === 'kitap') {
    contentType = 'kitap';
  }

  return {
    id: film.id,
    title: film.baslik || film.title || 'Bilinmiyor',
    posterUrl,
    type: contentType,
    year: (film.yayinTarihi || film.releaseDate)?.split('-')[0],
    genres,
    tmdbRating: film.puan || film.voteAverage,
    sagaRating: film.sagaOrtalamaPuan,
    dbId: dbId || film.sagaIcerikId,
    isExternal: !dbId && !film.sagaIcerikId,
  };
}

export function bookToCardData(book: GoogleBook, dbId?: number): ContentCardData {
  const posterUrl = (book.posterUrl || book.thumbnail)?.replace('http://', 'https://');
  const rating = book.averageRating ?? book.ortalamaPuan;

  return {
    id: book.id,
    title: book.baslik || book.title || 'Bilinmiyor',
    posterUrl,
    type: 'kitap',
    year: (book.yayinTarihi || book.publishedDate)?.split('-')[0],
    authors: book.yazarlar || book.authors,
    googleRating: rating ? rating * 2 : undefined, // 5'lik sistemden 10'luk sisteme
    dbId,
    isExternal: !dbId,
  };
}

export function icerikToCardData(icerik: IcerikListItem): ContentCardData {
  const normalizedType = normalizeContentType(icerik.tur);
  
  return {
    id: icerik.id,
    title: icerik.baslik,
    posterUrl: icerik.posterUrl,
    type: normalizedType,
    year: icerik.yayinTarihi?.split('-')[0],
    tmdbRating: icerik.hariciPuan,
    sagaRating: icerik.ortalamaPuan,
    dbId: icerik.id,
    isExternal: false,
    duration: icerik.sure,
    seasonCount: icerik.sezonSayisi,
    episodeCount: icerik.bolumSayisi,
    pageCount: icerik.sayfaSayisi,
    genres: icerik.turler,
    authors: icerik.yazar ? [icerik.yazar] : undefined,
  };
}

export function kutuphaneToCardData(item: KutuphaneDurumu): ContentCardData {
  const baslik = item.baslik || item.icerikAdi || 'Bilinmiyor';
  const posterUrl = item.posterUrl || item.icerik?.posterUrl;
  const tur = item.tur || item.icerikTur || item.icerik?.tur;
  const normalizedType = normalizeContentType(tur);

  return {
    id: item.icerikId,
    title: baslik,
    posterUrl,
    type: normalizedType,
    sagaRating: item.ortalamaPuan || item.icerik?.ortalamaPuan,
    dbId: item.icerikId,
    libraryStatus: (item.durum || item.durumStr) as LibraryStatus,
    isExternal: false,
  };
}

export default ContentCard;


========== saga.client\src\components\ui\index.ts ==========

export { Modal, LoginRequiredModal } from './Modal';
export { 
  ContentCard, 
  ContentCardSkeleton, 
  ContentGrid,
  tmdbToCardData,
  bookToCardData,
  icerikToCardData,
  kutuphaneToCardData,
  normalizeContentType,
  type ContentCardData,
  type ContentCardProps,
  type ContentType,
  type CardSize,
  type LibraryStatus,
} from './ContentCard';

// Skeleton Components
export {
  SkeletonBox,
  ContentCardSkeleton as CardSkeleton,
  ContentGridSkeleton,
  HeroSkeleton,
  CarouselSkeleton,
  ActivityCardSkeleton,
  FeedSkeleton,
  DetailPageSkeleton,
  ProfileSkeleton,
  LibrarySkeleton,
  ListSkeleton,
  CommentSkeleton,
  CommentsSkeleton,
  PageLoader,
  InlineLoader,
  NotificationSkeleton,
  NotificationsSkeleton,
} from './Skeletons';


========== saga.client\src\components\ui\Modal.tsx ==========

import React, { useEffect, useCallback } from 'react';
import { X } from 'lucide-react';
import { createPortal } from 'react-dom';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
  size?: 'sm' | 'md' | 'lg';
  showClose?: boolean;
}

const sizeClasses = {
  sm: 'max-w-sm',
  md: 'max-w-md',
  lg: 'max-w-2xl',
};

export function Modal({
  isOpen,
  onClose,
  title,
  children,
  size = 'md',
  showClose = true,
}: ModalProps) {
  // Close on Escape key
  const handleEscape = useCallback((e: KeyboardEvent) => {
    if (e.key === 'Escape') onClose();
  }, [onClose]);

  useEffect(() => {
    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      document.body.style.overflow = 'hidden';
    }
    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.body.style.overflow = '';
    };
  }, [isOpen, handleEscape]);

  if (!isOpen) return null;

  return createPortal(
    <div
      className="fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in"
      onClick={onClose}
    >
      {/* Backdrop */}
      <div className="absolute inset-0 bg-black/70 backdrop-blur-[8px]" />
      
      {/* Modal Content */}
      <div
        className={`
          relative w-full ${sizeClasses[size]}
          bg-[rgba(28,28,30,0.9)]
          backdrop-blur-[30px]
          saturate-[180%]
          border border-white/[0.12]
          shadow-[0_20px_60px_rgba(0,0,0,0.5)]
          rounded-[24px]
          p-8
          animate-scale-in
        `}
        onClick={(e) => e.stopPropagation()}
      >
        {/* Close Button */}
        {showClose && (
          <button
            onClick={onClose}
            className="
              absolute top-4 right-4
              w-8 h-8 rounded-full
              bg-white/[0.05]
              flex items-center justify-center
              text-white/60 hover:text-white hover:bg-white/10
              transition-all duration-200
            "
          >
            <X size={18} />
          </button>
        )}

        {/* Title */}
        {title && (
          <h2 className="text-xl font-bold text-white mb-6 pr-8">{title}</h2>
        )}

        {/* Content */}
        {children}
      </div>
    </div>,
    document.body
  );
}

// Login Required Modal - Special Component
interface LoginRequiredModalProps {
  isOpen: boolean;
  onClose: () => void;
  onLogin: () => void;
  onRegister: () => void;
  message?: string;
}

export function LoginRequiredModal({
  isOpen,
  onClose,
  onLogin,
  onRegister,
  message = 'Bu Ã¶zelliÄŸi kullanmak iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.',
}: LoginRequiredModalProps) {
  return (
    <Modal isOpen={isOpen} onClose={onClose} size="sm">
      <div className="text-center">
        {/* Logo */}
        <div className="w-16 h-16 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-[#0A84FF] to-[#BF5AF2] flex items-center justify-center">
          <svg className="w-8 h-8 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
          </svg>
        </div>

        <h2 className="text-2xl font-bold text-white mb-2">GiriÅŸ Gerekli</h2>
        <p className="text-[#8E8E93] text-sm mb-8">{message}</p>

        <div className="flex flex-col gap-3">
          <button
            onClick={onLogin}
            className="
              w-full py-3 px-5
              bg-[#0A84FF] text-white
              font-semibold text-sm
              rounded-[14px]
              shadow-[0_4px_12px_rgba(10,132,255,0.3)]
              hover:bg-[#0071e3]
              transition-all duration-200
              active:scale-[0.98]
            "
          >
            GiriÅŸ Yap
          </button>
          <button
            onClick={onRegister}
            className="
              w-full py-3 px-5
              bg-white/10 text-white
              font-semibold text-sm
              rounded-[14px]
              border border-white/[0.08]
              hover:bg-white/[0.15]
              transition-all duration-200
              active:scale-[0.98]
            "
          >
            Hesap OluÅŸtur
          </button>
        </div>

        <p className="mt-6 text-xs text-[#48484A]">
          Misafir olarak iÃ§erikleri gezmeye devam edebilirsiniz.
        </p>
      </div>
    </Modal>
  );
}


========== saga.client\src\components\ui\Skeletons.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SKELETON COMPONENTS - VOID THEME with GOLD ACCENT
   Global lazy loading animasyonlarÄ±
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CSS VARIABLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --skeleton-base: rgba(255, 255, 255, 0.03);
  --skeleton-shine: rgba(255, 255, 255, 0.08);
  --skeleton-gold-hint: rgba(212, 168, 83, 0.05);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BASE SKELETON SHIMMER ANIMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes skeleton-pulse {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.8;
  }
}

@keyframes skeleton-glow {
  0%, 100% {
    box-shadow: 0 0 0 rgba(212, 168, 83, 0);
  }
  50% {
    box-shadow: 0 0 20px rgba(212, 168, 83, 0.1);
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    var(--skeleton-base) 0%,
    var(--skeleton-shine) 20%,
    var(--skeleton-base) 40%,
    var(--skeleton-base) 100%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.skeleton-box {
  background: var(--skeleton-base);
  border-radius: 8px;
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT CARD SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.content-card-skeleton {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.content-card-skeleton .skeleton-poster {
  aspect-ratio: 2/3;
  border-radius: 12px;
  background: var(--skeleton-base);
}

.content-card-skeleton .skeleton-info {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.content-card-skeleton .skeleton-title {
  height: 16px;
  width: 90%;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.content-card-skeleton .skeleton-meta {
  height: 12px;
  width: 60%;
  border-radius: 4px;
  background: var(--skeleton-base);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT GRID SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.content-grid-skeleton {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 20px;
  padding: 20px 0;
}

@media (min-width: 768px) {
  .content-grid-skeleton {
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero-skeleton {
  position: relative;
  width: 100%;
  height: 70vh;
  min-height: 500px;
  max-height: 800px;
  overflow: hidden;
  border-radius: 24px;
  margin-bottom: 40px;
}

.hero-skeleton-bg {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--skeleton-base) 0%, var(--skeleton-gold-hint) 100%);
}

.hero-skeleton-content {
  position: absolute;
  bottom: 60px;
  left: 60px;
  right: 60px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.hero-skeleton-badge {
  width: 100px;
  height: 28px;
  border-radius: 6px;
  background: var(--skeleton-base);
}

.hero-skeleton-title {
  width: 60%;
  height: 48px;
  border-radius: 8px;
  background: var(--skeleton-base);
}

.hero-skeleton-meta {
  width: 40%;
  height: 20px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.hero-skeleton-desc {
  width: 80%;
  height: 60px;
  border-radius: 8px;
  background: var(--skeleton-base);
}

.hero-skeleton-actions {
  display: flex;
  gap: 12px;
  margin-top: 8px;
}

.hero-skeleton-btn {
  width: 140px;
  height: 44px;
  border-radius: 12px;
  background: var(--skeleton-base);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CAROUSEL SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.carousel-skeleton {
  margin-bottom: 40px;
}

.carousel-skeleton-header {
  margin-bottom: 20px;
}

.skeleton-section-title {
  width: 200px;
  height: 28px;
  border-radius: 6px;
  background: var(--skeleton-base);
}

.carousel-skeleton-items {
  display: flex;
  gap: 16px;
  overflow: hidden;
}

.carousel-skeleton-item {
  flex-shrink: 0;
  width: 150px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.skeleton-poster-small {
  width: 150px;
  height: 225px;
  border-radius: 12px;
  background: var(--skeleton-base);
}

.skeleton-title-small {
  width: 120px;
  height: 14px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY CARD SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.activity-card-skeleton {
  background: rgba(17, 17, 21, 0.8);
  border: 1px solid rgba(37, 37, 45, 0.5);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 16px;
  animation: skeleton-glow 2s ease-in-out infinite;
}

.activity-skeleton-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.skeleton-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--skeleton-base);
  flex-shrink: 0;
}

.skeleton-user-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.skeleton-username {
  width: 120px;
  height: 14px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.skeleton-time {
  width: 80px;
  height: 10px;
  border-radius: 3px;
  background: var(--skeleton-base);
}

.skeleton-badge {
  width: 70px;
  height: 26px;
  border-radius: 6px;
  background: var(--skeleton-base);
}

.activity-skeleton-content {
  display: flex;
  gap: 14px;
  margin-bottom: 16px;
}

.skeleton-poster-medium {
  width: 100px;
  height: 150px;
  border-radius: 8px;
  background: var(--skeleton-base);
  flex-shrink: 0;
}

.activity-skeleton-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  justify-content: center;
}

.skeleton-content-title {
  width: 80%;
  height: 18px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.skeleton-content-meta {
  width: 50%;
  height: 12px;
  border-radius: 3px;
  background: var(--skeleton-base);
}

.skeleton-rating {
  width: 100px;
  height: 20px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.activity-skeleton-actions {
  display: flex;
  gap: 16px;
  padding-top: 12px;
  border-top: 1px solid rgba(255, 255, 255, 0.04);
}

.skeleton-action-btn {
  width: 80px;
  height: 28px;
  border-radius: 6px;
  background: var(--skeleton-base);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FEED SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.feed-skeleton {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DETAIL PAGE SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.detail-page-skeleton {
  min-height: 100vh;
}

.detail-skeleton-hero {
  position: relative;
  height: 60vh;
  min-height: 400px;
  margin-bottom: 30px;
}

.detail-skeleton-backdrop {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, var(--skeleton-base) 0%, rgba(3, 3, 4, 1) 100%);
  border-radius: 0 0 24px 24px;
}

.detail-skeleton-hero-content {
  position: absolute;
  bottom: 40px;
  left: 40px;
  right: 40px;
  display: flex;
  gap: 30px;
}

.detail-skeleton-poster {
  width: 200px;
  height: 300px;
  border-radius: 16px;
  background: var(--skeleton-base);
  flex-shrink: 0;
}

.detail-skeleton-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12px;
  justify-content: flex-end;
}

.detail-skeleton-title {
  width: 60%;
  height: 40px;
  border-radius: 8px;
  background: var(--skeleton-base);
}

.detail-skeleton-meta {
  width: 40%;
  height: 16px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.detail-skeleton-overview {
  width: 80%;
  height: 60px;
  border-radius: 8px;
  background: var(--skeleton-base);
}

.detail-skeleton-actions {
  display: flex;
  gap: 12px;
  margin-top: 8px;
}

.skeleton-btn-lg {
  width: 120px;
  height: 44px;
  border-radius: 12px;
  background: var(--skeleton-base);
}

.detail-skeleton-tabs {
  display: flex;
  gap: 8px;
  padding: 0 40px;
  margin-bottom: 24px;
}

.skeleton-tab {
  width: 100px;
  height: 36px;
  border-radius: 8px;
  background: var(--skeleton-base);
}

.detail-skeleton-content {
  padding: 0 40px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.skeleton-text-block {
  width: 100%;
  height: 100px;
  border-radius: 12px;
  background: var(--skeleton-base);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.profile-skeleton {
  min-height: 100vh;
}

.profile-skeleton-header {
  position: relative;
  margin-bottom: 100px;
}

.skeleton-cover {
  width: 100%;
  height: 250px;
  background: linear-gradient(135deg, var(--skeleton-base) 0%, var(--skeleton-gold-hint) 100%);
}

.profile-skeleton-info {
  position: absolute;
  bottom: -80px;
  left: 40px;
  right: 40px;
  display: flex;
  align-items: flex-end;
  gap: 24px;
}

.skeleton-avatar-large {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  background: var(--skeleton-base);
  border: 4px solid #030304;
  flex-shrink: 0;
}

.profile-skeleton-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-bottom: 20px;
}

.skeleton-name {
  width: 200px;
  height: 28px;
  border-radius: 6px;
  background: var(--skeleton-base);
}

.skeleton-bio {
  width: 300px;
  height: 16px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.profile-skeleton-stats {
  display: flex;
  gap: 24px;
}

.skeleton-stat {
  width: 80px;
  height: 50px;
  border-radius: 8px;
  background: var(--skeleton-base);
}

.profile-skeleton-tabs {
  display: flex;
  gap: 8px;
  padding: 0 40px;
  margin-bottom: 24px;
}

.profile-skeleton-content {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 20px;
  padding: 0 40px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIBRARY SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.library-skeleton {
  padding: 20px;
}

.library-skeleton-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
}

.skeleton-page-title {
  width: 180px;
  height: 32px;
  border-radius: 8px;
  background: var(--skeleton-base);
}

.library-skeleton-filters {
  display: flex;
  gap: 12px;
}

.skeleton-filter {
  width: 100px;
  height: 36px;
  border-radius: 8px;
  background: var(--skeleton-base);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIST SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.list-skeleton {
  padding: 20px;
}

.list-skeleton-header {
  margin-bottom: 30px;
}

.skeleton-list-title {
  width: 250px;
  height: 32px;
  border-radius: 8px;
  background: var(--skeleton-base);
  margin-bottom: 12px;
}

.skeleton-list-meta {
  width: 150px;
  height: 16px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMMENT SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.comment-skeleton {
  display: flex;
  gap: 12px;
  padding: 12px 0;
}

.skeleton-avatar-small {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--skeleton-base);
  flex-shrink: 0;
}

.comment-skeleton-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.skeleton-comment-header {
  width: 150px;
  height: 14px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.skeleton-comment-text {
  width: 100%;
  height: 14px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.skeleton-comment-text.short {
  width: 60%;
}

.comments-skeleton {
  display: flex;
  flex-direction: column;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE LOADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page-loader {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(3, 3, 4, 0.95);
  z-index: 9999;
}

.page-loader-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

.loader-spinner {
  width: 48px;
  height: 48px;
  border: 3px solid rgba(212, 168, 83, 0.2);
  border-top-color: #d4a853;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.loader-text {
  color: rgba(255, 255, 255, 0.6);
  font-size: 14px;
  font-weight: 500;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INLINE LOADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.inline-loader {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 20px;
}

.inline-loader-spinner {
  animation: spin 1s linear infinite;
  color: #d4a853;
}

.inline-loader-text {
  color: rgba(255, 255, 255, 0.6);
  font-size: 13px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NOTIFICATION SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.notification-skeleton {
  display: flex;
  gap: 12px;
  padding: 16px;
  background: rgba(17, 17, 21, 0.6);
  border-radius: 12px;
  margin-bottom: 8px;
}

.notification-skeleton-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.skeleton-notification-text {
  width: 80%;
  height: 14px;
  border-radius: 4px;
  background: var(--skeleton-base);
}

.skeleton-notification-time {
  width: 60px;
  height: 10px;
  border-radius: 3px;
  background: var(--skeleton-base);
}

.notifications-skeleton {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 768px) {
  .hero-skeleton {
    height: 50vh;
    min-height: 350px;
    border-radius: 0;
  }
  
  .hero-skeleton-content {
    bottom: 30px;
    left: 20px;
    right: 20px;
  }
  
  .hero-skeleton-title {
    width: 80%;
    height: 32px;
  }
  
  .detail-skeleton-hero-content {
    flex-direction: column;
    align-items: center;
    text-align: center;
    left: 20px;
    right: 20px;
  }
  
  .detail-skeleton-poster {
    width: 140px;
    height: 210px;
  }
  
  .profile-skeleton-info {
    flex-direction: column;
    align-items: center;
    text-align: center;
    left: 20px;
    right: 20px;
  }
  
  .skeleton-avatar-large {
    width: 100px;
    height: 100px;
  }
  
  .content-grid-skeleton {
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }
}


========== saga.client\src\components\ui\Skeletons.tsx ==========

import './Skeletons.css';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SKELETON COMPONENTS - VOID THEME
// TÃ¼m sayfalarda kullanÄ±labilir lazy loading animasyonlarÄ±
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Temel Skeleton Box
export function SkeletonBox({ className = '' }: { className?: string }) {
  return <div className={`skeleton-box ${className}`} />;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONTENT CARD SKELETON - Film/Dizi/Kitap kartlarÄ± iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function ContentCardSkeleton() {
  return (
    <div className="content-card-skeleton">
      <div className="skeleton-poster skeleton-shimmer" />
      <div className="skeleton-info">
        <div className="skeleton-title skeleton-shimmer" />
        <div className="skeleton-meta skeleton-shimmer" />
      </div>
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONTENT GRID SKELETON - KeÅŸfet sayfasÄ± iÃ§in grid
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function ContentGridSkeleton({ count = 12 }: { count?: number }) {
  return (
    <div className="content-grid-skeleton">
      {Array.from({ length: count }).map((_, i) => (
        <ContentCardSkeleton key={i} />
      ))}
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HERO SKELETON - Ana sayfa hero bÃ¶lÃ¼mÃ¼ iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function HeroSkeleton() {
  return (
    <div className="hero-skeleton">
      <div className="hero-skeleton-bg skeleton-shimmer" />
      <div className="hero-skeleton-content">
        <div className="hero-skeleton-badge skeleton-shimmer" />
        <div className="hero-skeleton-title skeleton-shimmer" />
        <div className="hero-skeleton-meta skeleton-shimmer" />
        <div className="hero-skeleton-desc skeleton-shimmer" />
        <div className="hero-skeleton-actions">
          <div className="hero-skeleton-btn skeleton-shimmer" />
          <div className="hero-skeleton-btn skeleton-shimmer" />
        </div>
      </div>
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CAROUSEL SKELETON - Ana sayfa carousel'larÄ± iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function CarouselSkeleton({ count = 6 }: { count?: number }) {
  return (
    <div className="carousel-skeleton">
      <div className="carousel-skeleton-header">
        <div className="skeleton-section-title skeleton-shimmer" />
      </div>
      <div className="carousel-skeleton-items">
        {Array.from({ length: count }).map((_, i) => (
          <div key={i} className="carousel-skeleton-item">
            <div className="skeleton-poster-small skeleton-shimmer" />
            <div className="skeleton-title-small skeleton-shimmer" />
          </div>
        ))}
      </div>
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ACTIVITY CARD SKELETON - Feed sayfasÄ± iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function ActivityCardSkeleton() {
  return (
    <div className="activity-card-skeleton">
      <div className="activity-skeleton-header">
        <div className="skeleton-avatar skeleton-shimmer" />
        <div className="skeleton-user-info">
          <div className="skeleton-username skeleton-shimmer" />
          <div className="skeleton-time skeleton-shimmer" />
        </div>
        <div className="skeleton-badge skeleton-shimmer" />
      </div>
      <div className="activity-skeleton-content">
        <div className="skeleton-poster-medium skeleton-shimmer" />
        <div className="activity-skeleton-info">
          <div className="skeleton-content-title skeleton-shimmer" />
          <div className="skeleton-content-meta skeleton-shimmer" />
          <div className="skeleton-rating skeleton-shimmer" />
        </div>
      </div>
      <div className="activity-skeleton-actions">
        <div className="skeleton-action-btn skeleton-shimmer" />
        <div className="skeleton-action-btn skeleton-shimmer" />
      </div>
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FEED SKELETON - Feed sayfasÄ± iÃ§in tam grid
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function FeedSkeleton({ count = 5 }: { count?: number }) {
  return (
    <div className="feed-skeleton">
      {Array.from({ length: count }).map((_, i) => (
        <ActivityCardSkeleton key={i} />
      ))}
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DETAIL PAGE SKELETON - Ä°Ã§erik detay sayfasÄ± iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function DetailPageSkeleton() {
  return (
    <div className="detail-page-skeleton">
      {/* Hero Section */}
      <div className="detail-skeleton-hero">
        <div className="detail-skeleton-backdrop skeleton-shimmer" />
        <div className="detail-skeleton-hero-content">
          <div className="detail-skeleton-poster skeleton-shimmer" />
          <div className="detail-skeleton-info">
            <div className="detail-skeleton-title skeleton-shimmer" />
            <div className="detail-skeleton-meta skeleton-shimmer" />
            <div className="detail-skeleton-overview skeleton-shimmer" />
            <div className="detail-skeleton-actions">
              <div className="skeleton-btn-lg skeleton-shimmer" />
              <div className="skeleton-btn-lg skeleton-shimmer" />
            </div>
          </div>
        </div>
      </div>
      {/* Tabs */}
      <div className="detail-skeleton-tabs">
        <div className="skeleton-tab skeleton-shimmer" />
        <div className="skeleton-tab skeleton-shimmer" />
        <div className="skeleton-tab skeleton-shimmer" />
      </div>
      {/* Content */}
      <div className="detail-skeleton-content">
        <div className="skeleton-text-block skeleton-shimmer" />
        <div className="skeleton-text-block skeleton-shimmer" />
      </div>
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PROFILE SKELETON - Profil sayfasÄ± iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function ProfileSkeleton() {
  return (
    <div className="profile-skeleton">
      {/* Header */}
      <div className="profile-skeleton-header">
        <div className="skeleton-cover skeleton-shimmer" />
        <div className="profile-skeleton-info">
          <div className="skeleton-avatar-large skeleton-shimmer" />
          <div className="profile-skeleton-details">
            <div className="skeleton-name skeleton-shimmer" />
            <div className="skeleton-username skeleton-shimmer" />
            <div className="skeleton-bio skeleton-shimmer" />
          </div>
          <div className="profile-skeleton-stats">
            <div className="skeleton-stat skeleton-shimmer" />
            <div className="skeleton-stat skeleton-shimmer" />
            <div className="skeleton-stat skeleton-shimmer" />
          </div>
        </div>
      </div>
      {/* Tabs */}
      <div className="profile-skeleton-tabs">
        <div className="skeleton-tab skeleton-shimmer" />
        <div className="skeleton-tab skeleton-shimmer" />
        <div className="skeleton-tab skeleton-shimmer" />
      </div>
      {/* Content Grid */}
      <div className="profile-skeleton-content">
        {Array.from({ length: 6 }).map((_, i) => (
          <ContentCardSkeleton key={i} />
        ))}
      </div>
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LIBRARY SKELETON - KÃ¼tÃ¼phane sayfasÄ± iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function LibrarySkeleton() {
  return (
    <div className="library-skeleton">
      {/* Header */}
      <div className="library-skeleton-header">
        <div className="skeleton-page-title skeleton-shimmer" />
        <div className="library-skeleton-filters">
          <div className="skeleton-filter skeleton-shimmer" />
          <div className="skeleton-filter skeleton-shimmer" />
          <div className="skeleton-filter skeleton-shimmer" />
        </div>
      </div>
      {/* Grid */}
      <ContentGridSkeleton count={8} />
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LIST SKELETON - Liste sayfasÄ± iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function ListSkeleton() {
  return (
    <div className="list-skeleton">
      <div className="list-skeleton-header">
        <div className="skeleton-list-title skeleton-shimmer" />
        <div className="skeleton-list-meta skeleton-shimmer" />
      </div>
      <ContentGridSkeleton count={6} />
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COMMENT SKELETON - Yorum bÃ¶lÃ¼mÃ¼ iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function CommentSkeleton() {
  return (
    <div className="comment-skeleton">
      <div className="skeleton-avatar-small skeleton-shimmer" />
      <div className="comment-skeleton-content">
        <div className="skeleton-comment-header skeleton-shimmer" />
        <div className="skeleton-comment-text skeleton-shimmer" />
        <div className="skeleton-comment-text short skeleton-shimmer" />
      </div>
    </div>
  );
}

export function CommentsSkeleton({ count = 3 }: { count?: number }) {
  return (
    <div className="comments-skeleton">
      {Array.from({ length: count }).map((_, i) => (
        <CommentSkeleton key={i} />
      ))}
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PAGE LOADER - Tam sayfa loading iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function PageLoader() {
  return (
    <div className="page-loader">
      <div className="page-loader-content">
        <div className="loader-spinner" />
        <span className="loader-text">YÃ¼kleniyor...</span>
      </div>
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INLINE LOADER - KÃ¼Ã§Ã¼k loading spinner
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function InlineLoader({ size = 20, text }: { size?: number; text?: string }) {
  return (
    <div className="inline-loader">
      <svg 
        className="inline-loader-spinner" 
        width={size} 
        height={size} 
        viewBox="0 0 24 24" 
        fill="none" 
        stroke="currentColor" 
        strokeWidth="2"
      >
        <path d="M21 12a9 9 0 1 1-6.219-8.56" />
      </svg>
      {text && <span className="inline-loader-text">{text}</span>}
    </div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NOTIFICATION SKELETON - Bildirimler iÃ§in
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export function NotificationSkeleton() {
  return (
    <div className="notification-skeleton">
      <div className="skeleton-avatar-small skeleton-shimmer" />
      <div className="notification-skeleton-content">
        <div className="skeleton-notification-text skeleton-shimmer" />
        <div className="skeleton-notification-time skeleton-shimmer" />
      </div>
    </div>
  );
}

export function NotificationsSkeleton({ count = 5 }: { count?: number }) {
  return (
    <div className="notifications-skeleton">
      {Array.from({ length: count }).map((_, i) => (
        <NotificationSkeleton key={i} />
      ))}
    </div>
  );
}

// Export all
export default {
  SkeletonBox,
  ContentCardSkeleton,
  ContentGridSkeleton,
  HeroSkeleton,
  CarouselSkeleton,
  ActivityCardSkeleton,
  FeedSkeleton,
  DetailPageSkeleton,
  ProfileSkeleton,
  LibrarySkeleton,
  ListSkeleton,
  CommentSkeleton,
  CommentsSkeleton,
  PageLoader,
  InlineLoader,
  NotificationSkeleton,
  NotificationsSkeleton,
};


========== saga.client\src\config\bookQueries.json ==========

{
  "categories": {
    "all": { "labelTr": "TÃ¼mÃ¼", "queryEn": "", "queryTr": "" },
    "fiction": { "labelTr": "ğŸ“š Roman", "queryEn": "subject:fiction", "queryTr": "roman" },
    "scifi": { "labelTr": "ğŸš€ Bilim Kurgu", "queryEn": "subject:science fiction", "queryTr": "bilim kurgu" },
    "fantasy": { "labelTr": "ğŸ§™ Fantastik", "queryEn": "subject:fantasy", "queryTr": "fantastik" },
    "mystery": { "labelTr": "ğŸ” Polisiye", "queryEn": "subject:mystery", "queryTr": "polisiye" },
    "romance": { "labelTr": "ğŸ’• Romantik", "queryEn": "subject:romance", "queryTr": "aÅŸk romanÄ±" },
    "horror": { "labelTr": "ğŸ‘» Korku", "queryEn": "subject:horror", "queryTr": "korku" },
    "history": { "labelTr": "ğŸ“œ Tarih", "queryEn": "subject:history", "queryTr": "tarih" },
    "biography": { "labelTr": "ğŸ‘¤ Biyografi", "queryEn": "subject:biography", "queryTr": "biyografi" },
    "science": { "labelTr": "ğŸ”¬ Bilim", "queryEn": "subject:science", "queryTr": "bilim" },
    "philosophy": { "labelTr": "ğŸ¤” Felsefe", "queryEn": "subject:philosophy", "queryTr": "felsefe" },
    "psychology": { "labelTr": "ğŸ§  Psikoloji", "queryEn": "subject:psychology", "queryTr": "psikoloji" },
    "selfhelp": { "labelTr": "ğŸ’ª KiÅŸisel GeliÅŸim", "queryEn": "subject:self-help", "queryTr": "kiÅŸisel geliÅŸim" },
    "business": { "labelTr": "ğŸ’¼ Ä°ÅŸ/Ekonomi", "queryEn": "subject:business", "queryTr": "ekonomi" },
    "technology": { "labelTr": "ğŸ’» Teknoloji", "queryEn": "subject:computers", "queryTr": "teknoloji" },
    "art": { "labelTr": "ğŸ¨ Sanat", "queryEn": "subject:art", "queryTr": "sanat" },
    "poetry": { "labelTr": "ğŸ“ Åiir", "queryEn": "subject:poetry", "queryTr": "ÅŸiir" },
    "children": { "labelTr": "ğŸ‘¶ Ã‡ocuk", "queryEn": "subject:juvenile fiction", "queryTr": "Ã§ocuk kitabÄ±" },
    "youngadult": { "labelTr": "ğŸ“ GenÃ§ YetiÅŸkin", "queryEn": "subject:young adult fiction", "queryTr": "genÃ§ yetiÅŸkin" },
    "manga": { "labelTr": "ğŸŒ Manga/Ã‡izgi Roman", "queryEn": "subject:comics", "queryTr": "Ã§izgi roman" },
    "cookbook": { "labelTr": "ğŸ³ Yemek", "queryEn": "subject:cooking", "queryTr": "yemek tarifi" },
    "travel": { "labelTr": "âœˆï¸ Gezi", "queryEn": "subject:travel", "queryTr": "gezi" },
    "sports": { "labelTr": "âš½ Spor", "queryEn": "subject:sports", "queryTr": "spor" },
    "classic": { "labelTr": "ğŸ“– Klasikler", "queryEn": "subject:literary fiction", "queryTr": "klasik edebiyat" }
  },
  "turkishPublishers": [
    "inpublisher:\"YapÄ± Kredi YayÄ±nlarÄ±\"",
    "inpublisher:\"Can YayÄ±nlarÄ±\"",
    "inpublisher:\"Ä°letiÅŸim YayÄ±nlarÄ±\"",
    "inpublisher:\"DoÄŸan Kitap\"",
    "inpublisher:\"Ä°ÅŸ BankasÄ± KÃ¼ltÃ¼r YayÄ±nlarÄ±\"",
    "inpublisher:\"Everest YayÄ±nlarÄ±\"",
    "inpublisher:\"Alfa YayÄ±nlarÄ±\"",
    "inpublisher:\"Epsilon YayÄ±nevi\"",
    "inpublisher:\"Pegasus YayÄ±nlarÄ±\"",
    "inpublisher:\"Remzi Kitabevi\"",
    "inpublisher:\"Sel YayÄ±ncÄ±lÄ±k\"",
    "inpublisher:\"Metis YayÄ±nlarÄ±\"",
    "inpublisher:\"KÄ±rmÄ±zÄ± Kedi\"",
    "inpublisher:\"April YayÄ±ncÄ±lÄ±k\"",
    "inpublisher:\"Ithaki YayÄ±nlarÄ±\""
  ],
  "turkishAuthors": [
    "inauthor:\"Orhan Pamuk\"",
    "inauthor:\"Elif Åafak\"",
    "inauthor:\"Sabahattin Ali\"",
    "inauthor:\"YaÅŸar Kemal\"",
    "inauthor:\"Ahmet Hamdi TanpÄ±nar\"",
    "inauthor:\"OÄŸuz Atay\"",
    "inauthor:\"Halide Edib AdÄ±var\"",
    "inauthor:\"Peyami Safa\"",
    "inauthor:\"Aziz Nesin\"",
    "inauthor:\"NazÄ±m Hikmet\"",
    "inauthor:\"ReÅŸat Nuri GÃ¼ntekin\"",
    "inauthor:\"Sait Faik AbasÄ±yanÄ±k\"",
    "inauthor:\"ZÃ¼lfÃ¼ Livaneli\"",
    "inauthor:\"AyÅŸe Kulin\"",
    "inauthor:\"Buket Uzuner\"",
    "inauthor:\"Ä°hsan Oktay Anar\"",
    "inauthor:\"Hakan GÃ¼nday\"",
    "inauthor:\"Emrah Serbes\""
  ],
  "internationalPublishers": [
    "inpublisher:\"Penguin\"",
    "inpublisher:\"HarperCollins\"",
    "inpublisher:\"Random House\"",
    "inpublisher:\"Simon & Schuster\"",
    "inpublisher:\"Macmillan\"",
    "inpublisher:\"Hachette\"",
    "inpublisher:\"Scholastic\"",
    "inpublisher:\"Bloomsbury\"",
    "inpublisher:\"Oxford University Press\"",
    "inpublisher:\"Cambridge University Press\""
  ],
  "universalGenres": [
    "subject:fiction",
    "subject:fantasy",
    "subject:mystery",
    "subject:romance",
    "subject:science fiction",
    "subject:thriller",
    "subject:horror",
    "subject:biography",
    "subject:history",
    "subject:philosophy",
    "subject:psychology",
    "subject:self-help",
    "subject:poetry",
    "subject:drama",
    "subject:adventure"
  ],
  "languages": [
    { "value": "", "label": "ğŸŒ TÃ¼m Diller" },
    { "value": "tr", "label": "ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e" },
    { "value": "en", "label": "ğŸ‡¬ğŸ‡§ Ä°ngilizce" }
  ]
}


========== saga.client\src\context\AuthContext.tsx ==========

import { createContext, useContext, useEffect, useState, useCallback, useMemo } from 'react';
import type { Session, User } from '@supabase/supabase-js';
import { supabase } from '../services/supabase';
import { LoginRequiredModal } from '../components/ui/Modal';
import { useNavigate } from 'react-router-dom';

// Backend API URL
const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:5054/api';

// Extended user type with our app-specific fields
export interface SagaUser {
    id: string; // GUID from backend
    supabaseId: string;
    email: string;
    kullaniciAdi: string;
    goruntulemeAdi?: string;
    ad?: string;
    profilResmi?: string;
}

interface AuthContextType {
    session: Session | null;
    user: SagaUser | null;
    supabaseUser: User | null;
    loading: boolean;
    isAuthenticated: boolean;
    signOut: () => Promise<void>;
    // Guest Guard System
    requireAuth: (action?: string) => boolean;
    showLoginModal: boolean;
    setShowLoginModal: (show: boolean) => void;
    pendingAction: string | null;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export function AuthProvider({ children }: { children: React.ReactNode }) {
    const [session, setSession] = useState<Session | null>(null);
    const [supabaseUser, setSupabaseUser] = useState<User | null>(null);
    const [user, setUser] = useState<SagaUser | null>(null);
    const [loading, setLoading] = useState(true);
    
    // Guest Guard State
    const [showLoginModal, setShowLoginModal] = useState(false);
    const [pendingAction, setPendingAction] = useState<string | null>(null);

    const isAuthenticated = !!user;

    // Backend'den kullanÄ±cÄ± profilini Ã§ek (doÄŸru kullaniciAdi iÃ§in)
    const fetchUserProfile = async (supaUser: User, accessToken: string): Promise<SagaUser | null> => {
        try {
            // Backend'de kendi profilimi getir endpoint'i
            const response = await fetch(`${API_URL}/kullanici/profil`, {
                headers: {
                    'Authorization': `Bearer ${accessToken}`,
                    'Content-Type': 'application/json',
                },
            });

            if (response.ok) {
                const profil = await response.json();
                return {
                    id: profil.id,
                    supabaseId: supaUser.id,
                    email: supaUser.email || '',
                    kullaniciAdi: profil.kullaniciAdi,
                    goruntulemeAdi: profil.goruntulemeAdi,
                    ad: profil.goruntulemeAdi || supaUser.user_metadata?.full_name,
                    profilResmi: profil.avatarUrl,
                };
            }
        } catch (error) {
            console.error('Profil yÃ¼klenirken hata:', error);
        }

        // Fallback: Supabase metadata'dan kullanÄ±cÄ± oluÅŸtur
        const kullaniciAdi = supaUser.user_metadata?.kullanici_adi || 
                            supaUser.user_metadata?.username ||
                            supaUser.email?.split('@')[0] || 
                            'user';
        
        return {
            id: supaUser.id,
            supabaseId: supaUser.id,
            email: supaUser.email || '',
            kullaniciAdi,
            ad: supaUser.user_metadata?.ad || supaUser.user_metadata?.full_name,
            profilResmi: supaUser.user_metadata?.profil_resmi,
        };
    };

    useEffect(() => {
        // 1. Mevcut oturumu kontrol et
        supabase.auth.getSession().then(async ({ data: { session } }) => {
            setSession(session);
            setSupabaseUser(session?.user ?? null);
            
            if (session?.user && session?.access_token) {
                const sagaUser = await fetchUserProfile(session.user, session.access_token);
                setUser(sagaUser);
            } else {
                setUser(null);
            }
            setLoading(false);
        });

        // 2. Oturum deÄŸiÅŸikliklerini dinle (GiriÅŸ/Ã‡Ä±kÄ±ÅŸ anÄ±nda tetiklenir)
        const { data: { subscription } } = supabase.auth.onAuthStateChange(async (_event, session) => {
            setSession(session);
            setSupabaseUser(session?.user ?? null);
            
            if (session?.user && session?.access_token) {
                const sagaUser = await fetchUserProfile(session.user, session.access_token);
                setUser(sagaUser);
            } else {
                setUser(null);
            }
            setLoading(false);
        });

        return () => subscription.unsubscribe();
    }, []);

    const signOut = async () => {
        await supabase.auth.signOut();
    };

    /**
     * Guest Guard: Protected actions iÃ§in kullanÄ±lÄ±r
     * EÄŸer kullanÄ±cÄ± giriÅŸ yapmamÄ±ÅŸsa, login modal'Ä± aÃ§ar ve false dÃ¶ner
     * EÄŸer giriÅŸ yapmÄ±ÅŸsa true dÃ¶ner ve action devam eder
     */
    const requireAuth = useCallback((action?: string): boolean => {
        if (isAuthenticated) {
            return true;
        }
        
        // Set pending action for context
        setPendingAction(action || null);
        setShowLoginModal(true);
        return false;
    }, [isAuthenticated]);

    // Context value'yu memoize et - gereksiz re-render'larÄ± Ã¶nler
    const contextValue = useMemo(() => ({
        session, 
        user,
        supabaseUser,
        loading, 
        isAuthenticated,
        signOut,
        requireAuth,
        showLoginModal,
        setShowLoginModal,
        pendingAction,
    }), [session, user, supabaseUser, loading, isAuthenticated, signOut, requireAuth, showLoginModal, pendingAction]);

    return (
        <AuthContext.Provider value={contextValue}>
            {!loading && children}
        </AuthContext.Provider>
    );
}

// Hook olarak kullanmak iÃ§in
export const useAuth = () => {
    const context = useContext(AuthContext);
    if (context === undefined) {
        throw new Error('useAuth must be used within an AuthProvider');
    }
    return context;
};

// Guest Guard Modal Provider - App.tsx'de kullanÄ±lacak
export function AuthModalProvider({ children }: { children: React.ReactNode }) {
    const { showLoginModal, setShowLoginModal, pendingAction } = useAuth();
    const navigate = useNavigate();

    const handleLogin = () => {
        setShowLoginModal(false);
        navigate('/giris');
    };

    const handleRegister = () => {
        setShowLoginModal(false);
        navigate('/kayit');
    };

    const getActionMessage = () => {
        switch (pendingAction) {
            case 'like':
                return 'Ä°Ã§eriÄŸi beÄŸenmek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.';
            case 'rate':
                return 'Puan vermek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.';
            case 'comment':
                return 'Yorum yapmak iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.';
            case 'addToList':
                return 'Listeye eklemek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.';
            case 'follow':
                return 'Takip etmek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.';
            default:
                return 'Bu Ã¶zelliÄŸi kullanmak iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.';
        }
    };

    return (
        <>
            {children}
            <LoginRequiredModal
                isOpen={showLoginModal}
                onClose={() => setShowLoginModal(false)}
                onLogin={handleLogin}
                onRegister={handleRegister}
                message={getActionMessage()}
            />
        </>
    );
}

========== saga.client\src\context\ThemeContext.tsx ==========

import { createContext, useContext, useState, useEffect } from 'react';
import type { ReactNode } from 'react';

type Theme = 'dark' | 'light';

interface ThemeContextType {
  theme: Theme;
  toggleTheme: () => void;
  setTheme: (theme: Theme) => void;
  isDark: boolean;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export function ThemeProvider({ children }: { children: ReactNode }) {
  const [theme, setThemeState] = useState<Theme>(() => {
    // localStorage'dan tema tercihini al
    const saved = localStorage.getItem('saga-theme');
    if (saved === 'light' || saved === 'dark') return saved;
    // Sistem tercihine bak
    if (window.matchMedia('(prefers-color-scheme: light)').matches) return 'light';
    return 'dark';
  });

  useEffect(() => {
    localStorage.setItem('saga-theme', theme);
    // HTML root'a class ekle
    document.documentElement.classList.remove('light', 'dark');
    document.documentElement.classList.add(theme);
  }, [theme]);

  const toggleTheme = () => {
    setThemeState((prev) => (prev === 'dark' ? 'light' : 'dark'));
  };

  const setTheme = (newTheme: Theme) => {
    setThemeState(newTheme);
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme, setTheme, isDark: theme === 'dark' }}>
      {children}
    </ThemeContext.Provider>
  );
}

export function useTheme() {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
}


========== saga.client\src\pages\glass\DetailPage.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SAGA DETAIL PAGE - CINEMATIC EXPERIENCE
   Design System: Matching feed.html / detail.html aesthetics
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* CSS Variables for Detail Page */
.detail-page-wrapper {
  --void: #030304;
  --void-light: #0a0a0c;
  --void-surface: #111114;
  --void-elevated: #18181c;
  --void-border: #222228;
  
  --gold-primary: #d4a853;
  --gold-secondary: #e8c676;
  --gold-dim: #a68532;
  --gold-glow: rgba(212, 168, 83, 0.4);
  
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-muted: rgba(255, 255, 255, 0.4);
  
  --glass-bg: rgba(255, 255, 255, 0.03);
  --glass-border: rgba(255, 255, 255, 0.06);
  
  --success: #4ade80;
  --error: #f87171;
  --warning: #fbbf24;
  
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  
  --font-display: 'Cinzel', serif;
  --font-body: 'Inter', sans-serif;
}

/* Page Wrapper - Full Screen Dark Background */
.detail-page-wrapper {
  min-height: 100vh;
  background: var(--void);
  color: var(--text-primary);
  font-family: var(--font-body);
  position: relative;
  overflow-x: hidden;
  /* VoidLayout content padding'ini override et - hero full screen olsun */
  margin-top: -70px;
  padding-top: 0;
  margin-bottom: -100px;
  padding-bottom: 100px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOP NAVIGATION BAR (Scrolled state handled in component)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.detail-top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  padding: 16px 5%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: linear-gradient(to bottom, rgba(3, 3, 4, 0.95), transparent);
  transition: all 0.4s ease;
}

.detail-top-nav.scrolled {
  background: rgba(3, 3, 4, 0.98);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--glass-border);
}

.nav-left {
  display: flex;
  align-items: center;
  gap: 20px;
}

.back-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 18px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--glass-border);
  border-radius: 100px;
  color: var(--text-primary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  text-decoration: none;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.15);
}

.back-btn svg {
  width: 18px;
  height: 18px;
}

.nav-logo {
  font-family: var(--font-display);
  font-size: 20px;
  font-weight: 600;
  letter-spacing: 4px;
  color: var(--text-primary);
}

.nav-right {
  display: flex;
  align-items: center;
  gap: 12px;
}

.nav-btn {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--glass-border);
  border-radius: 50%;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
}

.nav-btn:hover {
  background: rgba(255, 255, 255, 0.12);
  color: var(--text-primary);
}

.nav-btn svg {
  width: 20px;
  height: 20px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO SECTION - Full Width Backdrop
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.detail-hero {
  position: relative;
  width: 100%;
  height: 70vh;
  min-height: 500px;
  overflow: hidden;
}

.hero-backdrop {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center top;
  transform: scale(1.05);
  animation: heroZoom 20s ease-out forwards;
}

@keyframes heroZoom {
  to {
    transform: scale(1);
  }
}

.hero-overlay {
  position: absolute;
  inset: 0;
  background: 
    linear-gradient(to top, var(--void) 0%, rgba(3,3,4,0.4) 50%, rgba(3,3,4,0.6) 100%),
    linear-gradient(to right, rgba(3,3,4,0.7) 0%, transparent 50%);
}

/* Hero Content Type Badge - Mobile only */
.hero-content-badge {
  display: none;
  position: absolute;
  bottom: 20px;
  left: 20px;
  z-index: 10;
  padding: 8px 14px;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-primary);
  text-transform: uppercase;
  letter-spacing: 1px;
  align-items: center;
  gap: 6px;
}

.hero-content-badge .material-symbols-rounded {
  font-size: 16px;
  color: var(--gold-primary);
}

/* Trailer Play Button */
.trailer-btn {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  color: var(--text-primary);
  cursor: pointer;
  transition: all 0.4s var(--ease-out-expo);
  z-index: 10;
}

.trailer-btn:hover {
  transform: translate(-50%, -50%) scale(1.1);
  background: var(--gold-primary);
  border-color: var(--gold-primary);
  color: var(--void);
  box-shadow: 0 0 40px var(--gold-glow);
}

.trailer-btn svg,
.trailer-btn .material-symbols-rounded {
  font-size: 32px;
  margin-left: 4px;
}

.trailer-text {
  position: absolute;
  top: calc(50% + 60px);
  left: 50%;
  transform: translateX(-50%);
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  letter-spacing: 2px;
  text-transform: uppercase;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.detail-main-content {
  position: relative;
  z-index: 10;
  margin-top: -180px;
  padding: 0 5% 100px;
}

.detail-content-grid {
  display: grid;
  grid-template-columns: clamp(200px, 20vw, 280px) minmax(0, 1fr) clamp(260px, 22vw, 320px);
  gap: clamp(20px, 3vw, 40px);
  max-width: 1400px;
  margin: 0 auto;
}

/* Grid sÃ¼tun sÄ±ralamasÄ± */
.poster-column {
  grid-column: 1;
}

.info-column {
  grid-column: 2;
}

.sidebar-column {
  grid-column: 3;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEFT COLUMN - Poster & Actions
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.poster-column {
  position: sticky;
  top: 100px;
  height: fit-content;
}

.poster-wrapper {
  position: relative;
  border-radius: clamp(12px, 1.5vw, 20px);
  overflow: hidden;
  box-shadow: 
    0 20px 60px rgba(0, 0, 0, 0.5),
    0 0 0 1px var(--glass-border);
}

.poster-wrapper img {
  width: 100%;
  aspect-ratio: 2/3;
  object-fit: cover;
  display: block;
}

.poster-badge {
  position: absolute;
  top: clamp(8px, 1.5vw, 16px);
  left: clamp(8px, 1.5vw, 16px);
  display: flex;
  align-items: center;
  gap: clamp(4px, 0.5vw, 6px);
  padding: clamp(4px, 0.8vw, 8px) clamp(8px, 1.2vw, 14px);
  background: var(--gold-primary);
  border-radius: clamp(4px, 0.6vw, 8px);
  font-size: clamp(8px, 0.9vw, 11px);
  font-weight: 700;
  letter-spacing: 0.5px;
  color: var(--void);
}

.poster-badge svg,
.poster-badge .material-symbols-rounded {
  font-size: clamp(10px, 1.1vw, 14px);
}

/* Action Buttons */
.poster-actions {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

.action-btn-large {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: clamp(6px, 0.8vw, 10px);
  padding: clamp(10px, 1.2vw, 16px);
  border-radius: clamp(10px, 1.1vw, 14px);
  font-size: clamp(12px, 1.1vw, 14px);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: var(--font-body);
}

.action-btn-large svg,
.action-btn-large .material-symbols-rounded {
  font-size: clamp(16px, 1.5vw, 20px);
}

.action-btn-large.primary {
  background: var(--gold-primary);
  border: none;
  color: var(--void);
}

.action-btn-large.primary:hover {
  background: var(--gold-secondary);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px var(--gold-glow);
}

.action-btn-large.secondary {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--glass-border);
  color: var(--text-primary);
}

.action-btn-large.secondary:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.15);
}

.action-btn-large.secondary.active {
  background: rgba(248, 113, 113, 0.15);
  border-color: rgba(248, 113, 113, 0.3);
  color: #f87171;
}

/* Quick Stats */
.quick-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1px;
  margin-top: clamp(12px, 1.5vw, 20px);
  background: var(--glass-border);
  border-radius: clamp(10px, 1.1vw, 14px);
  overflow: hidden;
}

.stat-item {
  padding: clamp(10px, 1.2vw, 16px) clamp(8px, 1vw, 12px);
  background: var(--void-surface);
  text-align: center;
}

.stat-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.stat-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CENTER COLUMN - Main Info
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.info-column {
  padding-top: 20px;
  min-width: 0; /* Prevents grid blowout from flex children */
  overflow: hidden;
}

/* Content Type Badge - BaÅŸlÄ±ÄŸÄ±n Ã¼stÃ¼nde (ExplorePage override) */
.info-column > .content-type-badge,
.detail-page-wrapper .content-type-badge {
  position: static;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--glass-border);
  border-radius: 100px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 16px;
  top: auto;
  left: auto;
}

.info-column > .content-type-badge svg,
.info-column > .content-type-badge .material-symbols-rounded,
.detail-page-wrapper .content-type-badge svg,
.detail-page-wrapper .content-type-badge .material-symbols-rounded {
  font-size: 16px;
}

/* Title */
.detail-content-title {
  font-family: var(--font-display);
  font-size: clamp(32px, 5vw, 48px);
  font-weight: 600;
  line-height: 1.1;
  letter-spacing: -0.5px;
  margin-bottom: 16px;
  color: var(--text-primary);
}

/* Meta Info */
.detail-content-meta {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 24px;
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  color: var(--text-secondary);
}

.meta-item svg,
.meta-item .material-symbols-rounded {
  font-size: 16px;
  opacity: 0.6;
}

.meta-divider {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--text-muted);
}

/* Rating Section */
.rating-section {
  display: flex;
  gap: 20px;
  padding: 24px;
  background: var(--void-surface);
  border: 1px solid var(--glass-border);
  border-radius: clamp(12px, 1.5vw, 20px);
  margin-bottom: clamp(16px, 2vw, 28px);
}

.rating-box {
  flex: 1;
  text-align: center;
  padding: 0 clamp(10px, 1.5vw, 20px);
  border-right: 1px solid var(--glass-border);
}

.rating-box:last-child {
  border-right: none;
}

.rating-source {
  font-size: clamp(9px, 0.9vw, 11px);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: clamp(4px, 0.6vw, 8px);
}

.rating-value {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: clamp(4px, 0.6vw, 8px);
  font-size: clamp(20px, 2.2vw, 28px);
  font-weight: 700;
  color: var(--text-primary);
}

.rating-value svg,
.rating-value .material-symbols-rounded {
  font-size: clamp(18px, 1.8vw, 24px);
  color: var(--gold-primary);
}

.rating-value .material-symbols-rounded.filled {
  font-variation-settings: 'FILL' 1;
}

.rating-count {
  font-size: clamp(10px, 0.9vw, 12px);
  color: var(--text-muted);
  margin-top: clamp(2px, 0.3vw, 4px);
}

/* User Rating */
.user-rating-box {
  flex: 1.5;
  text-align: center;
  padding: 0 clamp(10px, 1.5vw, 20px);
}

.user-rating-label {
  font-size: clamp(9px, 0.9vw, 11px);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 12px;
}

.star-rating {
  display: flex;
  justify-content: center;
  gap: 4px;
}

.star-rating .star {
  width: 28px;
  height: 28px;
  cursor: pointer;
  transition: all 0.2s var(--ease-bounce);
  color: var(--void-border);
}

.star-rating .star .material-symbols-rounded {
  font-size: 28px;
  transition: all 0.2s ease;
}

.star-rating .star:hover .material-symbols-rounded,
.star-rating .star.active .material-symbols-rounded {
  color: var(--gold-primary);
  font-variation-settings: 'FILL' 1;
  filter: drop-shadow(0 0 6px var(--gold-glow));
}

.star-rating .star:hover {
  transform: scale(1.2);
}

.user-rating-text {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 8px;
}

/* Genres */
.genres {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 28px;
}

.genre-tag {
  padding: 10px 20px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--glass-border);
  border-radius: 100px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
}

.genre-tag:hover {
  background: rgba(212, 168, 83, 0.15);
  border-color: rgba(212, 168, 83, 0.3);
  color: var(--gold-primary);
}

/* Section Title */
.section-title {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
  color: var(--text-primary);
}

.section-title svg,
.section-title .material-symbols-rounded {
  font-size: 20px;
  color: var(--text-muted);
}

/* Overview */
.overview-text {
  font-size: 15px;
  line-height: 1.8;
  color: var(--text-secondary);
  margin-bottom: 32px;
}

.overview-text.expandable {
  display: -webkit-box;
  -webkit-line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.overview-text.expanded {
  -webkit-line-clamp: unset;
}

.expand-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 12px;
}

.expand-btn:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-primary);
}

.expand-btn svg,
.expand-btn .material-symbols-rounded {
  font-size: 16px;
  transition: transform 0.3s ease;
}

.expand-btn.expanded svg,
.expand-btn.expanded .material-symbols-rounded {
  transform: rotate(180deg);
}

/* Show More Button - Yorumlar, listeler iÃ§in */
.show-more-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 14px 20px;
  background: var(--void-surface);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 12px;
}

.show-more-btn:hover {
  background: var(--void-elevated);
  border-color: var(--gold-dim);
  color: var(--gold-primary);
}

.show-more-btn .material-symbols-rounded {
  font-size: 20px;
  transition: transform 0.3s ease;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CAST SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.cast-section {
  margin-top: 40px;
  margin-bottom: 40px;
  overflow: hidden;
}

.cast-scroll {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  overflow-y: hidden;
  padding-bottom: 16px;
  scrollbar-width: thin;
  scrollbar-color: var(--void-border) transparent;
  -webkit-overflow-scrolling: touch;
}

.cast-scroll::-webkit-scrollbar {
  height: 6px;
}

.cast-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.cast-scroll::-webkit-scrollbar-thumb {
  background: var(--void-border);
  border-radius: 3px;
}

.cast-card {
  flex-shrink: 0;
  width: 100px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.cast-card:hover {
  transform: translateY(-4px);
}

.cast-photo {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--glass-border);
  margin: 0 auto 12px;
  transition: all 0.3s ease;
}

.cast-card:hover .cast-photo {
  border-color: var(--gold-primary);
  box-shadow: 0 0 20px var(--gold-glow);
}

.cast-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.cast-role {
  font-size: 11px;
  color: var(--text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAB SYSTEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.tabs-container {
  margin-top: 40px;
}

.tabs-header {
  display: flex;
  gap: 8px;
  border-bottom: 1px solid var(--glass-border);
  margin-bottom: 24px;
}

.tab-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px 24px;
  background: transparent;
  border: none;
  font-family: var(--font-body);
  font-size: 14px;
  font-weight: 500;
  color: var(--text-muted);
  cursor: pointer;
  position: relative;
  transition: all 0.3s ease;
}

.tab-btn svg,
.tab-btn .material-symbols-rounded {
  font-size: 18px;
}

.tab-btn::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--gold-primary);
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.tab-btn:hover {
  color: var(--text-secondary);
}

.tab-btn.active {
  color: var(--gold-primary);
}

.tab-btn.active::after {
  transform: scaleX(1);
}

.tab-count {
  padding: 2px 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 100px;
  font-size: 11px;
  font-weight: 600;
}

.tab-btn.active .tab-count {
  background: rgba(212, 168, 83, 0.2);
  color: var(--gold-primary);
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
  animation: tabFadeIn 0.3s ease;
}

@keyframes tabFadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Detail Aktiviteler List - FeedPage kartlarÄ± iÃ§in container */
.detail-aktiviteler-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.detail-aktiviteler-list .activity-card {
  max-width: 100%;
  margin: 0;
}

/* Comment Preview Card */
.comment-preview {
  padding: 20px;
  background: var(--void-surface);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  margin-bottom: 16px;
  transition: all 0.3s ease;
}

.comment-preview:hover {
  border-color: rgba(255, 255, 255, 0.12);
}

/* Highlight efekti - URL'den yoruma gelince */
.comment-preview.highlight-comment {
  border-color: var(--gold-primary);
  box-shadow: 0 0 20px rgba(212, 168, 83, 0.3), 0 0 40px rgba(212, 168, 83, 0.15);
  animation: highlightPulse 0.5s ease-out;
}

@keyframes highlightPulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 rgba(212, 168, 83, 0);
  }
  50% {
    transform: scale(1.01);
    box-shadow: 0 0 30px rgba(212, 168, 83, 0.5);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 20px rgba(212, 168, 83, 0.3);
  }
}

.comment-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.comment-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

.comment-user-info {
  flex: 1;
}

.comment-username {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.comment-date {
  font-size: 12px;
  color: var(--text-muted);
}

.comment-rating {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 14px;
  font-weight: 600;
  color: var(--gold-primary);
}

.comment-rating svg,
.comment-rating .material-symbols-rounded {
  font-size: 16px;
}

.comment-rating .material-symbols-rounded.filled {
  font-variation-settings: 'FILL' 1;
}

.comment-text {
  font-size: 14px;
  line-height: 1.6;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.comment-text.truncated {
  display: -webkit-box;
  -webkit-line-clamp: 4;
  line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.comment-expand-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: none;
  border: none;
  font-size: 13px;
  font-weight: 500;
  color: var(--gold-primary);
  cursor: pointer;
  padding: 4px 0;
  margin-bottom: 8px;
  transition: all 0.2s ease;
}

.comment-expand-btn:hover {
  color: var(--gold-secondary);
}

.comment-expand-btn .material-symbols-rounded {
  font-size: 18px;
}

.spoiler-warning {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: rgba(248, 113, 113, 0.1);
  border: 1px solid rgba(248, 113, 113, 0.3);
  border-radius: 6px;
  font-size: 12px;
  color: #f87171;
  margin-bottom: 8px;
}

.spoiler-warning svg,
.spoiler-warning .material-symbols-rounded {
  font-size: 14px;
}

/* Spoiler Gizle Butonu */
.spoiler-hide-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: none;
  border: 1px solid rgba(212, 168, 83, 0.3);
  border-radius: 6px;
  font-size: 12px;
  color: var(--gold-primary);
  cursor: pointer;
  margin-bottom: 12px;
  transition: all 0.2s ease;
  font-family: var(--font-body);
}

.spoiler-hide-btn:hover {
  background: rgba(212, 168, 83, 0.1);
  border-color: var(--gold-primary);
}

.spoiler-hide-btn .material-symbols-rounded {
  font-size: 14px;
}

.comment-actions {
  display: flex;
  gap: 16px;
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px solid var(--glass-border);
}

.comment-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  font-size: 13px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--font-body);
}

.comment-action-btn:hover {
  color: var(--text-secondary);
}

.comment-action-btn svg,
.comment-action-btn .material-symbols-rounded {
  font-size: 16px;
}

.comment-action-btn.liked {
  color: #f87171;
}

/* List Preview Card */
.list-preview {
  display: flex;
  gap: 16px;
  padding: 16px;
  background: var(--void-surface);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.list-preview:hover {
  border-color: rgba(255, 255, 255, 0.12);
  transform: translateX(4px);
}

.list-posters {
  display: flex;
  flex-shrink: 0;
}

.list-poster {
  width: 70px;
  height: 105px;
  border-radius: 8px;
  object-fit: cover;
  border: 2px solid var(--void-surface);
  margin-left: -15px;
}

.list-poster:first-child {
  margin-left: 0;
}

.list-info {
  flex: 1;
  min-width: 0;
}

.list-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.list-meta {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.list-creator {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text-secondary);
}

.list-creator img {
  width: 20px;
  height: 20px;
  border-radius: 50%;
}

/* Activity Preview */
.activity-item {
  display: flex;
  gap: 12px;
  padding: 16px;
  background: var(--void-surface);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  margin-bottom: 12px;
}

.activity-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.activity-content {
  flex: 1;
}

.activity-text {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.activity-text strong {
  color: var(--text-primary);
  font-weight: 600;
}

.activity-text .highlight {
  color: var(--gold-primary);
}

.activity-time {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 6px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMMENT FORM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.comment-form-card {
  background: var(--void-surface);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
  padding: 24px;
  margin-bottom: 24px;
}

.comment-form-header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 20px;
}

.comment-form-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--glass-border);
}

.comment-form-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.comment-form-subtitle {
  font-size: 13px;
  color: var(--text-muted);
}

.comment-textarea {
  width: 100%;
  min-height: 120px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  font-family: var(--font-body);
  font-size: 14px;
  color: var(--text-primary);
  resize: vertical;
  transition: all 0.3s ease;
}

.comment-textarea::placeholder {
  color: var(--text-muted);
}

.comment-textarea:focus {
  outline: none;
  border-color: var(--gold-primary);
  box-shadow: 0 0 0 3px rgba(212, 168, 83, 0.1);
}

.comment-form-options {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 16px;
  margin-top: 16px;
}

.form-options-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.spoiler-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-size: 13px;
  color: var(--text-muted);
  transition: all 0.2s ease;
}

.spoiler-toggle:hover {
  color: var(--text-secondary);
}

.spoiler-checkbox {
  display: none;
}

.spoiler-checkmark {
  width: 20px;
  height: 20px;
  border: 2px solid var(--void-border);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.spoiler-checkmark svg,
.spoiler-checkmark .material-symbols-rounded {
  font-size: 14px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.spoiler-checkbox:checked + .spoiler-checkmark {
  background: #f87171;
  border-color: #f87171;
}

.spoiler-checkbox:checked + .spoiler-checkmark svg,
.spoiler-checkbox:checked + .spoiler-checkmark .material-symbols-rounded {
  opacity: 1;
  color: white;
}

.char-counter {
  font-size: 12px;
  color: var(--text-muted);
}

.char-counter.warning {
  color: #fbbf24;
}

.char-counter.error {
  color: #f87171;
}

.submit-comment-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 28px;
  background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-dim) 100%);
  border: none;
  border-radius: 100px;
  font-family: var(--font-body);
  font-size: 14px;
  font-weight: 600;
  color: var(--void);
  cursor: pointer;
  transition: all 0.3s var(--ease-out-expo);
}

.submit-comment-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px var(--gold-glow);
}

.submit-comment-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.submit-comment-btn svg,
.submit-comment-btn .material-symbols-rounded {
  font-size: 18px;
}

/* Form Rating Stars */
.form-rating {
  display: flex;
  align-items: center;
  gap: 8px;
}

.form-rating-label {
  font-size: 13px;
  color: var(--text-muted);
}

.form-stars {
  display: flex;
  gap: 2px;
}

.form-stars .star {
  width: 20px;
  height: 20px;
  cursor: pointer;
  transition: all 0.15s ease;
  color: var(--void-border);
}

.form-stars .star .material-symbols-rounded {
  font-size: 20px;
  transition: all 0.15s ease;
}

.form-stars .star:hover .material-symbols-rounded,
.form-stars .star.active .material-symbols-rounded {
  color: var(--gold-primary);
  font-variation-settings: 'FILL' 1;
}

.form-stars .star:hover {
  transform: scale(1.15);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.sidebar-column {
  position: sticky;
  top: 100px;
  height: fit-content;
}

.sidebar-card {
  background: var(--void-surface);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
  padding: 24px;
  margin-bottom: 20px;
}

.sidebar-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 20px;
  color: var(--text-primary);
}

.sidebar-title svg,
.sidebar-title .material-symbols-rounded {
  font-size: 20px;
  color: var(--text-muted);
}

/* Info List */
.info-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.info-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.info-label {
  font-size: 13px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.info-value {
  font-size: 13px;
  color: var(--text-secondary);
  text-align: right;
}

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.stat-box {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
}

.stat-box .material-symbols-rounded {
  font-size: 20px;
  color: var(--gold-primary);
  opacity: 0.8;
}

.stat-content {
  flex: 1;
}

.stat-number {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1.2;
}

.stat-text {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* External Links */
.external-links {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.external-link {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  text-decoration: none;
  color: var(--text-secondary);
  font-size: 14px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.external-link:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: var(--text-primary);
  transform: translateX(4px);
}

.external-link svg,
.external-link .material-symbols-rounded {
  font-size: 20px;
  flex-shrink: 0;
}

.external-link .link-icon {
  margin-left: auto;
  opacity: 0.4;
}

.link-tmdb {
  color: #01d277;
}

.link-imdb {
  color: #f5c518;
}

.link-youtube {
  color: #ff0000;
}

.link-google-books {
  color: #4285f4;
}

.link-google {
  color: #ea4335;
}

/* Watch Providers */
.providers-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.provider-badge {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--glass-border);
  border-radius: 10px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
  text-decoration: none;
}

.provider-badge:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
  transform: translateY(-2px);
}

.provider-badge img {
  width: 24px;
  height: 24px;
  border-radius: 6px;
  object-fit: cover;
}

.provider-badge .material-symbols-rounded {
  font-size: 20px;
  color: var(--gold-primary);
}

.provider-badge.provider-all {
  background: rgba(212, 168, 83, 0.1);
  border-color: rgba(212, 168, 83, 0.3);
  color: var(--gold-primary);
}

.provider-badge.provider-all:hover {
  background: rgba(212, 168, 83, 0.15);
  border-color: var(--gold-primary);
}

/* Similar Content */
.similar-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.similar-grid .content-card {
  width: 100%;
}

.similar-grid .content-card__poster {
  aspect-ratio: 2/3;
}

/* Providers */
.providers-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.provider-badge {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--glass-border);
  border-radius: 10px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
}

.provider-badge:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
}

.provider-badge img {
  width: 24px;
  height: 24px;
  border-radius: 6px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE - Mobile First Approach
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* === TABLET (max 1200px) === */
@media (max-width: 1200px) {
  .detail-content-grid {
    grid-template-columns: 200px minmax(0, 1fr);
    gap: 24px;
  }
  
  .sidebar-column {
    display: none;
  }
  
  .detail-main-content {
    padding: 0 4% 100px;
  }
}

/* === MOBILE (max 768px) === */
@media (max-width: 768px) {
  /* Hero */
  .detail-hero {
    height: 28vh;
    min-height: 150px;
  }
  
  /* Hero Content Badge */
  .hero-content-badge {
    display: inline-flex;
    align-items: center;
    position: absolute;
    bottom: 8px;
    left: 10px;
    padding: 4px 8px;
    gap: 4px;
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 4px;
    color: var(--text-primary);
    z-index: 10;
  }
  
  .hero-content-badge .material-symbols-rounded {
    font-size: 12px;
    color: var(--gold-primary);
  }
  
  .trailer-btn {
    width: 40px;
    height: 40px;
  }
  
  .trailer-btn .material-symbols-rounded {
    font-size: 16px;
  }
  
  .trailer-text {
    display: none;
  }
  
  /* Navigation */
  .detail-top-nav {
    padding: 6px 10px;
  }
  
  .back-btn {
    width: 32px;
    height: 32px;
    padding: 0;
    justify-content: center;
    border-radius: 50%;
  }
  
  .back-btn span:not(.material-symbols-rounded) {
    display: none;
  }
  
  .nav-logo {
    font-size: 13px;
  }
  
  .nav-btn {
    width: 32px;
    height: 32px;
  }
  
  /* Main Content */
  .detail-main-content {
    padding: 10px 10px 80px;
    margin-top: 0;
  }

  .detail-content-grid {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  
  /* POSTER CARD */
  .poster-column {
    display: flex;
    flex-direction: row;
    align-items: stretch;
    gap: 10px;
    background: var(--void-surface);
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    padding: 10px;
    position: static;
    top: auto;
  }
  
  .poster-wrapper {
    width: 80px;
    min-width: 80px;
    flex-shrink: 0;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    overflow: hidden;
  }
  
  .poster-badge {
    padding: 2px 4px;
    font-size: 5px;
    gap: 2px;
    top: 3px;
    left: 3px;
    border-radius: 2px;
  }
  
  .poster-badge .material-symbols-rounded {
    font-size: 7px;
  }
  
  .poster-actions {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto auto;
    gap: 6px;
    align-content: start;
    margin-top: 0;
  }
  
  .action-btn-large {
    padding: 8px 6px;
    font-size: 10px;
    border-radius: 6px;
    justify-content: center;
    gap: 4px;
  }
  
  .action-btn-large .material-symbols-rounded {
    font-size: 16px;
  }
  
  .action-btn-large span:not(.material-symbols-rounded) {
    display: none;
  }
  
  .quick-stats {
    display: none;
  }
  
  /* INFO SECTION */
  .info-column {
    padding: 0;
  }
  
  /* Content badge - hide on mobile (shown in hero) */
  .info-column > .content-type-badge,
  .detail-page-wrapper .info-column .content-type-badge {
    display: none !important;
  }
  
  .detail-content-title {
    font-size: 18px;
    line-height: 1.2;
    margin-bottom: 6px;
  }
  
  .detail-content-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 4px 8px;
    margin-bottom: 10px;
  }
  
  .meta-item {
    font-size: 11px;
  }
  
  .meta-item .material-symbols-rounded {
    font-size: 12px;
  }
  
  .meta-divider {
    width: 3px;
    height: 3px;
  }
  
  /* RATING SECTION */
  .rating-section {
    display: flex;
    flex-direction: row;
    gap: 6px;
    padding: 0;
    background: transparent;
    border: none;
    margin-bottom: 8px;
  }
  
  .rating-box {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: var(--void-surface);
    border: 1px solid var(--glass-border);
    border-radius: 6px;
    padding: 8px 4px;
    text-align: center;
  }
  
  .rating-source {
    font-size: 7px;
    margin-bottom: 2px;
    letter-spacing: 0.2px;
    text-transform: uppercase;
    color: var(--text-muted);
  }
  
  .rating-value {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    font-size: 14px;
    font-weight: 700;
  }
  
  .rating-value .material-symbols-rounded {
    font-size: 12px;
  }
  
  .rating-count {
    display: none;
  }
  
  /* USER RATING */
  .user-rating-box {
    background: var(--void-surface);
    border: 1px solid var(--glass-border);
    border-radius: 6px;
    padding: 8px;
    margin-bottom: 10px;
    text-align: center;
  }
  
  .user-rating-box .user-rating-label {
    font-size: 8px;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.2px;
    color: var(--text-muted);
  }
  
  .user-rating-box .star-rating {
    display: flex;
    justify-content: center;
    gap: 2px;
  }
  
  .user-rating-box .star-rating .star {
    width: 24px;
    height: 24px;
    padding: 0;
    background: none;
    border: none;
    cursor: pointer;
  }
  
  .user-rating-box .star-rating .star .material-symbols-rounded {
    font-size: 22px;
  }
  
  .user-rating-box .user-rating-text {
    font-size: 11px;
    font-weight: 600;
    margin-top: 3px;
    color: var(--gold-primary);
  }
  
  /* GENRES */
  .genres {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 12px;
  }
  
  .genre-tag {
    padding: 5px 10px;
    font-size: 10px;
    border-radius: 5px;
  }
  
  /* SECTION TITLES */
  .section-title {
    font-size: 14px;
    margin-bottom: 8px;
  }
  
  .section-title .material-symbols-rounded {
    font-size: 16px;
  }
  
  /* OVERVIEW */
  .overview-text {
    font-size: 13px;
    line-height: 1.6;
    margin-bottom: 12px;
  }
  
  .expand-btn {
    padding: 6px 10px;
    font-size: 11px;
  }
  
  /* Navigation */
  .detail-top-nav {
    padding: 8px 12px;
  }
  
  .nav-left {
    gap: 8px;
  }
  
  .back-btn {
    width: 36px;
    height: 36px;
    padding: 0;
    justify-content: center;
    border-radius: 50%;
  }
  
  .back-btn span:not(.material-symbols-rounded) {
    display: none;
  }
  
  .nav-logo {
    font-size: 14px;
    letter-spacing: 2px;
  }
  
  .nav-right {
    gap: 4px;
  }
  
  .nav-btn {
    width: 34px;
    height: 34px;
  }
  
  /* Main Content */
  .detail-main-content {
    padding: 12px 12px 100px;
    margin-top: 0;
  }

  .detail-content-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  /* === MOBILE POSTER CARD === */
  .poster-column {
    position: relative;
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 10px;
    background: var(--void-surface);
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    padding: 10px;
  }
  
  .poster-wrapper {
    width: 85px;
    flex-shrink: 0;
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    overflow: hidden;
  }
  
  .poster-badge {
    padding: 2px 4px;
    font-size: 6px;
    top: 3px;
    left: 3px;
    border-radius: 3px;
    gap: 2px;
  }
  
  .poster-badge .material-symbols-rounded {
    font-size: 8px;
  }
  
  .poster-actions {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 6px;
    margin-top: 0;
    min-width: 0;
  }
  
  .action-btn-large {
    padding: 8px;
    font-size: 10px;
    border-radius: 6px;
    justify-content: center;
    min-width: 0;
  }
  
  .action-btn-large .material-symbols-rounded {
    font-size: 16px;
  }
  
  .action-btn-large span:not(.material-symbols-rounded) {
    display: none;
  }
  
  .quick-stats {
    display: none;
  }
  
  /* === MOBILE INFO SECTION === */
  .info-column {
    padding: 0;
  }
  
  /* Content type badge - Mobilde gizle (hero'da gÃ¶steriliyor) */
  .info-column > .content-type-badge,
  .detail-page-wrapper .info-column .content-type-badge {
    display: none !important;
  }
  
  .detail-content-title {
    font-size: 18px;
    line-height: 1.25;
    margin-bottom: 6px;
  }
  
  .detail-content-meta {
    gap: 4px 8px;
    margin-bottom: 10px;
    flex-wrap: wrap;
  }
  
  .meta-item {
    font-size: 11px;
  }
  
  .meta-item .material-symbols-rounded {
    font-size: 12px;
  }
  
  .meta-divider {
    width: 3px;
    height: 3px;
  }
  
  /* === MOBILE RATING SECTION === */
  .rating-section {
    display: flex;
    flex-direction: row;
    gap: 6px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 0;
    overflow: visible;
    margin-bottom: 10px;
  }
  
  .rating-box {
    flex: 1;
    background: var(--void-surface);
    border: 1px solid var(--glass-border);
    border-radius: 6px;
    padding: 6px 4px;
    text-align: center;
  }
  
  .rating-source {
    font-size: 7px;
    margin-bottom: 2px;
    letter-spacing: 0.2px;
  }
  
  .rating-value {
    font-size: 14px;
    gap: 2px;
  }
  
  .rating-value .material-symbols-rounded {
    font-size: 12px;
  }
  
  .rating-count {
    display: none;
  }
  
  /* === MOBILE USER RATING === */
  .user-rating-box {
    background: var(--void-surface);
    border: 1px solid var(--glass-border);
    border-radius: 6px;
    padding: 8px;
    margin-bottom: 10px;
  }
  
  .user-rating-box .user-rating-label {
    font-size: 8px;
    margin-bottom: 4px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 0.2px;
    color: var(--text-muted);
  }
  
  .user-rating-box .star-rating {
    gap: 1px;
    justify-content: center;
  }
  
  .user-rating-box .star-rating .star {
    width: 24px;
    height: 24px;
    padding: 0;
  }
  
  .user-rating-box .star-rating .star .material-symbols-rounded {
    font-size: 22px;
  }
  
  .user-rating-box .user-rating-text {
    font-size: 11px;
    font-weight: 600;
    margin-top: 3px;
    text-align: center;
    color: var(--gold-primary);
  }
  
  /* === MOBILE GENRES === */
  .genres {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 12px;
  }
  
  .genre-tag {
    padding: 6px 10px;
    font-size: 11px;
    border-radius: 6px;
  }
  
  /* === MOBILE OVERVIEW === */
  .section-title {
    font-size: 14px;
    margin-bottom: 8px;
  }
  
  .section-title .material-symbols-rounded {
    font-size: 16px;
  }
  
  .overview-text {
    font-size: 13px;
    line-height: 1.6;
    margin-bottom: 16px;
  }
  
  .expand-btn {
    padding: 6px 12px;
    font-size: 12px;
  }
  
  /* === MOBILE TABS === */
  .content-tabs {
    margin-top: 16px;
    background: var(--void-surface);
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    overflow: hidden;
  }
  
  .tabs-header {
    display: flex;
    overflow-x: auto;
    gap: 0;
    background: var(--void-elevated);
    border-bottom: 1px solid var(--glass-border);
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  
  .tabs-header::-webkit-scrollbar {
    display: none;
  }
  
  .tab-btn {
    flex: 1;
    min-width: max-content;
    padding: 10px 12px;
    font-size: 11px;
    white-space: nowrap;
    border-radius: 0;
    border-bottom: 2px solid transparent;
  }
  
  .tab-btn.active {
    border-bottom-color: var(--gold-primary);
  }
  
  .tab-btn .material-symbols-rounded {
    font-size: 16px;
  }
  
  .tab-btn .tab-count {
    font-size: 10px;
    padding: 2px 6px;
  }
  
  .tab-content {
    padding: 16px;
  }
  
  /* === MOBILE COMMENT FORM === */
  .comment-form-card {
    background: transparent;
    border: none;
    padding: 0;
    margin-bottom: 16px;
  }
  
  .comment-form-header {
    gap: 10px;
    margin-bottom: 12px;
  }
  
  .comment-form-avatar {
    width: 36px;
    height: 36px;
    font-size: 14px;
    border-radius: 50%;
  }
  
  .comment-form-title {
    font-size: 14px;
  }
  
  .comment-form-subtitle {
    font-size: 12px;
  }
  
  .comment-textarea {
    font-size: 14px;
    padding: 12px;
    min-height: 100px;
    border-radius: 12px;
  }
  
  .comment-form-options {
    flex-direction: column;
    gap: 12px;
    margin-top: 12px;
  }
  
  .form-options-left {
    flex-direction: column;
    gap: 12px;
    width: 100%;
  }
  
  .form-rating {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
  }
  
  .form-rating-label {
    font-size: 13px;
  }
  
  .form-stars {
    display: flex;
    gap: 2px;
  }
  
  .form-stars .star .material-symbols-rounded {
    font-size: 20px;
  }
  
  .spoiler-toggle {
    font-size: 13px;
  }
  
  .submit-comment-btn {
    width: 100%;
    padding: 14px;
    font-size: 14px;
    border-radius: 10px;
  }
  
  /* === MOBILE REVIEWS === */
  .review-card {
    padding: 14px;
    border-radius: 12px;
    margin-bottom: 12px;
  }
  
  .review-header {
    flex-direction: row;
    align-items: center;
    gap: 10px;
  }
  
  .review-user-avatar {
    width: 36px;
    height: 36px;
  }
  
  .review-user-info {
    flex: 1;
  }
  
  .review-username {
    font-size: 13px;
  }
  
  .review-date {
    font-size: 11px;
  }
  
  .review-content {
    font-size: 14px;
    line-height: 1.6;
    margin-top: 10px;
  }
  
  /* === MOBILE CAST === */
  .cast-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
  }
  
  .cast-card {
    padding: 10px;
    border-radius: 10px;
  }
  
  .cast-avatar {
    width: 44px;
    height: 44px;
    margin-bottom: 6px;
  }
  
  .cast-name {
    font-size: 11px;
  }
  
  .cast-role {
    font-size: 9px;
  }
  
  /* === MOBILE SIMILAR === */
  .similar-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }
  
  .similar-grid .content-card {
    width: 100%;
  }

  /* === MOBILE SIDEBAR (AÅŸaÄŸÄ±da gÃ¶ster) === */
  .sidebar-column {
    display: block;
    margin-top: 16px;
  }
  
  .sidebar-card {
    background: var(--void-surface);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 12px;
  }
  
  .sidebar-title {
    font-size: 14px;
    margin-bottom: 12px;
  }
  
  .sidebar-title .material-symbols-rounded {
    font-size: 18px;
  }
  
  .info-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }
  
  .info-item {
    flex-direction: column;
    gap: 2px;
  }
  
  .info-label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .info-value {
    font-size: 13px;
    text-align: left;
    color: var(--text-primary);
  }
  
  /* External Links - Yatay scroll */
  .external-links {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding-bottom: 4px;
    -webkit-overflow-scrolling: touch;
  }
  
  .external-link {
    flex-shrink: 0;
    padding: 10px 16px;
    font-size: 12px;
    border-radius: 20px;
  }
  
  /* Providers - Yatay scroll */
  .providers-list {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding-bottom: 4px;
    -webkit-overflow-scrolling: touch;
  }
  
  .provider-badge {
    flex-shrink: 0;
    padding: 8px 14px;
    font-size: 11px;
    border-radius: 20px;
  }
  
  .provider-badge img {
    width: 20px;
    height: 20px;
  }
}

/* === SMALL MOBILE (max 480px) === */
@media (max-width: 480px) {
  .detail-main-content {
    padding: 10px 10px 90px;
  }
  
  .detail-hero {
    height: 26vh;
    min-height: 140px;
  }
  
  .hero-content-badge {
    bottom: 8px;
    left: 10px;
    padding: 4px 8px;
    font-size: 9px;
    gap: 4px;
  }
  
  .hero-content-badge .material-symbols-rounded {
    font-size: 12px;
  }
  
  .poster-column {
    padding: 8px;
    gap: 8px;
    border-radius: 8px;
  }
  
  .poster-wrapper {
    width: 75px;
    border-radius: 5px;
  }
  
  .poster-badge {
    padding: 2px 3px;
    font-size: 5px;
    top: 2px;
    left: 2px;
  }
  
  .poster-badge .material-symbols-rounded {
    font-size: 7px;
  }
  
  .action-btn-large {
    padding: 6px;
  }
  
  .action-btn-large .material-symbols-rounded {
    font-size: 14px;
  }
  
  .detail-content-title {
    font-size: 16px;
  }
  
  .detail-content-meta {
    gap: 3px 6px;
    margin-bottom: 8px;
  }
  
  .meta-item {
    font-size: 10px;
  }
  
  /* Rating boxes */
  .rating-section {
    gap: 4px;
  }
  
  .rating-box {
    padding: 5px 3px;
    border-radius: 5px;
  }
  
  .rating-value {
    font-size: 13px;
  }
  
  .rating-source {
    font-size: 6px;
  }
  
  /* User rating */
  .user-rating-box {
    padding: 6px;
    border-radius: 5px;
  }
  
  .user-rating-box .star-rating .star {
    width: 22px;
    height: 22px;
  }
  
  .user-rating-box .star-rating .star .material-symbols-rounded {
    font-size: 20px;
  }
  
  .genres {
    gap: 4px;
  }
  
  .genre-tag {
    padding: 4px 8px;
    font-size: 10px;
    border-radius: 5px;
  }
  
  .section-title {
    font-size: 13px;
  }
  
  .overview-text {
    font-size: 12px;
  }
  
  .cast-grid,
  .similar-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .info-list {
    grid-template-columns: 1fr;
  }
  
  .tab-btn {
    padding: 8px 10px;
    font-size: 10px;
  }
}

/* === VERY SMALL (max 360px) === */
@media (max-width: 360px) {
  .detail-main-content {
    padding: 8px 8px 80px;
  }
  
  .detail-hero {
    height: 25vh;
    min-height: 130px;
  }
  
  .poster-column {
    flex-direction: row;
    align-items: flex-start;
    padding: 8px;
  }
  
  .poster-wrapper {
    width: 70px;
  }
  
  .poster-actions {
    gap: 4px;
  }
  
  .action-btn-large {
    min-width: calc(50% - 2px);
    padding: 5px 6px;
  }
  
  .detail-content-title {
    font-size: 15px;
  }
  
  .detail-content-meta {
    font-size: 10px;
  }
  
  .rating-section {
    flex-direction: row;
    gap: 4px;
  }
  
  .rating-box {
    padding: 5px 3px;
  }
  
  .rating-value {
    font-size: 13px;
  }
  
  .rating-source {
    font-size: 6px;
  }
  
  .user-rating-box .star-rating .star {
    width: 22px;
    height: 22px;
  }
  
  .user-rating-box .star-rating .star .material-symbols-rounded {
    font-size: 20px;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING SKELETON - GeliÅŸmiÅŸ Shimmer Animasyonlu
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.detail-skeleton {
  min-height: 100vh;
  background: var(--void);
  width: 100%;
}

/* Skeleton iÃ§indeki main-content merkeze hizalansÄ±n */
.detail-skeleton .detail-main-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px;
}

.detail-skeleton .detail-content-grid {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 40px;
  padding-top: 24px;
}

/* Shimmer Animasyonu */
@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    var(--void-surface) 25%,
    var(--void-elevated) 50%,
    var(--void-surface) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

/* Hero Skeleton */
.skeleton-hero {
  position: relative;
  height: 50vh;
  min-height: 350px;
  background: linear-gradient(
    135deg,
    var(--void-surface) 0%,
    var(--void-elevated) 50%,
    var(--void-surface) 100%
  );
  background-size: 200% 200%;
  animation: skeleton-shimmer 2s ease-in-out infinite;
}

.skeleton-hero-gradient {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 50%;
  background: linear-gradient(to top, var(--void) 0%, transparent 100%);
}

/* Poster Skeleton */
.detail-skeleton .skeleton-poster {
  width: 100%;
  aspect-ratio: 2/3;
  background: var(--void-surface);
  border-radius: 20px;
  margin-bottom: 16px;
}

/* Actions Skeleton */
.skeleton-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.skeleton-btn {
  height: 48px;
  background: var(--void-surface);
  border-radius: 12px;
}

/* Badge Skeleton */
.skeleton-badge {
  width: 80px;
  height: 28px;
  background: var(--void-surface);
  border-radius: 6px;
  margin-bottom: 16px;
}

/* Title Skeleton */
.detail-skeleton .skeleton-title {
  height: 48px;
  width: 70%;
  background: var(--void-surface);
  border-radius: 8px;
  margin-bottom: 16px;
}

/* Meta Skeleton */
.skeleton-meta {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
}

.skeleton-meta-item {
  width: 80px;
  height: 20px;
  background: var(--void-surface);
  border-radius: 4px;
}

/* Overview Skeleton */
.skeleton-overview {
  margin-bottom: 24px;
}

.detail-skeleton .skeleton-text {
  height: 16px;
  background: var(--void-surface);
  border-radius: 4px;
  margin-bottom: 10px;
}

/* Rating Box Skeleton */
.skeleton-rating-box {
  width: 200px;
  height: 60px;
  background: var(--void-surface);
  border-radius: 12px;
}

/* Tabs Skeleton */
.skeleton-tabs {
  display: flex;
  gap: 8px;
  padding: 20px 0;
  margin-top: 32px;
  border-top: 1px solid var(--void-border);
}

.skeleton-tab {
  width: 100px;
  height: 40px;
  background: var(--void-surface);
  border-radius: 10px;
}

/* Content Area Skeleton */
.skeleton-content-area {
  padding: 24px 0;
}

.skeleton-section-title {
  width: 150px;
  height: 24px;
  background: var(--void-surface);
  border-radius: 6px;
  margin-bottom: 20px;
}

.skeleton-cards-row {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 16px;
}

.skeleton-card {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.skeleton-card-poster {
  aspect-ratio: 2/3;
  background: var(--void-surface);
  border-radius: 12px;
}

.skeleton-card-title {
  height: 16px;
  background: var(--void-surface);
  border-radius: 4px;
}

/* Responsive */
@media (max-width: 768px) {
  .skeleton-hero {
    height: 40vh;
    min-height: 280px;
  }
  
  .detail-skeleton .detail-content-grid {
    grid-template-columns: 1fr;
    gap: 24px;
    padding-top: 16px;
  }
  
  .detail-skeleton .poster-column {
    display: flex;
    flex-direction: row;
    gap: 16px;
    align-items: flex-start;
  }
  
  .detail-skeleton .skeleton-poster {
    width: 120px;
    flex-shrink: 0;
  }
  
  .detail-skeleton .skeleton-title {
    height: 36px;
    width: 90%;
  }
  
  .skeleton-cards-row {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY CARD - GeliÅŸmiÅŸ Aktivite KartÄ± Stilleri
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.activity-card-wrapper {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 16px;
  transition: all 0.3s ease;
}

.activity-card-wrapper:hover {
  border-color: rgba(212, 168, 83, 0.2);
  background: rgba(255, 255, 255, 0.04);
}

.activity-card-header {
  display: flex;
  align-items: flex-start;
}

.activity-header-info {
  display: flex;
  flex-direction: column;
}

.activity-header-text {
  display: flex;
  flex-wrap: wrap;
  align-items: baseline;
  gap: 4px;
}

.activity-username:hover {
  color: var(--gold-primary) !important;
  text-decoration: underline;
}

/* Activity Stars - Puan gÃ¶sterimi */
.activity-stars {
  display: flex;
  align-items: center;
  gap: 2px;
  margin-top: 4px;
}

.activity-stars .material-symbols-rounded.filled {
  font-variation-settings: 'FILL' 1;
}

.activity-rating-value {
  margin-left: 8px;
  font-weight: 600;
  color: var(--gold-primary);
  font-size: 14px;
}

/* Activity Rating Content - Puanlama aktivitesi */
.activity-rating-content:hover {
  background: rgba(212, 168, 83, 0.08) !important;
}

/* Activity Review Content - Yorum aktivitesi */
.activity-review-content:hover {
  background: rgba(255, 255, 255, 0.04) !important;
  border-color: rgba(255, 255, 255, 0.1) !important;
}

/* Activity Action Buttons */
.activity-action-btn:hover {
  background: rgba(255, 255, 255, 0.06) !important;
}

.activity-action-btn.liked:hover {
  background: rgba(239, 68, 68, 0.1) !important;
}


========== saga.client\src\pages\glass\DetailPage.tsx ==========

import { useState, useEffect, useCallback, useRef } from 'react';
import { useParams, useNavigate, useLocation } from 'react-router-dom';
import { formatDistanceToNow } from 'date-fns';
import { tr } from 'date-fns/locale';
import { useAuth } from '../../context/AuthContext';
import { icerikApi, yorumApi, puanlamaApi, kutuphaneApi, listeApi, aktiviteApi } from '../../services/api';
import { getDetailCache, setDetailCache, updateCachedYorumlar, updateCachedListeIds, updateCachedPuan } from '../../services/detailCache';
import type { Icerik, IcerikListItem, Yorum, YorumCreateDto, Liste, Aktivite } from '../../services/api';
import { ContentCard, icerikToCardData } from '../../components/ui';
import { FeedActivityCard } from './FeedPage';
import './DetailPage.css';
import './FeedPage.css'; // FeedActivityCard stilleri iÃ§in

// ============================================
// HELPER FUNCTIONS
// ============================================

function formatDuration(minutes?: number): string {
  if (!minutes) return '';
  const hours = Math.floor(minutes / 60);
  const mins = minutes % 60;
  return hours > 0 ? `${hours}s ${mins}dk` : `${mins}dk`;
}

function formatNumber(num?: number): string {
  if (!num) return '0';
  if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
  if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
  return num.toString();
}

// ============================================
// STAR RATING COMPONENT (10-star)
// ============================================

interface StarRatingProps {
  value: number;
  onChange?: (val: number) => void;
  readonly?: boolean;
  size?: 'sm' | 'md' | 'lg';
}

function StarRating({ value, onChange, readonly = false }: StarRatingProps) {
  const [hoverValue, setHoverValue] = useState(0);

  const handleClick = (star: number) => {
    if (!readonly && onChange) {
      onChange(star);
    }
  };

  return (
    <div className="star-rating">
      {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((star) => (
        <button
          key={star}
          type="button"
          className={`star ${(hoverValue || value) >= star ? 'active' : ''}`}
          onClick={() => handleClick(star)}
          onMouseEnter={() => !readonly && setHoverValue(star)}
          onMouseLeave={() => !readonly && setHoverValue(0)}
          disabled={readonly}
        >
          <span className="material-symbols-rounded">star</span>
        </button>
      ))}
    </div>
  );
}

// ============================================
// MAIN DETAIL PAGE COMPONENT
// ============================================

export default function DetailPage() {
  const { id } = useParams<{ tip: string; id: string }>();
  const navigate = useNavigate();
  const location = useLocation();
  const { user, requireAuth } = useAuth();

  // Content state
  const [icerik, setIcerik] = useState<Icerik | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // User interaction states
  const [kullaniciPuani, setKullaniciPuani] = useState(0);
  const [kutuphaneDurumu, setKutuphaneDurumu] = useState<string | undefined>();
  const [savingRating, setSavingRating] = useState(false);
  const [savingLibrary, setSavingLibrary] = useState(false);

  // Comment states
  const [yorumlar, setYorumlar] = useState<Yorum[]>([]);
  const [yorumText, setYorumText] = useState('');
  const [yorumPuan, setYorumPuan] = useState(0);
  const [spoilerIceriyor, setSpoilerIceriyor] = useState(false);
  const [yorumLoading, setYorumLoading] = useState(false);
  const [showAllComments, setShowAllComments] = useState(false);
  const [expandedComments, setExpandedComments] = useState<Set<number>>(new Set());
  const [revealedSpoilers, setRevealedSpoilers] = useState<Set<number>>(new Set());
  const [replyingTo, setReplyingTo] = useState<Yorum | null>(null);

  // Tab states
  const [activeTab, setActiveTab] = useState<'yorumlar' | 'listeler' | 'aktiviteler'>('yorumlar');
  const [listeler, setListeler] = useState<Liste[]>([]);
  const [aktiviteler, setAktiviteler] = useState<Aktivite[]>([]);

  // Sidebar states
  const [similarContent, setSimilarContent] = useState<IcerikListItem[]>([]);

  // Liste dropdown state
  const [listeDropdownOpen, setListeDropdownOpen] = useState(false);
  const [kullaniciListeleri, setKullaniciListeleri] = useState<Liste[]>([]);
  const [icerikListeIds, setIcerikListeIds] = useState<number[]>([]);
  const [listeLoading, setListeLoading] = useState(false);

  // UI states
  const [overviewExpanded, setOverviewExpanded] = useState(false);

  // Library dropdown state
  const [libraryDropdownOpen, setLibraryDropdownOpen] = useState(false);

  // Lazy loading ref - Ã§ift yÃ¼klemeyi Ã¶nle
  const isDataLoadedRef = useRef(false);
  const currentIdRef = useRef<string | undefined>(undefined);

  // Sayfa aÃ§Ä±lÄ±ÅŸÄ±nda en Ã¼ste scroll et
  useEffect(() => {
    window.scrollTo(0, 0);
  }, [id]); // id deÄŸiÅŸince (yeni iÃ§erik) tekrar scroll et

  // Load content with cache
  const loadContent = useCallback(async (forceRefresh = false) => {
    if (!id) return;

    const icerikId = parseInt(id);

    // Cache kontrolÃ¼
    if (!forceRefresh) {
      const cached = getDetailCache(icerikId);
      if (cached) {
        // Cache'den yÃ¼kle
        setIcerik(cached.icerik);
        setYorumlar(cached.yorumlar);
        setListeler(cached.listeler);
        setSimilarContent(cached.similarContent);
        setAktiviteler(cached.aktiviteler);
        setKullaniciListeleri(cached.kullaniciListeleri);
        setIcerikListeIds(cached.icerikListeIds);

        if (cached.icerik.kullaniciPuani) {
          setKullaniciPuani(cached.icerik.kullaniciPuani);
        }
        if (cached.icerik.kullanicininDurumu) {
          setKutuphaneDurumu(cached.icerik.kullanicininDurumu);
        }

        setLoading(false);
        return;
      }
    }

    setLoading(true);
    setError(null);

    try {
      const [icerikData, yorumlarData] = await Promise.all([
        icerikApi.getById(icerikId),
        yorumApi.getIcerikYorumlari(icerikId, { sayfaBoyutu: 20 }),
      ]);

      console.log('Ä°Ã§erik detaylarÄ±:', icerikData);
      setIcerik(icerikData);
      setYorumlar(yorumlarData.data);

      // User states
      if (icerikData.kullaniciPuani) {
        setKullaniciPuani(icerikData.kullaniciPuani);
      }
      if (icerikData.kullanicininDurumu) {
        setKutuphaneDurumu(icerikData.kullanicininDurumu);
      }

      // Parallel yÃ¼kleme iÃ§in deÄŸiÅŸkenler
      let listsData: Liste[] = [];
      let listIdsList: number[] = [];
      let similarData: IcerikListItem[] = [];
      let userLists: Liste[] = [];
      let contentActivities: Aktivite[] = [];

      // Paralel olarak diÄŸer verileri yÃ¼kle
      const [listsResult, similarResult, userListsResult, feedResult] = await Promise.allSettled([
        listeApi.getIcerikListeleri(icerikId),
        icerikApi.getSimilar(icerikId, icerikData.tur, 6),
        listeApi.getMyListeler(),
        aktiviteApi.getGenelFeed({ limit: 50 }),
      ]);

      if (listsResult.status === 'fulfilled') {
        listsData = listsResult.value;
        listIdsList = listsData.map((l: Liste) => l.id);
        setListeler(listsData);
        setIcerikListeIds(listIdsList);
      }

      if (similarResult.status === 'fulfilled') {
        similarData = similarResult.value;
        setSimilarContent(similarData);
      }

      if (userListsResult.status === 'fulfilled') {
        userLists = userListsResult.value;
        setKullaniciListeleri(userLists);
      }

      if (feedResult.status === 'fulfilled') {
        contentActivities = feedResult.value.data
          .filter((a: Aktivite) => a.icerikId === icerikId)
          .slice(0, 10);
        setAktiviteler(contentActivities);
      }

      // Cache'e kaydet
      setDetailCache(icerikId, {
        icerik: icerikData,
        yorumlar: yorumlarData.data,
        listeler: listsData,
        similarContent: similarData,
        aktiviteler: contentActivities,
        kullaniciListeleri: userLists,
        icerikListeIds: listIdsList,
      });

    } catch (err: unknown) {
      console.error('Ä°Ã§erik yÃ¼kleme hatasÄ±:', err);
      const errorMessage = err instanceof Error ? err.message : 'Ä°Ã§erik yÃ¼klenirken bir hata oluÅŸtu.';
      setError(errorMessage);
    } finally {
      setLoading(false);
    }
  }, [id]);

  // Ä°lk yÃ¼kleme
  useEffect(() => {
    if (id && id !== currentIdRef.current) {
      currentIdRef.current = id;
      isDataLoadedRef.current = false;
    }

    if (!isDataLoadedRef.current && id) {
      isDataLoadedRef.current = true;
      loadContent();
    }
  }, [id, loadContent]);

  // URL hash'e gÃ¶re yoruma scroll et
  useEffect(() => {
    if (!loading && yorumlar.length > 0) {
      const hash = location.hash;
      if (hash && hash.startsWith('#yorum-')) {
        // Yorumlar tab'Ä±na geÃ§
        setActiveTab('yorumlar');
        
        // KÄ±sa bir gecikme ile scroll yap (DOM render iÃ§in)
        setTimeout(() => {
          const elementId = hash.substring(1); // # iÅŸaretini kaldÄ±r
          const element = document.getElementById(elementId);
          if (element) {
            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            // Vurgulama efekti
            element.classList.add('highlight-comment');
            setTimeout(() => {
              element.classList.remove('highlight-comment');
            }, 3000);
          }
        }, 300);
      }
    }
  }, [loading, yorumlar, location.hash]);

  // Handle rating
  const handleRating = async (puan: number) => {
    if (!requireAuth('puanlamak')) return;
    if (!icerik) return;

    setSavingRating(true);
    try {
      await puanlamaApi.puanla({ icerikId: icerik.id, puan });
      setKullaniciPuani(puan);
      try {
        const refreshed = await icerikApi.getById(icerik.id);
        setIcerik(refreshed);
        // Cache'i gÃ¼ncelle
        updateCachedPuan(icerik.id, refreshed);
        if (typeof window !== 'undefined') {
          window.dispatchEvent(new CustomEvent('saga-rating-updated', {
            detail: {
              icerikId: refreshed.id,
              saga: refreshed.ortalamaPuan ?? null,
              harici: refreshed.hariciPuan ?? null,
            },
          }));
        }
      } catch (refreshError) {
        console.error('Puan gÃ¼ncellenirken iÃ§erik yenileme hatasÄ±:', refreshError);
        if (typeof window !== 'undefined') {
          window.dispatchEvent(new CustomEvent('saga-rating-updated', {
            detail: { icerikId: icerik.id },
          }));
        }
      }
    } catch (err) {
      console.error('Puanlama hatasÄ±:', err);
    } finally {
      setSavingRating(false);
    }
  };

  // Handle library status change
  const handleLibraryChange = async (durum: string) => {
    if (!requireAuth('kÃ¼tÃ¼phaneye eklemek')) return;
    if (!icerik) return;

    setSavingLibrary(true);
    try {
      if (durum === 'kaldir') {
        // KÃ¼tÃ¼phaneden Ã§Ä±kar
        await kutuphaneApi.kaldir(icerik.id);
        setKutuphaneDurumu(undefined);
      } else {
        await kutuphaneApi.durumGuncelle(icerik.id, durum);
        setKutuphaneDurumu(durum);
      }
      setLibraryDropdownOpen(false);
    } catch (err) {
      console.error('KÃ¼tÃ¼phane hatasÄ±:', err);
    } finally {
      setSavingLibrary(false);
    }
  };

  // Handle liste toggle
  const handleListeToggle = async (listeId: number) => {
    if (!requireAuth('listeye eklemek')) return;
    if (!icerik) return;

    setListeLoading(true);
    try {
      let newListeIds: number[];
      if (icerikListeIds.includes(listeId)) {
        await listeApi.removeIcerik(listeId, icerik.id);
        newListeIds = icerikListeIds.filter((id) => id !== listeId);
      } else {
        await listeApi.addIcerik(listeId, icerik.id);
        newListeIds = [...icerikListeIds, listeId];
      }
      setIcerikListeIds(newListeIds);
      // Cache'i gÃ¼ncelle
      updateCachedListeIds(icerik.id, newListeIds);
    } catch (err) {
      console.error('Liste gÃ¼ncelleme hatasÄ±:', err);
    } finally {
      setListeLoading(false);
    }
  };

  // Handle comment submit
  const handleCommentSubmit = async () => {
    if (!requireAuth('yorum yapmak')) return;
    if (!icerik || !yorumText.trim()) return;

    setYorumLoading(true);
    try {
      // YanÄ±tÄ±n yanÄ±tÄ± ise ana yoruma baÄŸla
      const ustYorumId = replyingTo?.ustYorumId || replyingTo?.id;
      
      const dto: YorumCreateDto = {
        icerikId: icerik.id,
        icerik: yorumText,
        puan: !replyingTo && yorumPuan > 0 ? yorumPuan : undefined, // YanÄ±tlarda puan yok
        spoilerIceriyor,
        ustYorumId: ustYorumId, // YanÄ±t ise Ã¼st yorum ID'si (her zaman ana yorum)
      };

      const yeniYorum = await yorumApi.create(dto);
      
      if (replyingTo) {
        // Ana yorumun ID'sini bul
        const anaYorumId = replyingTo.ustYorumId || replyingTo.id;
        
        // YanÄ±tÄ± ana yorumun yanÄ±tlar listesine ekle
        const updatedYorumlar = yorumlar.map((y) =>
          y.id === anaYorumId
            ? { ...y, yanitlar: [...(y.yanitlar || []), yeniYorum] }
            : y
        );
        setYorumlar(updatedYorumlar);
        updateCachedYorumlar(icerik.id, updatedYorumlar);
        setReplyingTo(null);
      } else {
        // Normal yorum ise baÅŸa ekle
        const updatedYorumlar = [yeniYorum, ...yorumlar];
        setYorumlar(updatedYorumlar);
        updateCachedYorumlar(icerik.id, updatedYorumlar);
      }
      
      setYorumText('');
      setYorumPuan(0);
      setSpoilerIceriyor(false);
    } catch (err: unknown) {
      console.error('Yorum hatasÄ±:', err);
    } finally {
      setYorumLoading(false);
    }
  };

  // Handle reply button click
  const handleReplyClick = (yorum: Yorum) => {
    if (!requireAuth('yanÄ±tlamak')) return;
    setReplyingTo(yorum);
    // Yorum formuna scroll
    document.getElementById('yorum-form')?.scrollIntoView({ behavior: 'smooth', block: 'center' });
  };

  // Cancel reply
  const cancelReply = () => {
    setReplyingTo(null);
  };

  // Handle comment like (ana yorumlar ve yanÄ±tlar iÃ§in)
  const handleLikeComment = async (yorumId: number) => {
    if (!requireAuth('beÄŸenmek')) return;

    try {
      const result = await yorumApi.toggleBegeni(yorumId);
      setYorumlar((prev) =>
        prev.map((y) => {
          // Ana yorum mu kontrol et
          if (y.id === yorumId) {
            return { ...y, kullaniciBegendiMi: result.begendi, begeniSayisi: result.begeniSayisi };
          }
          // YanÄ±tlarda mÄ± kontrol et
          if (y.yanitlar && y.yanitlar.length > 0) {
            const updatedYanitlar = y.yanitlar.map((yanit) =>
              yanit.id === yorumId
                ? { ...yanit, kullaniciBegendiMi: result.begendi, begeniSayisi: result.begeniSayisi }
                : yanit
            );
            return { ...y, yanitlar: updatedYanitlar };
          }
          return y;
        })
      );
    } catch (err) {
      console.error('BeÄŸeni hatasÄ±:', err);
    }
  };

  // Handle comment delete
  const handleDeleteComment = async (yorumId: number) => {
    if (!window.confirm('Bu yorumu silmek istediÄŸinize emin misiniz?')) return;
    if (!icerik) return;

    try {
      await yorumApi.delete(yorumId);
      const updatedYorumlar = yorumlar.filter((y) => y.id !== yorumId);
      setYorumlar(updatedYorumlar);
      updateCachedYorumlar(icerik.id, updatedYorumlar);
    } catch (err) {
      console.error('Yorum silme hatasÄ±:', err);
    }
  };

  // Loading state
  if (loading) {
    return (
      <div className="detail-page">
        <div className="detail-skeleton">
          {/* Hero Skeleton */}
          <div className="skeleton-hero">
            <div className="skeleton-hero-gradient"></div>
          </div>
          
          {/* Main Content Skeleton */}
          <div className="detail-main-content">
            <div className="detail-content-grid">
              {/* Poster Column */}
              <div className="poster-column">
                <div className="skeleton-poster skeleton-shimmer"></div>
                <div className="skeleton-actions">
                  <div className="skeleton-btn skeleton-shimmer"></div>
                  <div className="skeleton-btn skeleton-shimmer"></div>
                </div>
              </div>
              
              {/* Info Column */}
              <div className="info-column">
                <div className="skeleton-badge skeleton-shimmer"></div>
                <div className="skeleton-title skeleton-shimmer"></div>
                <div className="skeleton-meta">
                  <div className="skeleton-meta-item skeleton-shimmer"></div>
                  <div className="skeleton-meta-item skeleton-shimmer"></div>
                  <div className="skeleton-meta-item skeleton-shimmer"></div>
                </div>
                <div className="skeleton-overview">
                  <div className="skeleton-text skeleton-shimmer"></div>
                  <div className="skeleton-text skeleton-shimmer" style={{ width: '90%' }}></div>
                  <div className="skeleton-text skeleton-shimmer" style={{ width: '75%' }}></div>
                </div>
                <div className="skeleton-rating-box skeleton-shimmer"></div>
              </div>
            </div>
            
            {/* Tabs Skeleton */}
            <div className="skeleton-tabs">
              <div className="skeleton-tab skeleton-shimmer"></div>
              <div className="skeleton-tab skeleton-shimmer"></div>
              <div className="skeleton-tab skeleton-shimmer"></div>
            </div>
            
            {/* Content Skeleton */}
            <div className="skeleton-content-area">
              <div className="skeleton-section-title skeleton-shimmer"></div>
              <div className="skeleton-cards-row">
                {[1, 2, 3, 4].map((i) => (
                  <div key={i} className="skeleton-card">
                    <div className="skeleton-card-poster skeleton-shimmer"></div>
                    <div className="skeleton-card-title skeleton-shimmer"></div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // Error state
  if (error || !icerik) {
    return (
      <div className="detail-main-content" style={{ paddingTop: '150px' }}>
        <div className="sidebar-card" style={{ textAlign: 'center', maxWidth: '500px', margin: '0 auto' }}>
          <span className="material-symbols-rounded" style={{ fontSize: '48px', color: 'var(--error)', marginBottom: '16px' }}>
            error
          </span>
          <h2 style={{ marginBottom: '8px' }}>Ä°Ã§erik BulunamadÄ±</h2>
          <p style={{ color: 'var(--text-muted)', marginBottom: '24px' }}>
            {error || 'AradÄ±ÄŸÄ±nÄ±z iÃ§erik mevcut deÄŸil.'}
          </p>
          <button className="action-btn-large primary" onClick={() => navigate(-1)}>
            <span className="material-symbols-rounded">arrow_back</span>
            Geri DÃ¶n
          </button>
        </div>
      </div>
    );
  }

  const yil = icerik.yayinTarihi?.split('-')[0];
  const backdropUrl = icerik.posterUrl?.replace('/w500/', '/original/') || icerik.posterUrl;

  // Library status options
  const getLibraryStatuses = () => {
    if (icerik.tur === 'Film' || icerik.tur === 'Dizi') {
      return [
        { value: 'devam_ediyor', label: 'Ä°zleniyor', icon: 'play_arrow' },
        { value: 'izlendi', label: 'Ä°zlendi', icon: 'check' },
        { value: 'izlenecek', label: 'Ä°zlenecek', icon: 'visibility' },
        { value: 'kaldir', label: 'KÃ¼tÃ¼phaneden Ã‡Ä±kar', icon: 'delete', isDanger: true },
      ];
    }
    return [
      { value: 'devam_ediyor', label: 'Okunuyor', icon: 'auto_stories' },
      { value: 'okundu', label: 'Okundu', icon: 'check' },
      { value: 'okunacak', label: 'Okunacak', icon: 'bookmark' },
      { value: 'kaldir', label: 'KÃ¼tÃ¼phaneden Ã‡Ä±kar', icon: 'delete', isDanger: true },
    ];
  };

  const libraryStatuses = getLibraryStatuses();
  const currentLibraryLabel = libraryStatuses.find((s) => s.value === kutuphaneDurumu)?.label || 'KÃ¼tÃ¼phaneye Ekle';

  return (
    <div className="detail-page-wrapper">
      {/* Hero Section */}
      <section className="detail-hero">
        <div 
          className="hero-backdrop" 
          style={{ backgroundImage: `url(${backdropUrl})` }}
        ></div>
        <div className="hero-overlay"></div>
        
        {/* Mobile Content Type Badge */}
        <div className="hero-content-badge">
          <span className="material-symbols-rounded">
            {icerik.tur === 'Film' ? 'movie' : icerik.tur === 'Dizi' ? 'tv' : 'menu_book'}
          </span>
          {icerik.tur === 'Film' ? 'FÄ°LM' : icerik.tur === 'Dizi' ? 'DÄ°ZÄ°' : 'KÄ°TAP'}
        </div>
        
        {/* Trailer Button - Only for films and TV shows */}
        {(icerik.tur === 'Film' || icerik.tur === 'Dizi') && (
          <>
            <button className="trailer-btn" title="FragmanÄ± Ä°zle">
              <span className="material-symbols-rounded">play_arrow</span>
            </button>
            <span className="trailer-text">FragmanÄ± Ä°zle</span>
          </>
        )}
      </section>

      {/* Main Content */}
      <main className="detail-main-content">
        <div className="detail-content-grid">
          {/* LEFT COLUMN - Poster & Actions */}
          <aside className="poster-column">
            <div className="poster-wrapper">
              {icerik.posterUrl ? (
                <img src={icerik.posterUrl} alt={icerik.baslik} />
              ) : (
                <div style={{ 
                  width: '100%', 
                  aspectRatio: '2/3', 
                  background: 'var(--void-surface)', 
                  display: 'flex', 
                  alignItems: 'center', 
                  justifyContent: 'center' 
                }}>
                  <span className="material-symbols-rounded" style={{ fontSize: '64px', color: 'var(--text-muted)' }}>
                    {icerik.tur === 'Film' ? 'movie' : icerik.tur === 'Dizi' ? 'tv' : 'menu_book'}
                  </span>
                </div>
              )}
              {icerik.hariciPuan && icerik.hariciPuan >= 8 && (
                <div className="poster-badge">
                  <span className="material-symbols-rounded">workspace_premium</span>
                  TOP RATED
                </div>
              )}
            </div>

            {/* Action Buttons */}
            <div className="poster-actions">
              {/* Library Dropdown */}
              <div style={{ flex: 1, position: 'relative' }}>
                <button 
                  className={`action-btn-large ${kutuphaneDurumu ? 'primary' : 'secondary'}`}
                  style={{ width: '100%' }}
                  onClick={() => setLibraryDropdownOpen(!libraryDropdownOpen)}
                  disabled={savingLibrary}
                >
                  <span className="material-symbols-rounded">
                    {kutuphaneDurumu ? 'check' : 'add'}
                  </span>
                  {currentLibraryLabel}
                </button>
                
                {libraryDropdownOpen && (
                  <>
                    <div 
                      style={{ position: 'fixed', inset: 0, zIndex: 40 }} 
                      onClick={() => setLibraryDropdownOpen(false)} 
                    />
                    <div className="sidebar-card" style={{ 
                      position: 'absolute', 
                      top: '100%', 
                      left: 0, 
                      right: 0, 
                      marginTop: '8px', 
                      padding: '8px',
                      zIndex: 50 
                    }}>
                      {libraryStatuses
                        .filter(status => status.value !== 'kaldir' || kutuphaneDurumu)
                        .map((status) => (
                        <button
                          key={status.value}
                          onClick={() => handleLibraryChange(status.value)}
                          style={{
                            width: '100%',
                            display: 'flex',
                            alignItems: 'center',
                            gap: '8px',
                            padding: '12px',
                            background: kutuphaneDurumu === status.value ? 'rgba(212, 168, 83, 0.15)' : 'transparent',
                            border: 'none',
                            borderRadius: '8px',
                            color: status.isDanger ? '#ef4444' : (kutuphaneDurumu === status.value ? 'var(--gold-primary)' : 'var(--text-primary)'),
                            cursor: 'pointer',
                            fontSize: '14px',
                            textAlign: 'left',
                          }}
                        >
                          <span className="material-symbols-rounded">{status.icon}</span>
                          {status.label}
                        </button>
                      ))}
                    </div>
                  </>
                )}
              </div>

              {/* Liste Button */}
              <div style={{ position: 'relative', flex: 'none' }}>
                <button 
                  className="action-btn-large secondary"
                  onClick={() => setListeDropdownOpen(!listeDropdownOpen)}
                  title="Listeye Ekle"
                  style={{ width: '56px' }}
                >
                  <span className="material-symbols-rounded">playlist_add</span>
                </button>
                
                {listeDropdownOpen && (
                  <>
                    <div 
                      style={{ position: 'fixed', inset: 0, zIndex: 40 }} 
                      onClick={() => setListeDropdownOpen(false)} 
                    />
                    <div className="sidebar-card liste-dropdown-menu" style={{ 
                      position: 'absolute', 
                      top: '100%', 
                      right: 0,
                      minWidth: 'clamp(160px, 45vw, 220px)', 
                      maxWidth: 'calc(100vw - 24px)',
                      marginTop: '6px', 
                      padding: 'clamp(4px, 1.5vw, 8px)',
                      zIndex: 50 
                    }}>
                      {listeLoading ? (
                        <div style={{ padding: 'clamp(8px, 2vw, 16px)', textAlign: 'center', color: 'var(--text-muted)', fontSize: 'clamp(11px, 3vw, 14px)' }}>
                          YÃ¼kleniyor...
                        </div>
                      ) : kullaniciListeleri.length === 0 ? (
                        <div style={{ padding: 'clamp(8px, 2vw, 16px)', textAlign: 'center', color: 'var(--text-muted)', fontSize: 'clamp(11px, 3vw, 14px)' }}>
                          HenÃ¼z listeniz yok
                        </div>
                      ) : (
                        kullaniciListeleri.map((liste) => {
                          const isInList = icerikListeIds.includes(liste.id);
                          return (
                            <button
                              key={liste.id}
                              onClick={() => handleListeToggle(liste.id)}
                              style={{
                                width: '100%',
                                display: 'flex',
                                alignItems: 'center',
                                gap: 'clamp(4px, 1.5vw, 8px)',
                                padding: 'clamp(8px, 2vw, 12px)',
                                background: isInList ? 'rgba(212, 168, 83, 0.15)' : 'transparent',
                                border: 'none',
                                borderRadius: 'clamp(4px, 1.5vw, 8px)',
                                color: isInList ? 'var(--gold-primary)' : 'var(--text-primary)',
                                cursor: 'pointer',
                                fontSize: 'clamp(11px, 3vw, 14px)',
                                textAlign: 'left',
                              }}
                            >
                              <span className="material-symbols-rounded" style={{ fontSize: 'clamp(16px, 4vw, 20px)', fontVariationSettings: isInList ? "'FILL' 1" : "'FILL' 0" }}>
                                {isInList ? 'check_circle' : 'add_circle'}
                              </span>
                              <span style={{ flex: 1, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>
                                {liste.ad}
                              </span>
                            </button>
                          );
                        })
                      )}
                    </div>
                  </>
                )}
              </div>
            </div>

            {/* Quick Stats */}
            <div className="quick-stats">
              <div className="stat-item">
                <div className="stat-value">{formatNumber(icerik.puanlamaSayisi)}</div>
                <div className="stat-label">Puanlama</div>
              </div>
              <div className="stat-item">
                <div className="stat-value">{formatNumber(icerik.yorumSayisi)}</div>
                <div className="stat-label">Yorum</div>
              </div>
              <div className="stat-item">
                <div className="stat-value">{formatNumber(icerik.listeyeEklenmeSayisi)}</div>
                <div className="stat-label">Liste</div>
              </div>
            </div>
          </aside>

          {/* CENTER COLUMN - Main Info */}
          <div className="info-column">
            {/* Content Type Badge */}
            <div className="content-type-badge">
              <span className="material-symbols-rounded">
                {icerik.tur === 'Film' ? 'movie' : icerik.tur === 'Dizi' ? 'tv' : 'menu_book'}
              </span>
              {icerik.tur === 'Film' ? 'Film' : icerik.tur === 'Dizi' ? 'Dizi' : 'Kitap'}
            </div>

            {/* Title */}
            <h1 className="detail-content-title">{icerik.baslik}</h1>

            {/* Meta Info */}
            <div className="detail-content-meta">
              {yil && (
                <>
                  <div className="meta-item">
                    <span className="material-symbols-rounded">calendar_month</span>
                    {yil}
                  </div>
                  <div className="meta-divider"></div>
                </>
              )}
              {icerik.sure && icerik.sure > 0 && (
                <>
                  <div className="meta-item">
                    <span className="material-symbols-rounded">schedule</span>
                    {formatDuration(icerik.sure)}
                  </div>
                  <div className="meta-divider"></div>
                </>
              )}
              {icerik.yonetmen && (
                <div className="meta-item">
                  <span className="material-symbols-rounded">movie_filter</span>
                  {icerik.yonetmen}
                </div>
              )}
              {icerik.yazarlar && icerik.yazarlar.length > 0 && (
                <div className="meta-item">
                  <span className="material-symbols-rounded">edit</span>
                  {icerik.yazarlar.join(', ')}
                </div>
              )}
            </div>

            {/* Rating Section */}
            <div className="rating-section">
              {/* External Rating - TMDB for films/TV, skip for books */}
              {(icerik.tur === 'Film' || icerik.tur === 'Dizi') && icerik.hariciPuan && icerik.hariciPuan > 0 && (
                <div className="rating-box">
                  <div className="rating-source">TMDB</div>
                  <div className="rating-value">
                    <span className="material-symbols-rounded filled">star</span>
                    {icerik.hariciPuan.toFixed(1)}
                  </div>
                  {icerik.hariciOySayisi && icerik.hariciOySayisi > 0 && (
                    <div className="rating-count">{formatNumber(icerik.hariciOySayisi)} oy</div>
                  )}
                </div>
              )}

              {/* SAGA Rating */}
              <div className="rating-box">
                <div className="rating-source">SAGA</div>
                <div className="rating-value">
                  <span className="material-symbols-rounded filled">star</span>
                  {icerik.ortalamaPuan > 0 ? icerik.ortalamaPuan.toFixed(1) : '-'}
                </div>
                <div className="rating-count">{formatNumber(icerik.puanlamaSayisi)} deÄŸerlendirme</div>
              </div>

              {/* User Rating */}
              <div className="user-rating-box">
                <div className="user-rating-label">PuanÄ±nÄ±z</div>
                <StarRating 
                  value={kullaniciPuani} 
                  onChange={handleRating} 
                  readonly={savingRating}
                />
                {kullaniciPuani > 0 && (
                  <div className="user-rating-text">
                    {kullaniciPuani}/10
                  </div>
                )}
              </div>
            </div>

            {/* Genres */}
            {icerik.turler && icerik.turler.length > 0 && (
              <div className="genres">
                {icerik.turler.map((tur, index) => (
                  <span key={index} className="genre-tag">{tur}</span>
                ))}
              </div>
            )}

            {/* Overview */}
            {icerik.aciklama && (
              <div>
                <h3 className="section-title">
                  <span className="material-symbols-rounded">description</span>
                  Ã–zet
                </h3>
                <p className={`overview-text ${!overviewExpanded ? 'expandable' : 'expanded'}`}>
                  {icerik.aciklama}
                </p>
                {icerik.aciklama.length > 400 && (
                  <button 
                    className={`expand-btn ${overviewExpanded ? 'expanded' : ''}`}
                    onClick={() => setOverviewExpanded(!overviewExpanded)}
                  >
                    {overviewExpanded ? 'Daha az gÃ¶ster' : 'DevamÄ±nÄ± oku'}
                    <span className="material-symbols-rounded">expand_more</span>
                  </button>
                )}
              </div>
            )}

            {/* Cast Section */}
            {icerik.oyuncular && icerik.oyuncular.length > 0 && (
              <div className="cast-section">
                <h3 className="section-title">
                  <span className="material-symbols-rounded">group</span>
                  Oyuncu Kadrosu
                </h3>
                <div className="cast-scroll">
                  {icerik.oyuncular.slice(0, 12).map((oyuncu, index) => (
                    <div key={index} className="cast-card">
                      {oyuncu.profilUrl ? (
                        <img src={oyuncu.profilUrl} alt={oyuncu.ad} className="cast-photo" />
                      ) : (
                        <div className="cast-photo" style={{ 
                          display: 'flex', 
                          alignItems: 'center', 
                          justifyContent: 'center',
                          background: 'linear-gradient(135deg, rgba(212, 168, 83, 0.2), rgba(212, 168, 83, 0.05))'
                        }}>
                          <span style={{ fontSize: '24px', fontWeight: 600, color: 'var(--text-muted)' }}>
                            {oyuncu.ad?.charAt(0).toUpperCase()}
                          </span>
                        </div>
                      )}
                      <div className="cast-name">{oyuncu.ad}</div>
                      {oyuncu.karakter && (
                        <div className="cast-role">{oyuncu.karakter}</div>
                      )}
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* Tabs */}
            <div className="tabs-container">
              <div className="tabs-header">
                <button 
                  className={`tab-btn ${activeTab === 'yorumlar' ? 'active' : ''}`}
                  onClick={() => setActiveTab('yorumlar')}
                >
                  <span className="material-symbols-rounded">chat</span>
                  Yorumlar
                  <span className="tab-count">{yorumlar.length}</span>
                </button>
                <button 
                  className={`tab-btn ${activeTab === 'listeler' ? 'active' : ''}`}
                  onClick={() => setActiveTab('listeler')}
                >
                  <span className="material-symbols-rounded">format_list_bulleted</span>
                  Listelerde
                  <span className="tab-count">{listeler.length}</span>
                </button>
                <button 
                  className={`tab-btn ${activeTab === 'aktiviteler' ? 'active' : ''}`}
                  onClick={() => setActiveTab('aktiviteler')}
                >
                  <span className="material-symbols-rounded">history</span>
                  Aktiviteler
                  <span className="tab-count">{aktiviteler.length}</span>
                </button>
              </div>

              {/* Yorumlar Tab */}
              <div className={`tab-content ${activeTab === 'yorumlar' ? 'active' : ''}`}>
                {/* Comment Form */}
                <div className="comment-form-card" id="yorum-form">
                  {/* YanÄ±t GÃ¶stergesi */}
                  {replyingTo && (
                    <div style={{
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'space-between',
                      padding: '10px 14px',
                      background: 'rgba(212,168,83,0.1)',
                      borderRadius: '8px',
                      marginBottom: '12px',
                      border: '1px solid rgba(212,168,83,0.2)'
                    }}>
                      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                        <span className="material-symbols-rounded" style={{ color: 'var(--gold-primary)', fontSize: '18px' }}>reply</span>
                        <span style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>
                          <strong style={{ color: 'var(--gold-primary)' }}>{replyingTo.kullaniciAdi}</strong> adlÄ± kullanÄ±cÄ±ya yanÄ±t yazÄ±yorsunuz
                        </span>
                      </div>
                      <button 
                        onClick={cancelReply}
                        style={{
                          background: 'none',
                          border: 'none',
                          cursor: 'pointer',
                          padding: '4px',
                          display: 'flex',
                          alignItems: 'center'
                        }}
                      >
                        <span className="material-symbols-rounded" style={{ color: 'var(--text-muted)', fontSize: '18px' }}>close</span>
                      </button>
                    </div>
                  )}
                  
                  <div className="comment-form-header">
                    <div className="comment-form-avatar" style={{
                      background: 'linear-gradient(135deg, var(--gold-primary), var(--gold-dim))',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      color: 'var(--void)'
                    }}>
                      {user ? user.kullaniciAdi?.charAt(0).toUpperCase() : '?'}
                    </div>
                    <div>
                      <div className="comment-form-title">{replyingTo ? 'YanÄ±tÄ±nÄ±zÄ± yazÄ±n' : 'DÃ¼ÅŸÃ¼ncelerinizi paylaÅŸÄ±n'}</div>
                      <div className="comment-form-subtitle">{replyingTo ? `${replyingTo.kullaniciAdi} adlÄ± kullanÄ±cÄ±nÄ±n yorumuna yanÄ±t verin` : `Bu ${icerik.tur === 'Film' ? 'film' : icerik.tur === 'Dizi' ? 'dizi' : 'kitap'} hakkÄ±nda ne dÃ¼ÅŸÃ¼nÃ¼yorsunuz?`}</div>
                    </div>
                  </div>

                  <textarea
                    className="comment-textarea"
                    placeholder={replyingTo ? 'YanÄ±tÄ±nÄ±zÄ± yazÄ±n...' : 'Yorumunuzu yazÄ±n...'}
                    value={yorumText}
                    onChange={(e) => setYorumText(e.target.value)}
                    rows={4}
                  />

                  <div className="comment-form-options">
                    <div className="form-options-left">
                      {/* YanÄ±tlarda puan verme yok */}
                      {!replyingTo && (
                        <div className="form-rating">
                          <span className="form-rating-label">Puan:</span>
                          <div className="form-stars">
                            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((star) => (
                              <button
                                key={star}
                                type="button"
                                className={`star ${yorumPuan >= star ? 'active' : ''}`}
                                onClick={() => setYorumPuan(star)}
                              >
                                <span className="material-symbols-rounded">star</span>
                              </button>
                            ))}
                          </div>
                          {yorumPuan > 0 && <span style={{ marginLeft: '8px', color: 'var(--gold-primary)' }}>{yorumPuan}/10</span>}
                        </div>
                      )}

                      <label className="spoiler-toggle">
                        <input
                          type="checkbox"
                          className="spoiler-checkbox"
                          checked={spoilerIceriyor}
                          onChange={(e) => setSpoilerIceriyor(e.target.checked)}
                        />
                        <span className="spoiler-checkmark">
                          <span className="material-symbols-rounded">check</span>
                        </span>
                        Spoiler iÃ§eriyor
                      </label>
                    </div>

                    <button 
                      className="submit-comment-btn"
                      onClick={handleCommentSubmit}
                      disabled={yorumLoading || !yorumText.trim()}
                    >
                      <span className="material-symbols-rounded">send</span>
                      {replyingTo ? 'YanÄ±tla' : 'GÃ¶nder'}
                    </button>
                  </div>
                </div>

                {/* Comments List */}
                {yorumlar.length > 0 ? (
                  <>
                    {(showAllComments ? yorumlar : yorumlar.slice(0, 3)).map((yorum) => (
                      <CommentPreview 
                        key={yorum.id} 
                        yorum={yorum}
                        onLike={handleLikeComment}
                        onDelete={user?.id === yorum.kullaniciId ? handleDeleteComment : undefined}
                        onReply={handleReplyClick}
                        isExpanded={expandedComments.has(yorum.id)}
                        onToggleExpand={() => {
                          setExpandedComments(prev => {
                            const newSet = new Set(prev);
                            if (newSet.has(yorum.id)) newSet.delete(yorum.id);
                            else newSet.add(yorum.id);
                            return newSet;
                          });
                        }}
                        isSpoilerRevealed={revealedSpoilers.has(yorum.id)}
                        onToggleSpoiler={() => {
                          setRevealedSpoilers(prev => {
                            const newSet = new Set(prev);
                            if (newSet.has(yorum.id)) newSet.delete(yorum.id);
                            else newSet.add(yorum.id);
                            return newSet;
                          });
                        }}
                      />
                    ))}
                    {yorumlar.length > 3 && (
                      <button 
                        className="show-more-btn"
                        onClick={() => setShowAllComments(!showAllComments)}
                      >
                        {showAllComments ? (
                          <>
                            <span className="material-symbols-rounded">expand_less</span>
                            Daha az gÃ¶ster
                          </>
                        ) : (
                          <>
                            <span className="material-symbols-rounded">expand_more</span>
                            TÃ¼m yorumlarÄ± gÃ¶r ({yorumlar.length - 3} daha)
                          </>
                        )}
                      </button>
                    )}
                  </>
                ) : (
                  <div className="sidebar-card" style={{ textAlign: 'center', padding: '40px' }}>
                    <span className="material-symbols-rounded" style={{ fontSize: '48px', color: 'var(--text-muted)', marginBottom: '16px', display: 'block' }}>
                      chat_bubble_outline
                    </span>
                    <p style={{ color: 'var(--text-muted)' }}>HenÃ¼z yorum yapÄ±lmamÄ±ÅŸ. Ä°lk yorumu siz yapÄ±n!</p>
                  </div>
                )}
              </div>

              {/* Listeler Tab */}
              <div className={`tab-content ${activeTab === 'listeler' ? 'active' : ''}`}>
                {listeler.length > 0 ? (
                  listeler.map((liste) => (
                    <ListPreview key={liste.id} liste={liste} />
                  ))
                ) : (
                  <div className="sidebar-card" style={{ textAlign: 'center', padding: '40px' }}>
                    <span className="material-symbols-rounded" style={{ fontSize: '48px', color: 'var(--text-muted)', marginBottom: '16px', display: 'block' }}>
                      playlist_add
                    </span>
                    <p style={{ color: 'var(--text-muted)' }}>Bu iÃ§erik henÃ¼z hiÃ§bir listede yok.</p>
                  </div>
                )}
              </div>

              {/* Aktiviteler Tab */}
              <div className={`tab-content ${activeTab === 'aktiviteler' ? 'active' : ''}`}>
                {aktiviteler.length > 0 ? (
                  <div className="detail-aktiviteler-list">
                    {aktiviteler.map((aktivite, index) => (
                      <FeedActivityCard 
                        key={aktivite.id} 
                        aktivite={aktivite}
                        isLoggedIn={!!user}
                        index={index}
                        currentUserName={user?.kullaniciAdi}
                        compact={true}
                      />
                    ))}
                  </div>
                ) : (
                  <div className="sidebar-card" style={{ textAlign: 'center', padding: '40px' }}>
                    <span className="material-symbols-rounded" style={{ fontSize: '48px', color: 'var(--text-muted)', marginBottom: '16px', display: 'block' }}>
                      history
                    </span>
                    <p style={{ color: 'var(--text-muted)' }}>HenÃ¼z aktivite yok.</p>
                  </div>
                )}
              </div>
            </div>
          </div>

          {/* RIGHT COLUMN - Sidebar */}
          <aside className="sidebar-column">
            {/* Film Info */}
            <div className="sidebar-card">
              <h4 className="sidebar-title">
                <span className="material-symbols-rounded">info</span>
                Bilgiler
              </h4>
              <div className="info-list">
                {icerik.yayinTarihi && (
                  <div className="info-item">
                    <span className="info-label">YayÄ±n Tarihi</span>
                    <span className="info-value">
                      {new Date(icerik.yayinTarihi).toLocaleDateString('tr-TR', { 
                        day: 'numeric', 
                        month: 'long', 
                        year: 'numeric' 
                      })}
                    </span>
                  </div>
                )}
                {icerik.sure && icerik.sure > 0 && (
                  <div className="info-item">
                    <span className="info-label">SÃ¼re</span>
                    <span className="info-value">{formatDuration(icerik.sure)}</span>
                  </div>
                )}
                {icerik.yonetmen && (
                  <div className="info-item">
                    <span className="info-label">YÃ¶netmen</span>
                    <span className="info-value">{icerik.yonetmen}</span>
                  </div>
                )}
                {icerik.yazarlar && icerik.yazarlar.length > 0 && (
                  <div className="info-item">
                    <span className="info-label">Yazar</span>
                    <span className="info-value">{icerik.yazarlar.join(', ')}</span>
                  </div>
                )}
                {icerik.sayfaSayisi && icerik.sayfaSayisi > 0 && (
                  <div className="info-item">
                    <span className="info-label">Sayfa SayÄ±sÄ±</span>
                    <span className="info-value">{icerik.sayfaSayisi.toLocaleString('tr-TR')}</span>
                  </div>
                )}
                {icerik.yayinevi && (
                  <div className="info-item">
                    <span className="info-label">YayÄ±nevi</span>
                    <span className="info-value">{icerik.yayinevi}</span>
                  </div>
                )}
                {icerik.isbn && (
                  <div className="info-item">
                    <span className="info-label">ISBN</span>
                    <span className="info-value">{icerik.isbn}</span>
                  </div>
                )}
                {icerik.sezonSayisi && icerik.sezonSayisi > 0 && (
                  <div className="info-item">
                    <span className="info-label">Sezon</span>
                    <span className="info-value">{icerik.sezonSayisi}</span>
                  </div>
                )}
                {icerik.bolumSayisi && icerik.bolumSayisi > 0 && (
                  <div className="info-item">
                    <span className="info-label">BÃ¶lÃ¼m</span>
                    <span className="info-value">{icerik.bolumSayisi}</span>
                  </div>
                )}
                {icerik.kategoriler && icerik.kategoriler.length > 0 && (
                  <div className="info-item">
                    <span className="info-label">Kategoriler</span>
                    <span className="info-value">{icerik.kategoriler.join(', ')}</span>
                  </div>
                )}
              </div>
            </div>

            {/* External Links */}
            <div className="sidebar-card">
              <h4 className="sidebar-title">
                <span className="material-symbols-rounded">link</span>
                BaÄŸlantÄ±lar
              </h4>
              <div className="external-links">
                {icerik.hariciId && icerik.apiKaynagi === 'tmdb' && (
                  <a 
                    href={`https://www.themoviedb.org/movie/${icerik.hariciId}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="external-link link-tmdb"
                  >
                    <span className="material-symbols-rounded">database</span>
                    TMDB
                    <span className="material-symbols-rounded link-icon">open_in_new</span>
                  </a>
                )}
                {/* IMDb & YouTube - Only for films and TV shows */}
                {(icerik.tur === 'Film' || icerik.tur === 'Dizi') && (
                  <>
                    <a 
                      href={`https://www.imdb.com/find?q=${encodeURIComponent(icerik.baslik)}`}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="external-link link-imdb"
                    >
                      <span className="material-symbols-rounded">movie</span>
                      IMDb
                      <span className="material-symbols-rounded link-icon">open_in_new</span>
                    </a>
                    <a 
                      href={`https://www.youtube.com/results?search_query=${encodeURIComponent(icerik.baslik + ' trailer')}`}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="external-link link-youtube"
                    >
                      <span className="material-symbols-rounded">play_circle</span>
                      YouTube
                      <span className="material-symbols-rounded link-icon">open_in_new</span>
                    </a>
                  </>
                )}
                {/* Google Books & Google Search - Only for books */}
                {icerik.tur === 'Kitap' && (
                  <>
                    {icerik.hariciId && (
                      <a 
                        href={`https://books.google.com/books?id=${icerik.hariciId}`}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="external-link link-google-books"
                      >
                        <span className="material-symbols-rounded">menu_book</span>
                        Google Books
                        <span className="material-symbols-rounded link-icon">open_in_new</span>
                      </a>
                    )}
                    <a 
                      href={`https://www.google.com/search?q=${encodeURIComponent(icerik.baslik + (icerik.yonetmen ? ' ' + icerik.yonetmen : '') + ' kitap')}`}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="external-link link-google"
                    >
                      <span className="material-symbols-rounded">search</span>
                      Google'da Ara
                      <span className="material-symbols-rounded link-icon">open_in_new</span>
                    </a>
                  </>
                )}
              </div>
            </div>

            {/* Where to Watch - Only for films and TV shows */}
            {(icerik.tur === 'Film' || icerik.tur === 'Dizi') && (
              <div className="sidebar-card">
                <h4 className="sidebar-title">
                  <span className="material-symbols-rounded">live_tv</span>
                  Nereden Ä°zlenir?
                </h4>
                <div className="providers-list">
                  <a 
                    href={`https://www.netflix.com/search?q=${encodeURIComponent(icerik.baslik)}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="provider-badge"
                  >
                    <img src="https://image.tmdb.org/t/p/original/pbpMk2JmcoNnQwx5JGpXngfoWtp.jpg" alt="Netflix" />
                    Netflix
                  </a>
                  <a 
                    href={`https://www.primevideo.com/search?phrase=${encodeURIComponent(icerik.baslik)}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="provider-badge"
                  >
                    <img src="https://image.tmdb.org/t/p/original/emthp39XA2YScoYL1p0sdbAH2WA.jpg" alt="Amazon Prime Video" />
                    Prime Video
                  </a>
                  <a 
                    href={`https://www.disneyplus.com/search?q=${encodeURIComponent(icerik.baslik)}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="provider-badge"
                  >
                    <img src="https://image.tmdb.org/t/p/original/7rwgEs15tFwyR9NPQ5vpzxTj19Q.jpg" alt="Disney+" />
                    Disney+
                  </a>
                  <a 
                    href={`https://tv.apple.com/search?term=${encodeURIComponent(icerik.baslik)}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="provider-badge"
                  >
                    <img src="https://image.tmdb.org/t/p/original/9ghgSC0MA082EL6HLCW3GalykFD.jpg" alt="Apple TV+" />
                    Apple TV
                  </a>
                  <a 
                    href={`https://www.justwatch.com/tr/search?q=${encodeURIComponent(icerik.baslik)}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="provider-badge provider-all"
                  >
                    <span className="material-symbols-rounded">search</span>
                    TÃ¼mÃ¼nde Ara
                  </a>
                </div>
              </div>
            )}

            {/* Similar Content */}
            {similarContent.length > 0 && (
              <div className="sidebar-card">
                <h4 className="sidebar-title">
                  <span className="material-symbols-rounded">auto_awesome</span>
                  Benzer Ä°Ã§erikler
                </h4>
                <div className="similar-grid">
                  {similarContent.slice(0, 4).map((item) => (
                    <ContentCard
                      key={item.id}
                      data={icerikToCardData(item)}
                      size="sm"
                      showBadge={true}
                      showRatings={true}
                    />
                  ))}
                </div>
              </div>
            )}
          </aside>
        </div>
      </main>
    </div>
  );
}

// ============================================
// REPLY ITEM COMPONENT (Ana yorumlarla aynÄ± stil)
// ============================================

interface ReplyItemProps {
  yanit: Yorum;
  onLike: (yorumId: number) => void;
  onReply?: (yorum: Yorum) => void;
}

function ReplyItem({ yanit, onLike, onReply }: ReplyItemProps) {
  const navigate = useNavigate();
  const [expanded, setExpanded] = useState(false);
  const [spoilerRevealed, setSpoilerRevealed] = useState(false);
  
  const replyText = yanit.icerik || yanit.icerikOzet || '';
  const isLong = replyText.length > 200;
  
  const tarihStr = formatDistanceToNow(new Date(yanit.olusturulmaZamani), {
    addSuffix: true,
    locale: tr,
  });
  
  return (
    <div className="comment-preview reply-item" style={{ padding: '12px 0', borderBottom: '1px solid rgba(255,255,255,0.04)' }}>
      <div className="comment-header">
        <img 
          src={yanit.kullaniciAvatar || `https://ui-avatars.com/api/?name=${yanit.kullaniciAdi}&background=d4a853&color=030304`}
          alt={yanit.kullaniciAdi}
          className="comment-avatar"
          style={{ cursor: 'pointer' }}
          onClick={() => navigate(`/profil/${yanit.kullaniciAdi}`)}
        />
        <div className="comment-user-info">
          <div 
            className="comment-username" 
            style={{ cursor: 'pointer' }}
            onClick={() => navigate(`/profil/${yanit.kullaniciAdi}`)}
          >
            {yanit.kullaniciAdi}
          </div>
          <div className="comment-date">{tarihStr}</div>
        </div>
      </div>

      {/* Spoiler veya Ä°Ã§erik */}
      {yanit.spoilerIceriyor && !spoilerRevealed ? (
        <div 
          className="spoiler-warning" 
          onClick={() => setSpoilerRevealed(true)}
          style={{ cursor: 'pointer', marginBottom: '0', marginTop: '8px' }}
        >
          <span className="material-symbols-rounded">warning</span>
          Spoiler iÃ§eriyor - gÃ¶rmek iÃ§in tÄ±klayÄ±n
        </div>
      ) : (
        <p className={`comment-text ${isLong && !expanded ? 'truncated' : ''}`} style={{ marginTop: '8px' }}>
          {isLong && !expanded ? replyText.slice(0, 200) + '...' : replyText}
        </p>
      )}
      
      {isLong && !yanit.spoilerIceriyor && (
        <button 
          className="comment-expand-btn"
          onClick={() => setExpanded(!expanded)}
        >
          {expanded ? 'Daha az gÃ¶ster' : 'DevamÄ±nÄ± oku'}
          <span className="material-symbols-rounded">
            {expanded ? 'expand_less' : 'expand_more'}
          </span>
        </button>
      )}

      <div className="comment-actions">
        <button 
          className={`comment-action-btn ${yanit.kullaniciBegendiMi ? 'liked' : ''}`}
          onClick={() => onLike(yanit.id)}
        >
          <span 
            className="material-symbols-rounded" 
            style={{ fontVariationSettings: yanit.kullaniciBegendiMi ? "'FILL' 1" : "'FILL' 0" }}
          >
            favorite
          </span>
          {yanit.begeniSayisi || 0}
        </button>
        <button 
          className="comment-action-btn"
          onClick={() => onReply?.(yanit)}
        >
          <span className="material-symbols-rounded">reply</span>
          YanÄ±tla
        </button>
      </div>
    </div>
  );
}

// ============================================
// COMMENT PREVIEW COMPONENT
// ============================================

interface CommentPreviewProps {
  yorum: Yorum;
  onLike: (yorumId: number) => void;
  onDelete?: (yorumId: number) => void;
  onReply?: (yorum: Yorum) => void;
  isExpanded: boolean;
  onToggleExpand: () => void;
  isSpoilerRevealed: boolean;
  onToggleSpoiler: () => void;
}

function CommentPreview({ yorum, onLike, onDelete, onReply, isExpanded, onToggleExpand, isSpoilerRevealed, onToggleSpoiler }: CommentPreviewProps) {
  const navigate = useNavigate();
  const [showMenu, setShowMenu] = useState(false);
  
  // Ã–nce tam iÃ§eriÄŸi (icerik), yoksa Ã¶zeti kullan
  const commentText = yorum.icerik || yorum.icerikOzet || '';
  const isLongComment = commentText.length > 250;

  const tarihStr = formatDistanceToNow(new Date(yorum.olusturulmaZamani), {
    addSuffix: true,
    locale: tr,
  });

  return (
    <div className="comment-preview" id={`yorum-${yorum.id}`}>
      <div className="comment-header">
        <img 
          src={yorum.kullaniciAvatar || `https://ui-avatars.com/api/?name=${yorum.kullaniciAdi}&background=d4a853&color=030304`}
          alt={yorum.kullaniciAdi}
          className="comment-avatar"
          style={{ cursor: 'pointer' }}
          onClick={() => navigate(`/profil/${yorum.kullaniciAdi}`)}
        />
        <div className="comment-user-info">
          <div 
            className="comment-username" 
            style={{ cursor: 'pointer' }}
            onClick={() => navigate(`/profil/${yorum.kullaniciAdi}`)}
          >
            {yorum.kullaniciAdi}
          </div>
          <div className="comment-date">{tarihStr}</div>
        </div>
        {yorum.puan && (
          <div className="comment-rating">
            <span className="material-symbols-rounded filled">star</span>
            {yorum.puan}
          </div>
        )}
        
        {/* Delete Menu */}
        {onDelete && (
          <div style={{ position: 'relative' }}>
            <button 
              onClick={() => setShowMenu(!showMenu)}
              style={{
                background: 'none',
                border: 'none',
                color: 'var(--text-muted)',
                cursor: 'pointer',
                padding: '4px',
              }}
            >
              <span className="material-symbols-rounded">more_horiz</span>
            </button>
            
            {showMenu && (
              <>
                <div 
                  style={{ position: 'fixed', inset: 0, zIndex: 40 }} 
                  onClick={() => setShowMenu(false)} 
                />
                <div style={{
                  position: 'absolute',
                  right: 0,
                  top: '100%',
                  background: 'var(--void-surface)',
                  border: '1px solid var(--glass-border)',
                  borderRadius: '8px',
                  overflow: 'hidden',
                  zIndex: 50,
                  minWidth: '120px',
                }}>
                  <button
                    onClick={() => {
                      onDelete(yorum.id);
                      setShowMenu(false);
                    }}
                    style={{
                      width: '100%',
                      display: 'flex',
                      alignItems: 'center',
                      gap: '8px',
                      padding: '10px 14px',
                      background: 'none',
                      border: 'none',
                      color: 'var(--error)',
                      cursor: 'pointer',
                      fontSize: '13px',
                    }}
                  >
                    <span className="material-symbols-rounded">delete</span>
                    Sil
                  </button>
                </div>
              </>
            )}
          </div>
        )}
      </div>

      {/* Spoiler Warning */}
      {yorum.spoilerIceriyor && !isSpoilerRevealed ? (
        <div 
          className="spoiler-warning" 
          onClick={onToggleSpoiler}
          style={{ cursor: 'pointer', marginBottom: '0' }}
        >
          <span className="material-symbols-rounded">warning</span>
          Spoiler iÃ§eriyor - gÃ¶rmek iÃ§in tÄ±klayÄ±n
        </div>
      ) : (
        <>
          {yorum.spoilerIceriyor && (
            <button 
              className="spoiler-hide-btn"
              onClick={onToggleSpoiler}
            >
              <span className="material-symbols-rounded">visibility_off</span>
              Spoiler'Ä± gizle
            </button>
          )}
          <p className={`comment-text ${isLongComment && !isExpanded ? 'truncated' : ''}`}>
            {isLongComment && !isExpanded 
              ? commentText.slice(0, 250) + '...' 
              : commentText
            }
          </p>
          {isLongComment && (
            <button 
              className="comment-expand-btn"
              onClick={onToggleExpand}
            >
              {isExpanded ? 'Daha az gÃ¶ster' : 'DevamÄ±nÄ± oku'}
              <span className="material-symbols-rounded">
                {isExpanded ? 'expand_less' : 'expand_more'}
              </span>
            </button>
          )}
        </>
      )}

      <div className="comment-actions">
        <button 
          className={`comment-action-btn ${yorum.kullaniciBegendiMi ? 'liked' : ''}`}
          onClick={() => onLike(yorum.id)}
        >
          <span 
            className="material-symbols-rounded" 
            style={{ fontVariationSettings: yorum.kullaniciBegendiMi ? "'FILL' 1" : "'FILL' 0" }}
          >
            favorite
          </span>
          {yorum.begeniSayisi}
        </button>
        <button 
          className="comment-action-btn"
          onClick={() => onReply?.(yorum)}
        >
          <span className="material-symbols-rounded">reply</span>
          YanÄ±tla
        </button>
      </div>

      {/* YanÄ±tlar */}
      {yorum.yanitlar && yorum.yanitlar.length > 0 && (
        <div className="comment-replies" style={{ 
          marginTop: '8px',
          paddingTop: '8px',
          borderTop: '1px solid rgba(255,255,255,0.05)'
        }}>
          {yorum.yanitlar.map((yanit) => (
            <ReplyItem 
              key={yanit.id} 
              yanit={yanit} 
              onLike={onLike} 
              onReply={onReply} 
            />
          ))}
        </div>
      )}
    </div>
  );
}

// ============================================
// LIST PREVIEW COMPONENT
// ============================================

interface ListPreviewProps {
  liste: Liste;
}

function ListPreview({ liste }: ListPreviewProps) {
  const navigate = useNavigate();

  return (
    <div 
      className="list-preview"
      onClick={() => navigate(`/liste/${liste.id}`)}
    >
      <div className="list-posters">
        {/* TODO: Show list content posters */}
        <div className="list-poster" style={{ 
          background: 'var(--void-surface)', 
          display: 'flex', 
          alignItems: 'center', 
          justifyContent: 'center',
          marginLeft: 0 
        }}>
          <span className="material-symbols-rounded" style={{ color: 'var(--text-muted)' }}>movie</span>
        </div>
      </div>
      <div className="list-info">
        <div className="list-title">{liste.ad}</div>
        <div className="list-meta">{liste.icerikSayisi || 0} iÃ§erik</div>
        <div className="list-creator">
          <img 
            src={`https://ui-avatars.com/api/?name=${liste.kullaniciAdi}&background=d4a853&color=030304&size=20`}
            alt={liste.kullaniciAdi}
          />
          {liste.kullaniciAdi}
        </div>
      </div>
    </div>
  );
}


========== saga.client\src\pages\glass\ExplorePage.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SAGA EXPLORE PAGE - ui_prototypes/explore.html BÄ°REBÄ°R AKTARIM
   Void Theme with Gold Accent
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* CSS Variables */
.explore-page {
  --void: #030304;
  --void-light: #0a0a0c;
  --void-surface: #111115;
  --void-elevated: #18181d;
  --void-border: #25252d;
  --gold: #d4a853;
  --gold-dim: rgba(212, 168, 83, 0.15);
  --gold-glow: rgba(212, 168, 83, 0.3);
  --gold-light: #e4b863;
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-muted: rgba(255, 255, 255, 0.45);
  --glass: rgba(17, 17, 21, 0.85);
  --glass-border: rgba(255, 255, 255, 0.06);
  --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.5);
  --font-display: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

/* ========================================
   EXPLORE PAGE CONTAINER
======================================== */
.explore-page {
  display: flex;
  flex-direction: column;
  gap: 24px;
  min-height: 100vh;
  background: var(--void);
  padding: 20px 20px 120px 20px; /* VoidLayout header zaten var, extra padding yok */
  max-width: 1200px;
  margin: 0 auto;
  font-family: var(--font-body);
  color: var(--text-primary);
  position: relative;
}

/* Body background override when explore page is active */
.explore-page::before {
  content: '';
  position: fixed;
  inset: 0;
  background: var(--void);
  z-index: -1;
}

/* ========================================
   PAGE HEADER
======================================== */
.page-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: var(--void);
  padding: 16px 20px;
  transition: transform 0.3s ease;
  border-bottom: 1px solid var(--void-border);
}

.page-header.hidden {
  transform: translateY(-100%);
}

.header-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.header-logo {
  font-family: 'Cinzel', serif;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--gold);
  letter-spacing: 3px;
  text-shadow: 0 0 20px var(--gold-glow);
  text-decoration: none;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  color: var(--text-secondary);
  text-decoration: none;
}

.header-btn:hover {
  background: var(--void-elevated);
  border-color: var(--gold-dim);
  color: var(--gold);
}

.header-btn svg {
  width: 20px;
  height: 20px;
}

/* ========================================
   FILTER TOGGLE BUTTON
======================================== */
.filter-toggle-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  color: var(--text-secondary);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
}

.filter-toggle-btn:hover {
  border-color: var(--gold);
  color: var(--gold);
}

.filter-toggle-btn.active {
  background: var(--gold);
  border-color: var(--gold);
  color: var(--void);
}

.filter-toggle-btn svg {
  width: 20px;
  height: 20px;
}

/* ========================================
   FILTER SIDEBAR (Right Side Panel)
======================================== */
.filter-sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  z-index: 199;
}

.filter-sidebar {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  width: 320px;
  background: #0a0a0b;
  border-left: 1px solid var(--void-border);
  z-index: 200;
  transform: translateX(100%);
  transition: transform 0.3s ease;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.filter-sidebar.active {
  transform: translateX(0);
}

.filter-sidebar-content {
  flex: 1;
  padding: 24px;
  overflow-y: auto;
}

/* Old filter-modal styles - keep for reference */
.filter-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  z-index: 300;
  display: none;
  align-items: flex-end;
  justify-content: center;
}

.filter-modal.active {
  display: flex;
}

.filter-content {
  background: var(--void-surface);
  border-radius: 24px 24px 0 0;
  width: 100%;
  max-width: 500px;
  max-height: 80vh;
  padding: 24px;
  animation: slideUp 0.3s ease;
  overflow-y: auto;
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

.filter-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24px;
}

.filter-title {
  font-family: 'Cinzel', serif;
  font-size: 1.25rem;
  color: var(--text-primary);
}

.filter-close {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--void-border);
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.filter-close:hover {
  background: var(--void-elevated);
  color: var(--gold);
}

.filter-group {
  margin-bottom: 24px;
}

.filter-group-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 12px;
}

.filter-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.filter-option {
  padding: 8px 16px;
  font-size: 0.85rem;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  border-radius: 20px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
}

.filter-option:hover,
.filter-option.selected {
  background: var(--gold-dim);
  border-color: var(--gold);
  color: var(--gold);
}

.filter-actions {
  display: flex;
  gap: 12px;
  margin-top: 32px;
}

.filter-btn {
  flex: 1;
  padding: 14px;
  font-size: 0.95rem;
  font-weight: 600;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.filter-btn-reset {
  background: transparent;
  border: 1px solid var(--void-border);
  color: var(--text-secondary);
}

.filter-btn-reset:hover {
  border-color: var(--text-secondary);
}

.filter-btn-apply {
  background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
  border: none;
  color: var(--void);
}

.filter-btn-apply:hover {
  box-shadow: 0 0 20px var(--gold-glow);
}

.explore-content {
  flex: 1;
  min-width: 0;
}

/* ========================================
   SEARCH SECTION
======================================== */
.search-section {
  margin-bottom: 24px;
}

.search-container {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.search-input-wrapper {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
}

.search-icon {
  position: absolute;
  left: 20px;
  color: var(--text-muted);
  pointer-events: none;
  transition: color 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-icon svg {
  width: 22px;
  height: 22px;
}

.search-input {
  width: 100%;
  padding: 18px 60px 18px 56px;
  font-size: 1rem;
  font-family: var(--font-body);
  background: var(--void-surface);
  border: 2px solid var(--void-border);
  border-radius: 16px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.search-input::placeholder {
  color: var(--text-muted);
}

.search-input:focus {
  outline: none;
  border-color: var(--gold);
  background: var(--void-elevated);
  box-shadow: 0 0 0 4px var(--gold-glow);
}

.search-input:focus ~ .search-icon {
  color: var(--gold);
}

.search-clear {
  position: absolute;
  right: 16px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--void-border);
  border: none;
  display: none;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: var(--text-muted);
  transition: all 0.3s ease;
}

.search-clear.visible {
  display: flex;
}

.search-clear:hover {
  background: var(--gold);
  color: var(--void);
}

.search-clear svg {
  width: 16px;
  height: 16px;
}

/* ========================================
   CATEGORY TABS
======================================== */
.category-section {
  margin-bottom: 32px;
}

.category-tabs {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 8px;
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}

.category-tabs::-webkit-scrollbar {
  display: none;
}

.category-tab {
  flex-shrink: 0;
  padding: 12px 24px;
  font-size: 0.9rem;
  font-weight: 500;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: var(--font-body);
}

.category-tab svg {
  width: 18px;
  height: 18px;
}

.category-tab:hover {
  background: var(--void-elevated);
  border-color: var(--gold-dim);
}

.category-tab.active {
  background: linear-gradient(135deg, var(--gold) 0%, #b8943f 100%);
  border-color: var(--gold);
  color: var(--void);
}

/* ========================================
   SECTION HEADER
======================================== */
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.section-title {
  font-family: var(--font-display);
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text-primary);
}

.section-link {
  font-size: 0.85rem;
  color: var(--gold);
  display: flex;
  align-items: center;
  gap: 4px;
  transition: all 0.3s ease;
  background: none;
  border: none;
  cursor: pointer;
  font-family: var(--font-body);
}

.section-link:hover {
  color: var(--gold-light);
  gap: 8px;
}

.section-link svg {
  width: 16px;
  height: 16px;
}

/* ========================================
   FEATURED SECTION - Ã–ne Ã‡Ä±kanlar Slider
======================================== */
.featured-section {
  margin-bottom: 40px;
}

.featured-slider {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: 8px;
  -webkit-overflow-scrolling: touch;
}

.featured-slider::-webkit-scrollbar {
  display: none;
}

.featured-card {
  flex-shrink: 0;
  width: 320px;
  height: 180px;
  border-radius: 16px;
  overflow: hidden;
  position: relative;
  scroll-snap-align: start;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.featured-card:hover {
  transform: scale(1.02);
}

.featured-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.featured-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 16px;
}

.featured-badge {
  position: absolute;
  top: 12px;
  left: 12px;
  padding: 4px 10px;
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  background: var(--gold);
  color: var(--void);
  border-radius: 6px;
}

.featured-title {
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
  line-height: 1.3;
}

.featured-meta {
  font-size: 0.8rem;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 12px;
}

.featured-meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.featured-meta svg {
  width: 14px;
  height: 14px;
}

.featured-rating {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
}

.featured-rating .rating-label {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  opacity: 0.8;
}

.featured-rating.tmdb {
  background: rgba(212, 175, 55, 0.2);
  color: var(--gold);
}

.featured-rating.tmdb svg {
  fill: var(--gold);
}

.featured-rating.saga {
  background: var(--accent-dim);
  color: var(--accent);
}

.featured-rating.saga svg {
  fill: var(--accent);
}

/* ========================================
   GENRE SECTION - TÃ¼rlere GÃ¶z At
======================================== */
.genre-section {
  margin-bottom: 40px;
}

.genre-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 12px;
}

.genre-card {
  position: relative;
  aspect-ratio: 16/9;
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s ease;
  background: linear-gradient(135deg, var(--gold-dim) 0%, var(--void) 100%);
  border: 1px solid var(--void-border);
}

.genre-card:hover {
  transform: scale(1.03);
  border-color: var(--gold);
}

.genre-content {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px;
  text-align: center;
}

.genre-icon {
  width: 32px;
  height: 32px;
  margin-bottom: 6px;
  color: var(--gold);
  transition: transform 0.3s ease;
}

.genre-card:hover .genre-icon {
  transform: scale(1.2);
}

.genre-name {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-primary);
}

.genre-count {
  font-size: 0.7rem;
  color: var(--text-muted);
}

/* ========================================
   RECOMMENDATIONS SECTION - Sana Ã–zel
======================================== */
.recommendations-section {
  margin-bottom: 40px;
}

.rec-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.rec-icon {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  background: linear-gradient(135deg, var(--gold-glow) 0%, transparent 100%);
  border: 1px solid var(--gold);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--gold);
}

.rec-icon svg {
  width: 22px;
  height: 22px;
}

.rec-text h3 {
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.rec-text p {
  font-size: 0.8rem;
  color: var(--text-muted);
  margin: 0;
}

.rec-slider {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: 8px;
  -webkit-overflow-scrolling: touch;
}

.rec-slider::-webkit-scrollbar {
  display: none;
}

.rec-card {
  flex-shrink: 0;
  width: 100px;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.rec-card:hover {
  transform: scale(1.05);
}

.rec-poster {
  aspect-ratio: 2/3;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 6px;
  position: relative;
  background: var(--void-surface);
}

.rec-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.rec-match {
  position: absolute;
  bottom: 6px;
  right: 6px;
  padding: 3px 6px;
  font-size: 0.6rem;
  font-weight: 600;
  background: var(--gold);
  color: var(--void);
  border-radius: 4px;
}

.rec-ratings {
  position: absolute;
  top: 10px;
  right: 10px;
  flex-direction: column;
  gap: 4px;
}

.rec-title {
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.rec-subtitle {
  font-size: 0.65rem;
  color: var(--text-muted);
}

/* ========================================
   LISTS SECTION - PopÃ¼ler Listeler
======================================== */
.lists-section {
  margin-bottom: 40px;
}

.lists-slider {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: 8px;
  -webkit-overflow-scrolling: touch;
}

.lists-slider::-webkit-scrollbar {
  display: none;
}

.list-card {
  flex-shrink: 0;
  width: 280px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s ease;
}

.list-card:hover {
  border-color: var(--gold);
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.list-covers {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2px;
  padding: 2px;
  aspect-ratio: 3/1.5;
  background: var(--void-elevated);
}

.list-covers img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.list-info {
  padding: 16px;
}

.list-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.list-title .verified {
  width: 16px;
  height: 16px;
  color: var(--gold);
}

.list-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 0.8rem;
  color: var(--text-muted);
  margin-bottom: 12px;
}

.list-meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.list-meta svg {
  width: 14px;
  height: 14px;
}

.list-author {
  display: flex;
  align-items: center;
  gap: 10px;
}

.list-author-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--gold) 0%, #b8943f 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--void);
}

.list-author-name {
  font-size: 0.85rem;
  color: var(--text-secondary);
}

/* ========================================
   PEOPLE SECTION - KeÅŸfet: KiÅŸiler
======================================== */
.people-section {
  margin-bottom: 40px;
}

.people-slider {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: 8px;
  -webkit-overflow-scrolling: touch;
}

.people-slider::-webkit-scrollbar {
  display: none;
}

.person-card {
  flex-shrink: 0;
  width: 120px;
  text-align: center;
  cursor: pointer;
}

.person-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  margin: 0 auto 12px;
  overflow: hidden;
  border: 2px solid var(--void-border);
  transition: all 0.3s ease;
}

.person-card:hover .person-avatar {
  border-color: var(--gold);
  box-shadow: 0 0 20px var(--gold-glow);
}

.person-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.person-avatar-placeholder {
  width: 100%;
  height: 100%;
  background: var(--glass-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--gold);
}

.person-reason {
  font-size: 0.65rem;
  color: var(--text-muted);
  opacity: 0.7;
  margin-top: 4px;
  text-align: center;
}

.person-name {
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.person-username {
  font-size: 0.75rem;
  color: var(--text-muted);
  margin-bottom: 8px;
  display: block;
}

.person-follow {
  padding: 6px 16px;
  font-size: 0.75rem;
  font-weight: 600;
  background: transparent;
  border: 1px solid var(--gold);
  border-radius: 20px;
  color: var(--gold);
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: var(--font-body);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  min-width: 100px;
}

.person-follow:hover {
  background: var(--gold);
  color: var(--void);
}

.person-follow:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.person-follow.following {
  background: var(--gold);
  color: var(--void);
}

.person-follow.following:hover {
  background: transparent;
  color: var(--gold);
}

/* ========================================
   TRENDING SECTION
======================================== */
.trending-section {
  margin-bottom: 40px;
}

.trending-grid {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 8px;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.trending-grid::-webkit-scrollbar {
  display: none;
}

.trending-card {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  cursor: pointer;
  transition: all 0.3s ease;
  text-decoration: none;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  width: 120px;
}

.trending-card:hover {
  border-color: var(--gold);
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.trending-card .trending-poster {
  aspect-ratio: 2/3;
  width: 100% !important;
  height: auto !important;
  overflow: hidden;
  background: var(--void-surface);
  position: relative;
}

.trending-card .trending-poster img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.trending-card:hover .trending-poster img {
  transform: scale(1.05);
}

/* Trending poster iÃ§indeki badge ve rating */
.trending-poster .content-badge {
  top: 8px;
  left: 40px;
  z-index: 3;
}

.trending-poster .content-rating {
  z-index: 3;
}

.trending-rank {
  position: absolute;
  top: 6px;
  left: 6px;
  width: 18px;
  height: 18px;
  background: var(--gold);
  border: none;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-display);
  font-size: 0.65rem;
  font-weight: 700;
  color: var(--void);
  z-index: 5;
}

.trending-type {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(4px);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  z-index: 2;
}

.trending-type svg {
  width: 14px;
  height: 14px;
}

.trending-info {
  padding: 6px 8px;
  background: var(--void-surface);
}

.trending-title {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.trending-meta {
  font-size: 0.65rem;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 6px;
}

.trending-meta .rating {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--gold);
}

.trending-meta .rating svg {
  width: 12px;
  height: 12px;
  fill: var(--gold);
}

.trending-genres {
  font-size: 0.65rem;
  color: var(--text-muted);
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
}

.trending-genres .genre-tag {
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 4px;
  font-size: 0.6rem;
  color: var(--text-secondary);
}

/* ========================================
   CONTENT GRID (Arama sonuÃ§larÄ± iÃ§in)
======================================== */
.content-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 20px;
}

/* Horizontal scroll grid - Trend ve Sana Ã–zel iÃ§in */
.content-grid.content-grid--horizontal {
  display: flex !important;
  flex-wrap: nowrap !important;
  gap: 10px;
  overflow-x: auto;
  padding-bottom: 8px;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.content-grid.content-grid--horizontal::-webkit-scrollbar {
  display: none;
}

.content-grid.content-grid--horizontal .content-card {
  flex-shrink: 0;
  width: 120px !important;
  min-width: 120px !important;
}

.content-grid.content-grid--horizontal .content-card.size-lg {
  width: 120px !important;
  min-width: 120px !important;
}

.content-card {
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  display: flex;
  flex-direction: column;
  background: var(--void-surface);
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid var(--void-border);
}

.content-card:hover {
  transform: translateY(-6px);
  border-color: var(--gold);
  box-shadow: 0 8px 24px rgba(0,0,0,0.4), 0 0 20px var(--gold-glow);
}

.content-poster {
  width: 100%;
  aspect-ratio: 2/3;
  overflow: hidden;
  position: relative;
  background: var(--void);
  min-height: 360px;
}

.content-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.content-poster-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  background: var(--void-surface);
}

/* Poster Ã¼zerinde puan container */
.poster-ratings-container {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  z-index: 3;
}

.content-rating {
  display: flex;
  align-items: center;
  gap: 3px;
  padding: 4px 8px;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(4px);
  border-radius: 6px;
}

.content-rating .rating-label {
  font-size: 0.5rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.content-rating svg {
  width: 12px;
  height: 12px;
  fill: var(--gold);
  color: var(--gold);
}

.content-rating span {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--gold);
}

/* SAGA puanÄ± iÃ§in Ã¶zel stil */
.content-rating.google .rating-label {
  color: #7dd3fc;
}

.content-rating.google svg {
  fill: #7dd3fc;
  color: #7dd3fc;
}

.content-rating.google span {
  color: #7dd3fc;
}

/* SAGA puanÄ± iÃ§in Ã¶zel stil */
.content-rating.saga .rating-label {
  color: var(--accent);
}

.content-rating.saga svg {
  fill: var(--accent);
  color: var(--accent);
}

.content-rating.saga span {
  color: var(--accent);
}

.content-type-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 4px 8px;
  font-size: 0.65rem;
  font-weight: 600;
  border-radius: 4px;
  text-transform: uppercase;
}

.content-type-badge.film {
  background: rgba(59, 130, 246, 0.8);
  color: white;
}

.content-type-badge.dizi {
  background: rgba(139, 92, 246, 0.8);
  color: white;
}

.content-type-badge.kitap {
  background: rgba(34, 197, 94, 0.8);
  color: white;
}

.content-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 3px 8px;
  font-size: 0.6rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 4px;
  z-index: 3;
  background: var(--gold);
  color: var(--void);
}

/* Dizi badge - Mor tema */
.content-badge.dizi {
  background: rgba(139, 92, 246, 0.9);
  color: white;
}

/* Film badge - AltÄ±n tema */
.content-badge.film {
  background: var(--gold);
  color: var(--void);
}

/* Kitap badge - YeÅŸil tema */
.content-badge.kitap {
  background: rgba(16, 185, 129, 0.9);
  color: white;
}

/* Content Footer */
.content-footer {
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.content-title {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-primary);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.2;
  word-break: break-word;
  margin: 0;
}

.content-meta {
  font-size: 0.7rem;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.content-type-label {
  display: flex;
  align-items: center;
  gap: 3px;
  color: var(--text-secondary);
}

.content-type-label svg {
  width: 11px;
  height: 11px;
}

.content-year {
  color: var(--text-muted);
}

.content-rating-inline {
  display: flex;
  align-items: center;
  gap: 3px;
  color: var(--gold);
}

.content-rating-inline svg {
  width: 11px;
  height: 11px;
  fill: var(--gold);
}

.content-genres {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 2px;
}

.content-genres span {
  font-size: 0.65rem;
  color: var(--text-muted);
}

.content-genres .genre-tag {
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 4px;
  font-size: 0.65rem;
  color: var(--text-secondary);
  white-space: nowrap;
}

/* Import overlay */
.content-import-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.content-poster:hover .content-import-overlay {
  opacity: 1;
}

.content-import-btn {
  padding: 10px 24px;
  font-size: 0.85rem;
  font-weight: 600;
  background: var(--gold);
  border: none;
  border-radius: 8px;
  color: var(--void);
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: var(--font-body);
}

.content-import-btn:hover {
  background: var(--gold-light);
  transform: scale(1.05);
}

.content-import-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.import-btn {
  padding: 8px 20px;
  font-size: 0.85rem;
  font-weight: 600;
  background: var(--gold);
  border: none;
  border-radius: 8px;
  color: var(--void);
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: var(--font-body);
}

.import-btn:hover {
  background: var(--gold-light);
  transform: scale(1.05);
}

.import-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ========================================
   LOADING & SKELETON
======================================== */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--void-surface) 25%,
    var(--void-elevated) 50%,
    var(--void-surface) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.content-skeleton .content-poster {
  background: var(--void-surface);
}

.content-skeleton .skeleton-title {
  height: 16px;
  width: 80%;
  border-radius: 4px;
  margin-bottom: 8px;
}

.content-skeleton .skeleton-meta {
  height: 12px;
  width: 50%;
  border-radius: 4px;
}

/* Loading spinner - Explore page specific */
.explore-page .loading-spinner,
.explore-content .loading-spinner {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 40px;
}

.explore-page .loading-spinner svg,
.explore-content .loading-spinner svg {
  animation: spin 1s linear infinite;
  color: var(--gold);
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* IntersectionObserver trigger - gÃ¶rÃ¼nmez element */
.load-more-trigger {
  height: 1px;
  width: 100%;
  pointer-events: none;
  visibility: hidden;
}

/* ========================================
   EMPTY STATE
======================================== */
.empty-state {
  text-align: center;
  padding: 60px 20px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
}

.empty-state-icon {
  width: 80px;
  height: 80px;
  margin: 0 auto 20px;
  color: var(--text-muted);
  opacity: 0.3;
}

.empty-state-icon svg {
  width: 100%;
  height: 100%;
}

.empty-state-title {
  font-family: var(--font-display);
  font-size: 1.25rem;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.empty-state-text {
  font-size: 0.9rem;
  color: var(--text-muted);
}

/* ========================================
   FILTER SIDEBAR (SaÄŸ Panel) - ARTIK KULLANILMIYOR
   Modal sistemine geÃ§ildi
======================================== */
.filter-sidebar {
  display: none;
  width: 280px;
  flex-shrink: 0;
  position: sticky;
  top: 100px;
  height: fit-content;
  max-height: calc(100vh - 120px);
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--void-border) transparent;
}

.filter-sidebar::-webkit-scrollbar {
  width: 4px;
}

.filter-sidebar::-webkit-scrollbar-thumb {
  background: var(--void-border);
  border-radius: 2px;
}

.filter-panel {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  padding: 20px;
}

.filter-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
}

.filter-title {
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
}

.filter-clear {
  font-size: 0.8rem;
  color: var(--gold);
  background: none;
  border: none;
  cursor: pointer;
  font-family: var(--font-body);
}

.filter-clear:hover {
  color: var(--gold-light);
}

.filter-group {
  margin-bottom: 20px;
}

.filter-group-title {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
}

.filter-group-title svg {
  width: 14px;
  height: 14px;
}

.filter-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.filter-option {
  padding: 6px 12px;
  font-size: 0.8rem;
  font-weight: 500;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  border-radius: 8px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: var(--font-body);
}

.filter-option:hover {
  border-color: var(--gold-dim);
}

.filter-option.active {
  background: var(--gold-glow);
  border-color: var(--gold);
  color: var(--gold);
}

.filter-apply-btn {
  width: 100%;
  padding: 12px;
  font-size: 0.9rem;
  font-weight: 600;
  background: linear-gradient(135deg, var(--gold) 0%, #b8943f 100%);
  border: none;
  border-radius: 10px;
  color: var(--void);
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: var(--font-body);
  margin-top: 16px;
}

.filter-apply-btn:hover {
  box-shadow: 0 4px 16px var(--gold-glow);
}

/* ========================================
   SCROLL ANIMATIONS
======================================== */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-on-scroll {
  opacity: 0;
  animation: fadeInUp 0.6s ease forwards;
}

.animate-delay-1 { animation-delay: 0.1s; }
.animate-delay-2 { animation-delay: 0.2s; }
.animate-delay-3 { animation-delay: 0.3s; }
.animate-delay-4 { animation-delay: 0.4s; }

/* ========================================
   RESPONSIVE - TABLET
======================================== */
@media (max-width: 1200px) {
  .trending-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .content-grid {
    grid-template-columns: repeat(4, 1fr);
  }
  
  .genre-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (max-width: 1024px) {
  .trending-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .content-grid {
    grid-template-columns: repeat(4, 1fr);
  }
  
  .genre-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .filter-sidebar {
    display: none;
  }
  
  .featured-card {
    width: 280px;
    height: 160px;
  }
  
  .rec-card {
    width: 120px;
  }
  
  .list-card {
    width: 260px;
  }
}

@media (max-width: 768px) {
  .explore-page {
    padding-top: 80px;
    padding-left: 16px;
    padding-right: 16px;
  }
  
  .trending-card {
    width: 100px;
  }
  
  .content-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }
  
  /* Horizontal scroll grid - Tablet */
  .content-grid.content-grid--horizontal .content-card,
  .content-grid.content-grid--horizontal .content-card.size-lg {
    width: 100px !important;
    min-width: 100px !important;
  }
  
  .genre-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .featured-card {
    width: 260px;
    height: 145px;
  }
  
  .person-card {
    width: 100px;
  }
  
  .person-avatar {
    width: 64px;
    height: 64px;
  }
  
  .rec-card {
    width: 85px;
  }
  
  /* Filter sidebar - tablet */
  .filter-sidebar {
    width: 280px;
  }
}

/* ========================================
   RESPONSIVE - MOBILE
======================================== */
@media (max-width: 480px) {
  /* Filter sidebar - mobile full width */
  .filter-sidebar {
    width: 100%;
  }
  
  .filter-toggle-btn span {
    display: none;
  }
  
  .filter-toggle-btn {
    padding: 12px 14px;
  }
  .explore-page {
    padding-top: 70px;
    padding-bottom: 90px;
    padding-left: 12px;
    padding-right: 12px;
  }
  
  .search-input {
    padding: 14px 50px 14px 48px;
    font-size: 0.95rem;
    border-radius: 12px;
  }
  
  .search-icon {
    left: 16px;
  }
  
  .search-icon svg {
    width: 20px;
    height: 20px;
  }
  
  .section-title {
    font-size: 1.1rem;
  }
  
  .category-tab {
    padding: 10px 16px;
    font-size: 0.85rem;
    border-radius: 10px;
  }
  
  .category-tab svg {
    width: 16px;
    height: 16px;
  }
  
  /* Featured Mobile */
  .featured-section {
    margin-bottom: 32px;
  }
  
  .featured-card {
    width: 240px;
    height: 135px;
    border-radius: 12px;
  }
  
  .featured-badge {
    font-size: 0.65rem;
    padding: 3px 8px;
  }
  
  .featured-title {
    font-size: 0.95rem;
  }
  
  .featured-meta {
    font-size: 0.75rem;
  }
  
  /* Genre Mobile */
  .genre-section {
    margin-bottom: 32px;
  }
  
  .genre-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }
  
  .genre-icon {
    width: 28px;
    height: 28px;
  }
  
  .genre-name {
    font-size: 0.8rem;
  }
  
  /* Trending Mobile */
  .trending-section {
    margin-bottom: 32px;
  }
  
  .trending-card {
    width: 85px;
  }
  
  .trending-rank {
    width: 16px;
    height: 16px;
    font-size: 0.6rem;
    top: 4px;
    left: 4px;
  }
  
  .trending-info {
    padding: 4px 6px;
  }
  
  .trending-title {
    font-size: 0.7rem;
  }
  
  .trending-meta {
    font-size: 0.6rem;
  }
  
  /* Lists Mobile */
  .lists-section {
    margin-bottom: 32px;
  }
  
  .list-card {
    width: 240px;
  }
  
  .list-info {
    padding: 12px;
  }
  
  .list-title {
    font-size: 0.9rem;
  }
  
  /* Recommendations Mobile */
  .recommendations-section {
    margin-bottom: 32px;
  }
  
  .rec-header {
    margin-bottom: 16px;
  }
  
  .rec-icon {
    width: 40px;
    height: 40px;
  }
  
  .rec-text h3 {
    font-size: 1rem;
  }
  
  .rec-card {
    width: 75px;
  }
  
  .rec-poster {
    border-radius: 6px;
  }
  
  .rec-match {
    font-size: 0.55rem;
    padding: 2px 4px;
  }
  
  .rec-title {
    font-size: 0.65rem;
  }
  
  .rec-subtitle {
    font-size: 0.55rem;
  }
  
  /* People Mobile */
  .people-section {
    margin-bottom: 32px;
  }
  
  .person-card {
    width: 90px;
  }
  
  .person-avatar {
    width: 56px;
    height: 56px;
  }
  
  .person-name {
    font-size: 0.8rem;
  }
  
  .person-follow {
    padding: 5px 12px;
    font-size: 0.7rem;
  }
  
  /* Content Grid Mobile */
  .content-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }
  
  /* Horizontal scroll grid - Mobile */
  .content-grid.content-grid--horizontal {
    gap: 8px;
  }
  
  .content-grid.content-grid--horizontal .content-card,
  .content-grid.content-grid--horizontal .content-card.size-lg {
    width: 85px !important;
    min-width: 85px !important;
  }
  
  .content-poster {
    min-height: 240px;
  }
  
  .content-title {
    font-size: 0.75rem;
  }
  
  .content-meta {
    font-size: 0.65rem;
    gap: 4px;
  }
  
  .content-type-label svg {
    width: 9px;
    height: 9px;
  }
  
  .content-genres .genre-tag {
    padding: 1px 4px;
    font-size: 0.55rem;
  }
  
  .content-footer {
    padding: 6px;
    gap: 2px;
  }
}

/* ========================================
   EXTRA SMALL SCREENS (480px ve altÄ±)
======================================== */
@media (max-width: 480px) {
  .content-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 10px;
  }
  
  .content-poster {
    min-height: 200px;
  }
  
  .content-title {
    font-size: 0.7rem;
    -webkit-line-clamp: 1;
    line-clamp: 1;
  }
  
  .content-meta {
    font-size: 0.6rem;
  }
  
  .content-genres .genre-tag {
    font-size: 0.5rem;
    padding: 1px 4px;
  }
  
  .content-footer {
    padding: 5px;
  }
  
  .trending-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 10px;
  }
  
  .trending-card .trending-poster {
    min-height: 200px;
  }
  
  .trending-info {
    padding: 8px;
  }
  
  .trending-title {
    font-size: 0.75rem;
  }
  
  .trending-meta {
    font-size: 0.65rem;
  }
  
  .trending-genres .genre-tag {
    font-size: 0.5rem;
    padding: 1px 4px;
  }
}

/* ========================================
   ANIMATIONS
======================================== */
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.7;
  }
}

.animate-spin {
  animation: spin 1s linear infinite;
}


========== saga.client\src\pages\glass\ExplorePage.tsx ==========

import { useState, useEffect, useCallback, useRef, useMemo } from 'react';
import { useNavigate, useSearchParams } from 'react-router-dom';
import { 
  Search, Film, BookOpen, Star, Loader2, X, Tv,
  ChevronRight, Sparkles, Heart, BadgeCheck,
  Swords, Ghost, Laugh, Rocket, Wand2, SlidersHorizontal, Layers, User,
  TrendingUp, Clock, Calendar, ChevronDown, ChevronUp, Globe
} from 'lucide-react';
import { externalApi, icerikApi, listeApi, kullaniciApi, kutuphaneApi } from '../../services/api';
import { useAuth } from '../../context/AuthContext';
import type { TmdbFilm, GoogleBook, PopulerListe, OnerilenKullanici } from '../../services/api';
import bookQueriesConfig from '../../config/bookQueries.json';
import { ContentCard, ContentGrid, tmdbToCardData, bookToCardData, normalizeContentType } from '../../components/ui';
import {
  getTmdbCache, setTmdbCache, clearTmdbCache,
  getBookCache, setBookCache, clearBookCache,
  getExploreDataCache, setExploreDataCache,
  getScrollCache, setScrollCache
} from '../../services/exploreCache';
import './ExplorePage.css';

type SagaRatingCacheEntry = {
  saga?: number;
  harici?: number;
  updatedAt?: number;
};

type SagaRatingUpdateDetail = {
  icerikId: number;
  saga?: number | null;
  harici?: number | null;
};

const sagaRatingsCache = new Map<number, SagaRatingCacheEntry>();

const applySagaRatingUpdate = (detail?: SagaRatingUpdateDetail) => {
  if (!detail || !detail.icerikId) return;
  const sagaValue = typeof detail.saga === 'number' ? detail.saga : undefined;
  const hariciValue = typeof detail.harici === 'number' ? detail.harici : undefined;
  if (sagaValue === undefined && hariciValue === undefined) {
    sagaRatingsCache.delete(detail.icerikId);
    return;
  }
  sagaRatingsCache.set(detail.icerikId, {
    saga: sagaValue,
    harici: hariciValue,
    updatedAt: Date.now(),
  });
};

let sagaRatingCacheListener: ((event: Event) => void) | null = null;

if (typeof window !== 'undefined' && !sagaRatingCacheListener) {
  sagaRatingCacheListener = (event: Event) => {
    const custom = event as CustomEvent<SagaRatingUpdateDetail>;
    applySagaRatingUpdate(custom.detail);
  };
  window.addEventListener('saga-rating-updated', sagaRatingCacheListener as EventListener);
}

// ============================================
// MATCH PERCENTAGE ALGORITHM
// ============================================

interface UserPreferences {
  favoriteGenres: Map<number, number>; // genreId -> weight (izleme/puan sayÄ±sÄ±)
  avgRating: number; // kullanÄ±cÄ±nÄ±n ortalama puanÄ±
  prefersTv: boolean; // dizi mi film mi tercih ediyor
  recentYearBias: number; // yeni iÃ§erik tercihi (0-1)
}

// KullanÄ±cÄ±nÄ±n tercihlerine gÃ¶re eÅŸleÅŸme yÃ¼zdesi hesapla
function calculateMatchPercentage(
  film: TmdbFilm,
  userPrefs: UserPreferences | null,
  allResults: TmdbFilm[]
): number {
  // KullanÄ±cÄ± giriÅŸ yapmamÄ±ÅŸ veya tercih verisi yoksa basit formÃ¼l
  if (!userPrefs || userPrefs.favoriteGenres.size === 0) {
    const rating = film.puan || film.voteAverage || 0;
    const sagaRating = film.sagaOrtalamaPuan || 0;
    // Temel formÃ¼l: TMDB puanÄ± + SAGA puanÄ± + popÃ¼lerlik
    const baseScore = (rating * 5) + (sagaRating * 5) + 40;
    return Math.min(99, Math.max(50, Math.round(baseScore)));
  }

  let score = 50; // BaÅŸlangÄ±Ã§ puanÄ±

  // 1. TÃ¼r eÅŸleÅŸmesi (max +30 puan)
  const filmGenres = film.turIds || [];
  let genreScore = 0;
  let maxGenreWeight = 0;
  userPrefs.favoriteGenres.forEach((weight) => {
    if (weight > maxGenreWeight) maxGenreWeight = weight;
  });
  
  filmGenres.forEach(genreId => {
    const weight = userPrefs.favoriteGenres.get(genreId) || 0;
    if (weight > 0 && maxGenreWeight > 0) {
      genreScore += (weight / maxGenreWeight) * 15; // Her eÅŸleÅŸen tÃ¼r iÃ§in max 15 puan
    }
  });
  score += Math.min(30, genreScore);

  // 2. Puan kalitesi (max +20 puan)
  const rating = film.puan || film.voteAverage || 0;
  const sagaRating = film.sagaOrtalamaPuan || 0;
  const combinedRating = sagaRating > 0 ? (rating * 0.4 + sagaRating * 0.6) : rating;
  score += (combinedRating / 10) * 20;

  // 3. Media type tercihi (max +10 puan)
  const isTV = film.mediaType === 'tv';
  if ((userPrefs.prefersTv && isTV) || (!userPrefs.prefersTv && !isTV)) {
    score += 10;
  }

  // 4. Yenilik faktÃ¶rÃ¼ (max +10 puan)
  const year = parseInt((film.yayinTarihi || film.releaseDate || '0').split('-')[0]);
  const currentYear = new Date().getFullYear();
  if (year >= currentYear - 2) {
    score += 10 * userPrefs.recentYearBias;
  } else if (year >= currentYear - 5) {
    score += 5 * userPrefs.recentYearBias;
  }

  // 5. GÃ¶receli popÃ¼lerlik (max +10 puan)
  // En yÃ¼ksek puanlÄ± iÃ§erikle karÅŸÄ±laÅŸtÄ±r
  const maxRating = Math.max(...allResults.map(f => f.puan || f.voteAverage || 0));
  if (maxRating > 0) {
    score += (rating / maxRating) * 10;
  }

  return Math.min(99, Math.max(40, Math.round(score)));
}

// ============================================
// FILTER PANEL COMPONENT (SaÄŸ Sidebar)
// ============================================

// TMDB tÃ¼rleri
const FILM_GENRES = [
  { id: 28, name: 'Aksiyon' },
  { id: 12, name: 'Macera' },
  { id: 16, name: 'Animasyon' },
  { id: 35, name: 'Komedi' },
  { id: 80, name: 'SuÃ§' },
  { id: 99, name: 'Belgesel' },
  { id: 18, name: 'Dram' },
  { id: 10751, name: 'Aile' },
  { id: 14, name: 'Fantastik' },
  { id: 36, name: 'Tarih' },
  { id: 27, name: 'Korku' },
  { id: 10402, name: 'MÃ¼zik' },
  { id: 9648, name: 'Gizem' },
  { id: 10749, name: 'Romantik' },
  { id: 878, name: 'Bilim Kurgu' },
  { id: 10770, name: 'TV Film' },
  { id: 53, name: 'Gerilim' },
  { id: 10752, name: 'SavaÅŸ' },
  { id: 37, name: 'Western' },
];

const TV_GENRES = [
  { id: 10759, name: 'Aksiyon & Macera' },
  { id: 16, name: 'Animasyon' },
  { id: 35, name: 'Komedi' },
  { id: 80, name: 'SuÃ§' },
  { id: 99, name: 'Belgesel' },
  { id: 18, name: 'Dram' },
  { id: 10751, name: 'Aile' },
  { id: 10762, name: 'Ã‡ocuk' },
  { id: 9648, name: 'Gizem' },
  { id: 10763, name: 'Haber' },
  { id: 10764, name: 'Reality' },
  { id: 10765, name: 'Bilim Kurgu & Fantazi' },
  { id: 10766, name: 'Pembe Dizi' },
  { id: 10767, name: 'Talk Show' },
  { id: 10768, name: 'SavaÅŸ & Politik' },
  { id: 37, name: 'Western' },
];

// "TÃ¼mÃ¼" seÃ§iliyken kullanÄ±lacak birleÅŸik tÃ¼rler (ortak ID'ler)
const COMBINED_GENRES = [
  { id: 16, name: 'Animasyon' },
  { id: 35, name: 'Komedi' },
  { id: 80, name: 'SuÃ§' },
  { id: 99, name: 'Belgesel' },
  { id: 18, name: 'Dram' },
  { id: 10751, name: 'Aile' },
  { id: 9648, name: 'Gizem' },
  { id: 37, name: 'Western' },
];

// Film ve dizi tÃ¼r eÅŸleÅŸtirmesi (benzer tÃ¼rler iÃ§in)
// KullanÄ±cÄ± bir tÃ¼r seÃ§tiÄŸinde, hem film hem dizi iÃ§in geÃ§erli ID'leri dÃ¶ndÃ¼rÃ¼r
const GENRE_MAPPING: { [key: number]: number[] } = {
  // Film tÃ¼rleri -> eÅŸleÅŸen tÃ¼m ID'ler
  28: [28, 10759], // Aksiyon -> Film Aksiyon + Dizi Aksiyon&Macera
  12: [12, 10759], // Macera -> Film Macera + Dizi Aksiyon&Macera
  14: [14, 10765], // Fantastik -> Film Fantastik + Dizi Bilim Kurgu&Fantazi
  878: [878, 10765], // Bilim Kurgu -> Film Bilim Kurgu + Dizi Bilim Kurgu&Fantazi
  10752: [10752, 10768], // SavaÅŸ -> Film SavaÅŸ + Dizi SavaÅŸ&Politik
  // Dizi tÃ¼rleri -> eÅŸleÅŸen tÃ¼m ID'ler
  10759: [28, 12, 10759], // Aksiyon&Macera -> kendisi + Film Aksiyon + Film Macera
  10765: [14, 878, 10765], // Bilim Kurgu&Fantazi -> kendisi + Film Fantastik + Film Bilim Kurgu
  10768: [10752, 10768], // SavaÅŸ&Politik -> kendisi + Film SavaÅŸ
  // Ortak tÃ¼rler (aynÄ± ID)
  16: [16], 35: [35], 80: [80], 99: [99], 18: [18], 10751: [10751], 9648: [9648], 37: [37],
  27: [27], 10402: [10402], 10749: [10749], 36: [36], 10770: [10770], 53: [53],
  10762: [10762], 10763: [10763], 10764: [10764], 10766: [10766], 10767: [10767],
};

interface FilterPanelProps {
  // Modal kontrolÃ¼
  isOpen: boolean;
  onClose: () => void;
  // Tab
  activeTab: 'tmdb' | 'kitaplar';
  // TMDB filtreleri
  tmdbFilter: 'all' | 'movie' | 'tv';
  onTmdbFilterChange: (filter: 'all' | 'movie' | 'tv') => void;
  tmdbSort: 'popular' | 'top_rated' | 'trending' | 'now_playing';
  onTmdbSortChange: (sort: 'popular' | 'top_rated' | 'trending' | 'now_playing') => void;
  // Kitap filtreleri
  bookCategory: string;
  bookCategories: { value: string; label: string; queryEn: string; queryTr: string }[];
  onBookCategoryChange: (category: string) => void;
  bookLang: string;
  bookLanguages: { value: string; label: string }[];
  onBookLangChange: (lang: string) => void;
  // Ortak filtreler
  minYear: number | null;
  maxYear: number | null;
  minPuan: number | null;
  selectedGenres: number[];
  onMinYearChange: (year: number | null) => void;
  onMaxYearChange: (year: number | null) => void;
  onMinPuanChange: (puan: number | null) => void;
  onGenresChange: (genres: number[]) => void;
  onApply: () => void;
  onReset: () => void;
}

function FilterPanel({
  isOpen,
  onClose,
  activeTab,
  tmdbFilter,
  onTmdbFilterChange,
  tmdbSort,
  onTmdbSortChange,
  bookCategory,
  bookCategories,
  onBookCategoryChange,
  bookLang,
  bookLanguages,
  onBookLangChange,
  minYear,
  maxYear,
  minPuan,
  selectedGenres,
  onMinYearChange,
  onMaxYearChange,
  onMinPuanChange,
  onGenresChange,
  onApply,
  onReset,
}: FilterPanelProps) {
  // Collapsible sections state
  const [showGenres, setShowGenres] = useState(true);
  const [showYearFilter, setShowYearFilter] = useState(true);
  const [showRatingFilter, setShowRatingFilter] = useState(true);
  const [showBookCategories, setShowBookCategories] = useState(true);

  // Aktif tab'a gÃ¶re tÃ¼r listesi
  const genres = tmdbFilter === 'all' ? COMBINED_GENRES : tmdbFilter === 'tv' ? TV_GENRES : FILM_GENRES;

  const toggleGenre = (genreId: number) => {
    if (selectedGenres.includes(genreId)) {
      onGenresChange(selectedGenres.filter(id => id !== genreId));
    } else {
      onGenresChange([...selectedGenres, genreId]);
    }
  };

  // Filtre sayÄ±sÄ±
  const activeFilterCount = [
    minYear, 
    maxYear, 
    minPuan, 
    selectedGenres.length > 0 ? selectedGenres : null,
    bookCategory !== 'all' ? bookCategory : null,
    bookLang !== 'all' ? bookLang : null
  ].filter(Boolean).length;

  // ESC tuÅŸu ile kapatma
  useEffect(() => {
    const handleEsc = (e: KeyboardEvent) => {
      if (e.key === 'Escape') onClose();
    };
    if (isOpen) {
      document.addEventListener('keydown', handleEsc);
      document.body.style.overflow = 'hidden';
    }
    return () => {
      document.removeEventListener('keydown', handleEsc);
      document.body.style.overflow = '';
    };
  }, [isOpen, onClose]);

  // Uygula ve kapat
  const handleApplyAndClose = () => {
    onApply();
    onClose();
  };

  if (!isOpen) return null;

  return (
    <div 
      style={{
        position: 'fixed',
        top: '80px',
        right: '20px',
        bottom: '100px',
        width: '300px',
        background: 'rgba(17,17,21,0.95)',
        border: '1px solid rgba(212,168,83,0.2)',
        borderRadius: '16px',
        zIndex: 100,
        display: 'flex',
        flexDirection: 'column',
        boxShadow: '0 8px 32px rgba(0,0,0,0.4)',
        backdropFilter: 'blur(20px)'
      }}
    >
      {/* Header */}
      <div style={{ 
        padding: '16px 20px',
        borderBottom: '1px solid rgba(255,255,255,0.06)',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center'
      }}>
        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
          <SlidersHorizontal size={16} style={{ color: '#d4a853' }} />
          <span style={{ fontSize: '14px', fontWeight: 600, color: '#fff' }}>Filtreler</span>
          {activeFilterCount > 0 && (
            <span style={{ 
              background: '#d4a853', 
              color: '#000', 
              fontSize: '10px', 
              fontWeight: 600, 
              padding: '2px 6px', 
              borderRadius: '10px' 
            }}>
              {activeFilterCount}
            </span>
          )}
        </div>
        <button 
          onClick={onClose}
          style={{ 
            background: 'rgba(255,255,255,0.05)', 
            border: 'none', 
            borderRadius: '8px',
            color: 'rgba(255,255,255,0.5)', 
            cursor: 'pointer', 
            padding: '6px',
            display: 'flex'
          }}
        >
          <X size={16} />
        </button>
      </div>

      {/* Content */}
      <div style={{ 
        flex: 1, 
        padding: '16px 20px', 
        overflowY: 'auto',
        display: 'flex',
        flexDirection: 'column',
        gap: '16px'
      }}>
        {/* TMDB Filtreleri */}
        {activeTab === 'tmdb' && (
          <>
            {/* Medya TÃ¼rÃ¼ */}
            <div style={{ 
              background: 'rgba(255,255,255,0.03)', 
              borderRadius: '12px', 
              padding: '14px',
              border: '1px solid rgba(255,255,255,0.05)'
            }}>
              <div style={{ fontSize: '11px', color: 'rgba(255,255,255,0.4)', marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>
                Medya TÃ¼rÃ¼
              </div>
              <div style={{ display: 'flex', gap: '6px' }}>
                {[
                  { value: 'all', label: 'TÃ¼mÃ¼', icon: <Star size={12} /> },
                  { value: 'movie', label: 'Film', icon: <Film size={12} /> },
                  { value: 'tv', label: 'Dizi', icon: <Tv size={12} /> }
                ].map((item) => (
                  <button
                    key={item.value}
                    onClick={() => onTmdbFilterChange(item.value as 'all' | 'movie' | 'tv')}
                    style={{
                      flex: 1,
                      padding: '8px 12px',
                      borderRadius: '8px',
                      border: tmdbFilter === item.value ? '1px solid #d4a853' : '1px solid rgba(255,255,255,0.08)',
                      background: tmdbFilter === item.value ? 'rgba(212,168,83,0.15)' : 'transparent',
                      color: tmdbFilter === item.value ? '#d4a853' : 'rgba(255,255,255,0.6)',
                      cursor: 'pointer',
                      fontSize: '12px',
                      fontWeight: 500,
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      gap: '4px'
                    }}
                  >
                    {item.icon}
                    {item.label}
                  </button>
                ))}
              </div>
            </div>

            {/* SÄ±ralama */}
            <div style={{ 
              background: 'rgba(255,255,255,0.03)', 
              borderRadius: '12px', 
              padding: '14px',
              border: '1px solid rgba(255,255,255,0.05)'
            }}>
              <div style={{ fontSize: '11px', color: 'rgba(255,255,255,0.4)', marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>
                SÄ±ralama
              </div>
              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>
                {[
                  { value: 'popular', label: 'PopÃ¼ler', icon: <TrendingUp size={12} /> },
                  { value: 'top_rated', label: 'En Ä°yi', icon: <Star size={12} /> },
                  { value: 'trending', label: 'Trend', icon: <TrendingUp size={12} /> },
                  { value: 'now_playing', label: tmdbFilter === 'tv' ? 'YayÄ±nda' : 'Vizyonda', icon: <Clock size={12} /> }
                ].map((item) => (
                  <button
                    key={item.value}
                    onClick={() => onTmdbSortChange(item.value as 'popular' | 'top_rated' | 'trending' | 'now_playing')}
                    style={{
                      padding: '6px 12px',
                      borderRadius: '6px',
                      border: tmdbSort === item.value ? '1px solid #d4a853' : '1px solid rgba(255,255,255,0.08)',
                      background: tmdbSort === item.value ? 'rgba(212,168,83,0.15)' : 'transparent',
                      color: tmdbSort === item.value ? '#d4a853' : 'rgba(255,255,255,0.6)',
                      cursor: 'pointer',
                      fontSize: '11px',
                      fontWeight: 500,
                      display: 'flex',
                      alignItems: 'center',
                      gap: '4px'
                    }}
                  >
                    {item.icon}
                    {item.label}
                  </button>
                ))}
              </div>
            </div>

            {/* TÃ¼rler */}
            <div style={{ 
              background: 'rgba(255,255,255,0.03)', 
              borderRadius: '12px', 
              padding: '14px',
              border: '1px solid rgba(255,255,255,0.05)'
            }}>
              <button
                onClick={() => setShowGenres(!showGenres)}
                style={{
                  width: '100%',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'space-between',
                  background: 'none',
                  border: 'none',
                  cursor: 'pointer',
                  padding: 0,
                  marginBottom: showGenres ? '10px' : 0
                }}
              >
                <span style={{ fontSize: '11px', color: 'rgba(255,255,255,0.4)', textTransform: 'uppercase', letterSpacing: '0.5px' }}>
                  TÃ¼rler {selectedGenres.length > 0 && `(${selectedGenres.length})`}
                </span>
                {showGenres ? <ChevronUp size={14} style={{ color: 'rgba(255,255,255,0.4)' }} /> : <ChevronDown size={14} style={{ color: 'rgba(255,255,255,0.4)' }} />}
              </button>
              {showGenres && (
                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px', maxHeight: '150px', overflowY: 'auto' }}>
                  {genres.map((genre) => (
                    <button
                      key={genre.id}
                      onClick={() => toggleGenre(genre.id)}
                      style={{
                        padding: '5px 10px',
                        borderRadius: '20px',
                        border: selectedGenres.includes(genre.id) ? '1px solid #d4a853' : '1px solid rgba(255,255,255,0.08)',
                        background: selectedGenres.includes(genre.id) ? 'rgba(212,168,83,0.15)' : 'transparent',
                        color: selectedGenres.includes(genre.id) ? '#d4a853' : 'rgba(255,255,255,0.5)',
                        cursor: 'pointer',
                        fontSize: '11px',
                        fontWeight: 500
                      }}
                    >
                      {genre.name}
                    </button>
                  ))}
                </div>
              )}
            </div>
          </>
        )}

        {/* Kitap Filtreleri */}
        {activeTab === 'kitaplar' && (
          <>
            {/* Kitap Kategorileri */}
            <div style={{ 
              background: 'rgba(255,255,255,0.03)', 
              borderRadius: '12px', 
              padding: '14px',
              border: '1px solid rgba(255,255,255,0.05)'
            }}>
              <button
                onClick={() => setShowBookCategories(!showBookCategories)}
                style={{
                  width: '100%',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'space-between',
                  background: 'none',
                  border: 'none',
                  cursor: 'pointer',
                  padding: 0,
                  marginBottom: showBookCategories ? '10px' : 0
                }}
              >
                <span style={{ fontSize: '11px', color: 'rgba(255,255,255,0.4)', textTransform: 'uppercase', letterSpacing: '0.5px', display: 'flex', alignItems: 'center', gap: '6px' }}>
                  <BookOpen size={12} style={{ color: '#d4a853' }} />
                  Kategori
                </span>
                {showBookCategories ? <ChevronUp size={14} style={{ color: 'rgba(255,255,255,0.4)' }} /> : <ChevronDown size={14} style={{ color: 'rgba(255,255,255,0.4)' }} />}
              </button>
              {showBookCategories && (
                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px', maxHeight: '180px', overflowY: 'auto' }}>
                  {bookCategories.map((cat) => (
                    <button
                      key={cat.value}
                      onClick={() => onBookCategoryChange(cat.value)}
                      style={{
                        padding: '6px 12px',
                        borderRadius: '8px',
                        border: bookCategory === cat.value ? '1px solid #d4a853' : '1px solid rgba(255,255,255,0.08)',
                        background: bookCategory === cat.value ? 'rgba(212,168,83,0.15)' : 'transparent',
                        color: bookCategory === cat.value ? '#d4a853' : 'rgba(255,255,255,0.5)',
                        cursor: 'pointer',
                        fontSize: '11px',
                        fontWeight: 500
                      }}
                    >
                      {cat.label}
                    </button>
                  ))}
                </div>
              )}
            </div>

            {/* Dil Filtresi */}
            <div style={{ 
              background: 'rgba(255,255,255,0.03)', 
              borderRadius: '12px', 
              padding: '14px',
              border: '1px solid rgba(255,255,255,0.05)'
            }}>
              <div style={{ fontSize: '11px', color: 'rgba(255,255,255,0.4)', marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '0.5px', display: 'flex', alignItems: 'center', gap: '6px' }}>
                <Globe size={12} style={{ color: '#d4a853' }} />
                Dil
              </div>
              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>
                {bookLanguages.map((lang) => (
                  <button
                    key={lang.value}
                    onClick={() => onBookLangChange(lang.value)}
                    style={{
                      padding: '6px 12px',
                      borderRadius: '8px',
                      border: bookLang === lang.value ? '1px solid #d4a853' : '1px solid rgba(255,255,255,0.08)',
                      background: bookLang === lang.value ? 'rgba(212,168,83,0.15)' : 'transparent',
                      color: bookLang === lang.value ? '#d4a853' : 'rgba(255,255,255,0.5)',
                      cursor: 'pointer',
                      fontSize: '11px',
                      fontWeight: 500
                    }}
                  >
                    {lang.label}
                  </button>
                ))}
              </div>
            </div>
          </>
        )}

        {/* YÄ±l Filtresi - TÃ¼m tablar iÃ§in */}
        <div style={{ 
          background: 'rgba(255,255,255,0.03)', 
          borderRadius: '12px', 
          padding: '14px',
          border: '1px solid rgba(255,255,255,0.05)'
        }}>
          <button
            onClick={() => setShowYearFilter(!showYearFilter)}
            style={{
              width: '100%',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'space-between',
              background: 'none',
              border: 'none',
              cursor: 'pointer',
              padding: 0,
              marginBottom: showYearFilter ? '10px' : 0
            }}
          >
            <span style={{ fontSize: '11px', color: 'rgba(255,255,255,0.4)', textTransform: 'uppercase', letterSpacing: '0.5px', display: 'flex', alignItems: 'center', gap: '6px' }}>
              <Calendar size={12} style={{ color: '#d4a853' }} />
              YayÄ±n YÄ±lÄ±
            </span>
            {showYearFilter ? <ChevronUp size={14} style={{ color: 'rgba(255,255,255,0.4)' }} /> : <ChevronDown size={14} style={{ color: 'rgba(255,255,255,0.4)' }} />}
          </button>
          {showYearFilter && (
            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
              {/* HÄ±zlÄ± SeÃ§im */}
              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>
                {[
                  { label: 'TÃ¼mÃ¼', min: null, max: null },
                  { label: '2024', min: 2024, max: 2024 },
                  { label: '2023', min: 2023, max: 2023 },
                  { label: '2020-24', min: 2020, max: 2024 },
                  { label: '2010-19', min: 2010, max: 2019 },
                  { label: 'Klasik', min: null, max: 1999 },
                ].map((preset) => (
                  <button
                    key={preset.label}
                    onClick={() => {
                      onMinYearChange(preset.min);
                      onMaxYearChange(preset.max);
                    }}
                    style={{
                      padding: '5px 10px',
                      borderRadius: '20px',
                      border: minYear === preset.min && maxYear === preset.max ? '1px solid #d4a853' : '1px solid rgba(255,255,255,0.08)',
                      background: minYear === preset.min && maxYear === preset.max ? 'rgba(212,168,83,0.15)' : 'transparent',
                      color: minYear === preset.min && maxYear === preset.max ? '#d4a853' : 'rgba(255,255,255,0.5)',
                      cursor: 'pointer',
                      fontSize: '11px',
                      fontWeight: 500
                    }}
                  >
                    {preset.label}
                  </button>
                ))}
              </div>
              {/* Custom Range */}
              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                <input
                  type="number"
                  placeholder="Min"
                  min="1900"
                  max="2025"
                  value={minYear || ''}
                  onChange={(e) => onMinYearChange(e.target.value ? parseInt(e.target.value) : null)}
                  style={{
                    flex: 1,
                    padding: '8px 12px',
                    borderRadius: '8px',
                    border: '1px solid rgba(255,255,255,0.1)',
                    background: 'rgba(255,255,255,0.05)',
                    color: '#fff',
                    fontSize: '12px',
                    outline: 'none'
                  }}
                />
                <span style={{ color: 'rgba(255,255,255,0.3)', fontSize: '12px' }}>-</span>
                <input
                  type="number"
                  placeholder="Max"
                  min="1900"
                  max="2025"
                  value={maxYear || ''}
                  onChange={(e) => onMaxYearChange(e.target.value ? parseInt(e.target.value) : null)}
                  style={{
                    flex: 1,
                    padding: '8px 12px',
                    borderRadius: '8px',
                    border: '1px solid rgba(255,255,255,0.1)',
                    background: 'rgba(255,255,255,0.05)',
                    color: '#fff',
                    fontSize: '12px',
                    outline: 'none'
                  }}
                />
              </div>
            </div>
          )}
        </div>

        {/* Puan Filtresi */}
        <div style={{ 
          background: 'rgba(255,255,255,0.03)', 
          borderRadius: '12px', 
          padding: '14px',
          border: '1px solid rgba(255,255,255,0.05)'
        }}>
          <button
            onClick={() => setShowRatingFilter(!showRatingFilter)}
            style={{
              width: '100%',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'space-between',
              background: 'none',
              border: 'none',
              cursor: 'pointer',
              padding: 0,
              marginBottom: showRatingFilter ? '10px' : 0
            }}
          >
            <span style={{ fontSize: '11px', color: 'rgba(255,255,255,0.4)', textTransform: 'uppercase', letterSpacing: '0.5px', display: 'flex', alignItems: 'center', gap: '6px' }}>
              <Star size={12} style={{ color: '#d4a853' }} />
              Minimum Puan
            </span>
            {showRatingFilter ? <ChevronUp size={14} style={{ color: 'rgba(255,255,255,0.4)' }} /> : <ChevronDown size={14} style={{ color: 'rgba(255,255,255,0.4)' }} />}
          </button>
          {showRatingFilter && (
            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>
              {[null, 5, 6, 7, 8, 9].map((puan) => (
                <button
                  key={puan ?? 'all'}
                  onClick={() => onMinPuanChange(puan)}
                  style={{
                    padding: '8px 10px',
                    borderRadius: '8px',
                    border: minPuan === puan ? '1px solid #d4a853' : '1px solid rgba(255,255,255,0.08)',
                    background: minPuan === puan ? 'rgba(212,168,83,0.15)' : 'transparent',
                    color: minPuan === puan ? '#d4a853' : 'rgba(255,255,255,0.5)',
                    cursor: 'pointer',
                    fontSize: '11px',
                    fontWeight: 600
                  }}
                >
                  {puan ? `${puan}+` : 'TÃ¼mÃ¼'}
                </button>
              ))}
            </div>
          )}
        </div>
      </div>

      {/* Footer */}
      <div style={{ 
        padding: '12px 20px',
        borderTop: '1px solid rgba(255,255,255,0.06)',
        display: 'flex',
        gap: '8px'
      }}>
        <button 
          onClick={onReset}
          style={{ 
            flex: 1, 
            padding: '10px', 
            borderRadius: '8px', 
            background: 'transparent', 
            border: '1px solid rgba(255,255,255,0.1)', 
            color: 'rgba(255,255,255,0.6)',
            cursor: 'pointer',
            fontSize: '12px',
            fontWeight: 500
          }}
        >
          Temizle
        </button>
        <button 
          onClick={handleApplyAndClose}
          style={{ 
            flex: 1, 
            padding: '10px', 
            borderRadius: '8px', 
            background: 'linear-gradient(135deg, #d4a853 0%, #a68532 100%)', 
            border: 'none', 
            color: '#000',
            cursor: 'pointer',
            fontSize: '12px',
            fontWeight: 600
          }}
        >
          Uygula
        </button>
      </div>
    </div>
  );
}

// ============================================
// CONTENT GRID SKELETON
// ============================================

function ContentSkeleton() {
  return (
    <div>
      <div className="aspect-[2/3] rounded-xl skeleton mb-2" />
      <div className="h-4 w-full skeleton rounded mb-1" />
      <div className="h-3 w-20 skeleton rounded" />
    </div>
  );
}

// ============================================
// HELPER FUNCTIONS
// ============================================

// HTML taglarÄ±nÄ± temizleyen yardÄ±mcÄ± fonksiyon
// Google Books API bazen <b>, <p>, <i> gibi HTML taglarÄ± dÃ¶ndÃ¼rÃ¼yor
function stripHtmlTags(html: string | undefined | null): string {
  if (!html) return '';
  // <br> ve </p> taglarÄ±nÄ± satÄ±r sonuna Ã§evir (paragraf geÃ§iÅŸleri iÃ§in)
  let text = html.replace(/<br\s*\/?>/gi, '\n')
                 .replace(/<\/p>/gi, '\n');
  // DiÄŸer HTML taglarÄ±nÄ± kaldÄ±r
  text = text.replace(/<[^>]*>/g, '');
  // HTML entities'i decode et
  text = text.replace(/&amp;/g, '&')
             .replace(/&lt;/g, '<')
             .replace(/&gt;/g, '>')
             .replace(/&quot;/g, '"')
             .replace(/&#39;/g, "'")
             .replace(/&nbsp;/g, ' ');
  // Birden fazla satÄ±r sonunu tek satÄ±r sonuna Ã§evir
  text = text.replace(/\n{3,}/g, '\n\n');
  // SatÄ±r baÅŸÄ±/sonu boÅŸluklarÄ± temizle
  text = text.split('\n').map(line => line.trim()).join('\n').trim();
  return text;
}

// YayÄ±n tarihini yÄ±la Ã§eviren yardÄ±mcÄ± fonksiyon
// "2023", "2023-05", "2023-05-15" formatlarÄ±nÄ± destekler
function parseYearFromDate(dateStr: string | undefined): number {
  if (!dateStr) return 0;
  
  const yearMatch = dateStr.match(/^(\d{4})/);
  if (yearMatch) {
    return parseInt(yearMatch[1], 10);
  }
  return 0;
}

// ============================================
// MAIN EXPLORE PAGE
// ============================================

export default function ExplorePage() {
  const navigate = useNavigate();
  const [searchParams, setSearchParams] = useSearchParams();
  const { user } = useAuth();

  // KullanÄ±cÄ± tercihleri state'i
  const [userPreferences, setUserPreferences] = useState<UserPreferences | null>(null);
  // KullanÄ±cÄ±nÄ±n izlediÄŸi/kÃ¼tÃ¼phanesindeki iÃ§erik ID'leri (harici ID'ler - TMDB ID)
  const [userWatchedIds, setUserWatchedIds] = useState<Set<string>>(new Set());

  // Body background override for void theme
  useEffect(() => {
    const originalBg = document.body.style.background;
    document.body.style.background = '#030304';
    return () => {
      document.body.style.background = originalBg;
    };
  }, []);

  // KullanÄ±cÄ± tercihlerini yÃ¼kle (kÃ¼tÃ¼phane ve izleme geÃ§miÅŸinden)
  useEffect(() => {
    const loadUserPreferences = async () => {
      if (!user?.id) {
        setUserPreferences(null);
        setUserWatchedIds(new Set());
        return;
      }

      try {
        // KullanÄ±cÄ±nÄ±n kÃ¼tÃ¼phanesini Ã§ek
        const kutuphane = await kutuphaneApi.getKutuphane(user.id, { limit: 200 });
        
        // Ä°zlenen iÃ§eriklerin harici ID'lerini topla
        const watchedIds = new Set<string>();
        
        if (!kutuphane || kutuphane.length === 0) {
          setUserPreferences(null);
          setUserWatchedIds(watchedIds);
          return;
        }

        // TÃ¼r tercihlerini analiz et
        const genreWeights = new Map<number, number>();
        let totalRating = 0;
        let ratingCount = 0;
        let tvCount = 0;
        let movieCount = 0;
        let recentCount = 0;
        let totalCount = 0;
        const currentYear = new Date().getFullYear();

        for (const item of kutuphane) {
          // Ä°Ã§erik ID'sini kaydet (sagaIcerikId ile eÅŸleÅŸecek)
          if (item.icerikId) {
            watchedIds.add(String(item.icerikId));
          }
          
          if (item.icerik) {
            totalCount++;
            
            // TÃ¼r analizi - iÃ§eriÄŸin tÃ¼rlerini kontrol et
            // Not: Backend'den turIds gelmiyorsa iÃ§erik detayÄ±ndan Ã§ekmemiz gerekebilir
            // Åimdilik basit bir yaklaÅŸÄ±m kullanalÄ±m
            
            // Puan ortalamasÄ±
            if (item.ortalamaPuan && item.ortalamaPuan > 0) {
              totalRating += item.ortalamaPuan;
              ratingCount++;
            }

            // Media type tercihi
            if (item.tur === 'dizi') {
              tvCount++;
            } else {
              movieCount++;
            }

            // Yenilik tercihi - gÃ¼ncelleme zamanÄ±na bak
            const updateYear = item.guncellemeZamani 
              ? new Date(item.guncellemeZamani).getFullYear() 
              : currentYear;
            if (updateYear >= currentYear - 1) {
              recentCount++;
            }
          }
        }
        
        setUserWatchedIds(watchedIds);

        // Tercihleri hesapla
        const prefs: UserPreferences = {
          favoriteGenres: genreWeights,
          avgRating: ratingCount > 0 ? totalRating / ratingCount : 7,
          prefersTv: tvCount > movieCount,
          recentYearBias: totalCount > 0 ? Math.min(1, recentCount / totalCount + 0.3) : 0.5,
        };

        setUserPreferences(prefs);
      } catch (error) {
        console.error('KullanÄ±cÄ± tercihleri yÃ¼klenemedi:', error);
        setUserPreferences(null);
        setUserWatchedIds(new Set());
      }
    };

    loadUserPreferences();
  }, [user?.id]);

  // KullanÄ±cÄ±nÄ±n takip ettiklerini yÃ¼kle
  useEffect(() => {
    const loadTakipEdilenler = async () => {
      if (!user?.id) {
        setTakipEdilenIds(new Set());
        return;
      }
      try {
        const takipEdilenler = await kullaniciApi.getTakipEdilenler(user.id.toString());
        const ids = new Set(takipEdilenler.map(k => k.id));
        setTakipEdilenIds(ids);
      } catch (error) {
        console.error('Takip edilenler yÃ¼klenemedi:', error);
      }
    };
    loadTakipEdilenler();
  }, [user?.id]);

  // KeÅŸfet sayfasÄ± ek verilerini yÃ¼kle (popÃ¼ler listeler, Ã¶nerilen kullanÄ±cÄ±lar)
  useEffect(() => {
    const loadKesfetData = async () => {
      // Cache'den veri varsa API Ã§aÄŸrÄ±sÄ± yapma
      const cachedExploreData = getExploreDataCache();
      if (cachedExploreData) {
        setPopulerListeler(cachedExploreData.populerListeler);
        setOnerilenKullanicilar(cachedExploreData.onerilenKullanicilar);
        return;
      }
      try {
        const [listeler, kullanicilar] = await Promise.all([
          listeApi.getPopuler(6).catch(() => []),
          kullaniciApi.getOnerilenler(5).catch(() => []),
        ]);
        setPopulerListeler(listeler);
        setOnerilenKullanicilar(kullanicilar);
        
        // Cache'e kaydet
        setExploreDataCache(listeler, kullanicilar);
      } catch (error) {
        console.error('KeÅŸfet verileri yÃ¼klenemedi:', error);
      }
    };
    loadKesfetData();
  }, []);

  // URL'den state'leri oku (sayfa geri dÃ¶nÃ¼ÅŸÃ¼nde korunmasÄ± iÃ§in)
  const initialTab = (searchParams.get('tab') as 'tmdb' | 'kitaplar') || 'tmdb';
  const initialQuery = searchParams.get('q') || '';
  const initialTmdbFilter = (searchParams.get('tmdbFilter') as 'all' | 'movie' | 'tv') || 'all';
  const initialTmdbSort = (searchParams.get('tmdbSort') as 'popular' | 'top_rated' | 'trending' | 'now_playing') || 'popular';
  const initialBookLang = searchParams.get('bookLang') || '';
  const initialBookCategory = searchParams.get('bookCategory') || 'all';
  const initialMinYear = searchParams.get('minYear') ? parseInt(searchParams.get('minYear')!) : null;
  const initialMaxYear = searchParams.get('maxYear') ? parseInt(searchParams.get('maxYear')!) : null;
  const initialMinPuan = searchParams.get('minPuan') ? parseInt(searchParams.get('minPuan')!) : null;

  // In-memory cache'den sonuÃ§larÄ± oku - initial deÄŸerlerden sonra tanÄ±mlanmalÄ±
  const tmdbCacheData = getTmdbCache(initialTmdbFilter, initialTmdbSort);
  const bookCacheData = getBookCache(initialBookCategory, initialBookLang);
  
  // Cache'den veri geldiyse baÅŸlangÄ±Ã§ deÄŸerlerini ayarla
  const hasCache = (tmdbCacheData !== null && tmdbCacheData.results.length > 0) || 
                   (bookCacheData !== null && bookCacheData.results.length > 0);
  
  // Cache'den sayfa ve index deÄŸerlerini al
  const initialTmdbPage = tmdbCacheData?.page || 1;
  const initialBookStartIndex = bookCacheData?.startIndex || 0;
  const initialQueryIndex = bookCacheData?.queryIndex || 0;

  // States
  const [searchQuery, setSearchQuery] = useState(initialQuery);
  const previousSearchValue = useRef(searchQuery);
  const [activeTab, setActiveTab] = useState<'tmdb' | 'kitaplar'>(initialTab);

  // TMDB filters
  const [tmdbFilter, setTmdbFilter] = useState<'all' | 'movie' | 'tv'>(initialTmdbFilter);
  const [tmdbSort, setTmdbSort] = useState<'popular' | 'top_rated' | 'trending' | 'now_playing'>(initialTmdbSort);
  const [tmdbPage, setTmdbPage] = useState(initialTmdbPage);
  const [tmdbHasMore, setTmdbHasMore] = useState(tmdbCacheData?.hasMore ?? true);
  const [tmdbLoadingMore, setTmdbLoadingMore] = useState(false);
  const tmdbLoadingRef = useRef(false);
  const tmdbDataLoadedRef = useRef(hasCache && tmdbCacheData !== null);

  // Kitap filters
  const [bookLang, setBookLang] = useState<string>(initialBookLang);
  const [bookStartIndex, setBookStartIndex] = useState(initialBookStartIndex);
  const [bookHasMore, setBookHasMore] = useState(bookCacheData?.hasMore ?? true);
  const [bookLoadingMore, setBookLoadingMore] = useState(false);
  const [bookDataLoaded, setBookDataLoaded] = useState(hasCache && bookCacheData !== null);
  
  // Arama iÃ§in ayrÄ± state'ler (infinite scroll)
  const [searchStartIndex, setSearchStartIndex] = useState(0);
  const [searchHasMore, setSearchHasMore] = useState(true);
  const searchSeenIds = useRef(new Set<string>());
  
  // Dil seÃ§enekleri - Sadece gÃ¼venilir Ã§alÄ±ÅŸan diller
  // Google Books API'nin langRestrict parametresi bazÄ± dillerde hatalÄ± sonuÃ§ veriyor
  const bookLanguages = [
    { value: '', label: 'ğŸŒ TÃ¼m Diller' },
    { value: 'tr', label: 'ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e' },
    { value: 'en', label: 'ğŸ‡¬ğŸ‡§ Ä°ngilizce' },
  ];
  
  // GÃ¶rÃ¼ntÃ¼lenen kitap ID'lerini takip et (gÃ¼Ã§lÃ¼ duplicate kontrolÃ¼)
  const seenBookIds = useRef(new Set<string>());
  // Son istenen startIndex ve queryIndex'i takip et (duplicate request Ã¶nleme)
  const lastRequestedKey = useRef<string>('');
  
  // ============================================
  // GOOGLE BOOKS API STRATEJÄ°SÄ° - JSON CONFIG
  // ============================================
  // Sorgular bookQueries.json dosyasÄ±ndan okunuyor
  const turkishPublishers = bookQueriesConfig.turkishPublishers;
  const turkishAuthorQueries = bookQueriesConfig.turkishAuthors;
  const internationalPublishers = bookQueriesConfig.internationalPublishers;
  const universalGenreQueries = bookQueriesConfig.universalGenres;
  
  // Aktif sorgu listesi - dil seÃ§imine gÃ¶re (useMemo ile cache'le)
  const allCategoryQueries = useMemo(() => {
    if (bookLang === 'tr') {
      return [...turkishPublishers, ...turkishAuthorQueries, ...universalGenreQueries];
    }
    if (bookLang === 'en') {
      return [...internationalPublishers, ...universalGenreQueries];
    }
    // TÃ¼m diller - TR ve EN sorgularÄ±nÄ± karÄ±ÅŸÄ±k (interleaved) sÄ±rala
    // BÃ¶ylece hem TÃ¼rkÃ§e hem Ä°ngilizce kitaplar dengeli gelir
    const trQueries = [...turkishPublishers, ...turkishAuthorQueries];
    const enQueries = [...internationalPublishers, ...universalGenreQueries];
    const interleaved: string[] = [];
    const maxLen = Math.max(trQueries.length, enQueries.length);
    for (let i = 0; i < maxLen; i++) {
      if (i < trQueries.length) interleaved.push(trQueries[i]);
      if (i < enQueries.length) interleaved.push(enQueries[i]);
    }
    return interleaved;
  }, [bookLang, turkishPublishers, turkishAuthorQueries, internationalPublishers, universalGenreQueries]);
  const [allQueryIndex, setAllQueryIndex] = useState(initialQueryIndex);
  
  // Kitap kategori filtreleri - JSON'dan oku
  const bookCategories = Object.entries(bookQueriesConfig.categories).map(([value, data]) => ({
    value,
    label: data.labelTr,
    queryEn: data.queryEn,
    queryTr: data.queryTr,
  }));
  const [bookCategory, setBookCategory] = useState(initialBookCategory);

  // Advanced filter states
  const [minYear, setMinYear] = useState<number | null>(initialMinYear);
  const [maxYear, setMaxYear] = useState<number | null>(initialMaxYear);
  const [minPuan, setMinPuan] = useState<number | null>(initialMinPuan);
  const [selectedGenres, setSelectedGenres] = useState<number[]>([]);
  const [appliedFilters, setAppliedFilters] = useState({ 
    minYear: initialMinYear, 
    maxYear: initialMaxYear, 
    minPuan: initialMinPuan,
    genres: [] as number[]
  });
  
  // Filter modal state
  const [filterModalOpen, setFilterModalOpen] = useState(false);

  // KeÅŸfet sayfasÄ± ek verileri (gerÃ§ek API'lerden)
  const [populerListeler, setPopulerListeler] = useState<PopulerListe[]>([]);
  const [onerilenKullanicilar, setOnerilenKullanicilar] = useState<OnerilenKullanici[]>([]);
  
  // Takip edilen kullanÄ±cÄ± ID'leri
  const [takipEdilenIds, setTakipEdilenIds] = useState<Set<string>>(new Set());
  const [takipLoading, setTakipLoading] = useState<string | null>(null);

  // Data states - cache'den veya boÅŸ baÅŸlat
  const [tmdbResults, setTmdbResults] = useState<TmdbFilm[]>(tmdbCacheData?.results || []);
  const [bookResults, setBookResults] = useState<GoogleBook[]>(bookCacheData?.results || []);
  
  // Scroll restore flag - sadece bir kez yapÄ±lsÄ±n
  const scrollRestoredRef = useRef(false);
  
  // Cache varsa seenIds'i restore et
  useEffect(() => {
    if (bookCacheData?.seenIds) {
      bookCacheData.seenIds.forEach(id => seenBookIds.current.add(id));
    }
  }, []); // Sadece mount'ta Ã§alÄ±ÅŸ
  
  // Cache'den gelen scroll pozisyonunu kullan - veriler yÃ¼klendikten sonra
  useEffect(() => {
    // Zaten restore edildiyse tekrar yapma
    if (scrollRestoredRef.current) return;
    
    // Cache'den veri geldiyse ve sonuÃ§lar varsa scroll'u restore et
    const shouldRestoreScroll = hasCache && (
      (activeTab === 'tmdb' && tmdbResults.length > 0) ||
      (activeTab === 'kitaplar' && bookResults.length > 0)
    );
    
    if (shouldRestoreScroll) {
      const savedScroll = getScrollCache(activeTab);
      if (savedScroll && savedScroll > 0) {
        scrollRestoredRef.current = true; // Flag'i iÅŸaretle
        // DOM'un tam oluÅŸmasÄ± iÃ§in biraz bekle, animasyonsuz scroll
        const timer = setTimeout(() => {
          window.scrollTo(0, savedScroll);
          console.log(`ğŸ“œ Scroll restore: ${savedScroll}px`);
        }, 50);
        return () => clearTimeout(timer);
      }
    }
  }, [hasCache, activeTab, tmdbResults.length, bookResults.length]); // SonuÃ§lar deÄŸiÅŸince kontrol et

  // Component unmount olurken cache'le
  useEffect(() => {
    return () => {
      // Scroll pozisyonunu kaydet
      setScrollCache(window.scrollY, activeTab);
      
      // TMDB sonuÃ§larÄ±nÄ± cache'le
      if (tmdbResults.length > 0) {
        setTmdbCache(tmdbResults, tmdbPage, tmdbHasMore, tmdbFilter, tmdbSort);
      }
      
      // Kitap sonuÃ§larÄ±nÄ± cache'le
      if (bookResults.length > 0) {
        setBookCache(
          bookResults, 
          bookStartIndex, 
          allQueryIndex, 
          bookHasMore, 
          bookCategory, 
          bookLang,
          Array.from(seenBookIds.current)
        );
      }
    };
  }, [activeTab, tmdbResults, tmdbPage, tmdbHasMore, tmdbFilter, tmdbSort, bookResults, bookStartIndex, allQueryIndex, bookHasMore, bookCategory, bookLang]);

  // KeÅŸfet verilerini cache'den yÃ¼kle
  useEffect(() => {
    const cachedExploreData = getExploreDataCache();
    if (cachedExploreData) {
      setPopulerListeler(cachedExploreData.populerListeler);
      setOnerilenKullanicilar(cachedExploreData.onerilenKullanicilar);
    }
  }, []); // Sadece mount'ta Ã§alÄ±ÅŸ

  // Loading states
  const [loading, setLoading] = useState(false);
  const [importing, setImporting] = useState<string | null>(null);

  const resetSearchState = useCallback(() => {
    setSearchStartIndex(0);
    setSearchHasMore(true);
    searchSeenIds.current.clear();

    seenBookIds.current.clear();
    setBookResults(prev => (prev.length ? [] : prev));
    setBookStartIndex(0);
    setAllQueryIndex(0);
    setBookHasMore(true);
    setBookDataLoaded(false);
    setBookLoadingMore(false);
    lastRequestedKey.current = '';

    setTmdbResults(prev => (prev.length ? [] : prev));
    setTmdbPage(1);
    setTmdbHasMore(true);
    setTmdbLoadingMore(false);
    tmdbDataLoadedRef.current = false;

    setLoading(false);
  }, []);

  // Filter helper - filtre uygulama (hem TMDB hem Kitaplar iÃ§in)
  const applyFilters = () => {
    // Filtreler deÄŸiÅŸmediyse hiÃ§bir ÅŸey yapma
    const filtersChanged = 
      appliedFilters.minYear !== minYear ||
      appliedFilters.maxYear !== maxYear ||
      appliedFilters.minPuan !== minPuan ||
      JSON.stringify(appliedFilters.genres) !== JSON.stringify(selectedGenres);
    
    if (!filtersChanged) {
      console.log('ğŸ“‹ Filtreler deÄŸiÅŸmedi, iÅŸlem atlanÄ±yor');
      return;
    }
    
    setAppliedFilters({ minYear, maxYear, minPuan, genres: selectedGenres });
    // TMDB iÃ§in
    setTmdbPage(1);
    setTmdbResults([]);
    setTmdbHasMore(true);
    clearTmdbCache(); // Cache temizle
    // Kitaplar iÃ§in
    setBookStartIndex(0);
    setAllQueryIndex(0);
    setBookResults([]);
    seenBookIds.current.clear();
    lastRequestedKey.current = ''; // Cache key'i sÄ±fÄ±rla
    setBookHasMore(true);
    setBookDataLoaded(false);
    clearBookCache(); // Cache temizle
  };

  const resetFilters = () => {
    setMinYear(null);
    setMaxYear(null);
    setMinPuan(null);
    setSelectedGenres([]);
    setAppliedFilters({ minYear: null, maxYear: null, minPuan: null, genres: [] });
    // TMDB iÃ§in
    setTmdbPage(1);
    setTmdbResults([]);
    setTmdbHasMore(true);
    clearTmdbCache(); // Cache temizle
    // Kitaplar iÃ§in
    setBookStartIndex(0);
    setAllQueryIndex(0);
    setBookResults([]);
    seenBookIds.current.clear();
    setBookHasMore(true);
    setBookDataLoaded(false);
    clearBookCache(); // Cache temizle
  };

  // TMDB filter/sort deÄŸiÅŸtiÄŸinde state'leri sÄ±fÄ±rla
  const handleTmdbFilterChange = (filter: 'all' | 'movie' | 'tv') => {
    if (filter === tmdbFilter) return;
    setTmdbFilter(filter);
    setTmdbPage(1);
    setTmdbResults([]);
    setTmdbHasMore(true);
    clearTmdbCache(); // Cache temizle
  };

  const handleTmdbSortChange = (sort: 'popular' | 'top_rated' | 'trending' | 'now_playing') => {
    if (sort === tmdbSort) return;
    setTmdbSort(sort);
    setTmdbPage(1);
    setTmdbResults([]);
    setTmdbHasMore(true);
    clearTmdbCache(); // Cache temizle
  };

  // Kitap kategori deÄŸiÅŸtiÄŸinde state'leri sÄ±fÄ±rla
  const handleBookCategoryChange = (category: string) => {
    if (category === bookCategory) return;
    setBookCategory(category);
    setBookStartIndex(0);
    setAllQueryIndex(0); // Harf/kelime rotasyonunu sÄ±fÄ±rla
    setBookResults([]);
    seenBookIds.current.clear(); // GÃ¶rÃ¼ntÃ¼lenen ID'leri temizle
    lastRequestedKey.current = ''; // Request tracker'Ä± sÄ±fÄ±rla
    setBookHasMore(true);
    setBookDataLoaded(false);
    clearBookCache(); // Cache temizle
  };
  
  // Kitap dil deÄŸiÅŸtiÄŸinde state'leri sÄ±fÄ±rla
  const handleBookLangChange = (lang: string) => {
    if (lang === bookLang) return;
    setBookLang(lang);
    setBookStartIndex(0);
    setAllQueryIndex(0);
    setBookResults([]);
    seenBookIds.current.clear();
    lastRequestedKey.current = ''; // Request tracker'Ä± sÄ±fÄ±rla
    setBookHasMore(true);
    setBookDataLoaded(false);
    clearBookCache(); // Cache temizle
  };

  // Puan filtresi deÄŸiÅŸtiÄŸinde - "TÃ¼mÃ¼" seÃ§ilirse hemen uygula
  const handleMinPuanChange = (puan: number | null) => {
    setMinPuan(puan);
    
    // "TÃ¼mÃ¼" (null) seÃ§ildiÄŸinde hemen filtreyi kaldÄ±r ve verileri yeniden yÃ¼kle
    if (puan === null && appliedFilters.minPuan !== null) {
      setAppliedFilters(prev => ({ ...prev, minPuan: null }));
      // Kitaplar iÃ§in state'leri sÄ±fÄ±rla
      setBookStartIndex(0);
      setAllQueryIndex(0);
      setBookResults([]);
      seenBookIds.current.clear();
      lastRequestedKey.current = '';
      setBookHasMore(true);
      setBookDataLoaded(false);
      clearBookCache(); // Cache temizle
    }
  };

  // Rate limit retry sayacÄ± (maksimum 3 deneme)
  const rateLimitRetryCount = useRef(0);
  const MAX_RATE_LIMIT_RETRIES = 3;

  // TMDB verilerini yÃ¼kle - useRef ile fonksiyon referansÄ±nÄ± sabit tut
  const tmdbParamsRef = useRef({ tmdbFilter, tmdbSort, appliedFilters, searchQuery });
  tmdbParamsRef.current = { tmdbFilter, tmdbSort, appliedFilters, searchQuery };
  
  const tmdbResultsRef = useRef<TmdbFilm[]>([]);
  tmdbResultsRef.current = tmdbResults;

  // Arama fonksiyonu - ilk sayfa iÃ§in
  const handleSearch = useCallback(async () => {
    if (!searchQuery.trim()) {
      resetSearchState();
      return;
    }

    // Arama deÄŸiÅŸtiÄŸinde state'leri sÄ±fÄ±rla
    setSearchStartIndex(0);
    setSearchHasMore(true);
    searchSeenIds.current.clear();
    setLoading(true);
    
    try {
      if (activeTab === 'tmdb') {
        let results: TmdbFilm[];
        if (tmdbFilter === 'movie') {
          results = await externalApi.searchTmdb(searchQuery);
        } else if (tmdbFilter === 'tv') {
          results = await externalApi.searchTmdbTv(searchQuery);
        } else {
          results = await externalApi.searchTmdbMulti(searchQuery);
        }
        setTmdbResults(results);
      } else if (activeTab === 'kitaplar') {
        // API'ye her zaman relevance gÃ¶nder
        const langParam = bookLang || undefined;
        const response = await externalApi.searchBooks(searchQuery, 0, 40, 'relevance', langParam);
        let results = response.items || [];
        
        // HTML taglarÄ±nÄ± tÃ¼m aÃ§Ä±klamalardan temizle
        results = results.map((book: GoogleBook) => ({
          ...book,
          aciklama: stripHtmlTags(book.aciklama),
          description: stripHtmlTags(book.description),
        }));
        
        // Kalite filtresi - kapaÄŸÄ± olmayanlarÄ± Ã§Ä±kar
        results = results.filter((book: GoogleBook) => {
          const hasCover = book.posterUrl || book.thumbnail;
          if (!hasCover) return false;
          const title = book.baslik || book.title;
          if (!title || title.trim().length < 2) return false;
          return true;
        });
        
        // CLIENT-SIDE DÄ°L FÄ°LTRELEMESÄ° (arama iÃ§in de)
        if (bookLang) {
          results = results.filter((book: GoogleBook) => {
            const bookLanguage = book.dil || book.language || '';
            return bookLanguage === bookLang;
          });
        }
        
        // YÄ±l filtresi uygula (appliedFilters)
        // AralÄ±ktaki kitaplar + tarihi bilinmeyenler gÃ¶sterilsin, aralÄ±k dÄ±ÅŸÄ±ndakiler Ã§Ä±karÄ±lsÄ±n
        if (appliedFilters.minYear || appliedFilters.maxYear) {
          const minY = appliedFilters.minYear ? parseInt(String(appliedFilters.minYear), 10) : 0;
          const maxY = appliedFilters.maxYear ? parseInt(String(appliedFilters.maxYear), 10) : 9999;
          
          console.log(`ğŸ“… YÄ±l filtresi: ${minY} - ${maxY}`);
          
          const inRange: GoogleBook[] = [];
          const noDate: GoogleBook[] = [];
          
          results.forEach((book: GoogleBook) => {
            const year = parseYearFromDate(book.yayinTarihi || book.publishedDate);
            console.log(`  - "${book.baslik || book.title}": yÄ±l=${year}`);
            if (year === 0) {
              noDate.push(book); // Tarihi bilinmeyenler en sona
            } else if (year >= minY && year <= maxY) {
              inRange.push(book); // AralÄ±ktakiler
            }
            // AralÄ±k dÄ±ÅŸÄ±ndakiler Ã§Ä±karÄ±lÄ±yor (dahil edilmiyor)
          });
          
          console.log(`  âœ… AralÄ±kta: ${inRange.length}, Tarihsiz: ${noDate.length}`);
          
          // Ã–nce aralÄ±ktakiler, sonra tarihi bilinmeyenler
          results = [...inRange, ...noDate];
        }
        
        // Puan filtresi uygula (kitaplar iÃ§in ortalamaPuan/averageRating)
        // Saga puanÄ± varsa onu kullan, yoksa Google Books puanÄ±nÄ± kullan (5 Ã¼zerinden 10'a Ã§evir)
        if (appliedFilters.minPuan) {
          results = results.filter((book: GoogleBook) => {
            // Saga puanÄ± zaten 10 Ã¼zerinden
            if (book.ortalamaPuan && book.ortalamaPuan > 0) {
              return book.ortalamaPuan >= appliedFilters.minPuan!;
            }
            // Google Books puanÄ± 5 Ã¼zerinden, 10'a Ã§evir
            const googleRating = book.averageRating || 0;
            const rating10 = googleRating * 2;
            return rating10 >= appliedFilters.minPuan!;
          });
        }
        
        // Duplicate kontrolÃ¼
        results = results.filter((book: GoogleBook) => {
          if (searchSeenIds.current.has(book.id)) return false;
          searchSeenIds.current.add(book.id);
          return true;
        });
        
        setBookResults(results);
        // API'den sonuÃ§ geldiyse ve limit (1000) aÅŸÄ±lmadÄ±ysa devam et
        // Google Books API maksimum startIndex=1000 destekler
        setSearchHasMore(true); // Ä°lk sayfada her zaman devam et
      }
    } catch (err) {
      console.error('Arama hatasÄ±:', err);
    } finally {
      setLoading(false);
    }
  }, [searchQuery, activeTab, tmdbFilter, appliedFilters.minYear, appliedFilters.maxYear, appliedFilters.minPuan, bookLang, resetSearchState]);

  const handleSearchClear = useCallback(() => {
    if (!searchQuery.trim()) return;
    previousSearchValue.current = '';
    setSearchQuery('');
    resetSearchState();
  }, [searchQuery, resetSearchState]);

  // Arama iÃ§in daha fazla sonuÃ§ yÃ¼kle (infinite scroll)
  const loadMoreSearchResults = useCallback(async () => {
    if (!searchQuery.trim() || !searchHasMore || bookLoadingMore) return;
    
    const newStartIndex = searchStartIndex + 40;
    setBookLoadingMore(true);
    
    try {
      const langParam = bookLang || undefined;
      const response = await externalApi.searchBooks(searchQuery, newStartIndex, 40, 'relevance', langParam);
      let results = response.items || [];
      
      // HTML taglarÄ±nÄ± temizle
      results = results.map((book: GoogleBook) => ({
        ...book,
        aciklama: stripHtmlTags(book.aciklama),
        description: stripHtmlTags(book.description),
      }));
      
      // Kalite filtresi
      results = results.filter((book: GoogleBook) => {
        const hasCover = book.posterUrl || book.thumbnail;
        if (!hasCover) return false;
        const title = book.baslik || book.title;
        if (!title || title.trim().length < 2) return false;
        return true;
      });
      
      // CLIENT-SIDE DÄ°L FÄ°LTRELEMESÄ°
      if (bookLang) {
        results = results.filter((book: GoogleBook) => {
          const bookLanguage = book.dil || book.language || '';
          return bookLanguage === bookLang;
        });
      }
      
      // YÄ±l filtresi uygula (appliedFilters)
      // AralÄ±ktaki kitaplar + tarihi bilinmeyenler gÃ¶sterilsin, aralÄ±k dÄ±ÅŸÄ±ndakiler Ã§Ä±karÄ±lsÄ±n
      if (appliedFilters.minYear || appliedFilters.maxYear) {
        const minY = appliedFilters.minYear ? parseInt(String(appliedFilters.minYear), 10) : 0;
        const maxY = appliedFilters.maxYear ? parseInt(String(appliedFilters.maxYear), 10) : 9999;
        
        const inRange: GoogleBook[] = [];
        const noDate: GoogleBook[] = [];
        
        results.forEach((book: GoogleBook) => {
          const year = parseYearFromDate(book.yayinTarihi || book.publishedDate);
          if (year === 0) {
            noDate.push(book);
          } else if (year >= minY && year <= maxY) {
            inRange.push(book);
          }
        });
        
        results = [...inRange, ...noDate];
      }
      
      // Puan filtresi uygula
      // Saga puanÄ± varsa onu kullan, yoksa Google Books puanÄ±nÄ± kullan (5 Ã¼zerinden 10'a Ã§evir)
      if (appliedFilters.minPuan) {
        results = results.filter((book: GoogleBook) => {
          // Saga puanÄ± zaten 10 Ã¼zerinden
          if (book.ortalamaPuan && book.ortalamaPuan > 0) {
            return book.ortalamaPuan >= appliedFilters.minPuan!;
          }
          // Google Books puanÄ± 5 Ã¼zerinden, 10'a Ã§evir
          const googleRating = book.averageRating || 0;
          const rating10 = googleRating * 2;
          return rating10 >= appliedFilters.minPuan!;
        });
      }
      
      // Duplicate kontrolÃ¼
      const uniqueResults = results.filter((book: GoogleBook) => {
        if (searchSeenIds.current.has(book.id)) return false;
        searchSeenIds.current.add(book.id);
        return true;
      });
      
      if (uniqueResults.length > 0) {
        // Yeni sonuÃ§larÄ± ekle
        setBookResults(prev => {
          // Ek duplicate kontrolÃ¼ - prev'de zaten varsa ekleme
          const existingIds = new Set(prev.map(b => b.id));
          const trulyUnique = uniqueResults.filter(b => !existingIds.has(b.id));
          if (trulyUnique.length === 0) return prev; // DeÄŸiÅŸiklik yoksa aynÄ± referansÄ± dÃ¶ndÃ¼r
          
          return [...prev, ...trulyUnique];
        });
        setSearchStartIndex(newStartIndex);
      }
      
      // API'den hiÃ§ sonuÃ§ gelmediyse veya startIndex 960'Ä± geÃ§tiyse (API limiti 1000) dur
      // response.items boÅŸ geldiyse artÄ±k sonuÃ§ yok demektir
      const apiHasMore = results.length > 0 && newStartIndex < 960;
      setSearchHasMore(apiHasMore);
      
      console.log(`ğŸ” Arama: startIndex=${newStartIndex}, sonuÃ§=${results.length}, unique=${uniqueResults.length}, hasMore=${apiHasMore}`);
    } catch (err) {
      console.error('Daha fazla arama sonucu yÃ¼kleme hatasÄ±:', err);
      setSearchHasMore(false);
    } finally {
      setBookLoadingMore(false);
    }
  }, [searchQuery, searchStartIndex, searchHasMore, bookLoadingMore, bookLang, appliedFilters.minYear, appliedFilters.maxYear, appliedFilters.minPuan]);

  // TMDB verileri yÃ¼kle (tab, filtre, sort veya sayfa deÄŸiÅŸince)
  // Filter/sort deÄŸiÅŸince reset
  useEffect(() => {
    tmdbDataLoadedRef.current = false;
  }, [tmdbFilter, tmdbSort, appliedFilters]);
  
  useEffect(() => {
    if (activeTab !== 'tmdb') return;
    if (searchQuery.trim().length >= 2) return; // Arama varsa bu effect Ã§alÄ±ÅŸmaz
    
    // Zaten yÃ¼kleme yapÄ±lÄ±yorsa atla
    if (tmdbLoadingRef.current) return;
    
    const isFirstPage = tmdbPage === 1;
    
    // Cache'den veri geldiyse ve ilk sayfaysa tekrar yÃ¼kleme
    if (isFirstPage && hasCache && tmdbResults.length > 0) {
      console.log('ğŸ¬ Cache\'den TMDB verisi kullanÄ±lÄ±yor, API Ã§aÄŸrÄ±sÄ± atlanÄ±yor');
      tmdbDataLoadedRef.current = true;
      return;
    }
    
    // SADECE ilk sayfa iÃ§in: zaten yÃ¼klÃ¼yse atla
    if (isFirstPage && tmdbDataLoadedRef.current && tmdbResultsRef.current.length > 0) return;
    
    const loadData = async () => {
      const currentResults = tmdbResultsRef.current;
      const { tmdbFilter: filter, tmdbSort: sort, appliedFilters: filters } = tmdbParamsRef.current;
      
      tmdbLoadingRef.current = true;
      if (isFirstPage) {
        setLoading(true);
      } else {
        setTmdbLoadingMore(true);
      }
      
      try {
        let results: TmdbFilm[] = [];
        
        if (sort === 'popular') {
          if (filter === 'movie') {
            results = await externalApi.getTmdbPopular(tmdbPage);
          } else if (filter === 'tv') {
            results = await externalApi.getTmdbPopularTv(tmdbPage);
          } else {
            const [movies, tv] = await Promise.all([
              externalApi.getTmdbPopular(tmdbPage),
              externalApi.getTmdbPopularTv(tmdbPage),
            ]);
            results = [...movies, ...tv].sort((a, b) => (b.puan || 0) - (a.puan || 0));
          }
        } else if (sort === 'top_rated') {
          if (filter === 'movie') {
            results = await externalApi.getTmdbTopRated(tmdbPage);
          } else if (filter === 'tv') {
            results = await externalApi.getTmdbTopRatedTv(tmdbPage);
          } else {
            const [movies, tv] = await Promise.all([
              externalApi.getTmdbTopRated(tmdbPage),
              externalApi.getTmdbTopRatedTv(tmdbPage),
            ]);
            results = [...movies, ...tv].sort((a, b) => (b.puan || 0) - (a.puan || 0));
          }
        } else if (sort === 'trending') {
          const mediaType = filter === 'movie' ? 'movie' : filter === 'tv' ? 'tv' : 'all';
          results = await externalApi.getTmdbTrending(mediaType, 'week', tmdbPage);
        } else if (sort === 'now_playing') {
          if (filter === 'movie') {
            results = await externalApi.getTmdbNowPlaying(tmdbPage);
          } else if (filter === 'tv') {
            results = await externalApi.getTmdbOnTheAir(tmdbPage);
          } else {
            const [movies, tv] = await Promise.all([
              externalApi.getTmdbNowPlaying(tmdbPage),
              externalApi.getTmdbOnTheAir(tmdbPage),
            ]);
            results = [...movies, ...tv];
          }
        }
        
        // Filtreleri uygula (yÄ±l, puan ve tÃ¼r)
        if (filters.minYear || filters.maxYear || filters.minPuan || filters.genres.length > 0) {
          // SeÃ§ilen tÃ¼rler iÃ§in tÃ¼m eÅŸleÅŸen ID'leri topla (film ve dizi iÃ§in)
          const expandedGenreIds = new Set<number>();
          filters.genres.forEach(genreId => {
            const mappedIds = GENRE_MAPPING[genreId] || [genreId];
            mappedIds.forEach(id => expandedGenreIds.add(id));
          });
          
          results = results.filter(item => {
            const year = item.yayinTarihi ? parseInt(item.yayinTarihi.split('-')[0]) : null;
            if (filters.minYear && (!year || year < filters.minYear)) return false;
            if (filters.maxYear && (!year || year > filters.maxYear)) return false;
            // Puan filtresi: Saga puanÄ± varsa onu kullan, yoksa TMDB puanÄ±nÄ± kullan
            if (filters.minPuan) {
              const effectiveRating = (item.sagaOrtalamaPuan && item.sagaOrtalamaPuan > 0) 
                ? item.sagaOrtalamaPuan 
                : (item.puan || 0);
              if (effectiveRating < filters.minPuan) return false;
            }
            if (filters.genres.length > 0) {
              const itemGenres = item.turIds || [];
              // Ä°Ã§eriÄŸin tÃ¼rlerinden herhangi biri geniÅŸletilmiÅŸ tÃ¼r listesinde var mÄ±?
              const hasMatchingGenre = itemGenres.some(itemGenreId => expandedGenreIds.has(itemGenreId));
              if (!hasMatchingGenre) return false;
            }
            return true;
          });
        }
        
        // Duplicate'leri filtrele (aynÄ± ID + mediaType kombinasyonu)
        const existingIds = new Set(currentResults.map(r => `${r.mediaType}-${r.id}`));
        const uniqueNewResults = results.filter(r => !existingIds.has(`${r.mediaType}-${r.id}`));
        
        const merged = isFirstPage ? results : [...currentResults, ...uniqueNewResults];
        setTmdbResults(merged);
        
        // TMDB genelde sayfa baÅŸÄ±na 20 sonuÃ§ dÃ¶ndÃ¼rÃ¼r
        // API'den sonuÃ§ geldiyse daha fazla veri var demektir
        setTmdbHasMore(results.length > 0);
        
        if (isFirstPage) {
          tmdbDataLoadedRef.current = true;
        }
      } catch (err) {
        console.error('TMDB veri yÃ¼kleme hatasÄ±:', err);
      } finally {
        if (isFirstPage) {
          setLoading(false);
        } else {
          setTmdbLoadingMore(false);
        }
        tmdbLoadingRef.current = false;
      }
    };
    
    loadData();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [activeTab, tmdbFilter, tmdbSort, tmdbPage, appliedFilters, searchQuery]);

  // Scroll state'lerini ref'te tut (stale closure Ã¶nleme)
  const tmdbScrollStateRef = useRef({ loading: false, tmdbLoadingMore: false, tmdbHasMore: true });
  tmdbScrollStateRef.current = { loading, tmdbLoadingMore, tmdbHasMore };

  // Scroll ile TMDB iÃ§in sonsuz kaydÄ±rma (throttled)
  const tmdbScrollTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);
  useEffect(() => {
    if (activeTab !== 'tmdb') return;

    const handleScroll = () => {
      const { loading: isLoading, tmdbLoadingMore: isLoadingMore, tmdbHasMore: hasMore } = tmdbScrollStateRef.current;
      
      // YÃ¼kleme yapÄ±lÄ±yorsa veya daha fazla veri yoksa atla
      if (isLoading || isLoadingMore || !hasMore || tmdbLoadingRef.current) return;
      if (tmdbScrollTimeoutRef.current) return; // Throttle: bekleyen timeout varsa atla
      
      const scrollPosition = window.innerHeight + window.scrollY;
      const threshold = document.body.offsetHeight - 400;
      if (scrollPosition >= threshold) {
        tmdbScrollTimeoutRef.current = setTimeout(() => {
          setTmdbPage(prev => prev + 1);
          tmdbScrollTimeoutRef.current = null;
        }, 300);
      }
    };

    window.addEventListener('scroll', handleScroll);
    return () => {
      window.removeEventListener('scroll', handleScroll);
      if (tmdbScrollTimeoutRef.current) {
        clearTimeout(tmdbScrollTimeoutRef.current);
      }
    };
  }, [activeTab]); // Sadece tab deÄŸiÅŸince re-attach

  // IntersectionObserver ref'i - sonsuz kaydÄ±rma iÃ§in
  const loadMoreTriggerRef = useRef<HTMLDivElement>(null);
  
  // IntersectionObserver ile TMDB sonsuz kaydÄ±rma
  useEffect(() => {
    if (activeTab !== 'tmdb') return;
    if (!loadMoreTriggerRef.current) return;
    
    const observer = new IntersectionObserver(
      (entries) => {
        const [entry] = entries;
        if (entry.isIntersecting && !loading && !tmdbLoadingMore && tmdbHasMore && !tmdbLoadingRef.current) {
          console.log('ğŸ¬ TMDB: IntersectionObserver tetiklendi, sayfa yÃ¼kleniyor...');
          setTmdbPage(prev => prev + 1);
        }
      },
      { 
        rootMargin: '600px', // 600px Ã¶nceden tetikle
        threshold: 0 
      }
    );
    
    observer.observe(loadMoreTriggerRef.current);
    
    return () => observer.disconnect();
  }, [activeTab, loading, tmdbLoadingMore, tmdbHasMore]);

  // Scroll ile Kitaplar iÃ§in sonsuz kaydÄ±rma (throttled)
  const bookScrollStateRef = useRef({ 
    loading: false, 
    bookLoadingMore: false, 
    bookHasMore: true, 
    bookDataLoaded: false,
    searchQuery: '',
    searchHasMore: true
  });
  bookScrollStateRef.current = { loading, bookLoadingMore, bookHasMore, bookDataLoaded, searchQuery, searchHasMore };
  
  // loadMoreSearchResults'Ä± ref'te tut (stale closure Ã¶nleme)
  const loadMoreSearchResultsRef = useRef(loadMoreSearchResults);
  loadMoreSearchResultsRef.current = loadMoreSearchResults;
  
  // IntersectionObserver ile Kitaplar sonsuz kaydÄ±rma
  useEffect(() => {
    if (activeTab !== 'kitaplar') return;
    if (!loadMoreTriggerRef.current) return;
    
    const observer = new IntersectionObserver(
      (entries) => {
        const [entry] = entries;
        const { 
          loading: isLoading, 
          bookLoadingMore: isLoadingMore, 
          bookHasMore: hasMore, 
          bookDataLoaded: dataLoaded,
          searchQuery: query,
          searchHasMore: searchMore
        } = bookScrollStateRef.current;
        
        if (!entry.isIntersecting || isLoading || isLoadingMore) return;
        
        // Arama varsa loadMoreSearchResults kullan
        if (query.trim().length >= 2) {
          if (searchMore) {
            console.log('ğŸ“š Kitap Arama: IntersectionObserver tetiklendi');
            loadMoreSearchResultsRef.current();
          }
        } else {
          // KeÅŸfet modu
          if (!hasMore || !dataLoaded) return;
          console.log('ğŸ“š Kitap KeÅŸfet: IntersectionObserver tetiklendi');
          setBookStartIndex(prev => prev + 40);
        }
      },
      { 
        rootMargin: '800px', // 800px Ã¶nceden tetikle (kitaplar daha yavaÅŸ yÃ¼kleniyor)
        threshold: 0 
      }
    );
    
    observer.observe(loadMoreTriggerRef.current);
    
    return () => observer.disconnect();
  }, [activeTab]);

  // Kitaplar iÃ§in varsayÄ±lan veri yÃ¼kle (tab deÄŸiÅŸince veya kategori/sÄ±ralama deÄŸiÅŸince)
  useEffect(() => {
    const loadBooksData = async () => {
      if (activeTab !== 'kitaplar') return;
      
      // Arama varsa zaten handleSearch Ã§alÄ±ÅŸacak
      if (searchQuery.trim().length >= 2) return;
      
      // ============================================
      // PUAN FÄ°LTRESÄ° AKTÄ°FSE VERÄ°TABANINDAN Ã‡EK
      // ============================================
      if (appliedFilters.minPuan) {
        // Ä°lk sayfa kontrolÃ¼
        const isFirstDbPage = bookStartIndex === 0;
        
        // Cache'den veri geldiyse ve ilk sayfaysa tekrar yÃ¼kleme
        if (isFirstDbPage && hasCache && bookResults.length > 0) {
          console.log('ğŸ“š Puan filtresi: Cache\'den veri kullanÄ±lÄ±yor, API Ã§aÄŸrÄ±sÄ± atlanÄ±yor');
          setBookDataLoaded(true);
          return;
        }
        
        if (isFirstDbPage) {
          setLoading(true);
          seenBookIds.current.clear();
        } else {
          setBookLoadingMore(true);
        }
        
        try {
          const sayfa = Math.floor(bookStartIndex / 40) + 1;
          console.log(`ğŸ“š VeritabanÄ±ndan puanlÄ± kitaplar Ã§ekiliyor: minPuan=${appliedFilters.minPuan}, sayfa=${sayfa}`);
          
          const response = await icerikApi.filtrele({
            tur: 'kitap',
            minPuan: appliedFilters.minPuan,
            sayfa,
            limit: 40
          });
          
          // VeritabanÄ± sonuÃ§larÄ±nÄ± GoogleBook formatÄ±na Ã§evir
          // Puanlar zaten 10 Ã¼zerinden, dÃ¶nÃ¼ÅŸÃ¼m yapmÄ±yoruz
          const dbResults: GoogleBook[] = response.data.map((item) => ({
            id: `db-${item.id}`,
            baslik: item.baslik,
            title: item.baslik,
            yazarlar: [],
            authors: [],
            aciklama: item.aciklama || '',
            description: item.aciklama || '',
            posterUrl: item.posterUrl || '',
            thumbnail: item.posterUrl || '',
            yayinTarihi: item.yayinTarihi?.toString().slice(0, 10) || '',
            publishedDate: item.yayinTarihi?.toString().slice(0, 10) || '',
            ortalamaPuan: item.ortalamaPuan ? Number(item.ortalamaPuan) : undefined,
            averageRating: item.ortalamaPuan ? Number(item.ortalamaPuan) : undefined,
            dil: 'tr',
            language: 'tr',
          }));
          
          // Duplicate kontrolÃ¼
          const uniqueResults = dbResults.filter((book: GoogleBook) => {
            if (seenBookIds.current.has(book.id)) return false;
            seenBookIds.current.add(book.id);
            return true;
          });
          
          if (isFirstDbPage) {
            setBookResults(uniqueResults);
          } else {
            setBookResults(prev => [...prev, ...uniqueResults]);
          }
          
          setBookHasMore(response.toplamSayfa > sayfa);
          setBookDataLoaded(true);
          
          console.log(`ğŸ“š VeritabanÄ±ndan ${uniqueResults.length} kitap geldi, toplam sayfa: ${response.toplamSayfa}`);
        } catch (err) {
          console.error('VeritabanÄ± kitap yÃ¼kleme hatasÄ±:', err);
          setBookHasMore(false);
        } finally {
          setLoading(false);
          setBookLoadingMore(false);
        }
        
        return; // VeritabanÄ±ndan Ã§ektik, Google Books API'yi Ã§aÄŸÄ±rma
      }
      
      // ============================================
      // PUAN FÄ°LTRESÄ° YOKSA GOOGLE BOOKS API
      // ============================================
      
      // Ä°lk sayfa kontrolÃ¼
      const isFirstPage = bookStartIndex === 0 && allQueryIndex === 0;
      
      // Cache'den veri geldiyse ve ilk sayfaysa tekrar yÃ¼kleme
      if (isFirstPage && hasCache && bookResults.length > 0) {
        console.log('ğŸ“š Cache\'den veri kullanÄ±lÄ±yor, API Ã§aÄŸrÄ±sÄ± atlanÄ±yor');
        setBookDataLoaded(true);
        return;
      }
      
      // Duplicate request kontrolÃ¼ - aynÄ± startIndex+queryIndex kombinasyonu iÃ§in tekrar istek yapma
      const requestKey = `${bookStartIndex}-${allQueryIndex}`;
      if (lastRequestedKey.current === requestKey) {
        console.log(`â­ï¸ Duplicate request engellendi: ${requestKey}`);
        return;
      }
      lastRequestedKey.current = requestKey;
      
      // Ä°lk yÃ¼kleme kontrolÃ¼ (sadece en baÅŸtaki sorgu)
      const isVeryFirstLoad = bookStartIndex === 0 && allQueryIndex === 0;
      
      if (isVeryFirstLoad) {
        setLoading(true);
        seenBookIds.current.clear(); // Ä°lk sayfada ID setini temizle
      } else if (bookStartIndex === 0) {
        // Yeni sorguya geÃ§ildi ama ilk yÃ¼kleme deÄŸil - loading devam etsin
      } else {
        setBookLoadingMore(true);
      }
      
      try {
        // SeÃ§ili kategorinin arama sorgusunu al - dile gÃ¶re farklÄ± sorgu
        let searchTerm: string;
        if (bookCategory === 'all') {
          // "TÃ¼mÃ¼" iÃ§in harf/kelime rotasyonu kullan
          searchTerm = allCategoryQueries[allQueryIndex] || 'a';
        } else {
          const selectedCategory = bookCategories.find(c => c.value === bookCategory);
          // Dile gÃ¶re uygun sorguyu seÃ§
          if (bookLang === 'tr') {
            searchTerm = selectedCategory?.queryTr || 'roman';
          } else if (bookLang === 'en') {
            searchTerm = selectedCategory?.queryEn || 'subject:fiction';
          } else {
            // TÃ¼m diller - startIndex'e gÃ¶re TR/EN sorgusunu dÃ¶nÃ¼ÅŸÃ¼mlÃ¼ kullan
            // Ä°lk sayfa ve Ã§ift sayÄ±lÄ± sayfalar iÃ§in TR, tek sayÄ±lÄ± sayfalar iÃ§in EN
            const pageNumber = Math.floor(bookStartIndex / 40);
            if (pageNumber % 2 === 0) {
              searchTerm = selectedCategory?.queryTr || 'roman';
            } else {
              searchTerm = selectedCategory?.queryEn || 'subject:fiction';
            }
          }
        }
        
        console.log(`ğŸ“š Kitap arama: "${searchTerm}", startIndex: ${bookStartIndex}, queryIndex: ${allQueryIndex}, lang: ${bookLang || 'all'}`);
        
        // Dil filtresi (boÅŸ ise tÃ¼m diller) - q parametresinden BAÄIMSIZ langRestrict
        const langParam = bookLang || undefined;
        // Ticari kitaplar iÃ§in paid-ebooks filtresi (daha kaliteli sonuÃ§lar)
        // Not: BazÄ± dillerde paid-ebooks Ã§ok az sonuÃ§ verebilir, bu yÃ¼zden opsiyonel
        const filterParam = undefined; // 'paid-ebooks' Ã§ok kÄ±sÄ±tlayÄ±cÄ± olabilir
        
        const response = await externalApi.searchBooks(searchTerm, bookStartIndex, 40, 'relevance', langParam, filterParam);
        
        // BaÅŸarÄ±lÄ± istek - rate limit sayacÄ±nÄ± sÄ±fÄ±rla
        rateLimitRetryCount.current = 0;
        
        let results = response.items || [];
        
        // ============================================
        // CLIENT-SIDE KALÄ°TE FÄ°LTRELEMESÄ° + HTML TEMÄ°ZLEME
        // ============================================
        // Resmi, aÃ§Ä±klamasÄ± veya yazarÄ± olmayan "Ã§Ã¶p" kitaplarÄ± filtrele
        // HTML taglarÄ±nÄ± temizle (Google Books bazen <b>, <p>, <i> dÃ¶ndÃ¼rÃ¼yor)
        results = results.filter((book: GoogleBook) => {
          // Kapak resmi olmalÄ± (posterUrl veya thumbnail)
          const hasCover = book.posterUrl || book.thumbnail;
          if (!hasCover) return false;
          // BaÅŸlÄ±k olmalÄ±
          const title = book.baslik || book.title;
          if (!title || title.trim().length < 2) return false;
          // Yazar veya aÃ§Ä±klama olmalÄ± (en az biri)
          const hasAuthor = (book.yazarlar && book.yazarlar.length > 0) || (book.authors && book.authors.length > 0);
          // AÃ§Ä±klamayÄ± HTML'den temizle ve kontrol et
          const rawDescription = book.aciklama || book.description || '';
          const cleanDescription = stripHtmlTags(rawDescription);
          const hasDescription = cleanDescription.length > 20;
          if (!hasAuthor && !hasDescription) return false;
          return true;
        });
        
        // HTML taglarÄ±nÄ± tÃ¼m aÃ§Ä±klamalardan temizle
        results = results.map((book: GoogleBook) => ({
          ...book,
          aciklama: stripHtmlTags(book.aciklama),
          description: stripHtmlTags(book.description),
        }));
        
        // CLIENT-SIDE DÄ°L FÄ°LTRELEMESÄ° (langRestrict API'de her zaman Ã§alÄ±ÅŸmÄ±yor)
        if (bookLang) {
          const beforeFilter = results.length;
          results = results.filter((book: GoogleBook) => {
            const bookLanguage = book.dil || book.language || '';
            return bookLanguage === bookLang;
          });
          console.log(`ğŸŒ Dil filtresi (${bookLang}): ${beforeFilter} -> ${results.length} kitap`);
        }
        
        // SonuÃ§ gelmedi veya API limiti (1000) - sonraki sorguya geÃ§
        if (results.length === 0 || bookStartIndex >= 960) {
          if (bookCategory === 'all' && allQueryIndex < allCategoryQueries.length - 1) {
            // Sonraki harfe/kelimeye geÃ§
            console.log(`ğŸ”„ Sonraki sorguya geÃ§iliyor: ${allCategoryQueries[allQueryIndex + 1]}`);
            setAllQueryIndex(prev => prev + 1);
            setBookStartIndex(0);
            // Loading state'leri temizle ki scroll handler Ã§alÄ±ÅŸsÄ±n
            setBookLoadingMore(false);
            setLoading(false);
            return; // useEffect tekrar tetiklenecek
          } else if (bookCategory !== 'all' && bookStartIndex < 960 && results.length === 0) {
            // Belirli kategori seÃ§iliyken sonuÃ§ gelmezse devam et
            console.log(`â© Kategori aramasÄ±nda sonuÃ§ yok, devam: startIndex ${bookStartIndex} -> ${bookStartIndex + 40}`);
            setBookStartIndex(prev => prev + 40);
            setBookLoadingMore(false);
            setLoading(false);
            return;
          } else {
            // GerÃ§ekten sonuÃ§ kalmadÄ±
            setBookHasMore(false);
          }
        }
        
        // GÃ¼Ã§lÃ¼ duplicate kontrolÃ¼ - useRef ile kalÄ±cÄ± set
        let uniqueNewResults = results.filter((r: GoogleBook) => {
          if (seenBookIds.current.has(r.id)) {
            return false;
          }
          seenBookIds.current.add(r.id);
          return true;
        });
        
        // YÄ±l filtresi uygula (appliedFilters'tan)
        // AralÄ±ktaki kitaplar + tarihi bilinmeyenler gÃ¶sterilsin, aralÄ±k dÄ±ÅŸÄ±ndakiler Ã§Ä±karÄ±lsÄ±n
        if (appliedFilters.minYear || appliedFilters.maxYear) {
          const minY = appliedFilters.minYear ? parseInt(String(appliedFilters.minYear), 10) : 0;
          const maxY = appliedFilters.maxYear ? parseInt(String(appliedFilters.maxYear), 10) : 9999;
          
          const inRange: GoogleBook[] = [];
          const noDate: GoogleBook[] = [];
          
          uniqueNewResults.forEach((book: GoogleBook) => {
            const year = parseYearFromDate(book.yayinTarihi || book.publishedDate);
            if (year === 0) {
              noDate.push(book);
            } else if (year >= minY && year <= maxY) {
              inRange.push(book);
            }
            // AralÄ±k dÄ±ÅŸÄ±ndakiler Ã§Ä±karÄ±lÄ±yor
          });
          
          uniqueNewResults = [...inRange, ...noDate];
        }
        
        // Puan filtresi uygula (kitaplar iÃ§in - Saga puanÄ± varsa onu, yoksa Google puanÄ±nÄ± kullan)
        if (appliedFilters.minPuan) {
          uniqueNewResults = uniqueNewResults.filter((book: GoogleBook) => {
            // Saga puanÄ± zaten 10 Ã¼zerinden
            if (book.ortalamaPuan && book.ortalamaPuan > 0) {
              return book.ortalamaPuan >= appliedFilters.minPuan!;
            }
            // Google Books puanÄ± 5 Ã¼zerinden, 10'a Ã§evir
            const googleRating = book.averageRating || 0;
            const rating10 = googleRating * 2;
            return rating10 >= appliedFilters.minPuan!;
          });
        }
        
        // "TÃ¼mÃ¼" kategorisinde sonuÃ§larÄ± karÄ±ÅŸtÄ±r (shuffle)
        if (bookCategory === 'all' && uniqueNewResults.length > 0) {
          for (let i = uniqueNewResults.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [uniqueNewResults[i], uniqueNewResults[j]] = [uniqueNewResults[j], uniqueNewResults[i]];
          }
        }
        
        // Callback form kullanarak stale closure sorununu Ã¶nle
        // Ä°lk yÃ¼kleme: 36 kitaba ulaÅŸana kadar sorgular devam eder
        const isInitialLoading = bookStartIndex === 0; // Bu sorgunun ilk sayfasÄ± mÄ±?
        
        if (isInitialLoading) {
          setBookResults(prev => {
            const merged = [...prev, ...uniqueNewResults];
            const totalCount = merged.length;
            
            // Ä°lk yÃ¼klemede minimum 36 kitap gelene kadar devam et
            const MIN_INITIAL_BOOKS = 36;
            if (totalCount < MIN_INITIAL_BOOKS && bookCategory === 'all' && allQueryIndex < allCategoryQueries.length - 1) {
              console.log(`ğŸ“š Ä°lk yÃ¼kleme: ${totalCount} kitap var, ${MIN_INITIAL_BOOKS} olana kadar devam ediliyor (sorgu ${allQueryIndex + 1})`);
              // Sonraki sorguya geÃ§
              setTimeout(() => {
                setAllQueryIndex(prevIdx => prevIdx + 1);
              }, 0);
            } else if (totalCount >= MIN_INITIAL_BOOKS) {
              // Yeterli kitap var, loading'i kapat
              setBookDataLoaded(true);
              setLoading(false);
            }
            
            return merged;
          });
        } else {
          setBookResults(prev => {
            // Duplicate kontrolÃ¼ - prev array'inde olan ID'leri filtrele
            const existingIds = new Set(prev.map(b => b.id));
            const trulyNew = uniqueNewResults.filter(b => !existingIds.has(b.id));
            
            // Scroll ile yÃ¼klemede sonuÃ§ olmadÄ±ysa ve "TÃ¼mÃ¼" kategorisindeyse sonraki sorguya geÃ§
            if (trulyNew.length === 0 && bookCategory === 'all' && allQueryIndex < allCategoryQueries.length - 1) {
              console.log(`ğŸ”„ Scroll: SonuÃ§ yok, sonraki sorguya geÃ§iliyor: ${allQueryIndex + 1}`);
              setAllQueryIndex(prevIdx => prevIdx + 1);
              setBookStartIndex(0);
            }
            
            return [...prev, ...trulyNew];
          });
        }
        
        // "TÃ¼mÃ¼" kategorisinde her zaman devam et (rotasyon var)
        if (bookCategory === 'all') {
          setBookHasMore(allQueryIndex < allCategoryQueries.length - 1 || results.length > 0);
        } else {
          setBookHasMore(results.length > 0);
        }
        
        // TÃ¼m sorgular bittiyse loading'i kapat
        if (allQueryIndex >= allCategoryQueries.length - 1) {
          setBookDataLoaded(true);
          setLoading(false);
        }
      } catch (err: unknown) {
        console.error('Kitap yÃ¼kleme hatasÄ±:', err);
        
        // Rate limit kontrolÃ¼ (429 hatasÄ±)
        const isRateLimited = err instanceof Error && 
          (err.message.includes('429') || err.message.includes('rate') || err.message.includes('limit'));
        
        if (isRateLimited) {
          rateLimitRetryCount.current += 1;
          console.warn(`âš ï¸ Rate limit! Deneme: ${rateLimitRetryCount.current}/${MAX_RATE_LIMIT_RETRIES}`);
          
          if (rateLimitRetryCount.current >= MAX_RATE_LIMIT_RETRIES) {
            console.error('âŒ Rate limit aÅŸÄ±ldÄ±, yÃ¼kleme durduruluyor');
            setBookHasMore(false);
            setLoading(false);
            setBookLoadingMore(false);
            return;
          }
        }
        
        // Hata durumunda sonraki sorguya geÃ§ (rate limit deÄŸilse veya limit aÅŸÄ±lmadÄ±ysa)
        if (bookCategory === 'all' && allQueryIndex < allCategoryQueries.length - 1) {
          setAllQueryIndex(prev => prev + 1);
          setBookStartIndex(0);
        } else {
          setBookHasMore(false);
          setLoading(false);
          setBookLoadingMore(false);
        }
      } finally {
        // Scroll durumunda (startIndex > 0) loading'i kapat
        if (bookStartIndex > 0) {
          setBookLoadingMore(false);
        }
      }
    };
    
    loadBooksData();
    // bookDataLoaded'Ä± dependency'den Ã§Ä±kardÄ±k Ã§Ã¼nkÃ¼ infinite scroll'u engelliyordu
    // bookStartIndex veya allQueryIndex deÄŸiÅŸince her zaman yeni veri Ã§ekmeli
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [activeTab, bookCategory, bookLang, searchQuery, bookStartIndex, allQueryIndex, appliedFilters.minYear, appliedFilters.maxYear, appliedFilters.minPuan]);

  // Arama tetikle
  useEffect(() => {
    const trimmed = searchQuery.trim();
    const prevTrimmed = previousSearchValue.current.trim();

    if (trimmed.length < 2) {
      if (prevTrimmed.length >= 2) {
        resetSearchState();
      }
      previousSearchValue.current = searchQuery;
      return;
    }

    previousSearchValue.current = searchQuery;
    const timer = setTimeout(() => {
      handleSearch();
    }, 500);
    return () => clearTimeout(timer);
  }, [searchQuery, handleSearch, resetSearchState]);

  // URL params gÃ¼ncelle - tÃ¼m filtreler dahil
  useEffect(() => {
    const params = new URLSearchParams();
    if (searchQuery) params.set('q', searchQuery);
    params.set('tab', activeTab);
    
    // TMDB filtreleri
    if (tmdbFilter !== 'all') params.set('tmdbFilter', tmdbFilter);
    if (tmdbSort !== 'popular') params.set('tmdbSort', tmdbSort);
    
    // Kitap filtreleri
    if (bookLang) params.set('bookLang', bookLang);
    if (bookCategory !== 'all') params.set('bookCategory', bookCategory);
    
    // YÄ±l filtreleri
    if (appliedFilters.minYear) params.set('minYear', appliedFilters.minYear.toString());
    if (appliedFilters.maxYear) params.set('maxYear', appliedFilters.maxYear.toString());
    if (appliedFilters.minPuan) params.set('minPuan', appliedFilters.minPuan.toString());
    
    setSearchParams(params, { replace: true });
  }, [searchQuery, activeTab, tmdbFilter, tmdbSort, bookLang, bookCategory, appliedFilters.minYear, appliedFilters.maxYear, appliedFilters.minPuan, setSearchParams]);

  // Ä°Ã§erik import et
  const handleImport = async (id: string, type: 'film' | 'kitap' | 'tv') => {
    setImporting(id);
    try {
      let icerik;
      if (type === 'film') {
        icerik = await externalApi.importTmdbFilm(id);
      } else if (type === 'tv') {
        icerik = await externalApi.importTmdbTvShow(id);
      } else {
        icerik = await externalApi.importBook(id);
      }
      // Ä°Ã§erik detayÄ±na yÃ¶nlendir - normalizeContentType ile tur'u dÃ¼zelt
      const tur = normalizeContentType(icerik.tur || (type === 'tv' ? 'dizi' : type));
      navigate(`/icerik/${tur}/${icerik.id}`);
    } catch (err) {
      console.error('Import hatasÄ±:', err);
    } finally {
      setImporting(null);
    }
  };

  return (
    <>
    <div className="explore-page">
      {/* Main Content */}
      <main className="explore-content">
        {/* Search Section */}
        <section className="search-section">
          <div className="search-container">
            <div className="search-input-wrapper">
              <span className="search-icon">
                <Search size={22} />
              </span>
              <input
                type="text"
                className="search-input"
                placeholder="Film, dizi, kitap ara..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
              />
              <button 
                className={`search-clear ${searchQuery ? 'visible' : ''}`}
                onClick={handleSearchClear}
              >
                <X size={16} />
              </button>
            </div>
            <button 
              className={`filter-toggle-btn ${filterModalOpen ? 'active' : ''}`}
              onClick={() => setFilterModalOpen(!filterModalOpen)}
              title="Filtreler"
            >
              <SlidersHorizontal size={20} />
              <span>Filtreler</span>
            </button>
          </div>
        </section>

        {/* Category Section */}
        <section className="category-section">
          <div className="section-header">
            <h2 className="section-title">Kategoriler</h2>
          </div>
          <div className="category-tabs">
            <button
              className={`category-tab ${activeTab === 'tmdb' && tmdbFilter === 'all' ? 'active' : ''}`}
              onClick={() => { setActiveTab('tmdb'); handleTmdbFilterChange('all'); }}
            >
              <Layers size={18} />
              TÃ¼mÃ¼
            </button>
            <button
              className={`category-tab ${activeTab === 'tmdb' && tmdbFilter === 'movie' ? 'active' : ''}`}
              onClick={() => { setActiveTab('tmdb'); handleTmdbFilterChange('movie'); }}
            >
              <Film size={18} />
              Filmler
            </button>
            <button
              className={`category-tab ${activeTab === 'tmdb' && tmdbFilter === 'tv' ? 'active' : ''}`}
              onClick={() => { setActiveTab('tmdb'); handleTmdbFilterChange('tv'); }}
            >
              <Tv size={18} />
              Diziler
            </button>
            <button
              className={`category-tab ${activeTab === 'kitaplar' ? 'active' : ''}`}
              onClick={() => setActiveTab('kitaplar')}
            >
              <BookOpen size={18} />
              Kitaplar
            </button>
          </div>
        </section>

        {/* ========================================
           FEATURED SECTION - Ã–ne Ã‡Ä±kanlar (Arama yokken)
        ======================================== */}
        {!searchQuery && !loading && activeTab === 'tmdb' && tmdbResults.length > 0 && (
          <section className="featured-section">
            <div className="section-header">
              <h2 className="section-title">Ã–ne Ã‡Ä±kanlar</h2>
            </div>
            <div className="featured-slider">
              {tmdbResults.slice(0, 4).map((film) => {
                const mediaType = film.mediaType === 'tv' ? 'tv' : 'film';
                // Backdrop tercih et, yoksa poster kullan
                const backdropUrl = film.arkaplanUrl || 
                                   (film.posterPath ? `https://image.tmdb.org/t/p/w780${film.posterPath}` : undefined) ||
                                   film.posterUrl;
                const title = film.baslik || film.title;
                const rating = film.puan || film.voteAverage;
                const year = (film.yayinTarihi || film.releaseDate)?.split('-')[0];
                const currentYear = new Date().getFullYear().toString();
                const badge = mediaType === 'tv' ? 'Dizi' : (year === currentYear || year === (parseInt(currentYear)-1).toString() ? 'Yeni' : 'Film');
                
                return (
                  <div 
                    key={`featured-${mediaType}-${film.id}`}
                    className="featured-card"
                    onClick={() => handleImport(film.id, mediaType)}
                  >
                    {backdropUrl && <img src={backdropUrl} alt={title} />}
                    <div className="featured-overlay">
                      <span className="featured-badge">{badge}</span>
                      <h3 className="featured-title">{title}</h3>
                      <div className="featured-meta">
                        {rating && rating > 0 && (
                          <span className="featured-rating tmdb">
                            <span className="rating-label">TMDB</span>
                            <Star size={14} />
                            {rating.toFixed(1)}
                          </span>
                        )}
                        <span className="featured-rating saga">
                          <span className="rating-label">SAGA</span>
                          <Star size={14} />
                          {film.sagaOrtalamaPuan && film.sagaOrtalamaPuan > 0 ? film.sagaOrtalamaPuan.toFixed(1) : 'â€”'}
                        </span>
                        {year && <span>{year}</span>}
                      </div>
                    </div>
                    {importing === film.id && (
                      <div className="content-import-overlay" style={{opacity: 1}}>
                        <Loader2 size={24} className="animate-spin" />
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
          </section>
        )}

        {/* ========================================
           GENRE SECTION - TÃ¼rlere GÃ¶z At (Arama yokken)
        ======================================== */}
        {!searchQuery && !loading && activeTab === 'tmdb' && (
          <section className="genre-section">
            <div className="section-header">
              <h2 className="section-title">TÃ¼rlere GÃ¶z At</h2>
            </div>
            <div className="genre-grid">
              {[
                { id: 28, name: 'Aksiyon', icon: Swords },
                { id: 10749, name: 'Romantik', icon: Heart },
                { id: 27, name: 'Korku', icon: Ghost },
                { id: 35, name: 'Komedi', icon: Laugh },
                { id: 878, name: 'Bilim Kurgu', icon: Rocket },
                { id: 14, name: 'Fantastik', icon: Wand2 },
              ].map((genre) => {
                const IconComponent = genre.icon;
                return (
                  <div 
                    key={genre.id} 
                    className="genre-card" 
                    onClick={() => { 
                      setSelectedGenres([genre.id]); 
                      applyFilters(); 
                    }}
                  >
                    <div className="genre-content">
                      <IconComponent className="genre-icon" size={24} />
                      <span className="genre-name">{genre.name}</span>
                    </div>
                  </div>
                );
              })}
            </div>
          </section>
        )}

        {/* ========================================
           RECOMMENDATIONS - Sana Ã–zel (Sadece giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±lar iÃ§in)
        ======================================== */}
        {!searchQuery && !loading && activeTab === 'tmdb' && tmdbResults.length > 4 && user && (
          <section className="recommendations-section">
            <div className="rec-header">
              <div className="rec-icon">
                <Sparkles size={22} />
              </div>
              <div className="rec-text">
                <h3>Sana Ã–zel</h3>
                <p>Ä°zleme geÃ§miÅŸine gÃ¶re Ã¶neriler</p>
              </div>
            </div>
            <ContentGrid className="content-grid--horizontal">
              {tmdbResults
                .filter((film) => {
                  // KullanÄ±cÄ±nÄ±n zaten izlediÄŸi/kÃ¼tÃ¼phanesinde olan iÃ§erikleri filtrele
                  if (film.sagaIcerikId && userWatchedIds.has(String(film.sagaIcerikId))) {
                    return false;
                  }
                  return true;
                })
                .slice(4, 12)
                .map((film) => {
                const mediaType = film.mediaType === 'tv' ? 'tv' : 'film';
                const matchPercent = calculateMatchPercentage(film, userPreferences, tmdbResults);
                const cardData = tmdbToCardData(film);
                cardData.matchPercentage = matchPercent;
                
                return (
                  <ContentCard
                    key={`rec-${mediaType}-${film.id}`}
                    data={cardData}
                    size="lg"
                    showBadge={true}
                    showRatings={true}
                    showMatch={true}
                    showImportOverlay={!film.sagaIcerikId}
                    importing={importing === film.id}
                    onImport={() => handleImport(film.id, mediaType)}
                  />
                );
              })}
            </ContentGrid>
          </section>
        )}

        {/* ========================================
           POPULAR LISTS - PopÃ¼ler Listeler (GerÃ§ek API'den)
        ======================================== */}
        {!searchQuery && !loading && activeTab === 'tmdb' && populerListeler.length > 0 && (
          <section className="lists-section">
            <div className="section-header">
              <h2 className="section-title">PopÃ¼ler Listeler</h2>
              <button className="section-link" onClick={() => navigate('/listelerim')}>
                TÃ¼mÃ¼nÃ¼ GÃ¶r
                <ChevronRight size={16} />
              </button>
            </div>
            <div className="lists-slider">
              {populerListeler.map((liste) => (
                <div 
                  key={liste.id} 
                  className="list-card" 
                  onClick={() => navigate(`/liste/${liste.id}`)}
                >
                  <div className="list-covers">
                    {liste.kapakGorselleri.slice(0, 3).map((url, i) => (
                      <img key={i} src={url} alt="" />
                    ))}
                    {liste.kapakGorselleri.length === 0 && (
                      <div className="list-cover-placeholder">
                        <Film size={24} />
                      </div>
                    )}
                  </div>
                  <div className="list-info">
                    <h4 className="list-title">
                      {liste.ad}
                      {liste.onaylandi && <BadgeCheck size={16} className="verified" />}
                    </h4>
                    <div className="list-meta">
                      <span><Film size={14} /> {liste.icerikSayisi} iÃ§erik</span>
                      {liste.begeniSayisi > 0 && <span><Heart size={14} /> {liste.begeniSayisi}</span>}
                    </div>
                    <div className="list-author">
                      {liste.kullaniciAvatar ? (
                        <img src={liste.kullaniciAvatar} alt="" className="list-author-avatar" />
                      ) : (
                        <span className="list-author-avatar">{liste.kullaniciAdi[0].toUpperCase()}</span>
                      )}
                      <span className="list-author-name">@{liste.kullaniciAdi}</span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </section>
        )}

        {/* ========================================
           PEOPLE SECTION - KeÅŸfet: KiÅŸiler (GerÃ§ek API'den)
        ======================================== */}
        {!searchQuery && !loading && activeTab === 'tmdb' && onerilenKullanicilar.length > 0 && (
          <section className="people-section">
            <div className="section-header">
              <h2 className="section-title">KeÅŸfet: KiÅŸiler</h2>
            </div>
            <div className="people-slider">
              {onerilenKullanicilar.map((kisi) => (
                <div 
                  key={kisi.id} 
                  className="person-card"
                  onClick={() => navigate(`/profil/${kisi.kullaniciAdi}`)}
                >
                  <div className="person-avatar">
                    {kisi.avatarUrl ? (
                      <img src={kisi.avatarUrl} alt={kisi.kullaniciAdi} />
                    ) : (
                      <div className="person-avatar-placeholder">
                        <User size={32} />
                      </div>
                    )}
                  </div>
                  <h5 className="person-name">{kisi.goruntulemeAdi || kisi.kullaniciAdi}</h5>
                  <span className="person-username">@{kisi.kullaniciAdi}</span>
                  <span className="person-reason">{kisi.oneriNedeni}</span>
                  <button 
                    className={`person-follow ${takipEdilenIds.has(kisi.id) ? 'following' : ''}`}
                    disabled={takipLoading === kisi.id}
                    onClick={async (e) => {
                      e.stopPropagation();
                      if (takipEdilenIds.has(kisi.id)) {
                        // Takibi bÄ±rak
                        setTakipLoading(kisi.id);
                        try {
                          await kullaniciApi.takipBirak(kisi.id);
                          setTakipEdilenIds(prev => {
                            const newSet = new Set(prev);
                            newSet.delete(kisi.id);
                            return newSet;
                          });
                        } catch (err) {
                          console.error('Takipten Ã§Ä±kÄ±lamadÄ±:', err);
                        } finally {
                          setTakipLoading(null);
                        }
                      } else {
                        // Takip et
                        setTakipLoading(kisi.id);
                        try {
                          await kullaniciApi.takipEt(kisi.id);
                          setTakipEdilenIds(prev => new Set([...prev, kisi.id]));
                        } catch (err) {
                          console.error('Takip edilemedi:', err);
                        } finally {
                          setTakipLoading(null);
                        }
                      }
                    }}
                  >
                    {takipLoading === kisi.id ? (
                      <Loader2 size={14} className="animate-spin" />
                    ) : takipEdilenIds.has(kisi.id) ? (
                      'Takipten Ã‡Ä±k'
                    ) : (
                      'Takip Et'
                    )}
                  </button>
                </div>
              ))}
            </div>
          </section>
        )}

        {/* Loading State */}
        {loading && (
          <div className="content-grid">
            {[...Array(12)].map((_, i) => (
              <ContentSkeleton key={i} />
            ))}
          </div>
        )}

        {/* TMDB Results */}
        {!loading && activeTab === 'tmdb' && (
          <>
            {/* Trending Section */}
            {tmdbResults.length > 0 && (
              <section className="trending-section">
                <div className="section-header">
                  <h2 className="section-title">
                    {searchQuery ? `"${searchQuery}" SonuÃ§larÄ±` : 'Trend'}
                  </h2>
                </div>
                <ContentGrid className="content-grid--horizontal">
                  {tmdbResults.slice(0, 8).map((film, index) => {
                    const mediaType = film.mediaType === 'tv' ? 'tv' : 'film';
                    return (
                      <ContentCard
                        key={`${mediaType}-${film.id}`}
                        data={tmdbToCardData(film)}
                        size="lg"
                        showBadge={true}
                        showRatings={true}
                        showImportOverlay={!film.sagaIcerikId}
                        importing={importing === film.id}
                        onImport={() => handleImport(film.id, mediaType)}
                        rank={index + 1}
                      />
                    );
                  })}
                </ContentGrid>
              </section>
            )}

            {/* More Results Grid */}
            {tmdbResults.length > 8 && (
              <section className="trending-section">
                <div className="section-header">
                  <h2 className="section-title">Daha Fazla</h2>
                </div>
                <ContentGrid>
                  {tmdbResults.slice(8).map((film) => {
                    const mediaType = film.mediaType === 'tv' ? 'tv' : 'film';
                    return (
                      <ContentCard
                        key={`${mediaType}-${film.id}`}
                        data={tmdbToCardData(film)}
                        showImportOverlay={!film.sagaIcerikId}
                        onImport={() => handleImport(film.id, mediaType)}
                        importing={importing === film.id}
                      />
                    );
                  })}
                </ContentGrid>
              </section>
            )}

            {/* Empty State */}
            {tmdbResults.length === 0 && searchQuery.trim().length >= 2 && (
              <div className="empty-state">
                <div className="empty-state-icon">
                  <Film size={80} />
                </div>
                <h3 className="empty-state-title">SonuÃ§ BulunamadÄ±</h3>
                <p className="empty-state-text">"{searchQuery}" iÃ§in TMDB'de sonuÃ§ bulunamadÄ±.</p>
              </div>
            )}

            {tmdbLoadingMore && (
              <div className="loading-spinner">
                <Loader2 size={32} />
              </div>
            )}
            
            {/* IntersectionObserver trigger - TMDB */}
            {activeTab === 'tmdb' && tmdbHasMore && !loading && (
              <div ref={loadMoreTriggerRef} className="load-more-trigger" />
            )}
          </>
        )}

        {/* Kitap Results */}
        {!loading && activeTab === 'kitaplar' && (
          <>
            {bookResults.length > 0 && (
              <section className="trending-section">
                <div className="section-header">
                  <h2 className="section-title">
                    {searchQuery ? `"${searchQuery}" SonuÃ§larÄ±` : 'Kitaplar'}
                  </h2>
                </div>
                <ContentGrid>
                  {bookResults.map((book) => {
                    const isDbBook = book.id.startsWith('db-');
                    const dbId = isDbBook ? parseInt(book.id.replace('db-', '')) : undefined;
                    
                    return (
                      <ContentCard
                        key={book.id}
                        data={bookToCardData(book, dbId)}
                        showImportOverlay={!dbId}
                        onImport={() => handleImport(book.id, 'kitap')}
                        importing={importing === book.id}
                      />
                    );
                  })}
                </ContentGrid>
              </section>
            )}

            {/* Empty State */}
            {bookResults.length === 0 && searchQuery.trim().length >= 2 && (
              <div className="empty-state">
                <div className="empty-state-icon">
                  <BookOpen size={80} />
                </div>
                <h3 className="empty-state-title">SonuÃ§ BulunamadÄ±</h3>
                <p className="empty-state-text">"{searchQuery}" iÃ§in kitap bulunamadÄ±.</p>
              </div>
            )}

            {bookLoadingMore && (
              <div className="loading-spinner">
                <Loader2 size={32} />
              </div>
            )}
            
            {/* IntersectionObserver trigger - Kitaplar */}
            {activeTab === 'kitaplar' && bookHasMore && !loading && (
              <div ref={loadMoreTriggerRef} className="load-more-trigger" />
            )}
          </>
        )}
      </main>
    </div>

    {/* Filter Sidebar - explore-page dÄ±ÅŸÄ±nda render edilmeli */}
    <FilterPanel
      isOpen={filterModalOpen}
      onClose={() => setFilterModalOpen(false)}
      activeTab={activeTab}
      tmdbFilter={tmdbFilter}
      onTmdbFilterChange={handleTmdbFilterChange}
      tmdbSort={tmdbSort}
      onTmdbSortChange={handleTmdbSortChange}
      bookCategory={bookCategory}
      bookCategories={bookCategories}
      onBookCategoryChange={handleBookCategoryChange}
      bookLang={bookLang}
      bookLanguages={bookLanguages}
      onBookLangChange={handleBookLangChange}
      minYear={minYear}
      maxYear={maxYear}
      minPuan={minPuan}
      selectedGenres={selectedGenres}
      onMinYearChange={setMinYear}
      onMaxYearChange={setMaxYear}
      onMinPuanChange={handleMinPuanChange}
      onGenresChange={setSelectedGenres}
      onApply={applyFilters}
      onReset={resetFilters}
    />
    </>
  );
}


========== saga.client\src\pages\glass\FeedPage.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SAGA FEED PAGE - VOID THEME with GOLD ACCENT
   ContentCard ile uyumlu renk paleti
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CSS VARIABLES (VOID THEME - ContentCard uyumlu)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.feed-page {
  --void: #030304;
  --void-light: #0a0a0c;
  --void-surface: #111115;
  --void-elevated: #18181d;
  --void-border: #25252d;
  --gold: #d4a853;
  --gold-dim: rgba(212, 168, 83, 0.15);
  --gold-glow: rgba(212, 168, 83, 0.3);
  --gold-light: #e4b863;
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-muted: rgba(255, 255, 255, 0.45);
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --font-display: 'Cinzel', serif;
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

/* Material Symbols Icon Font */
.material-symbols-rounded {
  font-family: 'Material Symbols Rounded';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-smoothing: antialiased;
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE LAYOUT - Responsive
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.feed-page {
  min-height: 100vh;
  background: var(--void);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT AREA - GeniÅŸ Layout
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.feed-content {
  padding: 16px 24px 40px;
  max-width: 900px;
  margin: 0 auto;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTER TABS - Pill style, scrollable on mobile
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.filter-tabs,
.feed-tabs {
  display: flex;
  gap: 4px;
  background: var(--void-surface);
  padding: 4px;
  border-radius: 10px;
  margin-bottom: 20px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border: 1px solid var(--void-border);
  width: 100%;
}

.feed-tabs-wrapper {
  width: 100%;
  margin-bottom: 20px;
}

.feed-tabs-wrapper .feed-tabs {
  margin-bottom: 0;
}

/* Hide scrollbar */
.feed-tabs::-webkit-scrollbar {
  display: none;
}

.filter-tab,
.feed-tab {
  padding: 8px 16px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 13px;
  font-weight: 500;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--font-body);
  white-space: nowrap;
  flex: 1;
  text-align: center;
}

.filter-tab:hover,
.feed-tab:hover {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.03);
}

.feed-page .filter-tab.active,
.feed-page .feed-tab.active,
.feed-page button.feed-tab.active,
button.feed-tab.active,
.feed-tabs .feed-tab.active,
.feed-tabs-wrapper .feed-tab.active {
  background: #d4a853 !important;
  background-color: #d4a853 !important;
  background-image: none !important;
  color: #030304 !important;
  font-weight: 600;
}

.feed-tabs-container {
  margin-bottom: 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY FEED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.activity-feed {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY CARD - VOID THEME - Kompakt TasarÄ±m
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.feed-page .activity-card {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  padding: 16px;
  transition: all 0.3s ease;
  animation: fadeInUp 0.5s var(--ease-out-expo) forwards;
  opacity: 0;
}

.feed-page .activity-card:hover {
  border-color: var(--gold);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 0 15px var(--gold-glow);
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY HEADER - Kompakt
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.activity-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
  padding: 0;
}

.activity-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--void-border);
  cursor: pointer;
  flex-shrink: 0;
  transition: border-color 0.3s ease;
}

.activity-avatar:hover {
  border-color: var(--gold);
}

/* Avatar placeholder */
.activity-avatar-placeholder {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--void-elevated);
  border: 2px solid var(--void-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 13px;
  color: var(--gold);
  flex-shrink: 0;
  cursor: pointer;
  transition: all 0.3s ease;
}

.activity-avatar-placeholder:hover {
  border-color: var(--gold);
  background: var(--gold-dim);
}

/* Activity Meta - User info + time */
.activity-meta {
  flex: 1;
  min-width: 0;
}

.activity-user {
  display: flex;
  flex-wrap: wrap;
  align-items: baseline;
  gap: 5px;
  margin-bottom: 2px;
}

.activity-username {
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary);
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
  font-family: var(--font-body);
  text-decoration: none !important;
  transition: all 0.25s ease;
}

.activity-username:hover,
.activity-username:focus,
.feed-activity-card .activity-username:hover,
button.activity-username:hover {
  color: #d4a853 !important;
  text-decoration: none !important;
  text-shadow: 0 0 15px rgba(212, 168, 83, 0.6), 0 0 30px rgba(212, 168, 83, 0.3) !important;
  transform: scale(1.02);
  background: transparent !important;
}

.activity-action {
  font-size: 13px;
  color: var(--text-muted);
  font-weight: 400;
}

.activity-time {
  font-size: 11px;
  color: var(--text-muted);
}

/* Activity Type Badge */
.activity-type {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: var(--gold);
  border-radius: 6px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--void);
  flex-shrink: 0;
  margin-left: auto;
}

.activity-type .type-icon {
  font-size: 14px;
}

/* Header menu */
.more-menu-container.header-menu {
  margin-left: 12px;
  flex-shrink: 0;
}

.more-btn {
  background: none;
  border: none;
  padding: 8px;
  border-radius: 8px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.more-btn:hover {
  background: var(--void-surface);
  color: var(--text-primary);
}

.more-btn .material-symbols-rounded {
  font-size: 20px;
}

/* Activity Menu Dropdown */
.activity-menu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  background: var(--void-elevated);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 8px;
  min-width: 150px;
  z-index: 100;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

.activity-menu .menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 12px;
  background: none;
  border: none;
  border-radius: 8px;
  color: var(--text-secondary);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.activity-menu .menu-item:hover {
  background: var(--void-surface);
  color: var(--text-primary);
}

.activity-menu .menu-item.delete:hover {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.activity-menu .menu-item .material-symbols-rounded {
  font-size: 18px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT PREVIEW - Aktivite tipine gÃ¶re poster boyutlarÄ±
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.content-preview {
  display: flex;
  gap: 14px;
  padding: 0;
  background: transparent;
  border-radius: 0;
  margin-bottom: 12px;
  transition: all 0.3s ease;
  cursor: pointer;
  border: none;
}

.content-preview:hover .content-poster img {
  transform: scale(1.03);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT POSTER - Ä°ki tip: Normal ve Puanlama
   Film/Dizi posteri oranÄ±: 2:3 (geniÅŸlik:yÃ¼kseklik)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Normal kartlar - Poster */
.feed-page .activity-card .content-preview .content-poster {
  width: 130px !important;
  height: 195px !important;
  min-width: 130px !important;
  max-width: 130px !important;
  min-height: 195px !important;
  max-height: 195px !important;
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
  position: relative;
  background: var(--void-elevated);
}

/* PUANLAMA KARTI - Daha bÃ¼yÃ¼k poster */
.feed-page .activity-card .content-preview.rating-card .content-poster {
  width: 170px !important;
  height: 255px !important;
  min-width: 170px !important;
  max-width: 170px !important;
  min-height: 255px !important;
  max-height: 255px !important;
  border-radius: 10px;
}

/* Puanlama kartÄ± iÃ§in Ã¶zel stil */
.content-preview.rating-card {
  padding: 0;
  background: transparent;
  border: none;
}



.content-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.content-preview:hover .content-poster img {
  transform: scale(1.05);
}

.content-poster .poster-placeholder {
  width: 100%;
  height: 100%;
  background: var(--void-elevated);
  display: flex;
  align-items: center;
  justify-content: center;
}

.content-poster .poster-placeholder .material-symbols-rounded {
  font-size: 20px;
  color: var(--text-muted);
}

/* Poster Ratings Overlay - KÃ¼Ã§Ã¼k poster iÃ§in gizle */
.poster-ratings-overlay {
  display: none;
}

.poster-rating-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
}

.poster-rating-item .rating-source {
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 0.3px;
  text-transform: uppercase;
}

.poster-rating-item .rating-score {
  font-size: 12px;
  font-weight: 700;
}

.poster-rating-item.tmdb .rating-source,
.poster-rating-item.tmdb .rating-score {
  color: var(--gold);
}

.poster-rating-item.saga .rating-source,
.poster-rating-item.saga .rating-score {
  color: var(--gold);
}

/* Content Info */
.content-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  gap: 2px;
  justify-content: center;
}

.content-title {
  font-family: var(--font-display, 'Cinzel', serif);
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  line-height: 1.3;
  transition: color 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.content-preview:hover .content-title {
  color: var(--gold);
}

.content-meta {
  font-size: 12px;
  color: var(--text-muted);
  margin: 0;
}

/* User Rating Display - Kompakt */
.user-rating-display {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 2px;
}

.rating-stars {
  display: flex;
  gap: 1px;
}

.rating-stars .material-symbols-rounded {
  font-size: 14px;
  color: var(--gold);
  transition: color 0.2s ease;
}

.rating-stars .material-symbols-rounded.filled {
  color: var(--gold);
  font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}

.rating-value {
  font-size: 13px;
  font-weight: 600;
  color: var(--gold);
  margin-left: 4px;
}

/* Content Rating - Kompakt */
.content-rating {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 4px 8px;
  background: rgba(212, 168, 83, 0.1);
  border-radius: 5px;
  width: fit-content;
  margin-top: 4px;
}

.content-rating .material-symbols-rounded {
  font-size: 12px;
  color: var(--gold);
}

.content-rating {
  font-size: 11px;
  font-weight: 600;
  color: var(--gold);
}

/* List Badge - Kompakt */
.activity-list-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: var(--gold-dim);
  border-radius: 5px;
  width: fit-content;
  margin-top: 4px;
  font-size: 10px;
  color: var(--gold);
}

.activity-list-badge .material-symbols-rounded {
  font-size: 12px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY STATUS BADGE - Ä°zleniyor, Ä°zlendi, Okunuyor, Okundu
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.activity-status-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 5px;
  width: fit-content;
  margin-top: 4px;
  font-size: 10px;
  font-weight: 600;
}

.activity-status-badge .material-symbols-rounded {
  font-size: 12px;
}

/* Ä°zlendi / Okundu - YeÅŸil */
.activity-status-badge.status-completed {
  background: rgba(0, 184, 148, 0.15);
  color: #00b894;
}

/* Ä°zlenecek / Okunacak - AltÄ±n */
.activity-status-badge.status-planned {
  background: var(--gold-dim);
  color: var(--gold);
}

/* Ä°zleniyor / Okunuyor - Turuncu */
.activity-status-badge.status-watching {
  background: rgba(255, 159, 10, 0.15);
  color: #FF9F0A;
}

/* BÄ±raktÄ± - KÄ±rmÄ±zÄ± */
.activity-status-badge.status-dropped {
  background: rgba(255, 107, 107, 0.15);
  color: #ff6b6b;
}

/* Default */
.activity-status-badge.status-default {
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.7);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMPACT ACTIVITY INFO - Detay sayfasÄ±nda poster olmadan
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.compact-activity-info {
  padding: 12px 0;
}

.compact-activity-info .user-rating-display {
  margin-bottom: 12px;
}

.compact-activity-info .content-user-comment {
  margin-top: 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY COMMENT - Separate section
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.activity-comment {
  padding: 16px;
  background: var(--void-surface);
  border-radius: 12px;
  font-size: 15px;
  line-height: 1.6;
  color: var(--text-secondary);
  margin-bottom: 16px;
  border-left: 3px solid var(--gold-secondary);
  font-style: italic;
}

.activity-comment p {
  margin: 0;
}

.read-more-link {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-top: 10px;
  padding: 6px 0;
  background: none;
  border: none;
  color: var(--gold);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.25s ease;
  font-family: var(--font-body);
  font-style: normal;
  text-decoration: none !important;
}

.read-more-link::before {
  content: 'â€º';
  font-size: 16px;
  font-weight: 600;
  color: var(--gold);
  transition: all 0.25s ease;
}

.read-more-link:hover,
.read-more-link:focus,
button.read-more-link:hover {
  color: #e8c676 !important;
  text-decoration: none !important;
  text-shadow: 0 0 15px rgba(212, 168, 83, 0.6), 0 0 30px rgba(212, 168, 83, 0.3) !important;
  transform: scale(1.02);
  background: transparent !important;
}

.read-more-link:hover::before {
  color: #e8c676 !important;
  transform: translateX(3px);
}

/* Inline yorum iÃ§indeki read-more */
.inline-read-more {
  display: inline !important;
  margin: 0 0 0 4px !important;
  padding: 0 !important;
  font-size: inherit !important;
  color: var(--gold) !important;
}

.inline-read-more::before {
  display: none !important;
}

.inline-read-more:hover {
  color: #e8c676 !important;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY ACTIONS - Kompakt Footer
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.activity-actions {
  display: flex;
  gap: 4px;
  padding-top: 8px;
  border-top: 1px solid rgba(255, 255, 255, 0.04);
}

.action-button {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 6px 10px;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: var(--text-muted);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--font-body);
}

.action-button:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-primary);
}

.action-button .material-symbols-rounded {
  font-size: 16px;
  transition: transform 0.2s ease;
}

.action-button:hover .material-symbols-rounded {
  transform: scale(1.1);
}

/* Liked state */
.action-button.liked {
  color: #ef4444;
}

.action-button.liked:hover {
  background: rgba(239, 68, 68, 0.1);
}

/* Active state for comments */
.action-button.active {
  color: var(--gold);
}

.action-button.active:hover {
  background: rgba(212, 168, 83, 0.1);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTION BTN STYLES - Kompakt
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 8px;
  font-weight: 500;
  font-size: 12px;
  color: var(--text-secondary);
  background: none;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--font-body);
}

.action-btn:hover {
  background: var(--void-elevated);
  color: var(--text-primary);
}

.action-btn svg {
  width: 16px;
  height: 16px;
}

/* Like button states */
.action-btn.like-btn:hover {
  background: rgba(255, 107, 107, 0.1);
  color: #ff6b6b;
}

.action-btn.liked {
  color: #ff6b6b;
}

.action-btn.liked:hover {
  background: rgba(255, 107, 107, 0.1);
}

/* Comment button states */
.action-btn.comment-btn:hover,
.action-btn.comment-btn.active {
  background: var(--gold-dim);
  color: var(--gold);
}

/* More button */
.more-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.more-btn:hover {
  background: var(--glass-bg);
  color: var(--text-secondary);
}

.more-btn svg {
  width: 18px;
  height: 18px;
}

/* Activity Menu */
.activity-menu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  background: var(--void-elevated);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 8px;
  min-width: 140px;
  z-index: 50;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 10px 12px;
  border: none;
  background: none;
  color: var(--text-secondary);
  font-size: 14px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.menu-item:hover {
  background: var(--glass-bg);
  color: var(--text-primary);
}

.menu-item.delete {
  color: #ef4444;
}

.menu-item.delete:hover {
  background: rgba(239, 68, 68, 0.1);
}

.menu-item svg {
  width: 16px;
  height: 16px;
}

.more-menu-container {
  position: relative;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RIGHT SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.right-sidebar {
  padding: 100px 24px 40px;
  border-left: 1px solid var(--glass-border);
  height: calc(100vh);
  position: sticky;
  top: 0;
  overflow-y: auto;
  background: var(--void);
}

/* Widget */
.widget {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.widget-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.widget-title {
  font-family: var(--font-display);
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.widget-link {
  font-size: 13px;
  color: var(--gold-primary);
  font-weight: 500;
  transition: color 0.2s ease;
  text-decoration: none;
  cursor: pointer;
  background: none;
  border: none;
}

.widget-link:hover {
  color: var(--gold-secondary);
}

/* Trending List */
.trending-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.trending-item {
  display: flex;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid var(--glass-border);
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.trending-item:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.trending-item:first-child {
  padding-top: 0;
}

.trending-item:hover {
  opacity: 0.8;
}

.trending-rank {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-muted);
  min-width: 20px;
}

.trending-rank.top {
  color: var(--gold-primary);
}

.trending-poster {
  width: 90px;
  height: 135px;
  border-radius: 10px;
  overflow: hidden;
  flex-shrink: 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.trending-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.trending-info {
  flex: 1;
  min-width: 0;
}

.trending-title {
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text-primary);
}

.trending-meta {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 6px;
}

.trending-stats {
  font-size: 11px;
  color: var(--text-secondary);
  display: flex;
  gap: 12px;
}

.trending-stats span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.trending-stats svg {
  width: 14px;
  height: 14px;
  color: var(--gold-primary);
}

/* User List (Who to Follow) */
.user-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.user-item {
  display: flex;
  align-items: center;
  gap: 12px;
}

.user-item-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.user-item-avatar-placeholder {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 16px;
  color: #fff;
  flex-shrink: 0;
}

.user-item-info {
  flex: 1;
  overflow: hidden;
}

.user-item-name {
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text-primary);
}

.user-item-bio {
  font-size: 12px;
  color: var(--text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.follow-btn {
  padding: 8px 16px;
  background: var(--gold-primary);
  color: var(--void);
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
  transition: all 0.2s ease;
  flex-shrink: 0;
  border: none;
  cursor: pointer;
}

.follow-btn:hover {
  background: var(--gold-secondary);
  transform: translateY(-1px);
}

.follow-btn.following {
  background: transparent;
  color: var(--text-secondary);
  border: 1px solid var(--glass-border);
}

.follow-btn.following:hover {
  background: rgba(255, 107, 107, 0.1);
  color: #ff6b6b;
  border-color: #ff6b6b;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PULL TO REFRESH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.pull-to-refresh-indicator {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  overflow: hidden;
  transition: height 0.2s ease;
  background: transparent;
}

.pull-to-refresh-indicator span {
  font-size: 0.8rem;
  color: var(--gold-primary);
  font-weight: 500;
}

/* Scroll-to-top Refresh Indicator */
.scroll-top-refresh-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 12px 20px;
  margin-bottom: 16px;
  background: linear-gradient(135deg, var(--void-elevated), var(--void-surface));
  border: 1px solid var(--void-border);
  border-radius: 12px;
  animation: fadeInSlide 0.3s ease;
}

.scroll-top-refresh-indicator span {
  font-size: 0.85rem;
  color: var(--gold-primary);
  font-weight: 500;
}

@keyframes fadeInSlide {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.pull-spinner {
  width: 28px;
  height: 28px;
  color: var(--gold-primary);
  transition: transform 0.2s ease;
}

.pull-spinner svg {
  width: 100%;
  height: 100%;
}

.pull-spinner.spinning svg {
  animation: spin 1s linear infinite;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SKELETON LOADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.activity-card.skeleton {
  pointer-events: none;
  animation: none;
  opacity: 1;
}

.skeleton-avatar,
.skeleton-line,
.skeleton-badge,
.skeleton-time,
.skeleton-poster,
.skeleton-button,
.skeleton-menu {
  background: linear-gradient(90deg, 
    var(--void-elevated) 25%, 
    var(--void-surface) 50%, 
    var(--void-elevated) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 6px;
}

.skeleton-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50% !important;
  flex-shrink: 0;
}

.skeleton-user-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.skeleton-line.short {
  width: 100px;
  height: 14px;
}

.skeleton-line.medium {
  width: 150px;
  height: 12px;
}

.skeleton-line.long {
  width: 80%;
  height: 16px;
}

.skeleton-badge {
  width: 70px;
  height: 24px;
  border-radius: 20px !important;
}

.skeleton-time {
  width: 50px;
  height: 12px;
}

.skeleton-poster {
  width: 100px;
  height: 150px;
  border-radius: 8px !important;
  flex-shrink: 0;
}

.skeleton-content-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.skeleton-actions {
  display: flex;
  gap: 12px;
}

.skeleton-button {
  width: 80px;
  height: 36px;
  border-radius: 10px !important;
}

.skeleton-menu {
  width: 36px;
  height: 36px;
  border-radius: 50% !important;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.empty-state {
  text-align: center;
  padding: 60px 20px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  margin: 20px 0;
}

.empty-state-icon {
  width: 80px;
  height: 80px;
  margin: 0 auto 20px;
  border-radius: 16px;
  background: var(--void-elevated);
  border: 1px solid var(--glass-border);
  display: flex;
  align-items: center;
  justify-content: center;
}

.empty-state-icon svg {
  width: 36px;
  height: 36px;
  color: var(--gold-primary);
  opacity: 0.5;
}

.empty-state h3 {
  font-family: var(--font-display);
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.empty-state p {
  font-size: 0.875rem;
  color: var(--text-muted);
  max-width: 280px;
  margin: 0 auto;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ERROR STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.error-state {
  text-align: center;
  padding: 40px 20px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  margin: 20px 0;
}

.error-message {
  color: #ef4444;
  margin-bottom: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOAD MORE / INFINITE SCROLL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.load-more-container {
  display: flex;
  justify-content: center;
  padding: 32px 0;
  min-height: 100px;
}

.infinite-scroll-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 16px 32px;
  color: var(--gold-primary);
  font-size: 0.95rem;
  font-weight: 500;
  background: var(--void-elevated);
  border-radius: 999px;
  border: 1px solid var(--gold-dim);
  box-shadow: 0 0 20px rgba(212, 168, 83, 0.15);
}

.infinite-scroll-loading svg.spin {
  animation: spin 0.8s linear infinite;
  color: var(--gold-primary);
}

.all-loaded-message {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  color: var(--text-muted);
  font-size: 0.85rem;
  background: var(--void-elevated);
  border-radius: 999px;
  border: 1px solid var(--glass-border);
}

.all-loaded-message svg {
  color: var(--gold-secondary);
}

.load-more-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 14px 32px;
  border-radius: 999px;
  border: 1px solid var(--glass-border);
  background: var(--void-elevated);
  color: var(--text-secondary);
  font-weight: 500;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.load-more-btn:hover:not(.disabled) {
  background: var(--void-surface);
  border-color: var(--gold-secondary);
  color: var(--gold-primary);
  transform: translateY(-2px);
}

.load-more-btn.disabled {
  opacity: 0.5;
  cursor: default;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INLINE COMMENTS - Kart iÃ§inde devam eden stil - Kompakt
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.inline-comments {
  padding-top: 12px;
  margin-top: 12px;
  border-top: 1px solid rgba(255, 255, 255, 0.04);
  overflow: visible;
}

/* Inline Comment Input */
.inline-comment-input {
  margin-bottom: 12px;
}

.inline-comment-input textarea {
  width: 100%;
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid var(--gold-primary);
  background: transparent;
  color: var(--text-primary);
  font-family: var(--font-body);
  font-size: 13px;
  resize: none;
  transition: all 0.2s ease;
  min-height: 40px;
  box-shadow: 0 0 12px rgba(212, 168, 83, 0.2);
}

.inline-comment-input textarea:focus {
  outline: none;
  border-color: var(--gold-primary);
  box-shadow: 0 0 20px rgba(212, 168, 83, 0.35);
}

.inline-comment-input textarea::placeholder {
  color: var(--text-muted);
}

.inline-comment-input .comment-input-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 8px;
}

.char-count {
  font-size: 11px;
  color: var(--text-muted);
}

.send-comment-btn {
  padding: 8px 16px;
  border-radius: 6px;
  border: none;
  background: var(--gold-primary);
  color: var(--void);
  font-weight: 600;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--font-body);
}

.send-comment-btn:hover:not(:disabled) {
  background: var(--gold-secondary);
}

.send-comment-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Inline Comments List */
.inline-comments-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 300px;
  overflow-y: auto;
  overflow-x: visible;
  padding-right: 4px;
  position: relative;
}

.inline-comments-list::-webkit-scrollbar {
  width: 3px;
}

.inline-comments-list::-webkit-scrollbar-thumb {
  background: var(--glass-border);
  border-radius: 2px;
}

/* Comment states */
.inline-comments .comments-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 16px;
  color: var(--text-muted);
  font-size: 14px;
}

.inline-comments .loading-spinner.small {
  width: 16px;
  height: 16px;
  border: 2px solid var(--glass-border);
  border-top-color: var(--gold-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.no-comments-inline {
  text-align: center;
  padding: 16px;
  color: var(--text-muted);
  font-size: 13px;
}

.no-comments-inline .hint {
  color: var(--gold-primary);
  font-weight: 500;
}

/* Comment Item - Minimal stil, Ã§erÃ§evesiz */
.feed-page .comment-thread {
  margin-bottom: 0;
}

.feed-page .comment-item {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  padding: 8px 0;
}

.feed-page .comment-item.reply {
  padding-left: 0;
}

.feed-page .comment-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.feed-page .comment-body {
  flex: 1;
  min-width: 0;
}

.feed-page .comment-text {
  font-size: 13px;
  line-height: 1.4;
  color: var(--text-secondary);
  margin: 0 0 4px 0;
  word-wrap: break-word;
}

.feed-page .comment-username {
  color: var(--text-primary);
  font-weight: 600;
  margin-right: 6px;
  cursor: pointer;
}

.feed-page .comment-username:hover {
  color: var(--gold-primary);
}

.feed-page .comment-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  color: var(--text-muted);
}

.feed-page .comment-likes {
  font-weight: 500;
}

.feed-page .comment-reply-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  padding: 0;
}

.feed-page .comment-reply-btn:hover {
  color: var(--text-primary);
}

/* YanÄ±tlar - Minimal indent */
.feed-page .comment-replies {
  margin-left: 38px;
  margin-top: 4px;
  padding-left: 12px;
  border-left: 1px solid var(--glass-border);
}

.inline-comment-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
}

.inline-comment-username {
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary);
  cursor: pointer;
  transition: color 0.2s ease;
}

.inline-comment-username:hover {
  color: var(--gold-primary);
}

.inline-comment-time {
  font-size: 12px;
  color: var(--text-muted);
}

.inline-comment-text {
  color: var(--text-secondary);
  font-size: 14px;
  line-height: 1.5;
  margin: 0 0 10px 0;
  word-wrap: break-word;
}

.inline-comment-actions {
  display: flex;
  gap: 8px;
}

.inline-comment-like,
.inline-comment-reply {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 8px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--font-body);
}

.inline-comment-like:hover,
.inline-comment-reply:hover {
  background: var(--void-elevated);
  color: var(--text-primary);
}

.inline-comment-like.liked {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.1);
}

.inline-comment-like svg,
.inline-comment-reply svg {
  width: 16px;
  height: 16px;
}

/* Replying to indicator */
.replying-to {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: #ffd2781a;
  border-radius: 10px;
  margin-bottom: 12px;
  font-size: 13px;
  color: var(--gold-primary);
  border: 1px solid rgba(212, 168, 83, 0.2);
}

.cancel-reply {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 18px;
  cursor: pointer;
  padding: 0;
  line-height: 1;
  transition: color 0.2s ease;
}

.cancel-reply:hover {
  color: var(--text-primary);
}

/* Inline Replies */
.inline-replies {
  margin-top: 8px;
  margin-left: 38px;
  padding-left: 0;
  border-left: none;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.inline-reply-item {
  display: flex;
  gap: 10px;
  padding: 8px 0;
  background: transparent;
  border-radius: 0;
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

.inline-reply-avatar {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
  border: 2px solid var(--glass-border);
}

.inline-reply-content {
  flex: 1;
  min-width: 0;
}

/* Comment Menu */
.comment-menu-container {
  position: relative;
  margin-left: auto;
}

.comment-more-btn {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.comment-more-btn:hover {
  background: var(--void-elevated);
  color: var(--text-primary);
}

.comment-more-btn svg {
  width: 18px;
  height: 18px;
}

.comment-menu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  background: var(--void-elevated);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 8px;
  min-width: 140px;
  z-index: 50;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

.comment-menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 14px;
  border: none;
  background: none;
  color: var(--text-secondary);
  font-size: 14px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.comment-menu-item:hover {
  background: var(--glass-bg);
}

.comment-menu-item.delete {
  color: #ef4444;
}

.comment-menu-item.delete:hover {
  background: rgba(239, 68, 68, 0.1);
}

.comment-menu-item svg {
  width: 14px;
  height: 14px;
}

/* Login prompt */
.login-prompt {
  text-align: center;
  padding: 16px;
  color: var(--text-muted);
  font-size: 0.9rem;
}

.login-prompt a {
  color: var(--gold-primary);
  font-weight: 500;
  text-decoration: none;
}

.login-prompt a:hover {
  text-decoration: underline;
}


.feed-page .comment-input-bar {
  padding-top: 12px;
  margin-top: 12px;
  border-top: 1px solid var(--glass-border);
}

.feed-page .replying-indicator {
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  padding: 8px 12px !important;
  margin-bottom: 8px !important;
  background: rgba(255, 206, 71, 0.15) !important;
  border-radius: 8px !important;
  font-size: 13px !important;
  color: var(--gold-primary) !important;
  font-weight: 600 !important;
  border: 1px solid rgba(212, 168, 83, 0.3) !important;
}

.feed-page .replying-indicator button {
  background: none !important;
  border: none !important;
  color: var(--gold-dim) !important;
  font-size: 18px !important;
  cursor: pointer !important;
  padding: 0 !important;
  margin-left: auto !important;
  line-height: 1 !important;
}

.feed-page .replying-indicator button:hover {
  color: var(--gold-primary) !important;
}

.feed-page .comment-input-row {
  display: flex;
  gap: 10px;
  align-items: center;
}

.feed-page .comment-input-row input {
  flex: 1;
  padding: 8px 12px;
  background: transparent;
  border: 1px solid var(--gold);
  border-radius: 16px;
  color: var(--text-primary);
  font-size: 13px;
  font-family: var(--font-body);
  transition: all 0.2s ease;
  box-shadow: 0 0 12px rgba(212, 168, 83, 0.2);
}

.feed-page .comment-input-row input:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 20px rgba(212, 168, 83, 0.35);
}

.feed-page .comment-input-row input::placeholder {
  color: var(--text-muted);
}

.feed-page .comment-post-btn {
  padding: 6px 12px;
  background: transparent;
  border: none;
  color: var(--gold);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  font-family: var(--font-body);
  transition: opacity 0.2s ease;
}

.feed-page .comment-post-btn:hover:not(:disabled) {
  opacity: 0.8;
}

.feed-page .comment-post-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.feed-page .comment-login-prompt {
  text-align: center;
  padding: 12px;
  color: var(--text-muted);
  font-size: 13px;
  border-top: 1px solid var(--glass-border);
  margin-top: 16px;
}

.feed-page .comment-login-prompt a {
  color: var(--gold-primary);
  text-decoration: none;
  font-weight: 500;
}

.feed-page .comment-login-prompt a:hover {
  text-decoration: underline;
}

/* Comment Thread - Instagram Style */
.feed-page .comment-thread {
  margin-bottom: 12px;
}

.feed-page .comment-item {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}

.feed-page .comment-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.feed-page .comment-body {
  flex: 1;
  min-width: 0;
}

.feed-page .comment-text {
  font-size: 14px;
  line-height: 1.4;
  color: var(--text-secondary);
  margin: 0 0 4px 0;
  word-wrap: break-word;
}

.feed-page .comment-username {
  color: var(--text-primary);
  font-weight: 600;
  margin-right: 8px;
  cursor: pointer;
}

.feed-page .comment-username:hover {
  color: var(--gold-primary);
}

.feed-page .comment-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
  color: var(--text-muted);
}

.feed-page .comment-likes {
  font-weight: 500;
}

.feed-page .comment-reply-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  padding: 0;
}

.feed-page .comment-reply-btn:hover {
  color: var(--text-primary);
}

.feed-page .comment-like-btn {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  font-size: 12px;
  line-height: 1;
}

.feed-page .comment-like-btn:hover {
  transform: scale(1.1);
}

/* 3 Nokta MenÃ¼ - Yorum Silme */
.feed-page .comment-more-menu {
  position: relative;
  margin-left: auto;
  flex-shrink: 0;
}

.feed-page .comment-more-btn {
  background: none;
  border: none;
  padding: 4px 8px;
  cursor: pointer;
  color: var(--text-muted);
  font-size: 14px;
  letter-spacing: 1px;
  opacity: 0.5;
  transition: opacity 0.2s ease;
}

.feed-page .comment-item:hover .comment-more-btn {
  opacity: 1;
}

.feed-page .comment-more-btn:hover {
  color: var(--text-primary);
}

.feed-page .comment-dropdown-menu {
  position: absolute;
  top: 0;
  right: 100%;
  margin-right: 4px;
  background: var(--void-elevated);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  padding: 4px;
  min-width: 70px;
  z-index: 200;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  white-space: nowrap;
}

.feed-page .comment-menu-delete {
  width: 100%;
  padding: 8px 12px;
  background: none;
  border: none;
  color: #ef4444;
  font-size: 13px;
  cursor: pointer;
  border-radius: 4px;
  text-align: left;
  font-family: var(--font-body);
}

.feed-page .comment-menu-delete:hover {
  background: rgba(239, 68, 68, 0.1);
}

.feed-page .comment-menu-delete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* KullanÄ±cÄ± Yorumu - Content Info iÃ§inde */
.content-user-comment {
  margin-top: 8px;
  padding: 10px 12px;
  background: rgba(0, 0, 0, 0.25);
  border-radius: 8px;
  border-left: 3px solid var(--gold);
  position: relative;
  overflow: hidden;
}

.content-user-comment p {
  margin: 0;
  font-size: 13px;
  line-height: 1.5;
  color: var(--text-secondary);
  font-style: italic;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.content-user-comment .read-more-link {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-top: 8px;
  padding: 0;
  background: none;
  border: none;
  color: var(--text-primary);
  font-size: 12px;
  cursor: pointer;
  font-style: normal;
  font-weight: 500;
  transition: all 0.25s ease;
  text-decoration: none !important;
}

.content-user-comment .read-more-link::before {
  content: 'â€º';
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  transition: all 0.25s ease;
}

.content-user-comment .read-more-link:hover,
.content-user-comment .read-more-link:focus,
.content-user-comment button.read-more-link:hover {
  color: #d4a853 !important;
  text-decoration: none !important;
  text-shadow: 0 0 15px rgba(212, 168, 83, 0.6), 0 0 30px rgba(212, 168, 83, 0.3) !important;
  transform: scale(1.02);
  background: transparent !important;
}

.content-user-comment .read-more-link:hover::before {
  color: #d4a853 !important;
  transform: translateX(3px);
}

/* Yorum iÃ§indeki aksiyonlar */
.content-user-comment .comment-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.content-user-comment .comment-actions .read-more-link {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin-top: 0;
}

/* Spoiler Yorumu */
.content-user-comment.spoiler-hidden {
  cursor: pointer;
  background: rgba(212, 168, 83, 0.05);
  border: 1px solid rgba(212, 168, 83, 0.2);
  border-left: 3px solid var(--gold);
  min-height: 60px;
}

.content-user-comment.spoiler-hidden p {
  filter: blur(8px);
  user-select: none;
}

.spoiler-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 8px;
  color: var(--gold);
  font-size: 12px;
  font-weight: 500;
}

.spoiler-overlay .material-symbols-rounded {
  font-size: 18px;
}

/* Spoiler aÃ§Ä±kken gizle butonu - FeedPage iÃ§in */
.feed-page .spoiler-hide-btn,
.feed-activity-card .spoiler-hide-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin-top: 8px;
  padding: 4px 10px;
  background: rgba(212, 168, 83, 0.1);
  border: 1px solid rgba(212, 168, 83, 0.3);
  border-radius: 4px;
  color: var(--gold);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.feed-page .spoiler-hide-btn:hover,
.feed-activity-card .spoiler-hide-btn:hover {
  background: rgba(212, 168, 83, 0.2);
}

/* YanÄ±tlar */
.feed-page .comment-replies {
  margin-left: 42px;
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.feed-page .view-replies-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  padding: 4px 0;
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: 42px;
  margin-top: 4px;
}

.feed-page .view-replies-btn::before {
  content: '';
  width: 24px;
  height: 1px;
  background: var(--text-muted);
}

.feed-page .view-replies-btn:hover {
  color: var(--text-primary);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE DESIGN - Mobile First
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 1400px) {
  .feed-content {
    max-width: 800px;
    margin-left: calc((100% - 800px) / 2 + 40px);
  }
}

@media (max-width: 1200px) {
  .feed-content {
    max-width: 700px;
    margin-left: calc((100% - 700px) / 2 + 40px);
  }
}

@media (max-width: 992px) {
  .feed-content {
    max-width: 100%;
    margin-left: 80px;
    margin-right: 20px;
    padding: 100px 20px 40px;
  }
}

@media (max-width: 768px) {
  .feed-content {
    margin-left: 0;
    margin-right: 0;
    margin-top: 0;
    padding: 12px 16px 100px;
  }
  
  .filter-tabs,
  .feed-tabs {
    width: 100%;
    overflow-x: auto;
    padding: 6px;
    gap: 6px;
  }
  
  .filter-tab,
  .feed-tab {
    white-space: nowrap;
    padding: 8px 14px;
    font-size: 12px;
  }
  
  .activity-card {
    padding: 16px;
  }
  
  .activity-header {
    flex-wrap: wrap;
    gap: 12px;
  }
  
  .activity-type {
    margin-top: 8px;
    margin-left: 0;
    order: 3;
    width: 100%;
    justify-content: center;
  }
  
  .content-preview {
    flex-direction: row;
    padding: 14px;
    gap: 14px;
  }
  
  .feed-page .content-preview .content-poster {
    width: 150px !important;
    height: 150px !important;
  }
  
  .feed-page .content-preview.rating-card .content-poster {
    width: 140px !important;
    height: 210px !important;
  }
  
  .content-title {
    font-size: 16px;
  }
  
  .activity-actions {
    justify-content: center;
    flex-wrap: wrap;
  }
  
  .action-button {
    flex: 1;
    min-width: 120px;
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .feed-content {
    padding: 16px 12px 90px;
  }
  
  .activity-card {
    padding: 14px;
    border-radius: 12px;
  }
  
  .activity-header {
    gap: 10px;
  }
  
  .activity-avatar,
  .activity-avatar-placeholder {
    width: 40px;
    height: 40px;
    font-size: 14px;
  }
  
  .activity-username {
    font-size: 14px;
  }
  
  .activity-action {
    font-size: 13px;
  }
  
  .activity-type {
    padding: 6px 10px;
    font-size: 12px;
  }
  
  .activity-type .type-icon {
    font-size: 16px;
  }
  
  .content-preview {
    padding: 12px;
    gap: 12px;
  }
  
  .feed-page .content-preview .content-poster {
    width: 80px !important;
    height: 120px !important;
  }
  
  .content-title {
    font-size: 15px;
  }
  
  .content-meta {
    font-size: 13px;
  }
  
  .user-rating-display {
    padding: 8px 12px;
    gap: 8px;
  }
  
  .rating-stars .material-symbols-rounded {
    font-size: 16px;
  }
  
  .rating-value {
    font-size: 13px;
  }
  
  .activity-comment {
    padding: 12px;
    font-size: 14px;
  }
  
  .action-button {
    padding: 8px 12px;
    font-size: 12px;
    min-width: 100px;
  }
  
  .action-button .material-symbols-rounded {
    font-size: 18px;
  }
}


========== saga.client\src\pages\glass\FeedPage.tsx ==========

import { useState, useEffect, useCallback, useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { aktiviteApi } from '../../services/api';
import type { Aktivite, AktiviteYorum } from '../../services/api';
import { 
  getFeedCache, 
  setFeedCache, 
  removeFromFeedCache,
  invalidateFeedCache
} from '../../services/feedCache';
import { formatDistanceToNow } from 'date-fns';
import { tr } from 'date-fns/locale';
import './FeedPage.css';

// ============================================
// ACTIVITY TYPE HELPER - Get action text
// ============================================

// Durum iÃ§in helper fonksiyonlar
function getStatusLabel(durum: string, tur?: string): string {
  const durumKey = (durum || '').toLowerCase();
  const isBook = (tur || '').toLowerCase() === 'kitap';
  
  switch (durumKey) {
    case 'izlendi':
      return 'Ä°zlendi';
    case 'okundu':
      return 'Okundu';
    case 'izlenecek':
      return 'Ä°zlenecek';
    case 'okunacak':
      return 'Okunacak';
    case 'devam_ediyor':
      return isBook ? 'Okunuyor' : 'Ä°zleniyor';
    case 'izleniyor':
      return 'Ä°zleniyor';
    case 'okunuyor':
      return 'Okunuyor';
    case 'tamamlandi':
      return isBook ? 'Okundu' : 'Ä°zlendi';
    case 'birakti':
    case 'bÄ±raktÄ±':
      return 'BÄ±raktÄ±';
    default:
      return durum;
  }
}

function getStatusIcon(durum: string, tur?: string): string {
  const durumKey = (durum || '').toLowerCase();
  const isBook = (tur || '').toLowerCase() === 'kitap';
  
  switch (durumKey) {
    case 'izlendi':
    case 'okundu':
    case 'tamamlandi':
      return 'check_circle';
    case 'izlenecek':
    case 'okunacak':
      return 'bookmark';
    case 'devam_ediyor':
    case 'izleniyor':
    case 'okunuyor':
      return isBook ? 'auto_stories' : 'play_circle';
    case 'birakti':
    case 'bÄ±raktÄ±':
      return 'cancel';
    default:
      return 'info';
  }
}

function getStatusClass(durum: string, _tur?: string): string {
  const durumKey = (durum || '').toLowerCase();
  
  switch (durumKey) {
    case 'izlendi':
    case 'okundu':
    case 'tamamlandi':
      return 'status-completed';
    case 'izlenecek':
    case 'okunacak':
      return 'status-planned';
    case 'devam_ediyor':
    case 'izleniyor':
    case 'okunuyor':
      return 'status-watching';
    case 'birakti':
    case 'bÄ±raktÄ±':
      return 'status-dropped';
    default:
      return 'status-default';
  }
}

// Activity type iÃ§in aksiyon metni oluÅŸtur
function getActionText(type: string, contentType?: string, durum?: string): string {
  const typeKey = type.toLowerCase();
  const turKey = (contentType || '').toLowerCase();
  const isBook = turKey === 'kitap';
  const isTV = turKey === 'dizi';
  
  switch (typeKey) {
    case 'puanlama':
      return isBook ? 'bir kitabÄ± puanladÄ±' : isTV ? 'bir diziyi puanladÄ±' : 'bir filmi puanladÄ±';
    case 'yorum':
      return isBook ? 'bir kitap hakkÄ±nda yorum yaptÄ±' : isTV ? 'bir dizi hakkÄ±nda yorum yaptÄ±' : 'bir film hakkÄ±nda yorum yaptÄ±';
    case 'durum_guncelleme':
      // Durum deÄŸerine gÃ¶re aksiyon metni
      const durumKey = (durum || '').toLowerCase();
      if (durumKey === 'izlendi' || durumKey === 'tamamlandi') {
        return isBook ? 'bir kitabÄ± okudu' : isTV ? 'bir diziyi izledi' : 'bir filmi izledi';
      } else if (durumKey === 'okundu') {
        return 'bir kitabÄ± okudu';
      } else if (durumKey === 'devam_ediyor' || durumKey === 'izleniyor') {
        return isTV ? 'bir dizi izlemeye baÅŸladÄ±' : 'bir film izlemeye baÅŸladÄ±';
      } else if (durumKey === 'okunuyor') {
        return 'bir kitap okumaya baÅŸladÄ±';
      } else if (durumKey === 'izlenecek' || durumKey === 'okunacak') {
        return isBook ? 'bir kitabÄ± listesine ekledi' : isTV ? 'bir diziyi listesine ekledi' : 'bir filmi listesine ekledi';
      }
      return isBook ? 'okuma durumunu gÃ¼ncelledi' : 'izleme durumunu gÃ¼ncelledi';
    case 'listeye_ekleme':
    case 'kutuphaneyeekleme':
      return isBook ? 'bir kitabÄ± kÃ¼tÃ¼phanesine ekledi' : isTV ? 'bir diziyi kÃ¼tÃ¼phanesine ekledi' : 'bir filmi kÃ¼tÃ¼phanesine ekledi';
    default:
      return 'bir aktivite gerÃ§ekleÅŸtirdi';
  }
}

// ============================================
// INLINE COMMENTS SECTION COMPONENT
// ============================================
interface InlineCommentsProps {
  aktiviteId: number;
  isOpen: boolean;
  isLoggedIn: boolean;
  currentUserName?: string;
  onCommentAdded?: () => void;
  onCommentDeleted?: () => void;
}

function InlineComments({ aktiviteId, isOpen, isLoggedIn, currentUserName, onCommentAdded, onCommentDeleted }: InlineCommentsProps) {
  const [yorumlar, setYorumlar] = useState<AktiviteYorum[]>([]);
  const [loading, setLoading] = useState(true);
  const [yeniYorum, setYeniYorum] = useState('');
  const [gonderiliyor, setGonderiliyor] = useState(false);
  const [replyingTo, setReplyingTo] = useState<{ id: number; kullaniciAdi: string } | null>(null);
  const [deletingId, setDeletingId] = useState<number | null>(null);
  const [openMenuId, setOpenMenuId] = useState<number | null>(null);
  const [expandedComments, setExpandedComments] = useState<Set<number>>(new Set());
  const inputRef = useRef<HTMLInputElement>(null);
  const menuRefs = useRef<{ [key: number]: HTMLDivElement | null }>({});

  const YORUM_LIMIT = 200; // Karakter sÄ±nÄ±rÄ±

  const toggleExpandComment = (yorumId: number) => {
    setExpandedComments(prev => {
      const newSet = new Set(prev);
      if (newSet.has(yorumId)) {
        newSet.delete(yorumId);
      } else {
        newSet.add(yorumId);
      }
      return newSet;
    });
  };

  const renderYorumIcerik = (yorum: AktiviteYorum) => {
    const isExpanded = expandedComments.has(yorum.id);
    const isLong = yorum.icerik.length > YORUM_LIMIT;
    
    if (!isLong || isExpanded) {
      return (
        <>
          {yorum.icerik}
          {isLong && (
            <button 
              className="read-more-link inline-read-more"
              onClick={() => toggleExpandComment(yorum.id)}
            >
              daha az gÃ¶ster
            </button>
          )}
        </>
      );
    }
    
    return (
      <>
        {yorum.icerik.substring(0, YORUM_LIMIT)}...
        <button 
          className="read-more-link inline-read-more"
          onClick={() => toggleExpandComment(yorum.id)}
        >
          daha fazlasÄ±nÄ± gÃ¶r
        </button>
      </>
    );
  };

  useEffect(() => {
    if (isOpen) {
      fetchYorumlar();
    }
  }, [isOpen, aktiviteId]);

  // MenÃ¼ dÄ±ÅŸÄ± tÄ±klamada kapat
  useEffect(() => {
    const handleClickOutside = (e: MouseEvent) => {
      if (openMenuId !== null) {
        const menuEl = menuRefs.current[openMenuId];
        if (menuEl && !menuEl.contains(e.target as Node)) {
          setOpenMenuId(null);
        }
      }
    };
    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, [openMenuId]);

  const fetchYorumlar = async () => {
    try {
      setLoading(true);
      const response = await aktiviteApi.getYorumlar(aktiviteId);
      setYorumlar(response.data || []);
    } catch (error) {
      console.error('Yorumlar yÃ¼klenemedi:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleYorumGonder = async () => {
    if (!yeniYorum.trim() || gonderiliyor) return;
    setGonderiliyor(true);
    try {
      const yorum = await aktiviteApi.yorumEkle(aktiviteId, { 
        icerik: yeniYorum.trim(),
        ustYorumId: replyingTo?.id
      });
      
      if (replyingTo) {
        // YanÄ±t ise, Ã¼st yorumun yanÄ±tlar listesine ekle
        setYorumlar(yorumlar.map(y => 
          y.id === replyingTo.id 
            ? { ...y, yanitlar: [...(y.yanitlar || []), yorum] }
            : y
        ));
      } else {
        // Ana yorum ise baÅŸa ekle
        setYorumlar([yorum, ...yorumlar]);
      }
      
      setYeniYorum('');
      setReplyingTo(null);
      if (onCommentAdded) onCommentAdded();
    } catch (error) {
      console.error('Yorum gÃ¶nderilemedi:', error);
    } finally {
      setGonderiliyor(false);
    }
  };

  const handleReply = (yorumId: number, kullaniciAdi: string) => {
    setReplyingTo({ id: yorumId, kullaniciAdi });
    setYeniYorum(`@${kullaniciAdi} `);
    inputRef.current?.focus();
  };

  const cancelReply = () => {
    setReplyingTo(null);
    setYeniYorum('');
  };

  const handleYorumBegen = async (yorumId: number, isReply = false, parentId?: number) => {
    try {
      const result = await aktiviteApi.yorumBegen(yorumId);
      
      if (isReply && parentId) {
        // YanÄ±t beÄŸenisi
        setYorumlar(yorumlar.map(y => 
          y.id === parentId 
            ? { 
                ...y, 
                yanitlar: y.yanitlar?.map(r => 
                  r.id === yorumId 
                    ? { ...r, begendim: result.begendim, begeniSayisi: result.begeniSayisi }
                    : r
                ) 
              }
            : y
        ));
      } else {
        // Ana yorum beÄŸenisi
        setYorumlar(yorumlar.map(y => 
          y.id === yorumId 
            ? { ...y, begendim: result.begendim, begeniSayisi: result.begeniSayisi }
            : y
        ));
      }
    } catch (error) {
      console.error('BeÄŸeni hatasÄ±:', error);
    }
  };

  const handleYorumSil = async (yorumId: number, isReply = false, parentId?: number) => {
    setDeletingId(yorumId);
    setOpenMenuId(null);
    try {
      await aktiviteApi.yorumSil(yorumId);
      
      if (isReply && parentId) {
        // YanÄ±tÄ± sil
        setYorumlar(yorumlar.map(y => 
          y.id === parentId 
            ? { ...y, yanitlar: y.yanitlar?.filter(r => r.id !== yorumId) }
            : y
        ));
      } else {
        // Ana yorumu sil
        setYorumlar(yorumlar.filter(y => y.id !== yorumId));
      }
      
      if (onCommentDeleted) onCommentDeleted();
    } catch (error) {
      console.error('Yorum silinemedi:', error);
    } finally {
      setDeletingId(null);
    }
  };

  if (!isOpen) return null;

  return (
    <div className="inline-comments">
      {/* Yorumlar Listesi - Ã–nce yorumlar */}
      <div className="inline-comments-list">
        {loading ? (
          <div className="comments-loading">
            <div className="loading-spinner small"></div>
          </div>
        ) : yorumlar.length === 0 ? (
          <div className="no-comments-inline">
            HenÃ¼z yorum yok{isLoggedIn && ' â€” Ä°lk yorumu sen yap!'}
          </div>
        ) : (
          yorumlar.map((yorum) => (
            <div key={yorum.id} className="comment-thread">
              {/* Ana Yorum */}
              <div className="comment-item">
                <img 
                  src={yorum.kullaniciAvatar || '/default-avatar.svg'}
                  alt={yorum.kullaniciAdi}
                  className="comment-avatar"
                  onError={(e) => { (e.target as HTMLImageElement).src = '/default-avatar.svg'; }}
                />
                <div className="comment-body">
                  <p className="comment-text">
                    <span className="comment-username">{yorum.kullaniciAdi}</span>
                    {renderYorumIcerik(yorum)}
                  </p>
                  <div className="comment-meta">
                    <span className="comment-time">
                      {formatDistanceToNow(new Date(yorum.olusturulmaZamani), { addSuffix: false, locale: tr })}
                    </span>
                    {yorum.begeniSayisi > 0 && (
                      <span className="comment-likes">{yorum.begeniSayisi} beÄŸeni</span>
                    )}
                    {isLoggedIn && (
                      <button 
                        className={`comment-like-btn ${yorum.begendim ? 'liked' : ''}`}
                        onClick={() => handleYorumBegen(yorum.id)}
                      >
                        {yorum.begendim ? 'â¤ï¸' : 'ğŸ¤'}
                      </button>
                    )}
                    {isLoggedIn && (
                      <button 
                        className="comment-reply-btn"
                        onClick={() => handleReply(yorum.id, yorum.kullaniciAdi)}
                      >
                        YanÄ±tla
                      </button>
                    )}
                  </div>
                </div>
                {/* SaÄŸdaki 3 nokta menÃ¼sÃ¼ - sadece kendi yorumlarÄ± iÃ§in */}
                {currentUserName === yorum.kullaniciAdi && (
                  <div className="comment-more-menu" ref={(el) => { menuRefs.current[yorum.id] = el; }}>
                    <button 
                      className="comment-more-btn"
                      onClick={() => setOpenMenuId(openMenuId === yorum.id ? null : yorum.id)}
                    >
                      â€¢â€¢â€¢
                    </button>
                    {openMenuId === yorum.id && (
                      <div className="comment-dropdown-menu">
                        <button 
                          className="comment-menu-delete"
                          onClick={() => handleYorumSil(yorum.id)}
                          disabled={deletingId === yorum.id}
                        >
                          {deletingId === yorum.id ? 'Siliniyor...' : 'Sil'}
                        </button>
                      </div>
                    )}
                  </div>
                )}
              </div>
              
              {/* YanÄ±tlar */}
              {yorum.yanitlar && yorum.yanitlar.length > 0 && (
                <div className="comment-replies">
                  {yorum.yanitlar.map((yanit) => (
                    <div key={yanit.id} className="comment-item reply">
                      <img 
                        src={yanit.kullaniciAvatar || '/default-avatar.svg'}
                        alt={yanit.kullaniciAdi}
                        className="comment-avatar"
                        onError={(e) => { (e.target as HTMLImageElement).src = '/default-avatar.svg'; }}
                      />
                      <div className="comment-body">
                        <p className="comment-text">
                          <span className="comment-username">{yanit.kullaniciAdi}</span>
                          {renderYorumIcerik(yanit)}
                        </p>
                        <div className="comment-meta">
                          <span className="comment-time">
                            {formatDistanceToNow(new Date(yanit.olusturulmaZamani), { addSuffix: false, locale: tr })}
                          </span>
                          {yanit.begeniSayisi > 0 && (
                            <span className="comment-likes">{yanit.begeniSayisi} beÄŸeni</span>
                          )}
                          {isLoggedIn && (
                            <button 
                              className={`comment-like-btn ${yanit.begendim ? 'liked' : ''}`}
                              onClick={() => handleYorumBegen(yanit.id, true, yorum.id)}
                            >
                              {yanit.begendim ? 'â¤ï¸' : 'ğŸ¤'}
                            </button>
                          )}
                          {isLoggedIn && (
                            <button 
                              className="comment-reply-btn"
                              onClick={() => handleReply(yorum.id, yanit.kullaniciAdi)}
                            >
                              YanÄ±tla
                            </button>
                          )}
                        </div>
                      </div>
                      {/* SaÄŸdaki 3 nokta menÃ¼sÃ¼ - yanÄ±tlar iÃ§in */}
                      {currentUserName === yanit.kullaniciAdi && (
                        <div className="comment-more-menu" ref={(el) => { menuRefs.current[yanit.id] = el; }}>
                          <button 
                            className="comment-more-btn"
                            onClick={() => setOpenMenuId(openMenuId === yanit.id ? null : yanit.id)}
                          >
                            â€¢â€¢â€¢
                          </button>
                          {openMenuId === yanit.id && (
                            <div className="comment-dropdown-menu">
                              <button 
                                className="comment-menu-delete"
                                onClick={() => handleYorumSil(yanit.id, true, yorum.id)}
                                disabled={deletingId === yanit.id}
                              >
                                {deletingId === yanit.id ? 'Siliniyor...' : 'Sil'}
                              </button>
                            </div>
                          )}
                        </div>
                      )}
                    </div>
                  ))}
                </div>
              )}
            </div>
          ))
        )}
      </div>

      {/* Yorum Input - Instagram tarzÄ± en altta */}
      {isLoggedIn ? (
        <div className="comment-input-bar">
          {replyingTo && (
            <div className="replying-indicator">
              @{replyingTo.kullaniciAdi}
              <button onClick={cancelReply}>Ã—</button>
            </div>
          )}
          <div className="comment-input-row">
            <input
              ref={inputRef}
              type="text"
              value={yeniYorum}
              onChange={(e) => setYeniYorum(e.target.value)}
              placeholder={replyingTo ? `@${replyingTo.kullaniciAdi} yanÄ±tla...` : "Yorum ekle..."}
              maxLength={500}
              onKeyDown={(e) => {
                if (e.key === 'Enter' && !e.shiftKey && yeniYorum.trim()) {
                  e.preventDefault();
                  handleYorumGonder();
                }
              }}
            />
            <button 
              onClick={handleYorumGonder}
              disabled={!yeniYorum.trim() || gonderiliyor}
              className="comment-post-btn"
            >
              {gonderiliyor ? '...' : 'PaylaÅŸ'}
            </button>
          </div>
        </div>
      ) : (
        <div className="comment-login-prompt">
          <a href="/giris">GiriÅŸ yap</a> ve yorum yap
        </div>
      )}
    </div>
  );
}

// ============================================
// ACTIVITY CARD COMPONENT - feed.html style
// ============================================
export interface FeedActivityCardProps {
  aktivite: Aktivite;
  isLoggedIn: boolean;
  index: number;
  currentUserName?: string;
  onDelete?: (aktiviteId: number) => void;
  compact?: boolean; // Detay sayfasÄ±nda kompakt gÃ¶rÃ¼nÃ¼m iÃ§in
}

export function FeedActivityCard({ aktivite, isLoggedIn, index, currentUserName, onDelete, compact = false }: FeedActivityCardProps) {
  const navigate = useNavigate();
  const { kullaniciAdi, kullaniciAvatar, olusturulmaZamani, veri } = aktivite;
  const aktiviteTuru = aktivite.aktiviteTuru || aktivite.aktiviteTipiStr || '';
  
  const [liked, setLiked] = useState(aktivite.begendim || false);
  const [likeCount, setLikeCount] = useState(aktivite.begeniSayisi || 0);
  const [isLiking, setIsLiking] = useState(false);
  const [showComments, setShowComments] = useState(false);
  const [commentCount, setCommentCount] = useState(aktivite.yorumSayisi || 0);
  const [showMenu, setShowMenu] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const [spoilerRevealed, setSpoilerRevealed] = useState(false);
  const menuRef = useRef<HTMLDivElement>(null);
  
  // Kendi aktivitemiz mi?
  const isOwnActivity = currentUserName && kullaniciAdi === currentUserName;
  const isSpoiler = veri?.spoilerIceriyor === true;

  const tarihStr = formatDistanceToNow(new Date(olusturulmaZamani), { addSuffix: true, locale: tr });
  
  // Aktivite tÃ¼rÃ¼ne gÃ¶re aksiyon metni (durum_guncelleme iÃ§in durum bilgisi de gÃ¶nder)
  const actionText = getActionText(aktiviteTuru, veri?.tur, veri?.durum);

  // Click outside to close menu
  useEffect(() => {
    const handleClickOutside = (e: MouseEvent) => {
      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {
        setShowMenu(false);
      }
    };
    if (showMenu) {
      document.addEventListener('mousedown', handleClickOutside);
    }
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, [showMenu]);

  const handleLike = async () => {
    if (!isLoggedIn || isLiking) return;
    setIsLiking(true);
    try {
      const result = await aktiviteApi.toggleBegeni(aktivite.id);
      setLiked(result.begendim);
      setLikeCount(result.begeniSayisi);
    } catch (error) {
      console.error('BeÄŸeni hatasÄ±:', error);
    } finally {
      setIsLiking(false);
    }
  };

  const handleDelete = async () => {
    if (!isOwnActivity || isDeleting) return;
    
    setIsDeleting(true);
    try {
      await aktiviteApi.aktiviteSil(aktivite.id);
      setShowMenu(false);
      if (onDelete) onDelete(aktivite.id);
    } catch (error) {
      console.error('Silme hatasÄ±:', error);
      alert('Aktivite silinirken bir hata oluÅŸtu.');
    } finally {
      setIsDeleting(false);
    }
  };

  const handleContentClick = () => {
    if (aktivite.icerikId && aktiviteTuru.toLowerCase() !== 'takip' && aktiviteTuru.toLowerCase() !== 'takipetme') {
      const rawTur = veri?.tur || aktivite.icerikTur || 'film';
      const tur = rawTur.toLowerCase();
      navigate(`/icerik/${tur}/${aktivite.icerikId}`);
    }
  };

  // Yoruma git - yorum detayÄ±na yÃ¶nlendir ve o yoruma scroll et
  const handleGoToComment = () => {
    if (veri?.yorumId && aktivite.icerikId) {
      const rawTur = veri?.tur || aktivite.icerikTur || 'film';
      const tur = rawTur.toLowerCase();
      navigate(`/icerik/${tur}/${aktivite.icerikId}?tab=yorumlar&yorumId=${veri.yorumId}#yorum-${veri.yorumId}`);
    } else if (aktivite.icerikId) {
      const rawTur = veri?.tur || aktivite.icerikTur || 'film';
      const tur = rawTur.toLowerCase();
      navigate(`/icerik/${tur}/${aktivite.icerikId}?tab=yorumlar`);
    }
  };

  const handleProfileClick = () => navigate(`/profil/${kullaniciAdi}`);

  const handleCommentsClick = () => {
    setShowComments(!showComments);
  };

  // Puan hesaplama - 10 Ã¼zerinden puan geliyor, 5 yÄ±ldÄ±za Ã§eviriyoruz
  const displayRating = veri?.puan ? veri.puan / 2 : 0;
  
  // Yorum Ã¶zeti - maksimum 200 karakter
  const getCommentExcerpt = (comment?: string) => {
    if (!comment) return null;
    if (comment.length <= 200) return comment;
    return comment.substring(0, 200).trim() + '...';
  };
  
  const commentExcerpt = getCommentExcerpt(veri?.yorumOzet);
  // Backend'den tam uzunluk geliyorsa onu kullan, yoksa Ã¶zetten tahmin et
  const hasFullComment = veri?.yorumTamUzunluk ? veri.yorumTamUzunluk > 200 : (veri?.yorumOzet || '').length > 200;

  // Ä°Ã§erik tÃ¼rÃ¼nÃ¼ belirleme
  const getContentTypeIcon = () => {
    const rawTur = veri?.tur || aktivite.icerikTur || 'film';
    const tur = rawTur.toLowerCase();
    if (tur === 'dizi') return { icon: 'tv', label: 'Dizi' };
    if (tur === 'kitap') return { icon: 'book', label: 'Kitap' };
    return { icon: 'movie', label: 'Film' };
  };
  
  const contentType = getContentTypeIcon();
  
  return (
    <article 
      className={`activity-card ${showComments ? 'comments-open' : ''}`}
      style={{ animationDelay: `${index * 0.1}s` }}
    >
      {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          HEADER: DeepSeek style - Avatar, Meta (user+action+time), Type badge
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
      <div className="activity-header">
        {/* Avatar with gradient background or image */}
        {kullaniciAvatar ? (
          <img
            src={kullaniciAvatar}
            alt={kullaniciAdi}
            onClick={handleProfileClick}
            className="activity-avatar"
            onError={(e) => { (e.target as HTMLImageElement).src = '/default-avatar.svg'; }}
          />
        ) : (
          <div className="activity-avatar-placeholder" onClick={handleProfileClick}>
            {kullaniciAdi.substring(0, 2).toUpperCase()}
          </div>
        )}
        
        {/* Meta: User info + time */}
        <div className="activity-meta">
          <div className="activity-user">
            <button onClick={handleProfileClick} className="activity-username">
              {kullaniciAdi}
            </button>
            <span className="activity-action">{actionText}</span>
          </div>
          <div className="activity-time">{tarihStr}</div>
        </div>
        
        {/* Activity Type Badge */}
        <div className="activity-type">
          <span className="type-icon material-symbols-rounded">{contentType.icon}</span>
          {contentType.label}
        </div>
        
        {/* More Menu - Sadece kendi aktivitelerimiz iÃ§in gÃ¶ster */}
        {isOwnActivity && (
          <div className="more-menu-container header-menu" ref={menuRef}>
            <button 
              className="more-btn"
              onClick={() => setShowMenu(!showMenu)}
            >
              <span className="material-symbols-rounded">more_horiz</span>
            </button>
            
            {showMenu && (
              <div className="activity-menu">
                <button 
                  className="menu-item delete"
                  onClick={handleDelete}
                  disabled={isDeleting}
                >
                  <span className="material-symbols-rounded">delete</span>
                  {isDeleting ? 'Siliniyor...' : 'Sil'}
                </button>
              </div>
            )}
          </div>
        )}
      </div>

      {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          CONTENT PREVIEW: Poster + Info block
          Aktivite tipine gÃ¶re poster boyutu deÄŸiÅŸir
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
      {!compact && (
      <div className={`content-preview ${aktiviteTuru.toLowerCase() === 'puanlama' ? 'rating-card' : aktiviteTuru.toLowerCase() === 'yorum' ? 'comment-card' : ''}`} onClick={handleContentClick}>
        {/* Content Poster */}
        <div className="content-poster">
          {veri?.posterUrl ? (
            <img src={veri.posterUrl} alt={veri.baslik} />
          ) : (
            <div className="poster-placeholder">
              <span className="material-symbols-rounded">movie</span>
            </div>
          )}
          
          {/* Poster Ã¼zerinde TMDB ve Platform puanlarÄ± */}
          <div className="poster-ratings-overlay">
            <div className="poster-rating-item tmdb">
              <span className="rating-source">TMDB</span>
              <span className="rating-score">{veri?.hariciPuan && veri.hariciPuan > 0 ? veri.hariciPuan.toFixed(1) : 'â€”'}</span>
            </div>
            <div className="poster-rating-item saga">
              <span className="rating-source">SAGA</span>
              <span className="rating-score">{veri?.ortalamaPuan && veri.ortalamaPuan > 0 ? veri.ortalamaPuan.toFixed(1) : 'â€”'}</span>
            </div>
          </div>
        </div>
        
        {/* Content Info */}
        <div className="content-info">
          <h3 className="content-title">{veri?.baslik || 'Ä°Ã§erik'}</h3>
          <p className="content-meta">
            {/* Kitap iÃ§in yazar Ã¶nce: "George Orwell â€¢ Kitap â€¢ 328 sayfa" */}
            {(veri?.tur || '').toLowerCase() === 'kitap' ? (
              <>
                {veri?.yazar && `${veri.yazar} â€¢ `}
                Kitap
                {veri?.sayfaSayisi && ` â€¢ ${veri.sayfaSayisi} sayfa`}
              </>
            ) : (
              <>
                {veri?.yil && `${veri.yil} â€¢ `}
                {(veri?.tur || '').toLowerCase() === 'dizi' ? 'Dizi' : 'Film'}
                {veri?.sure && ` â€¢ ${veri.sure}`}
                {veri?.sezonSayisi && ` â€¢ ${veri.sezonSayisi} Sezon`}
                {veri?.bolumSayisi && ` â€¢ ${veri.bolumSayisi} BÃ¶lÃ¼m`}
              </>
            )}
          </p>
          
          {/* KullanÄ±cÄ±nÄ±n puanÄ± - Puan varsa gÃ¶ster (aktivite tÃ¼rÃ¼ puanlama veya veri.puan varsa) */}
          {veri?.puan && veri.puan > 0 && (
            <div className="user-rating-display">
              <div className="rating-stars">
                {[1, 2, 3, 4, 5].map((star) => (
                  <span 
                    key={star} 
                    className={`material-symbols-rounded ${star <= Math.round(displayRating) ? 'filled' : ''}`}
                  >
                    star
                  </span>
                ))}
              </div>
              <span className="rating-value">{veri.puan}/10</span>
            </div>
          )}
          
          {/* Durum gÃ¼ncelleme iÃ§in status badge (Ä°zleniyor, Ä°zlendi, Okunuyor, Okundu vs.) */}
          {aktiviteTuru.toLowerCase() === 'durum_guncelleme' && veri?.durum && (
            <div className={`activity-status-badge ${getStatusClass(veri.durum, veri.tur)}`}>
              <span className="material-symbols-rounded">{getStatusIcon(veri.durum, veri.tur)}</span>
              <span>{getStatusLabel(veri.durum, veri.tur)}</span>
            </div>
          )}
          
          {/* List Info (for listeye_ekleme type) */}
          {(aktiviteTuru.toLowerCase() === 'listeye_ekleme' || aktiviteTuru.toLowerCase() === 'kutuphaneyeekleme') && veri?.listeAdi && (
            <div className="activity-list-badge">
              <span className="material-symbols-rounded">playlist_add</span>
              <span>{veri.listeAdi}</span>
            </div>
          )}
          
          {/* KullanÄ±cÄ± Yorumu - Poster saÄŸÄ±nda */}
          {(aktiviteTuru.toLowerCase() === 'yorum' && commentExcerpt) && (
            <>
              {/* Spoiler varsa blur ile gÃ¶ster */}
              {isSpoiler && !spoilerRevealed ? (
                <div 
                  className="content-user-comment spoiler-hidden"
                  onClick={(e) => { e.stopPropagation(); setSpoilerRevealed(true); }}
                >
                  <p>"{commentExcerpt}"</p>
                  <div className="spoiler-overlay">
                    <span className="material-symbols-rounded">visibility_off</span>
                    Spoiler - gÃ¶rmek iÃ§in tÄ±kla
                  </div>
                </div>
              ) : (
                <div className="content-user-comment">
                  <p>"{commentExcerpt}"</p>
                  <div className="comment-actions">
                    {/* Spoiler aÃ§Ä±ldÄ±ysa gizle butonu gÃ¶ster */}
                    {isSpoiler && spoilerRevealed && (
                      <button 
                        className="spoiler-hide-btn"
                        onClick={(e) => { e.stopPropagation(); setSpoilerRevealed(false); }}
                      >
                        <span className="material-symbols-rounded" style={{ fontSize: '14px' }}>visibility_off</span>
                        Gizle
                      </button>
                    )}
                    {/* Uzun yorum iÃ§in daha fazla gÃ¶r */}
                    {hasFullComment && (
                      <button className="read-more-link" onClick={(e) => { e.stopPropagation(); handleGoToComment(); }}>
                        daha fazlasÄ±nÄ± gÃ¶r
                      </button>
                    )}
                  </div>
                </div>
              )}
            </>
          )}
          
          {/* DiÄŸer tÃ¼rler iÃ§in yorum varsa gÃ¶ster */}
          {aktiviteTuru.toLowerCase() !== 'yorum' && veri?.yorumOzet && (
            <div className="content-user-comment">
              <p>"{getCommentExcerpt(veri.yorumOzet)}"</p>
            </div>
          )}
        </div>
      </div>
      )}

      {/* Compact modda sadece yorum/puan bilgisi */}
      {compact && (
        <div className="compact-activity-info">
          {veri?.puan && veri.puan > 0 && (
            <div className="user-rating-display">
              <div className="rating-stars">
                {[1, 2, 3, 4, 5].map((star) => (
                  <span 
                    key={star} 
                    className={`material-symbols-rounded ${star <= Math.round(displayRating) ? 'filled' : ''}`}
                  >
                    star
                  </span>
                ))}
              </div>
              <span className="rating-value">{veri.puan.toFixed(1)}</span>
            </div>
          )}
          {veri?.yorumOzet && (
            <div className="content-user-comment">
              <p>"{commentExcerpt}"</p>
              {hasFullComment && (
                <button className="read-more-link" onClick={(e) => { e.stopPropagation(); handleGoToComment(); }}>
                  daha fazlasÄ±nÄ± gÃ¶r
                </button>
              )}
            </div>
          )}
        </div>
      )}

      {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ACTIONS: Sadece BeÄŸen ve Yorum butonlarÄ±
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
      <div className="activity-actions">
        <button 
          onClick={handleLike}
          disabled={isLiking || !isLoggedIn}
          className={`action-button ${liked ? 'liked' : ''}`}
          title={liked ? 'BeÄŸenmekten vazgeÃ§' : 'BeÄŸen'}
        >
          <span className="material-symbols-rounded">{liked ? 'favorite' : 'favorite_border'}</span>
          <span>{likeCount > 0 ? likeCount : 'BeÄŸen'}</span>
        </button>
        
        <button 
          className={`action-button ${showComments ? 'active' : ''}`}
          onClick={handleCommentsClick}
          title="Yorum yap"
        >
          <span className="material-symbols-rounded">chat_bubble_outline</span>
          <span>{commentCount > 0 ? commentCount : 'Yorum'}</span>
        </button>
      </div>

      {/* Inline Comments Section - Expands below card */}
      <InlineComments
        aktiviteId={aktivite.id}
        isOpen={showComments}
        isLoggedIn={isLoggedIn}
        currentUserName={currentUserName}
        onCommentAdded={() => setCommentCount(c => c + 1)}
        onCommentDeleted={() => setCommentCount(c => Math.max(0, c - 1))}
      />
    </article>
  );
}

// ============================================
// SKELETON LOADER
// ============================================
function ActivitySkeleton() {
  return (
    <div className="activity-card skeleton">
      <div className="activity-header">
        <div className="skeleton-avatar"></div>
        <div className="skeleton-user-info">
          <div className="skeleton-line short"></div>
          <div className="skeleton-badge"></div>
        </div>
        <div className="skeleton-time"></div>
      </div>
      <div className="activity-content">
        <div className="skeleton-poster"></div>
        <div className="skeleton-content-info">
          <div className="skeleton-line long"></div>
          <div className="skeleton-line medium"></div>
          <div className="skeleton-line short"></div>
        </div>
      </div>
      <div className="activity-footer">
        <div className="skeleton-actions">
          <div className="skeleton-button"></div>
          <div className="skeleton-button"></div>
        </div>
        <div className="skeleton-menu"></div>
      </div>
    </div>
  );
}

// ============================================
// EMPTY STATE
// ============================================
interface EmptyStateProps {
  isLoggedIn: boolean;
  activeTab?: string;
}

function EmptyState({ isLoggedIn, activeTab }: EmptyStateProps) {
  const navigate = useNavigate();

  // ArkadaÅŸlar filtresinde Ã¶zel mesaj
  if (activeTab === 'takip') {
    return (
      <div className="empty-state">
        <div className="empty-state-icon">
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
          </svg>
        </div>
        <h3>ArkadaÅŸlarÄ±ndan aktivite yok</h3>
        <p>Takip ettiÄŸin kullanÄ±cÄ±larÄ±n aktiviteleri burada gÃ¶rÃ¼nÃ¼r. Yeni kullanÄ±cÄ±lar keÅŸfet!</p>
        <button 
          onClick={() => navigate('/kesfet')}
          className="load-more-btn"
          style={{ marginTop: '20px' }}
        >
          KullanÄ±cÄ± KeÅŸfet
        </button>
      </div>
    );
  }

  return (
    <div className="empty-state">
      <div className="empty-state-icon">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
        </svg>
      </div>
      <h3>HenÃ¼z aktivite yok</h3>
      <p>
        {isLoggedIn
          ? 'KullanÄ±cÄ±larÄ± takip ederek aktivitelerini burada gÃ¶rÃ¼n.'
          : 'KeÅŸfet sayfasÄ±ndan iÃ§erikleri inceleyebilirsiniz.'}
      </p>
      <button 
        onClick={() => navigate('/kesfet')}
        className="load-more-btn"
        style={{ marginTop: '20px' }}
      >
        KeÅŸfet
      </button>
    </div>
  );
}

// ============================================
// FEED TABS COMPONENT
// ============================================
interface FeedTabsProps {
  activeTab: string;
  onTabChange: (tab: string) => void;
  isLoggedIn: boolean;
}

function FeedTabs({ activeTab, onTabChange, isLoggedIn }: FeedTabsProps) {
  const tabs = isLoggedIn 
    ? [
        { id: 'hepsi', label: 'TÃ¼mÃ¼' },
        { id: 'takip', label: 'ArkadaÅŸlar' },
        { id: 'puanlama', label: 'PuanladÄ±lar' },
        { id: 'yorum', label: 'Yorumlar' },
        { id: 'liste', label: 'Listeler' },
      ]
    : [
        { id: 'hepsi', label: 'TÃ¼mÃ¼' },
        { id: 'puanlama', label: 'PuanladÄ±lar' },
        { id: 'yorum', label: 'Yorumlar' },
        { id: 'liste', label: 'Listeler' },
      ];

  return (
    <div className="feed-tabs-wrapper">
      <div className="feed-tabs">
        {tabs.map((tab) => (
          <button
            key={tab.id}
            onClick={() => onTabChange(tab.id)}
            className={`feed-tab ${activeTab === tab.id ? 'active' : ''}`}
          >
            {tab.label}
          </button>
        ))}
      </div>
    </div>
  );
}

// ============================================
// MAIN FEED PAGE COMPONENT
// ============================================
export default function FeedPage() {
  const { user } = useAuth();
  const [aktiviteler, setAktiviteler] = useState<Aktivite[]>([]);
  const [loading, setLoading] = useState(true);
  const [loadingMore, setLoadingMore] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [sayfa, setSayfa] = useState(1);
  const [toplamSayfa, setToplamSayfa] = useState(999); // BaÅŸlangÄ±Ã§ta yÃ¼ksek deÄŸer - yÃ¼klenene kadar "all loaded" gÃ¶sterme
  const [activeTab, setActiveTab] = useState('hepsi');
  const [allLoaded, setAllLoaded] = useState(false);
  const [initialLoadComplete, setInitialLoadComplete] = useState(false); // Ä°lk yÃ¼kleme tamamlandÄ± mÄ±
  const loadMoreRef = useRef<HTMLDivElement>(null);
  
  // Pull to refresh states
  const [isPulling, setIsPulling] = useState(false);
  const [pullDistance, setPullDistance] = useState(0);
  const [isRefreshing, setIsRefreshing] = useState(false);
  const pullStartY = useRef(0);
  const feedContainerRef = useRef<HTMLDivElement>(null);
  
  // Scroll-to-top refresh states
  const [showScrollTopRefresh, setShowScrollTopRefresh] = useState(false);
  const lastScrollY = useRef(0);
  const isAtTop = useRef(true);
  const scrollTopCount = useRef(0);
  const scrollTopTimer = useRef<ReturnType<typeof setTimeout> | null>(null);
  
  // Double load prevention
  const isDataLoadedRef = useRef(false);
  const currentTabRef = useRef(activeTab);

  // Aktiviteleri yÃ¼kle
  // Ref'ler ile gÃ¼ncel deÄŸerleri sakla (closure sorununu Ã¶nlemek iÃ§in)
  const userRef = useRef(user);
  const activeTabRef = useRef(activeTab);
  
  useEffect(() => {
    userRef.current = user;
  }, [user]);
  
  useEffect(() => {
    activeTabRef.current = activeTab;
  }, [activeTab]);

  // Scroll event handler for scroll-to-top refresh
  useEffect(() => {
    const handleScroll = () => {
      const scrollY = window.scrollY;
      const wasAtTop = isAtTop.current;
      isAtTop.current = scrollY < 10;
      
      // KullanÄ±cÄ± en Ã¼stteyken tekrar yukarÄ± scroll yapmaya Ã§alÄ±ÅŸÄ±rsa
      if (isAtTop.current && wasAtTop && scrollY === 0) {
        scrollTopCount.current += 1;
        
        // Timer'Ä± sÄ±fÄ±rla
        if (scrollTopTimer.current) {
          clearTimeout(scrollTopTimer.current);
        }
        
        // 500ms iÃ§inde 2 kez yukarÄ± scroll yapÄ±lÄ±rsa yenile
        if (scrollTopCount.current >= 2) {
          scrollTopCount.current = 0;
          if (!isRefreshing && !loading) {
            setShowScrollTopRefresh(true);
            handleRefresh().then(() => {
              setShowScrollTopRefresh(false);
            });
          }
        }
        
        scrollTopTimer.current = setTimeout(() => {
          scrollTopCount.current = 0;
        }, 500);
      }
      
      lastScrollY.current = scrollY;
    };
    
    window.addEventListener('scroll', handleScroll, { passive: true });
    return () => {
      window.removeEventListener('scroll', handleScroll);
      if (scrollTopTimer.current) {
        clearTimeout(scrollTopTimer.current);
      }
    };
  }, [isRefreshing, loading]);

  const fetchAktiviteler = useCallback(
    async (page: number, append: boolean = false, forceRefresh: boolean = false) => {
      try {
        const currentUser = userRef.current;
        const currentTab = activeTabRef.current;
        
        // Cache check for first page only (not append, not force refresh)
        if (page === 1 && !append && !forceRefresh) {
          const cached = getFeedCache(currentTab, currentUser?.id);
          if (cached) {
            setAktiviteler(cached.data);
            setToplamSayfa(cached.toplamSayfa);
            setLoading(false);
            setInitialLoadComplete(true);
            setAllLoaded(cached.data.length < 15 || cached.toplamSayfa <= 1);
            
            // Arka planda gÃ¼ncelle
            fetchAktiviteler(1, false, true).catch(console.error);
            return;
          }
        }
        
        if (page === 1 && !append) {
          setLoading(true);
          setAllLoaded(false);
        } else if (append) {
          setLoadingMore(true);
        }
        setError(null);
        
        let result;

        if (currentUser && currentTab === 'takip') {
          // ArkadaÅŸlar filtresi - sadece takip edilen kullanÄ±cÄ±larÄ±n aktiviteleri
          result = await aktiviteApi.getFeed({ sayfa: page, limit: 15 });
        } else {
          result = await aktiviteApi.getGenelFeed({ sayfa: page, limit: 15 });
        }

        // Filter by type if needed (for genel feed)
        let filteredData = result.data;
        if (currentTab !== 'takip' && currentTab !== 'hepsi') {
          if (currentTab === 'puanlama') {
            filteredData = result.data.filter((a: Aktivite) => 
              (a.aktiviteTuru || a.aktiviteTipiStr || '').toLowerCase() === 'puanlama'
            );
          } else if (currentTab === 'yorum') {
            filteredData = result.data.filter((a: Aktivite) => 
              (a.aktiviteTuru || a.aktiviteTipiStr || '').toLowerCase() === 'yorum'
            );
          } else if (currentTab === 'liste') {
            filteredData = result.data.filter((a: Aktivite) => {
              const type = (a.aktiviteTuru || a.aktiviteTipiStr || '').toLowerCase();
              return type === 'listeye_ekleme' || type === 'kutuphaneyeekleme' || type === 'listeolusturma';
            });
          }
        }

        // Check if all data loaded - sadece gerÃ§ekten son sayfa ise
        const isLastPage = page >= result.toplamSayfa;
        const noMoreData = result.data.length < 15;
        if (isLastPage || noMoreData) {
          setAllLoaded(true);
        }

        if (append) {
          setAktiviteler((prev) => [...prev, ...filteredData]);
        } else {
          setAktiviteler(filteredData);
          // Cache'e kaydet (sadece ilk sayfa)
          if (page === 1) {
            setFeedCache(currentTab, filteredData, result.toplamSayfa, currentUser?.id);
          }
        }
        setToplamSayfa(result.toplamSayfa);
        setInitialLoadComplete(true); // Ä°lk yÃ¼kleme tamamlandÄ±
      } catch (err: unknown) {
        const error = err as { response?: { data?: { message?: string } } };
        console.error('Feed yÃ¼kleme hatasÄ±:', err);
        setError(error.response?.data?.message || 'Aktiviteler yÃ¼klenirken bir hata oluÅŸtu.');
      } finally {
        setLoading(false);
        setLoadingMore(false);
      }
    },
    [] // Stabil fonksiyon - ref'ler Ã¼zerinden gÃ¼ncel deÄŸerlere eriÅŸir
  );

  // Ä°lk yÃ¼kleme ve activeTab deÄŸiÅŸikliklerinde fetch
  useEffect(() => {
    // Tab deÄŸiÅŸti mi kontrol et
    if (activeTab !== currentTabRef.current) {
      currentTabRef.current = activeTab;
      isDataLoadedRef.current = false;
      // Tab deÄŸiÅŸince state'leri sÄ±fÄ±rla
      setAllLoaded(false);
      setInitialLoadComplete(false);
      setToplamSayfa(999);
    }
    
    // Ã‡ift yÃ¼kleme Ã¶nle
    if (isDataLoadedRef.current) return;
    isDataLoadedRef.current = true;
    
    setSayfa(1);
    fetchAktiviteler(1);
  }, [activeTab, fetchAktiviteler]);

  // Infinite scroll with IntersectionObserver
  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        const first = entries[0];
        if (first.isIntersecting && !loadingMore && !allLoaded && sayfa < toplamSayfa) {
          const nextPage = sayfa + 1;
          setSayfa(nextPage);
          fetchAktiviteler(nextPage, true);
        }
      },
      { 
        threshold: 0, // Hemen tetikle
        rootMargin: '400px' // 400px Ã¶nce tetikle - daha erken yÃ¼kle
      }
    );

    const currentRef = loadMoreRef.current;
    if (currentRef) {
      observer.observe(currentRef);
    }

    return () => {
      if (currentRef) {
        observer.unobserve(currentRef);
      }
    };
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [sayfa, toplamSayfa, loadingMore, allLoaded, fetchAktiviteler]);

  const handleRefresh = async () => {
    // Cache'i temizle ve yeniden yÃ¼kle
    invalidateFeedCache(activeTab, user?.id);
    setSayfa(1);
    setAllLoaded(false);
    setInitialLoadComplete(false);
    setToplamSayfa(999); // Reset toplamSayfa
    await fetchAktiviteler(1, false, true);
  };
  
  // Aktivite silme handler'Ä± - cache'i de gÃ¼ncelle
  const handleDeleteActivity = useCallback((id: number) => {
    setAktiviteler(prev => prev.filter(a => a.id !== id));
    removeFromFeedCache(id);
  }, []);

  // Pull to refresh handlers
  const PULL_THRESHOLD = 80;
  
  const handleTouchStart = (e: React.TouchEvent) => {
    if (window.scrollY === 0 && !isRefreshing) {
      pullStartY.current = e.touches[0].clientY;
      setIsPulling(true);
    }
  };

  const handleTouchMove = (e: React.TouchEvent) => {
    if (!isPulling || isRefreshing) return;
    
    const currentY = e.touches[0].clientY;
    const diff = currentY - pullStartY.current;
    
    if (diff > 0 && window.scrollY === 0) {
      // Resistance effect - pull gets harder as you go
      const resistance = Math.min(diff * 0.4, 120);
      setPullDistance(resistance);
    }
  };

  const handleTouchEnd = async () => {
    if (!isPulling) return;
    
    if (pullDistance >= PULL_THRESHOLD && !isRefreshing) {
      setIsRefreshing(true);
      setPullDistance(60); // Keep indicator visible during refresh
      await handleRefresh();
      setIsRefreshing(false);
    }
    
    setPullDistance(0);
    setIsPulling(false);
  };

  const handleTabChange = (tab: string) => {
    setActiveTab(tab);
    setSayfa(1);
  };

  return (
    <div 
      className="feed-page"
      ref={feedContainerRef}
      onTouchStart={handleTouchStart}
      onTouchMove={handleTouchMove}
      onTouchEnd={handleTouchEnd}
    >
      {/* Main Content - Full width, responsive */}
      <main className="feed-content">
        {/* Filter Tabs - Pill style */}
        <FeedTabs 
          activeTab={activeTab}
          onTabChange={handleTabChange}
          isLoggedIn={!!user}
        />
        
        {/* Scroll-to-top Refresh Indicator */}
        {showScrollTopRefresh && (
          <div className="scroll-top-refresh-indicator">
            <div className="pull-spinner spinning">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
              </svg>
            </div>
            <span>Yenileniyor...</span>
          </div>
        )}
        
        {/* Pull to Refresh Indicator */}
        <div 
          className={`pull-to-refresh-indicator ${isRefreshing ? 'refreshing' : ''}`}
          style={{ 
            height: pullDistance,
            opacity: Math.min(pullDistance / PULL_THRESHOLD, 1)
          }}
        >
          <div className={`pull-spinner ${isRefreshing ? 'spinning' : ''}`}>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
              <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
            </svg>
          </div>
          <span>{isRefreshing ? 'Yenileniyor...' : (pullDistance >= PULL_THRESHOLD ? 'BÄ±rak ve yenile' : 'Yenilemek iÃ§in Ã§ek')}</span>
        </div>

        {/* Error State */}
        {error && (
          <div className="error-state">
            <p className="error-message">{error}</p>
            <button 
              onClick={handleRefresh}
              className="load-more-btn"
            >
              Tekrar Dene
            </button>
          </div>
        )}

        {/* Loading State */}
        {loading && (
          <div className="activity-feed">
            {[1, 2, 3].map((i) => (
              <ActivitySkeleton key={i} />
            ))}
          </div>
        )}

        {/* Content */}
        {!loading && !error && (
          <>
            {aktiviteler.length === 0 ? (
              <EmptyState isLoggedIn={!!user} activeTab={activeTab} />
            ) : (
              <div className="activity-feed">
                {aktiviteler
                  .filter((aktivite) => {
                    // Takip aktivitelerini ve iÃ§erik bilgisi olmayan aktiviteleri hariÃ§ tut
                    const tur = (aktivite.aktiviteTuru || aktivite.aktiviteTipiStr || '').toLowerCase();
                    if (tur === 'takip' || tur === 'takipetme') return false;
                    // Ä°Ã§erik bilgisi olmayan aktiviteleri de hariÃ§ tut
                    if (!aktivite.veri?.baslik && !aktivite.icerikId) return false;
                    return true;
                  })
                  .map((aktivite, index) => (
                  <FeedActivityCard
                    key={aktivite.id}
                    aktivite={aktivite}
                    isLoggedIn={!!user}
                    index={index}
                    currentUserName={user?.kullaniciAdi}
                    onDelete={handleDeleteActivity}
                  />
                ))}
              </div>
            )}

            {/* Infinite Scroll Trigger */}
            {aktiviteler.length > 0 && (
              <div className="load-more-container" ref={loadMoreRef}>
                {loadingMore ? (
                  <div className="infinite-scroll-loading">
                    <svg className="spin" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" width="24" height="24">
                      <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
                    </svg>
                    <span>YÃ¼kleniyor...</span>
                  </div>
                ) : initialLoadComplete && (allLoaded || sayfa >= toplamSayfa) ? (
                  <div className="all-loaded-message">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" width="20" height="20">
                      <path d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
                    </svg>
                    <span>TÃ¼m aktiviteler yÃ¼klendi</span>
                  </div>
                ) : null}
              </div>
            )}
          </>
        )}
      </main>
    </div>
  );
}


========== saga.client\src\pages\glass\ForgotPasswordPage.tsx ==========

import { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { Mail, ArrowLeft, Loader2, CheckCircle } from 'lucide-react';
import { supabase } from '../../services/supabase';
import './LoginPage.css';

// ============================================
// SAGA FORGOT PASSWORD PAGE - VOID THEME
// ============================================

export default function ForgotPasswordPage() {
  const [email, setEmail] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [success, setSuccess] = useState(false);
  const navigate = useNavigate();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setError('');

    try {
      const { error } = await supabase.auth.resetPasswordForEmail(email, {
        redirectTo: `${window.location.origin}/sifre-yenile`,
      });
      
      if (error) throw error;
      setSuccess(true);
    } catch (err: any) {
      setError(err.message || 'Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');
    } finally {
      setLoading(false);
    }
  };

  if (success) {
    return (
      <div className="auth-page">
        {/* Animated Background */}
        <div className="bg-canvas">
          <div className="bg-gradient"></div>
          <div className="orb orb-1"></div>
          <div className="orb orb-2"></div>
          {[...Array(10)].map((_, i) => (
            <div key={i} className="particle"></div>
          ))}
        </div>

        <div className="auth-container">
          <div className="brand">
            <h1 className="brand-logo">SAGA</h1>
            <p className="brand-tagline">Her Hikayenin Bir DestanÄ± Var</p>
          </div>

          <div className="auth-card">
            <div style={{ textAlign: 'center' }}>
              <div style={{ 
                width: '64px', 
                height: '64px', 
                margin: '0 auto 24px',
                borderRadius: '50%',
                background: 'rgba(34, 197, 94, 0.2)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center'
              }}>
                <CheckCircle size={32} color="#22c55e" />
              </div>

              <h2 style={{ 
                fontSize: '1.5rem', 
                fontWeight: 600, 
                color: '#fff', 
                marginBottom: '12px' 
              }}>
                E-posta GÃ¶nderildi
              </h2>
              
              <p style={{ 
                color: 'rgba(255,255,255,0.5)', 
                fontSize: '14px', 
                marginBottom: '24px',
                lineHeight: 1.6
              }}>
                EÄŸer bu e-posta adresi kayÄ±tlÄ±ysa, ÅŸifre sÄ±fÄ±rlama linki gÃ¶nderildi.
                LÃ¼tfen gelen kutunuzu kontrol edin.
              </p>

              <p style={{ 
                color: 'rgba(255,255,255,0.3)', 
                fontSize: '12px', 
                marginBottom: '24px' 
              }}>
                E-posta gelmediyse spam klasÃ¶rÃ¼nÃ¼ kontrol edin.
              </p>

              <button
                onClick={() => navigate('/giris')}
                className="submit-btn"
              >
                <span>GiriÅŸ SayfasÄ±na DÃ¶n</span>
              </button>
            </div>
          </div>

          <div className="auth-footer">
            <p>Â© 2024 Saga. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="auth-page">
      {/* Animated Background */}
      <div className="bg-canvas">
        <div className="bg-gradient"></div>
        <div className="orb orb-1"></div>
        <div className="orb orb-2"></div>
        {[...Array(10)].map((_, i) => (
          <div key={i} className="particle"></div>
        ))}
      </div>

      <div className="auth-container">
        <div className="brand">
          <h1 className="brand-logo">SAGA</h1>
          <p className="brand-tagline">Her Hikayenin Bir DestanÄ± Var</p>
        </div>

        <div className="auth-card">
          <div style={{ textAlign: 'center', marginBottom: '32px' }}>
            <h2 style={{ 
              fontSize: '1.5rem', 
              fontWeight: 600, 
              color: '#fff', 
              marginBottom: '8px' 
            }}>
              Åifremi Unuttum
            </h2>
            <p style={{ color: 'rgba(255,255,255,0.5)', fontSize: '14px' }}>
              E-posta adresinizi girin, size ÅŸifre sÄ±fÄ±rlama linki gÃ¶nderelim.
            </p>
          </div>

          {error && <div className="error-message">{error}</div>}

          <form onSubmit={handleSubmit}>
            <div className="input-group">
              <label className="input-label">E-posta Adresi</label>
              <div className="input-wrapper">
                <input 
                  type="email" 
                  className="input-field" 
                  placeholder="ornek@email.com" 
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  required
                />
                <Mail className="input-icon" size={20} />
              </div>
            </div>

            <button 
              type="submit" 
              className={`submit-btn ${loading ? 'loading' : ''}`} 
              disabled={loading || !email}
              style={{ marginBottom: '16px' }}
            >
              <span>
                {loading ? (
                  <>
                    <Loader2 size={18} className="loading-spinner" />
                    GÃ¶nderiliyor...
                  </>
                ) : (
                  'Åifre SÄ±fÄ±rlama Linki GÃ¶nder'
                )}
              </span>
            </button>

            <Link
              to="/giris"
              className="social-btn"
              style={{ 
                width: '100%', 
                textDecoration: 'none',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                gap: '8px'
              }}
            >
              <ArrowLeft size={16} />
              GiriÅŸ SayfasÄ±na DÃ¶n
            </Link>
          </form>
        </div>

        <div className="auth-footer">
          <p>Â© 2024 Saga. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
        </div>
      </div>
    </div>
  );
}


========== saga.client\src\pages\glass\index.ts ==========

export { default as LoginPage } from './LoginPage';
export { default as RegisterPage } from './RegisterPage';
export { default as FeedPage, FeedActivityCard } from './FeedPage';
export { default as ExplorePage } from './ExplorePage';
export { default as DetailPage } from './DetailPage';
export { default as ProfilePage } from './ProfilePage';


========== saga.client\src\pages\glass\LibraryPage.css ==========

/* ========================================
   LIBRARY PAGE - SAGA DESIGN SYSTEM
   HTML Prototype ile Birebir AynÄ±
======================================== */

/* CSS Variables */
.library-page {
  --void: #030304;
  --void-light: #0a0a0c;
  --void-surface: #111115;
  --void-elevated: #18181c;
  --void-border: #25252d;
  
  --gold: #d4a853;
  --gold-light: #e5c378;
  --gold-dim: #b8943f;
  --gold-glow: rgba(212, 168, 83, 0.15);
  
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.85);
  --text-muted: rgba(255, 255, 255, 0.5);
  
  --glass-bg: rgba(17, 17, 21, 0.85);
  --glass-border: rgba(255, 255, 255, 0.06);
  
  --status-watching: #3b82f6;
  --status-completed: #22c55e;
  --status-planned: #a855f7;
  --status-dropped: #ef4444;
  --status-paused: #f59e0b;
  
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
  --shadow-gold: 0 0 20px rgba(212, 168, 83, 0.2);

  max-width: 800px;
  margin: 0 auto;
  padding: 0 16px;
}

/* ========================================
   PROFILE SUMMARY
======================================== */
.library-profile-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 20px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  margin-bottom: 24px;
}

.library-profile-avatar {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--gold);
  flex-shrink: 0;
}

.library-profile-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.library-profile-info {
  flex: 1;
}

.library-profile-name {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.library-profile-username {
  font-size: 0.85rem;
  color: var(--text-muted);
}

.library-profile-stats {
  display: flex;
  gap: 20px;
  margin-top: 12px;
}

.library-stat-item {
  text-align: center;
}

.library-stat-value {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--gold);
}

.library-stat-label {
  font-size: 0.7rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.library-profile-action {
  padding: 10px 20px;
  font-size: 0.85rem;
  font-weight: 600;
  background: transparent;
  border: 1px solid var(--gold);
  border-radius: 10px;
  color: var(--gold);
  cursor: pointer;
  transition: all 0.3s ease;
}

.library-profile-action:hover {
  background: var(--gold);
  color: var(--void);
}

/* ========================================
   QUICK STATS BAR
======================================== */
.library-quick-stats {
  margin-bottom: 24px;
}

.library-stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.library-stat-card {
  padding: 16px 12px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.library-stat-card:hover {
  border-color: var(--gold-dim);
  transform: translateY(-2px);
}

.library-stat-card.active {
  border-color: var(--gold);
  background: var(--gold-glow);
}

.library-stat-card-icon {
  width: 32px;
  height: 32px;
  margin: 0 auto 8px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.library-stat-card-icon svg {
  width: 18px;
  height: 18px;
}

.library-stat-card-icon.watching {
  background: rgba(59, 130, 246, 0.15);
  color: var(--status-watching);
}

.library-stat-card-icon.completed {
  background: rgba(34, 197, 94, 0.15);
  color: var(--status-completed);
}

.library-stat-card-icon.planned {
  background: rgba(168, 85, 247, 0.15);
  color: var(--status-planned);
}

.library-stat-card-icon.favorites {
  background: var(--gold-glow);
  color: var(--gold);
}

.library-stat-card-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1;
  margin-bottom: 4px;
}

.library-stat-card-label {
  font-size: 0.7rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ========================================
   CONTENT TABS
======================================== */
.library-content-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: 4px;
}

.library-content-tabs::-webkit-scrollbar {
  display: none;
}

.library-content-tab {
  flex-shrink: 0;
  padding: 10px 20px;
  font-size: 0.9rem;
  font-weight: 500;
  background: transparent;
  border: 1px solid var(--void-border);
  border-radius: 10px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.library-content-tab svg {
  width: 16px;
  height: 16px;
}

.library-content-tab:hover {
  border-color: var(--gold-dim);
  background: var(--void-surface);
}

.library-content-tab.active {
  background: var(--gold);
  border-color: var(--gold);
  color: var(--void);
}

.library-content-tab .count {
  padding: 2px 8px;
  font-size: 0.75rem;
  font-weight: 600;
  background: var(--void-border);
  border-radius: 10px;
}

.library-content-tab.active .count {
  background: rgba(0, 0, 0, 0.2);
}

/* ========================================
   FILTER BAR
======================================== */
.library-filter-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
  gap: 12px;
}

.library-filter-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.library-filter-dropdown {
  padding: 10px 16px;
  font-size: 0.85rem;
  font-family: 'Inter', sans-serif;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 10px;
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s ease;
}

.library-filter-dropdown:hover {
  border-color: var(--gold-dim);
}

.library-filter-dropdown svg {
  width: 16px;
  height: 16px;
}

.library-view-toggle {
  display: flex;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 10px;
  overflow: hidden;
}

.library-view-btn {
  padding: 10px 14px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.3s ease;
}

.library-view-btn:hover {
  color: var(--text-secondary);
}

.library-view-btn.active {
  background: var(--gold);
  color: var(--void);
}

.library-view-btn svg {
  width: 18px;
  height: 18px;
}

/* ========================================
   CONTENT GRID
======================================== */
.library-content-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
}

.library-content-grid.list-view {
  grid-template-columns: 1fr;
  gap: 12px;
}

/* ContentCard list-view styles */
.library-content-grid.list-view .content-card {
  display: flex;
  flex-direction: row;
  width: 100%;
}

.library-content-grid.list-view .content-card__poster {
  width: 80px;
  height: 120px;
  flex-shrink: 0;
  aspect-ratio: auto;
}

.library-content-grid.list-view .content-card__info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 12px 16px;
}

.library-content-grid.list-view .content-card__title {
  font-size: 1rem;
  margin-bottom: 6px;
  -webkit-line-clamp: 2;
  line-clamp: 2;
}

.library-content-grid.list-view .content-card__meta {
  margin-bottom: 8px;
}

.library-content-grid.list-view .content-card__status {
  position: static;
  width: fit-content;
  margin-top: 8px;
}

.library-content-grid.list-view .content-card__badge {
  display: none;
}

/* ========================================
   CONTENT CARD - GRID VIEW
======================================== */
.library-content-card {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  cursor: pointer;
  transition: all 0.3s ease;
}

.library-content-card:hover {
  border-color: var(--gold-dim);
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.library-content-poster {
  aspect-ratio: 2/3;
  overflow: hidden;
  position: relative;
}

.library-content-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.library-content-card:hover .library-content-poster img {
  transform: scale(1.05);
}

.library-content-status {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 4px 8px;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  gap: 4px;
  z-index: 2;
}

.library-content-status svg {
  width: 10px;
  height: 10px;
}

.library-content-status.watching {
  background: var(--status-watching);
  color: white;
}

.library-content-status.completed {
  background: var(--status-completed);
  color: white;
}

.library-content-status.planned {
  background: var(--status-planned);
  color: white;
}

.library-content-status.dropped {
  background: var(--status-dropped);
  color: white;
}

.library-content-type {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 26px;
  height: 26px;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  z-index: 2;
}

.library-content-type svg {
  width: 14px;
  height: 14px;
}

.library-content-favorite {
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--gold);
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.3s ease;
  z-index: 2;
  border: none;
  cursor: pointer;
}

.library-content-card:hover .library-content-favorite,
.library-content-favorite.active {
  opacity: 1;
  transform: scale(1);
}

.library-content-favorite.active {
  color: #ef4444;
}

.library-content-favorite.active svg {
  fill: #ef4444;
}

.library-content-favorite svg {
  width: 16px;
  height: 16px;
}

.library-content-info {
  padding: 12px;
}

.library-content-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.library-content-meta {
  font-size: 0.75rem;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 8px;
}

.library-content-meta .rating {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--gold);
}

.library-content-meta .rating svg {
  width: 12px;
  height: 12px;
  fill: var(--gold);
}

.library-content-progress {
  margin-top: 8px;
}

.library-progress-bar {
  height: 3px;
  background: var(--void-border);
  border-radius: 2px;
  overflow: hidden;
}

.library-progress-fill {
  height: 100%;
  background: var(--gold);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.library-progress-text {
  font-size: 0.7rem;
  color: var(--text-muted);
  margin-top: 4px;
}

/* ========================================
   CONTENT CARD - LIST VIEW
======================================== */
.library-content-grid.list-view .library-content-card {
  display: flex;
  flex-direction: row;
}

.library-content-grid.list-view .library-content-poster {
  width: 80px;
  aspect-ratio: auto;
  height: 120px;
  flex-shrink: 0;
}

.library-content-grid.list-view .library-content-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 12px 16px;
}

.library-content-grid.list-view .library-content-title {
  font-size: 1rem;
  margin-bottom: 6px;
}

.library-content-grid.list-view .library-content-meta {
  margin-bottom: 8px;
}

.library-content-grid.list-view .library-content-status {
  position: static;
  width: fit-content;
  margin-top: 8px;
}

.library-content-grid.list-view .library-content-type {
  display: none;
}

.library-list-actions {
  display: none;
  align-items: center;
  gap: 8px;
  padding-right: 16px;
}

.library-content-grid.list-view .library-list-actions {
  display: flex;
}

.library-list-action-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.library-list-action-btn:hover {
  border-color: var(--gold-dim);
  color: var(--gold);
}

.library-list-action-btn svg {
  width: 16px;
  height: 16px;
}

/* ========================================
   MY LISTS SECTION
======================================== */
.library-section-divider {
  height: 1px;
  background: var(--void-border);
  margin: 32px 0;
}

.library-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.library-section-title {
  font-family: 'Cinzel', serif;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text-primary);
}

.library-section-action {
  padding: 8px 16px;
  font-size: 0.8rem;
  font-weight: 600;
  background: transparent;
  border: 1px solid var(--gold);
  border-radius: 8px;
  color: var(--gold);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: all 0.3s ease;
}

.library-section-action:hover {
  background: var(--gold);
  color: var(--void);
}

.library-section-action svg {
  width: 14px;
  height: 14px;
}

.library-lists-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

.library-my-list-card {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s ease;
}

.library-my-list-card:hover {
  border-color: var(--gold-dim);
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.library-list-preview {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2px;
  aspect-ratio: 3/1.2;
}

.library-list-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.library-list-preview .empty-slot {
  background: var(--void-elevated);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--void-border);
}

.library-list-preview .empty-slot svg {
  width: 24px;
  height: 24px;
}

.library-list-details {
  padding: 16px;
}

.library-list-name {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.library-list-name .private-icon {
  width: 14px;
  height: 14px;
  color: var(--text-muted);
}

.library-list-stats {
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 0.8rem;
  color: var(--text-muted);
}

.library-list-stats span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.library-list-stats svg {
  width: 14px;
  height: 14px;
}

.library-list-updated {
  font-size: 0.75rem;
  color: var(--text-muted);
  margin-top: 8px;
}

/* Create New List Card */
.library-create-list-card {
  background: var(--void-surface);
  border: 2px dashed var(--void-border);
  border-radius: 16px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  cursor: pointer;
  transition: all 0.3s ease;
  min-height: 200px;
}

.library-create-list-card:hover {
  border-color: var(--gold);
  background: var(--gold-glow);
}

.library-create-list-icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 12px;
  transition: all 0.3s ease;
}

.library-create-list-card:hover .library-create-list-icon {
  background: var(--gold);
  border-color: var(--gold);
  color: var(--void);
}

.library-create-list-icon svg {
  width: 24px;
  height: 24px;
  color: var(--text-muted);
}

.library-create-list-card:hover .library-create-list-icon svg {
  color: var(--void);
}

.library-create-list-text {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-secondary);
}

/* ========================================
   ACTIVITY SUMMARY
======================================== */
.library-activity-summary {
  margin-top: 32px;
}

.library-activity-cards {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

.library-activity-card {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  padding: 20px;
}

.library-activity-card-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.library-activity-card-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.library-activity-card-icon svg {
  width: 20px;
  height: 20px;
}

.library-activity-card-icon.time {
  background: rgba(59, 130, 246, 0.15);
  color: var(--status-watching);
}

.library-activity-card-icon.streak {
  background: var(--gold-glow);
  color: var(--gold);
}

.library-activity-card-title {
  font-size: 0.85rem;
  color: var(--text-muted);
}

.library-activity-card-value {
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1;
}

.library-activity-card-value small {
  font-size: 0.6em;
  font-weight: 400;
}

.library-activity-card-subtitle {
  font-size: 0.75rem;
  color: var(--text-muted);
  margin-top: 4px;
}

.library-activity-chart {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  height: 40px;
  margin-top: 12px;
}

.library-chart-bar {
  flex: 1;
  background: var(--void-border);
  border-radius: 2px;
  transition: all 0.3s ease;
}

.library-chart-bar.active {
  background: var(--gold);
}

/* ========================================
   EMPTY STATE
======================================== */
.library-empty-state {
  text-align: center;
  padding: 60px 20px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
}

.library-empty-state-icon {
  width: 80px;
  height: 80px;
  margin: 0 auto 20px;
  color: var(--text-muted);
  opacity: 0.3;
}

.library-empty-state-title {
  font-family: 'Cinzel', serif;
  font-size: 1.25rem;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.library-empty-state-text {
  font-size: 0.9rem;
  color: var(--text-muted);
  margin-bottom: 24px;
}

.library-empty-state-btn {
  padding: 12px 24px;
  font-size: 0.9rem;
  font-weight: 600;
  background: var(--gold);
  border: none;
  border-radius: 10px;
  color: var(--void);
  cursor: pointer;
  transition: all 0.3s ease;
}

.library-empty-state-btn:hover {
  box-shadow: var(--shadow-gold);
  transform: translateY(-2px);
}

/* ========================================
   LOADING STATE
======================================== */
.library-skeleton {
  background: linear-gradient(
    90deg,
    var(--void-surface) 25%,
    var(--void-elevated) 50%,
    var(--void-surface) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 8px;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.library-skeleton-poster {
  aspect-ratio: 2/3;
  border-radius: 12px;
}

.library-skeleton-text {
  height: 16px;
  margin-bottom: 8px;
}

.library-skeleton-text.short {
  width: 60%;
}

/* ========================================
   RESPONSIVE - TABLET
======================================== */
@media (max-width: 768px) {
  .library-profile-card {
    flex-wrap: wrap;
  }

  .library-profile-action {
    width: 100%;
    margin-top: 16px;
    text-align: center;
  }

  .library-stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
  }

  .library-stat-card {
    padding: 12px 8px;
  }

  .library-stat-card-value {
    font-size: 1.25rem;
  }

  .library-content-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }

  .library-lists-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }

  .library-activity-cards {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }
}

/* ========================================
   RESPONSIVE - MOBILE
======================================== */
@media (max-width: 480px) {
  .library-profile-card {
    padding: 16px;
  }

  .library-profile-avatar {
    width: 56px;
    height: 56px;
  }

  .library-profile-name {
    font-size: 1rem;
  }

  .library-profile-stats {
    gap: 16px;
  }

  .library-stat-value {
    font-size: 1.1rem;
  }

  .library-stats-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }

  .library-stat-card {
    padding: 14px 10px;
  }

  .library-stat-card-icon {
    width: 28px;
    height: 28px;
    margin-bottom: 6px;
  }

  .library-stat-card-icon svg {
    width: 16px;
    height: 16px;
  }

  .library-stat-card-value {
    font-size: 1.35rem;
  }

  .library-content-tabs {
    gap: 6px;
    margin-bottom: 16px;
  }

  .library-content-tab {
    padding: 8px 14px;
    font-size: 0.85rem;
  }

  .library-content-tab svg {
    width: 14px;
    height: 14px;
  }

  .library-filter-bar {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }

  .library-filter-left {
    width: 100%;
  }

  .library-filter-dropdown {
    flex: 1;
    justify-content: center;
    padding: 10px 12px;
    font-size: 0.8rem;
  }

  .library-view-toggle {
    align-self: flex-end;
  }

  .library-content-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }

  .library-content-info {
    padding: 10px;
  }

  .library-content-title {
    font-size: 0.85rem;
  }

  .library-content-status {
    font-size: 0.6rem;
    padding: 3px 6px;
  }

  /* List view on mobile */
  .library-content-grid.list-view .library-content-poster {
    width: 70px;
    height: 105px;
  }

  .library-content-grid.list-view .library-content-info {
    padding: 10px 12px;
  }

  .library-content-grid.list-view .library-content-title {
    font-size: 0.9rem;
  }

  .library-content-grid.list-view .library-list-actions {
    padding-right: 10px;
  }

  .library-list-action-btn {
    width: 32px;
    height: 32px;
  }

  .library-section-divider {
    margin: 24px 0;
  }

  .library-section-title {
    font-size: 1.1rem;
  }

  .library-section-action {
    padding: 6px 12px;
    font-size: 0.75rem;
  }

  .library-lists-grid {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .library-list-preview {
    aspect-ratio: 3/1;
  }

  .library-list-details {
    padding: 14px;
  }

  .library-list-name {
    font-size: 0.95rem;
  }

  .library-create-list-card {
    padding: 30px 16px;
    min-height: 150px;
  }

  .library-activity-cards {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .library-activity-card {
    padding: 16px;
  }

  .library-activity-card-value {
    font-size: 1.5rem;
  }
}

/* ========================================
   LISTE KARTI
======================================== */
.library-list-card {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s ease;
}

.library-list-card:hover {
  border-color: var(--gold);
  transform: translateY(-2px);
  box-shadow: var(--shadow-gold);
}

.library-list-card-cover {
  aspect-ratio: 16/9;
  background: var(--void-elevated);
  overflow: hidden;
}

.library-list-card-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.library-list-card-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.library-list-card-info {
  padding: 12px;
}

.library-list-card-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 4px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.library-list-card-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.75rem;
  color: var(--text-muted);
}

.library-list-card-meta svg {
  color: var(--gold);
}

/* ========================================
   MODAL - YENÄ° LÄ°STE OLUÅTUR
======================================== */
.library-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.library-modal {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  width: 100%;
  max-width: 420px;
  box-shadow: var(--shadow-lg);
}

.library-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--void-border);
}

.library-modal-header h3 {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.library-modal-close {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 6px;
  transition: all 0.2s;
}

.library-modal-close:hover {
  color: var(--text-primary);
  background: var(--void-elevated);
}

.library-modal-body {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.library-modal-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.library-modal-field label {
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text-secondary);
}

.library-modal-field input[type="text"],
.library-modal-field textarea {
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  border-radius: 8px;
  padding: 10px 12px;
  font-size: 0.9rem;
  color: var(--text-primary);
  transition: all 0.2s;
}

.library-modal-field input[type="text"]:focus,
.library-modal-field textarea:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 3px var(--gold-glow);
}

.library-modal-field input[type="text"]::placeholder,
.library-modal-field textarea::placeholder {
  color: var(--text-muted);
}

.library-modal-field textarea {
  resize: vertical;
  min-height: 80px;
}

.library-modal-field.checkbox label {
  flex-direction: row;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.library-modal-field.checkbox input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: var(--gold);
}

.library-modal-field.checkbox svg {
  color: var(--gold);
}

.library-modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 16px 20px;
  border-top: 1px solid var(--void-border);
}

.library-modal-btn {
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.library-modal-btn.cancel {
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  color: var(--text-secondary);
}

.library-modal-btn.cancel:hover {
  background: var(--void-border);
  color: var(--text-primary);
}

.library-modal-btn.create {
  background: var(--gold);
  border: none;
  color: var(--void);
}

.library-modal-btn.create:hover:not(:disabled) {
  background: var(--gold-light);
  box-shadow: var(--shadow-gold);
}

.library-modal-btn.create:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}


========== saga.client\src\pages\glass\LibraryPage.tsx ==========

import { useState, useEffect, useCallback, useRef } from "react";
import { useNavigate, Link } from "react-router-dom";
import {
  BookOpen,
  Film,
  Tv,
  ArrowUpDown,
  Filter,
  Grid3X3,
  List as ListIcon,
  CheckCircle,
  PlayCircle,
  Clock,
  Layers,
  ChevronDown,
  Plus,
  Flame,
  Lock,
  Globe,
  X,
} from "lucide-react";
import { useAuth } from "../../context/AuthContext";
import { kutuphaneApi, listeApi, kullaniciApi } from "../../services/api";
import type { KutuphaneDurumu, Liste } from "../../services/api";
import { ContentCard, kutuphaneToCardData } from "../../components/ui/ContentCard";
import {
  getKutuphaneCache,
  setKutuphaneCache,
  getListelerCache,
  setListelerCache,
  getTakipciSayisiCache,
  setTakipciSayisiCache,
} from "../../services/libraryCache";
import "./LibraryPage.css";

// ============================================
// TYPES
// ============================================

type FilterStatus = "tumu" | "watching" | "completed" | "planned";
type FilterType = "tumu" | "film" | "dizi" | "kitap";
type ViewMode = "grid" | "list";
type SortOption = "son_eklenen" | "puan" | "isim" | "yil";

// ============================================
// MAIN COMPONENT
// ============================================

export default function LibraryPage() {
  const navigate = useNavigate();
  const { user, isAuthenticated } = useAuth();

  const [kutuphane, setKutuphane] = useState<KutuphaneDurumu[]>([]);
  const [listeler, setListeler] = useState<Liste[]>([]);
  const [takipciSayisi, setTakipciSayisi] = useState(0);
  const [loading, setLoading] = useState(true);
  const [filterStatus, setFilterStatus] = useState<FilterStatus>("tumu");
  const [filterType, setFilterType] = useState<FilterType>("tumu");
  const [viewMode, setViewMode] = useState<ViewMode>("grid");
  const [sortBy, setSortBy] = useState<SortOption>("son_eklenen");
  
  // Liste oluÅŸturma modal
  const [showCreateListModal, setShowCreateListModal] = useState(false);
  const [newListeName, setNewListeName] = useState("");
  const [newListeAciklama, setNewListeAciklama] = useState("");
  const [newListeHerkeseAcik, setNewListeHerkeseAcik] = useState(false);
  const [creatingListe, setCreatingListe] = useState(false);
  
  // Ã‡ift yÃ¼kleme Ã¶nleme
  const isDataLoadedRef = useRef(false);

  // KÃ¼tÃ¼phane yÃ¼kle (cache destekli)
  const fetchKutuphane = useCallback(async (userId: string, forceRefresh = false) => {
    if (!forceRefresh) {
      const cached = getKutuphaneCache(userId);
      if (cached) {
        setKutuphane(cached);
        return cached;
      }
    }
    
    try {
      const data = await kutuphaneApi.getKutuphane(userId);
      setKutuphaneCache(userId, data);
      setKutuphane(data);
      return data;
    } catch (error) {
      console.error("KÃ¼tÃ¼phane yÃ¼klenirken hata:", error);
      return [];
    }
  }, []);

  // Listeler yÃ¼kle (cache destekli)
  const fetchListeler = useCallback(async (userId: string, forceRefresh = false) => {
    if (!forceRefresh) {
      const cached = getListelerCache(userId);
      if (cached) {
        setListeler(cached);
        return cached;
      }
    }
    
    try {
      const data = await listeApi.getMyListeler();
      setListelerCache(userId, data);
      setListeler(data);
      return data;
    } catch (error) {
      console.error("Listeler yÃ¼klenirken hata:", error);
      return [];
    }
  }, []);

  // TakipÃ§i sayÄ±sÄ± yÃ¼kle (cache destekli)
  const fetchTakipciSayisi = useCallback(async (userId: string, forceRefresh = false) => {
    if (!forceRefresh) {
      const cached = getTakipciSayisiCache(userId);
      if (cached !== null) {
        setTakipciSayisi(cached);
        return cached;
      }
    }
    
    try {
      const data = await kullaniciApi.getTakipciler(userId);
      const count = data.length;
      setTakipciSayisiCache(userId, count);
      setTakipciSayisi(count);
      return count;
    } catch (error) {
      console.error("TakipÃ§i sayÄ±sÄ± yÃ¼klenirken hata:", error);
      return 0;
    }
  }, []);

  // Ä°lk yÃ¼kleme - lazy loading ile
  useEffect(() => {
    if (!isAuthenticated || !user?.id) return;
    
    // Ã‡ift yÃ¼kleme Ã¶nle
    if (isDataLoadedRef.current) return;
    isDataLoadedRef.current = true;

    const loadData = async () => {
      // Ã–nce cache'den hÄ±zlÄ±ca yÃ¼kle
      const cachedKutuphane = getKutuphaneCache(user.id);
      const cachedListeler = getListelerCache(user.id);
      const cachedTakipci = getTakipciSayisiCache(user.id);
      
      if (cachedKutuphane && cachedListeler && cachedTakipci !== null) {
        // TÃ¼m cache mevcut - hemen gÃ¶ster
        setKutuphane(cachedKutuphane);
        setListeler(cachedListeler);
        setTakipciSayisi(cachedTakipci);
        setLoading(false);
        
        // Arka planda gÃ¼ncelle
        Promise.all([
          fetchKutuphane(user.id, true),
          fetchListeler(user.id, true),
          fetchTakipciSayisi(user.id, true),
        ]).catch(console.error);
      } else {
        // Cache yok - normal yÃ¼kle
        setLoading(true);
        await Promise.all([
          fetchKutuphane(user.id),
          fetchListeler(user.id),
          fetchTakipciSayisi(user.id),
        ]);
        setLoading(false);
      }
    };

    loadData();
  }, [isAuthenticated, user?.id, fetchKutuphane, fetchListeler, fetchTakipciSayisi]);

  // Liste oluÅŸtur
  const handleCreateListe = async () => {
    if (!newListeName.trim() || !user?.id) return;
    
    setCreatingListe(true);
    try {
      const yeniListe = await listeApi.create({
        ad: newListeName.trim(),
        aciklama: newListeAciklama.trim() || undefined,
        herkeseAcik: newListeHerkeseAcik,
      });
      const updatedListeler = [yeniListe, ...listeler];
      setListeler(updatedListeler);
      setListelerCache(user.id, updatedListeler);
      setShowCreateListModal(false);
      setNewListeName("");
      setNewListeAciklama("");
      setNewListeHerkeseAcik(false);
    } catch (err) {
      console.error("Liste oluÅŸturulurken hata:", err);
    } finally {
      setCreatingListe(false);
    }
  };

  // Ä°statistikler
  const stats = {
    total: kutuphane.length,
    watching: kutuphane.filter((i) => 
      i.durum === "devam_ediyor" || i.durum === "izleniyor" || i.durum === "okunuyor"
    ).length,
    completed: kutuphane.filter((i) => 
      i.durum === "izlendi" || i.durum === "okundu" || i.durum === "tamamlandi"
    ).length,
    planned: kutuphane.filter((i) => 
      i.durum === "izlenecek" || i.durum === "okunacak" || i.durum === "beklemede"
    ).length,
    film: kutuphane.filter((i) => (i.tur || i.icerikTur) === "film").length,
    dizi: kutuphane.filter((i) => (i.tur || i.icerikTur) === "dizi").length,
    kitap: kutuphane.filter((i) => (i.tur || i.icerikTur) === "kitap").length,
  };

  // Filtreleme
  const filteredItems = kutuphane.filter((item) => {
    // Status filter
    if (filterStatus === "watching" && 
        !(item.durum === "devam_ediyor" || item.durum === "izleniyor" || item.durum === "okunuyor")) {
      return false;
    }
    if (filterStatus === "completed" && 
        !(item.durum === "izlendi" || item.durum === "okundu" || item.durum === "tamamlandi")) {
      return false;
    }
    if (filterStatus === "planned" && 
        !(item.durum === "izlenecek" || item.durum === "okunacak" || item.durum === "beklemede")) {
      return false;
    }

    // Type filter
    if (filterType !== "tumu") {
      const itemType = item.tur || item.icerikTur;
      if (itemType !== filterType) return false;
    }

    return true;
  });

  // SÄ±ralama
  const sortedItems = [...filteredItems].sort((a, b) => {
    switch (sortBy) {
      case "puan":
        return (b.ortalamaPuan || 0) - (a.ortalamaPuan || 0);
      case "isim":
        return (a.baslik || a.icerikAdi || "").localeCompare(b.baslik || b.icerikAdi || "");
      case "yil":
        const yearA = a.icerik?.yayinTarihi ? new Date(a.icerik.yayinTarihi).getFullYear() : 0;
        const yearB = b.icerik?.yayinTarihi ? new Date(b.icerik.yayinTarihi).getFullYear() : 0;
        return yearB - yearA;
      case "son_eklenen":
      default:
        return new Date(b.guncellemeZamani || b.olusturulmaZamani || 0).getTime() - 
               new Date(a.guncellemeZamani || a.olusturulmaZamani || 0).getTime();
    }
  });

  // Login gerekliyse
  if (!isAuthenticated) {
    return (
      <div className="library-page">
        <div className="library-empty-state">
          <BookOpen className="library-empty-state-icon" />
          <h2 className="library-empty-state-title">GiriÅŸ YapmalÄ±sÄ±nÄ±z</h2>
          <p className="library-empty-state-text">
            KÃ¼tÃ¼phanenizi gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapÄ±n.
          </p>
          <button 
            className="library-empty-state-btn"
            onClick={() => navigate("/giris")}
          >
            GiriÅŸ Yap
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="library-page">
      {/* Profile Summary */}
      <div className="library-profile-card">
        <div className="library-profile-avatar">
          <img 
            src={user?.profilResmi || `https://ui-avatars.com/api/?name=${encodeURIComponent(user?.kullaniciAdi || 'U')}&background=d4a853&color=030304`} 
            alt="Profil" 
          />
        </div>
        <div className="library-profile-info">
          <h2 className="library-profile-name">{user?.kullaniciAdi}</h2>
          <span className="library-profile-username">@{user?.kullaniciAdi}</span>
          <div className="library-profile-stats">
            <div className="library-stat-item">
              <div className="library-stat-value">{stats.completed}</div>
              <div className="library-stat-label">Ä°zlenen</div>
            </div>
            <div className="library-stat-item">
              <div className="library-stat-value">{listeler.length}</div>
              <div className="library-stat-label">Liste</div>
            </div>
            <div className="library-stat-item">
              <div className="library-stat-value">{takipciSayisi}</div>
              <div className="library-stat-label">TakipÃ§i</div>
            </div>
          </div>
        </div>
        <Link to={`/profil/${user?.kullaniciAdi}`} className="library-profile-action">Profili GÃ¶r</Link>
      </div>

      {/* Quick Stats */}
      <div className="library-quick-stats">
        <div className="library-stats-grid">
          <div 
            className={`library-stat-card ${filterStatus === "watching" ? "active" : ""}`}
            onClick={() => setFilterStatus(filterStatus === "watching" ? "tumu" : "watching")}
          >
            <div className="library-stat-card-icon watching">
              <PlayCircle size={18} />
            </div>
            <div className="library-stat-card-value">{stats.watching}</div>
            <div className="library-stat-card-label">Devam Ediyor</div>
          </div>
          <div 
            className={`library-stat-card ${filterStatus === "completed" ? "active" : ""}`}
            onClick={() => setFilterStatus(filterStatus === "completed" ? "tumu" : "completed")}
          >
            <div className="library-stat-card-icon completed">
              <CheckCircle size={18} />
            </div>
            <div className="library-stat-card-value">{stats.completed}</div>
            <div className="library-stat-card-label">TamamlandÄ±</div>
          </div>
          <div 
            className={`library-stat-card ${filterStatus === "planned" ? "active" : ""}`}
            onClick={() => setFilterStatus(filterStatus === "planned" ? "tumu" : "planned")}
          >
            <div className="library-stat-card-icon planned">
              <Clock size={18} />
            </div>
            <div className="library-stat-card-value">{stats.planned}</div>
            <div className="library-stat-card-label">Beklemede</div>
          </div>
        </div>
      </div>

      {/* Content Tabs */}
      <div className="library-content-tabs">
        <button 
          className={`library-content-tab ${filterType === "tumu" ? "active" : ""}`}
          onClick={() => setFilterType("tumu")}
        >
          <Layers size={16} />
          TÃ¼mÃ¼
          <span className="count">{stats.total}</span>
        </button>
        <button 
          className={`library-content-tab ${filterType === "film" ? "active" : ""}`}
          onClick={() => setFilterType("film")}
        >
          <Film size={16} />
          Filmler
          <span className="count">{stats.film}</span>
        </button>
        <button 
          className={`library-content-tab ${filterType === "dizi" ? "active" : ""}`}
          onClick={() => setFilterType("dizi")}
        >
          <Tv size={16} />
          Diziler
          <span className="count">{stats.dizi}</span>
        </button>
        <button 
          className={`library-content-tab ${filterType === "kitap" ? "active" : ""}`}
          onClick={() => setFilterType("kitap")}
        >
          <BookOpen size={16} />
          Kitaplar
          <span className="count">{stats.kitap}</span>
        </button>
      </div>

      {/* Filter Bar */}
      <div className="library-filter-bar">
        <div className="library-filter-left">
          <button 
            className="library-filter-dropdown"
            onClick={() => {
              // SÄ±ralama seÃ§eneklerini dÃ¶ngÃ¼sel olarak deÄŸiÅŸtir
              const options: SortOption[] = ["son_eklenen", "puan", "isim", "yil"];
              const currentIndex = options.indexOf(sortBy);
              const nextIndex = (currentIndex + 1) % options.length;
              setSortBy(options[nextIndex]);
            }}
          >
            <ArrowUpDown size={16} />
            {sortBy === "son_eklenen" && "Son Eklenen"}
            {sortBy === "puan" && "Puana GÃ¶re"}
            {sortBy === "isim" && "Ä°sme GÃ¶re"}
            {sortBy === "yil" && "YÄ±la GÃ¶re"}
            <ChevronDown size={16} />
          </button>
          <button className="library-filter-dropdown">
            <Filter size={16} />
            Filtrele
          </button>
        </div>
        <div className="library-view-toggle">
          <button 
            className={`library-view-btn ${viewMode === "grid" ? "active" : ""}`}
            onClick={() => setViewMode("grid")}
          >
            <Grid3X3 size={18} />
          </button>
          <button 
            className={`library-view-btn ${viewMode === "list" ? "active" : ""}`}
            onClick={() => setViewMode("list")}
          >
            <ListIcon size={18} />
          </button>
        </div>
      </div>

      {/* Content */}
      {loading ? (
        <div className={`library-content-grid ${viewMode === "list" ? "list-view" : ""}`}>
          {[...Array(6)].map((_, i) => (
            <div key={i} className="library-content-card">
              <div className="library-content-poster library-skeleton library-skeleton-poster" />
              <div className="library-content-info">
                <div className="library-skeleton library-skeleton-text" />
                <div className="library-skeleton library-skeleton-text short" />
              </div>
            </div>
          ))}
        </div>
      ) : sortedItems.length > 0 ? (
        <div className={`library-content-grid ${viewMode === "list" ? "list-view" : ""}`}>
          {sortedItems.map((item) => {
            const cardData = kutuphaneToCardData(item);
            
            return (
              <ContentCard
                key={item.id || item.icerikId}
                data={cardData}
                showStatus={true}
                showBadge={true}
                showRatings={true}
                className="library-card"
              />
            );
          })}
        </div>
      ) : (
        <div className="library-empty-state">
          <BookOpen className="library-empty-state-icon" />
          <h2 className="library-empty-state-title">KÃ¼tÃ¼phaneniz BoÅŸ</h2>
          <p className="library-empty-state-text">
            Film, dizi veya kitap aramaya baÅŸlayÄ±n ve kÃ¼tÃ¼phanenize ekleyin.
          </p>
          <button 
            className="library-empty-state-btn"
            onClick={() => navigate("/kesfet")}
          >
            KeÅŸfet
          </button>
        </div>
      )}

      {/* Section Divider */}
      {sortedItems.length > 0 && (
        <>
          <div className="library-section-divider" />

          {/* My Lists Section */}
          <section className="library-my-lists-section">
            <div className="library-section-header">
              <h2 className="library-section-title">Listelerim</h2>
              <button 
                className="library-section-action"
                onClick={() => setShowCreateListModal(true)}
              >
                <Plus size={14} />
                Yeni Liste
              </button>
            </div>
            <div className="library-lists-grid">
              {/* Create New List Card */}
              <div 
                className="library-create-list-card"
                onClick={() => setShowCreateListModal(true)}
              >
                <div className="library-create-list-icon">
                  <Plus size={24} />
                </div>
                <span className="library-create-list-text">Yeni Liste OluÅŸtur</span>
              </div>
              
              {/* Mevcut Listeler */}
              {listeler.map((liste) => (
                <div 
                  key={liste.id} 
                  className="library-list-card"
                  onClick={() => navigate(`/liste/${liste.id}/duzenle`)}
                >
                  <div className="library-list-card-cover">
                    {liste.icerikler && liste.icerikler.length > 0 ? (
                      <img 
                        src={liste.icerikler[0].posterUrl || ''} 
                        alt={liste.ad} 
                      />
                    ) : (
                      <div className="library-list-card-placeholder">
                        <Layers size={32} />
                      </div>
                    )}
                  </div>
                  <div className="library-list-card-info">
                    <h4 className="library-list-card-title">{liste.ad}</h4>
                    <div className="library-list-card-meta">
                      <span>{liste.icerikSayisi} iÃ§erik</span>
                      {liste.herkeseAcik ? (
                        <Globe size={12} />
                      ) : (
                        <Lock size={12} />
                      )}
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </section>


          {/* Activity Summary */}
          <section className="library-activity-summary">
            <div className="library-section-header">
              <h2 className="library-section-title">Bu Ay</h2>
            </div>
            <div className="library-activity-cards">
              <div className="library-activity-card">
                <div className="library-activity-card-header">
                  <div className="library-activity-card-icon time">
                    <Clock size={20} />
                  </div>
                  <div>
                    <div className="library-activity-card-title">Tamamlanan</div>
                    <div className="library-activity-card-value">
                      {stats.completed} <small>iÃ§erik</small>
                    </div>
                  </div>
                </div>
                <div className="library-activity-chart">
                  {/* Son 7 gÃ¼nÃ¼n aktivitesi - ÅŸimdilik statik */}
                  {[20, 40, 60, 30, 80, 50, stats.completed > 0 ? 100 : 20].map((height, i) => (
                    <div 
                      key={i}
                      className={`library-chart-bar ${i === 6 ? "active" : ""}`}
                      style={{ height: `${height}%` }}
                    />
                  ))}
                </div>
              </div>
              <div className="library-activity-card">
                <div className="library-activity-card-header">
                  <div className="library-activity-card-icon streak">
                    <Flame size={20} />
                  </div>
                  <div>
                    <div className="library-activity-card-title">KÃ¼tÃ¼phane</div>
                    <div className="library-activity-card-value">
                      {stats.total} <small>iÃ§erik</small>
                    </div>
                    <div className="library-activity-card-subtitle">
                      {stats.watching > 0 && `${stats.watching} devam ediyor`}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </>
      )}

      {/* Liste OluÅŸturma Modal */}
      {showCreateListModal && (
        <div className="library-modal-overlay" onClick={() => setShowCreateListModal(false)}>
          <div className="library-modal" onClick={(e) => e.stopPropagation()}>
            <div className="library-modal-header">
              <h3>Yeni Liste OluÅŸtur</h3>
              <button 
                className="library-modal-close"
                onClick={() => setShowCreateListModal(false)}
              >
                <X size={20} />
              </button>
            </div>
            <div className="library-modal-body">
              <div className="library-modal-field">
                <label>Liste AdÄ±</label>
                <input
                  type="text"
                  placeholder="Liste adÄ±nÄ± girin..."
                  value={newListeName}
                  onChange={(e) => setNewListeName(e.target.value)}
                  autoFocus
                />
              </div>
              <div className="library-modal-field">
                <label>AÃ§Ä±klama (Opsiyonel)</label>
                <textarea
                  placeholder="Liste aÃ§Ä±klamasÄ±..."
                  value={newListeAciklama}
                  onChange={(e) => setNewListeAciklama(e.target.value)}
                  rows={3}
                />
              </div>
              <div className="library-modal-field checkbox">
                <label>
                  <input
                    type="checkbox"
                    checked={newListeHerkeseAcik}
                    onChange={(e) => setNewListeHerkeseAcik(e.target.checked)}
                  />
                  <Globe size={16} />
                  Herkese AÃ§Ä±k
                </label>
              </div>
            </div>
            <div className="library-modal-footer">
              <button 
                className="library-modal-btn cancel"
                onClick={() => setShowCreateListModal(false)}
              >
                Ä°ptal
              </button>
              <button 
                className="library-modal-btn create"
                onClick={handleCreateListe}
                disabled={!newListeName.trim() || creatingListe}
              >
                {creatingListe ? "OluÅŸturuluyor..." : "OluÅŸtur"}
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}


========== saga.client\src\pages\glass\LikesPage.tsx ==========

import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import {
  Heart,
  Star,
  Calendar,
  Loader2,
  MessageSquare,
  ThumbsUp,
} from 'lucide-react';
import { useAuth } from '../../context/AuthContext';
import type { Yorum } from '../../services/api';

// ============================================
// NEBULA UI COMPONENTS
// ============================================

function GlassCard({ children, className = '' }: { children: React.ReactNode; className?: string }) {
  return (
    <div className={`p-5 rounded-2xl bg-[rgba(20,20,35,0.65)] backdrop-blur-xl border border-[rgba(255,255,255,0.08)] shadow-lg ${className}`}>
      {children}
    </div>
  );
}

function Button({ 
  children, 
  variant = 'primary',
  size = 'md',
  className = '',
  disabled = false,
  onClick 
}: { 
  children: React.ReactNode; 
  variant?: 'primary' | 'secondary' | 'ghost';
  size?: 'sm' | 'md';
  className?: string;
  disabled?: boolean;
  onClick?: () => void;
}) {
  const baseStyles = 'inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-200 cursor-pointer disabled:opacity-50';
  const variantStyles = {
    primary: 'bg-gradient-to-r from-[#6C5CE7] to-[#a29bfe] text-white hover:shadow-lg hover:shadow-[#6C5CE7]/25',
    secondary: 'bg-[rgba(255,255,255,0.08)] text-white border border-[rgba(255,255,255,0.1)] hover:bg-[rgba(255,255,255,0.12)]',
    ghost: 'bg-transparent text-[rgba(255,255,255,0.7)] hover:text-white hover:bg-[rgba(255,255,255,0.05)]',
  };
  const sizeStyles = {
    sm: 'px-3 py-1.5 text-xs gap-1',
    md: 'px-4 py-2 text-sm gap-2',
  };

  return (
    <button onClick={onClick} disabled={disabled} className={`${baseStyles} ${variantStyles[variant]} ${sizeStyles[size]} ${className}`}>
      {children}
    </button>
  );
}

type TabType = 'yorumlar' | 'aktiviteler';

export default function LikesPage() {
  const navigate = useNavigate();
  const { user, isAuthenticated } = useAuth();
  
  const [activeTab, setActiveTab] = useState<TabType>('yorumlar');
  const [begenilenYorumlar, setBegenilenYorumlar] = useState<Yorum[]>([]);
  const [loading, setLoading] = useState(true);

  // BeÄŸenilen yorumlarÄ± yÃ¼kle
  useEffect(() => {
    const loadBegeniler = async () => {
      if (!isAuthenticated || !user) return;
      
      setLoading(true);
      try {
        // Not: Backend'de beÄŸenilen yorumlarÄ± getiren endpoint olmayabilir
        // Bu demo amaÃ§lÄ± - gerÃ§ek implementasyon iÃ§in backend endpoint gerekli
        // Åimdilik boÅŸ array dÃ¶ndÃ¼rÃ¼yoruz
        setBegenilenYorumlar([]);
      } catch (err) {
        console.error('BeÄŸeniler yÃ¼klenirken hata:', err);
      } finally {
        setLoading(false);
      }
    };
    
    loadBegeniler();
  }, [isAuthenticated, user]);

  if (!isAuthenticated) {
    return (
      <div className="max-w-4xl mx-auto">
        <GlassCard className="text-center py-12">
          <Heart size={48} className="mx-auto mb-4 text-[#8E8E93]" />
          <h2 className="text-xl font-semibold text-white mb-2">GiriÅŸ YapmalÄ±sÄ±nÄ±z</h2>
          <p className="text-[#8E8E93] mb-6">BeÄŸenilerinizi gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapÄ±n.</p>
          <Button onClick={() => navigate('/giris')}>GiriÅŸ Yap</Button>
        </GlassCard>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div>
        <h1 className="text-2xl font-bold text-white">BeÄŸeniler</h1>
        <p className="text-[rgba(255,255,255,0.5)] text-sm mt-1">
          BeÄŸendiÄŸiniz iÃ§erikler ve yorumlar
        </p>
      </div>

      {/* Tabs */}
      <div className="flex gap-2">
        <button
          onClick={() => setActiveTab('yorumlar')}
          className={`
            px-4 py-2 rounded-xl text-sm font-medium transition-colors
            ${activeTab === 'yorumlar'
              ? 'bg-[#6C5CE7] text-white'
              : 'bg-[rgba(255,255,255,0.05)] text-[rgba(255,255,255,0.6)] hover:bg-[rgba(255,255,255,0.1)]'
            }
          `}
        >
          <div className="flex items-center gap-2">
            <MessageSquare size={16} />
            Yorumlar
          </div>
        </button>
        <button
          onClick={() => setActiveTab('aktiviteler')}
          className={`
            px-4 py-2 rounded-xl text-sm font-medium transition-colors
            ${activeTab === 'aktiviteler'
              ? 'bg-[#6C5CE7] text-white'
              : 'bg-[rgba(255,255,255,0.05)] text-[rgba(255,255,255,0.6)] hover:bg-[rgba(255,255,255,0.1)]'
            }
          `}
        >
          <div className="flex items-center gap-2">
            <ThumbsUp size={16} />
            Aktiviteler
          </div>
        </button>
      </div>

      {/* Content */}
      {loading ? (
        <div className="flex items-center justify-center py-12">
          <Loader2 size={32} className="animate-spin text-[#6C5CE7]" />
        </div>
      ) : activeTab === 'yorumlar' ? (
        begenilenYorumlar.length > 0 ? (
          <div className="space-y-4">
            {begenilenYorumlar.map((yorum) => (
              <GlassCard key={yorum.id} className="p-4">
                <div className="flex items-start gap-4">
                  {/* User Avatar */}
                  <div className="w-10 h-10 rounded-full bg-gradient-to-br from-[#6C5CE7] to-[#fd79a8] flex items-center justify-center text-white font-semibold">
                    {yorum.kullaniciAdi?.charAt(0).toUpperCase()}
                  </div>
                  
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="font-medium text-white">{yorum.kullaniciAdi}</span>
                      {yorum.puan && (
                        <div className="flex items-center gap-1 text-[#FF9F0A]">
                          <Star size={12} className="fill-current" />
                          <span className="text-xs">{yorum.puan}/10</span>
                        </div>
                      )}
                    </div>
                    
                    {yorum.baslik && (
                      <h4 className="font-medium text-white mb-1">{yorum.baslik}</h4>
                    )}
                    
                    <p className="text-sm text-[rgba(255,255,255,0.7)] line-clamp-3">
                      {yorum.icerik}
                    </p>
                    
                    <div className="flex items-center gap-4 mt-3 text-xs text-[rgba(255,255,255,0.4)]">
                      <div className="flex items-center gap-1">
                        <Heart size={12} className="text-[#fd79a8] fill-current" />
                        <span>{yorum.begeniSayisi}</span>
                      </div>
                      <div className="flex items-center gap-1">
                        <Calendar size={12} />
                        <span>{new Date(yorum.olusturulmaZamani).toLocaleDateString('tr-TR')}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </GlassCard>
            ))}
          </div>
        ) : (
          <GlassCard className="text-center py-12">
            <Heart size={48} className="mx-auto mb-4 text-[#8E8E93]" />
            <h2 className="text-xl font-semibold text-white mb-2">BeÄŸenilen Yorum Yok</h2>
            <p className="text-[#8E8E93] mb-6">
              HenÃ¼z hiÃ§bir yorumu beÄŸenmediniz. Ä°Ã§erikleri keÅŸfedin ve beÄŸendiÄŸiniz yorumlarÄ± kaydedin.
            </p>
            <Button onClick={() => navigate('/kesfet')}>KeÅŸfet</Button>
          </GlassCard>
        )
      ) : (
        <GlassCard className="text-center py-12">
          <ThumbsUp size={48} className="mx-auto mb-4 text-[#8E8E93]" />
          <h2 className="text-xl font-semibold text-white mb-2">BeÄŸenilen Aktivite Yok</h2>
          <p className="text-[#8E8E93] mb-6">
            HenÃ¼z hiÃ§bir aktiviteyi beÄŸenmediniz. AkÄ±ÅŸÄ± kontrol edin ve beÄŸendiÄŸiniz paylaÅŸÄ±mlarÄ± kaydedin.
          </p>
          <Button onClick={() => navigate('/')}>AkÄ±ÅŸa Git</Button>
        </GlassCard>
      )}
    </div>
  );
}


========== saga.client\src\pages\glass\ListEditPage.css ==========

/* Liste Edit - Spotify Style with Drag & Drop */

.liste-edit {
  --void: #030304;
  --surface: #111115;
  --elevated: #18181c;
  --border: #25252d;
  --gold: #d4a853;
  --gold-glow: rgba(212, 168, 83, 0.15);
  --text: #ffffff;
  --text-muted: rgba(255, 255, 255, 0.5);
  --danger: #ef4444;

  min-height: 100vh;
  padding: 20px;
  max-width: 1000px;
  margin: 0 auto;
}

.liste-edit-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 50vh;
  color: var(--gold);
}

.spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Header */
.liste-edit-header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border);
}

.liste-edit-back {
  padding: 10px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s;
}

.liste-edit-back:hover {
  color: var(--gold);
  border-color: var(--gold);
}

.liste-edit-header h1 {
  flex: 1;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text);
  margin: 0;
}

.liste-edit-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* View Toggle */
.view-toggle {
  display: flex;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  overflow: hidden;
}

.view-toggle button {
  padding: 8px 12px;
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s;
}

.view-toggle button:first-child {
  border-right: 1px solid var(--border);
}

.view-toggle button.active {
  background: var(--gold);
  color: var(--void);
}

.view-toggle button:hover:not(.active) {
  color: var(--gold);
}

.liste-edit-add {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  background: var(--gold);
  border: none;
  border-radius: 10px;
  color: var(--void);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.liste-edit-add:hover {
  filter: brightness(1.1);
  box-shadow: 0 0 20px var(--gold-glow);
}

/* Empty State */
.liste-edit-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 20px;
  color: var(--text-muted);
  text-align: center;
}

.liste-edit-empty svg {
  color: var(--gold);
  opacity: 0.4;
  margin-bottom: 16px;
}

.liste-edit-empty p {
  font-size: 1.1rem;
  color: var(--text);
  margin: 0 0 8px 0;
}

.liste-edit-empty span {
  font-size: 0.9rem;
}

/* ==================== */
/* LIST VIEW            */
/* ==================== */
.liste-view-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.liste-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  background: var(--surface);
  border-radius: 8px;
  transition: all 0.2s;
  cursor: grab;
}

.liste-item:hover {
  background: var(--elevated);
}

.liste-item.dragging {
  opacity: 0.5;
  background: var(--elevated);
}

.liste-item.drag-over {
  border: 2px dashed var(--gold);
  background: var(--gold-glow);
}

.liste-item-drag {
  color: var(--text-muted);
  cursor: grab;
  opacity: 0;
  transition: opacity 0.2s;
}

.liste-item:hover .liste-item-drag {
  opacity: 1;
}

.liste-item-num {
  width: 24px;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-muted);
  text-align: center;
}

.liste-item:hover .liste-item-num {
  color: var(--gold);
}

.liste-item-poster {
  width: 45px;
  height: 67px;
  border-radius: 4px;
  overflow: hidden;
  background: var(--elevated);
  flex-shrink: 0;
}

.liste-item-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.liste-item-poster-empty {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.liste-item-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.liste-item-title {
  font-size: 0.95rem;
  font-weight: 500;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.liste-item-type {
  font-size: 0.8rem;
  color: var(--text-muted);
  text-transform: capitalize;
}

.liste-item-delete {
  padding: 8px;
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 6px;
  opacity: 0;
  transition: all 0.2s;
}

.liste-item:hover .liste-item-delete {
  opacity: 1;
}

.liste-item-delete:hover {
  color: var(--danger);
  background: rgba(239, 68, 68, 0.1);
}

/* ==================== */
/* GRID VIEW            */
/* ==================== */
.liste-view-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 20px;
}

.grid-item {
  cursor: grab;
  transition: all 0.2s;
}

.grid-item.dragging {
  opacity: 0.5;
  transform: scale(0.95);
}

.grid-item.drag-over {
  transform: scale(1.05);
}

.grid-item.drag-over .grid-item-poster {
  border: 2px dashed var(--gold);
  box-shadow: 0 0 20px var(--gold-glow);
}

.grid-item-poster {
  position: relative;
  aspect-ratio: 2/3;
  border-radius: 8px;
  overflow: hidden;
  background: var(--surface);
  margin-bottom: 8px;
}

.grid-item-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s;
}

.grid-item:hover .grid-item-poster img {
  transform: scale(1.05);
}

.grid-item-poster-empty {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.grid-item-num {
  position: absolute;
  top: 8px;
  left: 8px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--gold);
  color: var(--void);
  font-size: 0.75rem;
  font-weight: 700;
  border-radius: 6px;
}

.grid-item-delete {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 6px;
  background: rgba(0, 0, 0, 0.7);
  border: none;
  color: white;
  cursor: pointer;
  border-radius: 6px;
  opacity: 0;
  transition: all 0.2s;
}

.grid-item:hover .grid-item-delete {
  opacity: 1;
}

.grid-item-delete:hover {
  background: var(--danger);
}

.grid-item-drag {
  position: absolute;
  bottom: 8px;
  right: 8px;
  padding: 6px;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  border-radius: 6px;
  opacity: 0;
  transition: opacity 0.2s;
}

.grid-item:hover .grid-item-drag {
  opacity: 1;
}

.grid-item-title {
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-align: center;
}

/* Search Modal */
.liste-search-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.liste-search-modal {
  width: 100%;
  max-width: 500px;
  max-height: 80vh;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.liste-search-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
}

.liste-search-header h2 {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  margin: 0;
}

.liste-search-header button {
  padding: 6px;
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 6px;
}

.liste-search-header button:hover {
  color: var(--text);
}

/* Search Input */
.liste-search-input {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  background: var(--elevated);
  border-bottom: 1px solid var(--border);
}

.liste-search-input svg {
  color: var(--text-muted);
  flex-shrink: 0;
}

.liste-search-input input {
  flex: 1;
  background: none;
  border: none;
  color: var(--text);
  font-size: 0.95rem;
}

.liste-search-input input::placeholder {
  color: var(--text-muted);
}

.liste-search-input input:focus {
  outline: none;
}

.liste-search-input button {
  padding: 8px 16px;
  background: var(--gold);
  border: none;
  border-radius: 8px;
  color: var(--void);
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
}

.liste-search-input button:hover {
  filter: brightness(1.1);
}

/* Search Results */
.liste-search-results {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
}

.liste-search-empty {
  text-align: center;
  padding: 40px;
  color: var(--text-muted);
}

.liste-search-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
}

.liste-search-item:hover:not(.added) {
  background: var(--elevated);
}

.liste-search-item.added {
  opacity: 0.5;
  cursor: default;
}

.liste-search-item-poster {
  width: 40px;
  height: 60px;
  border-radius: 4px;
  overflow: hidden;
  background: var(--elevated);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  flex-shrink: 0;
}

.liste-search-item-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.liste-search-item-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.liste-search-item-info .title {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.liste-search-item-info .meta {
  font-size: 0.75rem;
  color: var(--text-muted);
}

.added-badge {
  font-size: 0.75rem;
  color: #22c55e;
  padding: 4px 10px;
  background: rgba(34, 197, 94, 0.1);
  border-radius: 4px;
}

.add-icon {
  color: var(--gold);
  opacity: 0;
  transition: opacity 0.2s;
}

.liste-search-item:hover:not(.added) .add-icon {
  opacity: 1;
}

/* Responsive */
@media (max-width: 640px) {
  .liste-edit {
    padding: 16px;
  }

  .liste-edit-header h1 {
    font-size: 1.2rem;
  }

  .liste-edit-add span {
    display: none;
  }

  .liste-item {
    padding: 10px 12px;
    gap: 12px;
  }

  .liste-item-poster {
    width: 40px;
    height: 60px;
  }

  .liste-item-actions {
    opacity: 1;
  }

  .liste-item-actions button {
    padding: 6px;
  }
}


========== saga.client\src\pages\glass\ListEditPage.tsx ==========

import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { 
  ArrowLeft, 
  Plus, 
  Trash2, 
  Loader2,
  Film,
  List,
  Grid3X3,
  GripVertical
} from 'lucide-react';
import { listeApi } from '../../services/api';
import './ListEditPage.css';

interface ListeIcerik {
  id?: number;
  icerikId: number;
  baslik: string;
  posterUrl?: string;
  tur: string;
  ortalamaPuan?: number;
  sira: number;
}

const ListEditPage: React.FC = () => {
  const { id } = useParams<{ id: string }>();
  const navigate = useNavigate();
  
  const [loading, setLoading] = useState(true);
  const [listeAdi, setListeAdi] = useState('');
  const [icerikler, setIcerikler] = useState<ListeIcerik[]>([]);
  const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');
  
  // Drag & Drop
  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);
  const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);

  useEffect(() => {
    if (id) fetchListe();
  }, [id]);

  const fetchListe = async () => {
    try {
      setLoading(true);
      const data = await listeApi.getById(Number(id));
      setListeAdi(data.ad || '');
      setIcerikler(data.icerikler?.sort((a: any, b: any) => (a.sira || 0) - (b.sira || 0)) || []);
    } catch (err) {
      console.error('Liste yÃ¼klenemedi:', err);
    } finally {
      setLoading(false);
    }
  };

  const handleRemove = async (icerikId: number) => {
    try {
      await listeApi.removeIcerik(Number(id), icerikId);
      setIcerikler(icerikler.filter(i => i.icerikId !== icerikId));
    } catch (err) {
      console.error('Silinemedi:', err);
    }
  };

  // Drag & Drop handlers
  const handleDragStart = (e: React.DragEvent, index: number) => {
    setDraggedIndex(index);
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text/html', '');
  };

  const handleDragOver = (e: React.DragEvent, index: number) => {
    e.preventDefault();
    e.dataTransfer.dropEffect = 'move';
    if (draggedIndex !== index) {
      setDragOverIndex(index);
    }
  };

  const handleDragLeave = () => {
    setDragOverIndex(null);
  };

  const handleDrop = (e: React.DragEvent, dropIndex: number) => {
    e.preventDefault();
    
    if (draggedIndex === null || draggedIndex === dropIndex) {
      setDraggedIndex(null);
      setDragOverIndex(null);
      return;
    }

    const newList = [...icerikler];
    const [draggedItem] = newList.splice(draggedIndex, 1);
    newList.splice(dropIndex, 0, draggedItem);
    
    setIcerikler(newList);
    setDraggedIndex(null);
    setDragOverIndex(null);
  };

  const handleDragEnd = () => {
    setDraggedIndex(null);
    setDragOverIndex(null);
  };

  if (loading) {
    return (
      <div className="liste-edit">
        <div className="liste-edit-loading">
          <Loader2 className="spin" size={32} />
        </div>
      </div>
    );
  }

  return (
    <div className="liste-edit">
      {/* Header */}
      <div className="liste-edit-header">
        <button className="liste-edit-back" onClick={() => navigate(-1)}>
          <ArrowLeft size={20} />
        </button>
        <h1>{listeAdi}</h1>
        
        <div className="liste-edit-controls">
          {/* View Toggle */}
          <div className="view-toggle">
            <button 
              className={viewMode === 'list' ? 'active' : ''} 
              onClick={() => setViewMode('list')}
              title="Liste gÃ¶rÃ¼nÃ¼mÃ¼"
            >
              <List size={18} />
            </button>
            <button 
              className={viewMode === 'grid' ? 'active' : ''} 
              onClick={() => setViewMode('grid')}
              title="Poster gÃ¶rÃ¼nÃ¼mÃ¼"
            >
              <Grid3X3 size={18} />
            </button>
          </div>
          
          <button className="liste-edit-add" onClick={() => navigate('/kesfet')}>
            <Plus size={20} />
            <span>Ekle</span>
          </button>
        </div>
      </div>

      {/* Ä°Ã§erik */}
      <div className="liste-edit-content">
        {icerikler.length === 0 ? (
          <div className="liste-edit-empty">
            <Film size={48} />
            <p>Liste boÅŸ</p>
            <span>KeÅŸfet'e giderek iÃ§erik ekleyin</span>
          </div>
        ) : viewMode === 'list' ? (
          /* Liste GÃ¶rÃ¼nÃ¼mÃ¼ */
          <div className="liste-view-list">
            {icerikler.map((item, index) => (
              <div 
                key={item.icerikId} 
                className={`liste-item ${draggedIndex === index ? 'dragging' : ''} ${dragOverIndex === index ? 'drag-over' : ''}`}
                draggable
                onDragStart={(e) => handleDragStart(e, index)}
                onDragOver={(e) => handleDragOver(e, index)}
                onDragLeave={handleDragLeave}
                onDrop={(e) => handleDrop(e, index)}
                onDragEnd={handleDragEnd}
              >
                <div className="liste-item-drag">
                  <GripVertical size={18} />
                </div>
                <span className="liste-item-num">{index + 1}</span>
                <div className="liste-item-poster">
                  {item.posterUrl ? (
                    <img src={item.posterUrl} alt={item.baslik} />
                  ) : (
                    <div className="liste-item-poster-empty">
                      <Film size={20} />
                    </div>
                  )}
                </div>
                <div className="liste-item-info">
                  <span className="liste-item-title">{item.baslik}</span>
                  <span className="liste-item-type">{item.tur}</span>
                </div>
                <button 
                  className="liste-item-delete"
                  onClick={() => handleRemove(item.icerikId)}
                  title="Sil"
                >
                  <Trash2 size={18} />
                </button>
              </div>
            ))}
          </div>
        ) : (
          /* Grid/Poster GÃ¶rÃ¼nÃ¼mÃ¼ */
          <div className="liste-view-grid">
            {icerikler.map((item, index) => (
              <div 
                key={item.icerikId} 
                className={`grid-item ${draggedIndex === index ? 'dragging' : ''} ${dragOverIndex === index ? 'drag-over' : ''}`}
                draggable
                onDragStart={(e) => handleDragStart(e, index)}
                onDragOver={(e) => handleDragOver(e, index)}
                onDragLeave={handleDragLeave}
                onDrop={(e) => handleDrop(e, index)}
                onDragEnd={handleDragEnd}
              >
                <div className="grid-item-poster">
                  {item.posterUrl ? (
                    <img src={item.posterUrl} alt={item.baslik} />
                  ) : (
                    <div className="grid-item-poster-empty">
                      <Film size={32} />
                    </div>
                  )}
                  <span className="grid-item-num">{index + 1}</span>
                  <button 
                    className="grid-item-delete"
                    onClick={(e) => { e.stopPropagation(); handleRemove(item.icerikId); }}
                    title="Sil"
                  >
                    <Trash2 size={16} />
                  </button>
                  <div className="grid-item-drag">
                    <GripVertical size={16} />
                  </div>
                </div>
                <span className="grid-item-title">{item.baslik}</span>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
};

export default ListEditPage;


========== saga.client\src\pages\glass\ListsPage.tsx ==========

import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import {
  List,
  Plus,
  Globe,
  Lock,
  Loader2,
  MoreVertical,
  Trash2,
  Edit2,
  Share2,
  Film,
  BookOpen,
} from 'lucide-react';
import { Menu } from '@mantine/core';
import { useAuth } from '../../context/AuthContext';
import { listeApi } from '../../services/api';
import type { Liste } from '../../services/api';
import { CreateModal } from '../../components/modals/CreateModal';

// ============================================
// NEBULA UI COMPONENTS
// ============================================

function GlassCard({ children, className = '' }: { children: React.ReactNode; className?: string }) {
  return (
    <div className={`p-5 rounded-2xl bg-[rgba(20,20,35,0.65)] backdrop-blur-xl border border-[rgba(255,255,255,0.08)] shadow-lg ${className}`}>
      {children}
    </div>
  );
}

function Button({ 
  children, 
  variant = 'primary',
  size = 'md',
  className = '',
  disabled = false,
  onClick 
}: { 
  children: React.ReactNode; 
  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';
  size?: 'sm' | 'md';
  className?: string;
  disabled?: boolean;
  onClick?: () => void;
}) {
  const baseStyles = 'inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-200 cursor-pointer disabled:opacity-50';
  const variantStyles = {
    primary: 'bg-gradient-to-r from-[#6C5CE7] to-[#a29bfe] text-white hover:shadow-lg hover:shadow-[#6C5CE7]/25',
    secondary: 'bg-[rgba(255,255,255,0.08)] text-white border border-[rgba(255,255,255,0.1)] hover:bg-[rgba(255,255,255,0.12)]',
    ghost: 'bg-transparent text-[rgba(255,255,255,0.7)] hover:text-white hover:bg-[rgba(255,255,255,0.05)]',
    danger: 'bg-[#d63031] text-white hover:bg-[#c0392b]',
  };
  const sizeStyles = {
    sm: 'px-3 py-1.5 text-xs gap-1',
    md: 'px-4 py-2 text-sm gap-2',
  };

  return (
    <button onClick={onClick} disabled={disabled} className={`${baseStyles} ${variantStyles[variant]} ${sizeStyles[size]} ${className}`}>
      {children}
    </button>
  );
}

export default function ListsPage() {
  const navigate = useNavigate();
  const { user, isAuthenticated } = useAuth();
  
  const [listeler, setListeler] = useState<Liste[]>([]);
  const [loading, setLoading] = useState(true);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [deleteLoading, setDeleteLoading] = useState<number | null>(null);

  // Listeleri yÃ¼kle
  useEffect(() => {
    const loadListeler = async () => {
      if (!isAuthenticated || !user) return;
      
      setLoading(true);
      try {
        const data = await listeApi.getMyListeler();
        setListeler(data);
      } catch (err) {
        console.error('Listeler yÃ¼klenirken hata:', err);
      } finally {
        setLoading(false);
      }
    };
    
    loadListeler();
  }, [isAuthenticated, user]);

  // Liste sil
  const handleDelete = async (listeId: number) => {
    if (!confirm('Bu listeyi silmek istediÄŸinizden emin misiniz?')) return;
    
    setDeleteLoading(listeId);
    try {
      await listeApi.delete(listeId);
      setListeler(prev => prev.filter(l => l.id !== listeId));
    } catch (err) {
      console.error('Liste silinirken hata:', err);
    } finally {
      setDeleteLoading(null);
    }
  };

  // Gizlilik toggle
  const handleTogglePrivacy = async (liste: Liste) => {
    try {
      const result = await listeApi.toggleGizlilik(liste.id);
      setListeler(prev => prev.map(l => 
        l.id === liste.id ? { ...l, herkeseAcik: result.herkeseAcik } : l
      ));
    } catch (err) {
      console.error('Gizlilik deÄŸiÅŸtirilirken hata:', err);
    }
  };

  // PaylaÅŸ
  const handleShare = async (liste: Liste) => {
    try {
      const result = await listeApi.paylas(liste.id);
      const shareUrl = `${window.location.origin}/liste/${result.listeId}`;
      await navigator.clipboard.writeText(shareUrl);
      alert('Liste linki kopyalandÄ±!');
    } catch (err) {
      console.error('PaylaÅŸÄ±m hatasÄ±:', err);
    }
  };

  if (!isAuthenticated) {
    return (
      <div className="max-w-4xl mx-auto">
        <GlassCard className="text-center py-12">
          <List size={48} className="mx-auto mb-4 text-[#8E8E93]" />
          <h2 className="text-xl font-semibold text-white mb-2">GiriÅŸ YapmalÄ±sÄ±nÄ±z</h2>
          <p className="text-[#8E8E93] mb-6">Listelerinizi gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapÄ±n.</p>
          <Button onClick={() => navigate('/giris')}>GiriÅŸ Yap</Button>
        </GlassCard>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-2xl font-bold text-white">Listelerim</h1>
          <p className="text-[rgba(255,255,255,0.5)] text-sm mt-1">
            {listeler.length} liste
          </p>
        </div>
        <Button onClick={() => setShowCreateModal(true)}>
          <Plus size={16} />
          Yeni Liste
        </Button>
      </div>

      {/* Content */}
      {loading ? (
        <div className="flex items-center justify-center py-12">
          <Loader2 size={32} className="animate-spin text-[#6C5CE7]" />
        </div>
      ) : listeler.length > 0 ? (
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {listeler.map((liste) => (
            <GlassCard
              key={liste.id}
              className="p-4 hover:border-[rgba(255,255,255,0.15)] transition-colors relative"
            >
              <div className="flex items-start gap-4">
                {/* Cover Images */}
                <div className="w-20 h-24 rounded-lg overflow-hidden bg-[rgba(255,255,255,0.05)] flex-shrink-0 grid grid-cols-2 gap-0.5">
                  {liste.icerikler && liste.icerikler.slice(0, 4).map((icerik, i) => (
                    <div key={i} className="bg-[rgba(255,255,255,0.1)]">
                      {icerik.posterUrl ? (
                        <img src={icerik.posterUrl} alt="" className="w-full h-full object-cover" />
                      ) : (
                        <div className="w-full h-full flex items-center justify-center">
                          {icerik.tur === 'kitap' ? <BookOpen size={10} /> : <Film size={10} />}
                        </div>
                      )}
                    </div>
                  ))}
                  {(!liste.icerikler || liste.icerikler.length < 4) && 
                    Array(4 - (liste.icerikler?.length || 0)).fill(0).map((_, i) => (
                      <div key={`empty-${i}`} className="bg-[rgba(255,255,255,0.05)]" />
                    ))
                  }
                </div>

                {/* Info */}
                <div className="flex-1 min-w-0">
                  <button
                    onClick={() => navigate(`/liste/${liste.id}`)}
                    className="text-left w-full"
                  >
                    <div className="flex items-center gap-2 mb-1">
                      <h3 className="font-semibold text-white truncate">{liste.ad}</h3>
                      {liste.herkeseAcik ? (
                        <Globe size={14} className="text-[#00CEC9] flex-shrink-0" />
                      ) : (
                        <Lock size={14} className="text-[rgba(255,255,255,0.4)] flex-shrink-0" />
                      )}
                    </div>
                    {liste.aciklama && (
                      <p className="text-sm text-[rgba(255,255,255,0.5)] line-clamp-2 mb-2">
                        {liste.aciklama}
                      </p>
                    )}
                    <p className="text-xs text-[rgba(255,255,255,0.4)]">
                      {liste.icerikSayisi || 0} iÃ§erik
                    </p>
                  </button>
                </div>

                {/* Menu Button */}
                <Menu shadow="md" width={200} position="bottom-end">
                  <Menu.Target>
                    <button
                      onClick={(e) => e.stopPropagation()}
                      className="p-2 rounded-lg hover:bg-[rgba(255,255,255,0.1)] transition-colors"
                    >
                      <MoreVertical size={18} className="text-[rgba(255,255,255,0.5)]" />
                    </button>
                  </Menu.Target>

                  <Menu.Dropdown>
                    <Menu.Item
                      leftSection={<Edit2 size={14} />}
                      onClick={() => navigate(`/liste/${liste.id}/duzenle`)}
                    >
                      DÃ¼zenle
                    </Menu.Item>
                    <Menu.Item
                      leftSection={liste.herkeseAcik ? <Lock size={14} /> : <Globe size={14} />}
                      onClick={() => handleTogglePrivacy(liste)}
                    >
                      {liste.herkeseAcik ? 'Gizli Yap' : 'Herkese AÃ§'}
                    </Menu.Item>
                    <Menu.Item
                      leftSection={<Share2 size={14} />}
                      onClick={() => handleShare(liste)}
                    >
                      PaylaÅŸ
                    </Menu.Item>
                    <Menu.Divider />
                    <Menu.Item
                      color="red"
                      leftSection={deleteLoading === liste.id ? <Loader2 size={14} className="animate-spin" /> : <Trash2 size={14} />}
                      onClick={() => handleDelete(liste.id)}
                      disabled={deleteLoading === liste.id}
                    >
                      Sil
                    </Menu.Item>
                  </Menu.Dropdown>
                </Menu>
              </div>
            </GlassCard>
          ))}
        </div>
      ) : (
        <GlassCard className="text-center py-12">
          <List size={48} className="mx-auto mb-4 text-[#8E8E93]" />
          <h2 className="text-xl font-semibold text-white mb-2">HenÃ¼z Liste Yok</h2>
          <p className="text-[#8E8E93] mb-6">
            Film, dizi veya kitaplarÄ±nÄ±zÄ± organize etmek iÃ§in listeler oluÅŸturun.
          </p>
          <Button onClick={() => setShowCreateModal(true)}>
            <Plus size={16} />
            Ä°lk Listeni OluÅŸtur
          </Button>
        </GlassCard>
      )}

      {/* Create Modal */}
      <CreateModal isOpen={showCreateModal} onClose={() => setShowCreateModal(false)} />
    </div>
  );
}


========== saga.client\src\pages\glass\LoginPage.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SAGA DESIGN SYSTEM - AUTHENTICATION
   The Ultimate Cinematic Experience - VOID Theme
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATED BACKGROUND - ETHEREAL PARTICLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.auth-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--void, #030304);
  position: relative;
  overflow: hidden;
}

.bg-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}

.bg-gradient {
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(212, 168, 83, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse 60% 40% at 100% 100%, rgba(212, 168, 83, 0.05) 0%, transparent 40%),
    radial-gradient(ellipse 40% 60% at 0% 50%, rgba(100, 80, 40, 0.04) 0%, transparent 50%);
}

/* Floating Particles */
.particle {
  position: absolute;
  width: 2px;
  height: 2px;
  background: var(--gold, #d4a853);
  border-radius: 50%;
  opacity: 0;
  animation: floatParticle 8s infinite;
}

.particle:nth-child(1) { left: 10%; animation-delay: 0s; }
.particle:nth-child(2) { left: 20%; animation-delay: 1.5s; }
.particle:nth-child(3) { left: 35%; animation-delay: 3s; }
.particle:nth-child(4) { left: 50%; animation-delay: 0.5s; }
.particle:nth-child(5) { left: 65%; animation-delay: 2s; }
.particle:nth-child(6) { left: 80%; animation-delay: 4s; }
.particle:nth-child(7) { left: 90%; animation-delay: 1s; }
.particle:nth-child(8) { left: 5%; animation-delay: 2.5s; }
.particle:nth-child(9) { left: 75%; animation-delay: 3.5s; }
.particle:nth-child(10) { left: 45%; animation-delay: 5s; }

@keyframes floatParticle {
  0% {
    transform: translateY(100vh) scale(0);
    opacity: 0;
  }
  10% {
    opacity: 0.6;
  }
  90% {
    opacity: 0.6;
  }
  100% {
    transform: translateY(-20vh) scale(1);
    opacity: 0;
  }
}

/* Ambient Light Orbs */
.orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.3;
  animation: orbPulse 6s ease-in-out infinite;
}

.orb-1 {
  width: 400px;
  height: 400px;
  background: var(--gold-dim, #a68532);
  top: -200px;
  left: -100px;
  animation-delay: 0s;
}

.orb-2 {
  width: 300px;
  height: 300px;
  background: rgba(212, 168, 83, 0.3);
  bottom: -150px;
  right: -100px;
  animation-delay: 3s;
}

@keyframes orbPulse {
  0%, 100% { opacity: 0.2; transform: scale(1); }
  50% { opacity: 0.35; transform: scale(1.1); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTAINER - THE STAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.auth-container {
  position: relative;
  z-index: 10;
  width: 100%;
  max-width: 480px;
  padding: 0 24px;
  animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOGO & BRANDING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.brand {
  text-align: center;
  margin-bottom: 48px;
}

.brand-logo {
  font-family: 'Cinzel', serif;
  font-size: 42px;
  font-weight: 600;
  letter-spacing: 12px;
  color: var(--text-primary, #ffffff);
  position: relative;
  display: inline-block;
  margin: 0;
}

.brand-logo::before {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--gold, #d4a853), transparent);
}

.brand-tagline {
  margin-top: 16px;
  font-size: 13px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUTH CARD - GLASS MORPHISM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.auth-card {
  position: relative;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 24px;
  padding: 40px;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  overflow: visible;
}

/* Auth card iÃ§eriÄŸi z-index */
.auth-card > * {
  position: relative;
  z-index: 1;
}

/* Animated Border Rings */
.auth-card::before,
.auth-card::after {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: 26px;
  padding: 2px;
  background: linear-gradient(
    var(--ring-angle, 0deg),
    transparent 0%,
    transparent 40%,
    var(--gold, #d4a853) 50%,
    transparent 60%,
    transparent 100%
  );
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: ringRotate 8s linear infinite;
  opacity: 0.6;
  pointer-events: none;
  z-index: 0;
}

.auth-card::after {
  animation: ringRotate 8s linear infinite reverse;
  animation-delay: -4s;
  opacity: 0.3;
}

@keyframes ringRotate {
  from { --ring-angle: 0deg; }
  to { --ring-angle: 360deg; }
}

@property --ring-angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAB NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.auth-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 36px;
  padding: 4px;
  background: rgba(255, 255, 255, 0.02);
  border-radius: 12px;
  position: relative;
}

.tab-indicator {
  position: absolute;
  top: 4px;
  left: 4px;
  width: calc(50% - 4px);
  height: calc(100% - 8px);
  background: var(--void-elevated, #18181c);
  border-radius: 8px;
  transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  z-index: 0;
}

.auth-tabs.register-active .tab-indicator {
  transform: translateX(100%);
}

.auth-tab {
  flex: 1;
  padding: 12px 20px;
  background: transparent;
  border: none;
  border-radius: 8px;
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
  cursor: pointer;
  transition: color 0.3s ease;
  position: relative;
  z-index: 1;
}

.auth-tab.active {
  color: var(--text-primary, #ffffff);
}

.auth-tab:hover:not(.active) {
  color: var(--text-secondary, rgba(255, 255, 255, 0.7));
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORM PANELS - SLIDING ANIMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.form-panels {
  position: relative;
  overflow: hidden;
}

.form-panel {
  transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}

.form-panel.hidden {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  opacity: 0;
  transform: translateX(30px);
  pointer-events: none;
}

.form-panel:not(.hidden) {
  opacity: 1;
  transform: translateX(0);
}

/* When login is hidden, it slides left */
.form-panels.show-register .form-panel.login-panel.hidden {
  transform: translateX(-30px);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INPUT FIELDS - BEAM LIGHT EFFECT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.input-group {
  position: relative;
  margin-bottom: 24px;
}

.input-label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
  margin-bottom: 8px;
  transition: color 0.3s ease;
}

.input-wrapper {
  position: relative;
}

.input-field {
  width: 100%;
  padding: 16px 48px 16px 16px;
  background: var(--void-surface, #111114);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 12px;
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  color: var(--text-primary, #ffffff);
  transition: all 0.3s ease;
  outline: none;
}

.input-field::placeholder {
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
}

.input-field:hover {
  border-color: rgba(255, 255, 255, 0.12);
  background: var(--void-elevated, #18181c);
}

.input-field:focus {
  border-color: var(--gold, #d4a853);
  background: var(--void-elevated, #18181c);
  box-shadow: 0 0 0 3px rgba(212, 168, 83, 0.4);
}

/* Input Icon */
.input-icon {
  position: absolute;
  top: 50%;
  right: 16px;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
  transition: color 0.3s ease;
  z-index: 2;
}

.input-field:focus ~ .input-icon {
  color: var(--gold, #d4a853);
}

/* Password Toggle */
.toggle-password {
  position: absolute;
  top: 50%;
  right: 16px;
  transform: translateY(-50%);
  background: none;
  border: none;
  padding: 4px;
  cursor: pointer;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
  transition: color 0.3s ease;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
}

.toggle-password:hover {
  color: var(--gold, #d4a853);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHECKBOX & LINKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.form-options {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 32px;
}

.checkbox-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.checkbox-input {
  appearance: none;
  width: 18px;
  height: 18px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 4px;
  background: var(--void-surface, #111114);
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
}

.checkbox-input:checked {
  background: var(--gold, #d4a853);
  border-color: var(--gold, #d4a853);
}

.checkbox-input:checked::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 6px;
  width: 4px;
  height: 8px;
  border: solid var(--void, #030304);
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.checkbox-label {
  font-size: 13px;
  color: var(--text-secondary, rgba(255, 255, 255, 0.7));
}

.forgot-link {
  font-size: 13px;
  color: var(--gold, #d4a853);
  text-decoration: none;
  transition: color 0.2s ease;
  background: none;
  border: none;
  cursor: pointer;
}

.forgot-link:hover {
  color: var(--gold-light, #e8c676);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SUBMIT BUTTON - PREMIUM FEEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.submit-btn {
  width: 100%;
  padding: 16px 32px;
  background: linear-gradient(135deg, var(--gold, #d4a853) 0%, var(--gold-dim, #a68532) 100%);
  border: none;
  border-radius: 12px;
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--void, #030304);
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.submit-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--gold-light, #e8c676) 0%, var(--gold, #d4a853) 100%);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.submit-btn:hover::before {
  opacity: 1;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(212, 168, 83, 0.4);
}

.submit-btn:active {
  transform: translateY(0);
}

.submit-btn span {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.submit-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important;
}

.submit-btn:disabled:hover {
  box-shadow: none;
  transform: none;
}

/* Loading State */
.submit-btn.loading {
  pointer-events: none;
  transform: none !important;
}

.submit-btn .loading-spinner {
  animation: spin 0.8s linear infinite;
  padding: 0 !important;
  width: 18px !important;
  height: 18px !important;
  display: inline-block;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DIVIDER - OR SEPARATOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.divider {
  display: flex;
  align-items: center;
  gap: 16px;
  margin: 28px 0;
}

.divider-line {
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.06), transparent);
}

.divider-text {
  font-size: 12px;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
  letter-spacing: 2px;
  text-transform: uppercase;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SOCIAL LOGIN BUTTONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.social-login {
  display: flex;
  gap: 12px;
}

.social-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 14px 20px;
  background: var(--void-surface, #111114);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 12px;
  font-family: 'Inter', sans-serif;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary, rgba(255, 255, 255, 0.7));
  cursor: pointer;
  transition: all 0.3s ease;
}

.social-btn:hover {
  background: var(--void-elevated, #18181c);
  border-color: rgba(255, 255, 255, 0.12);
  color: var(--text-primary, #ffffff);
  transform: translateY(-2px);
}

.social-btn svg {
  width: 18px;
  height: 18px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER LINKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.auth-footer {
  text-align: center;
  margin-top: 32px;
}

.auth-footer p {
  font-size: 13px;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
}

.auth-footer a {
  color: var(--gold, #d4a853);
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s ease;
}

.auth-footer a:hover {
  color: var(--gold-light, #e8c676);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ERROR MESSAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.error-message {
  margin-bottom: 24px;
  padding: 12px 16px;
  border-radius: 12px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.2);
  color: #ef4444;
  font-size: 14px;
  text-align: center;
}

.success-message {
  margin-bottom: 24px;
  padding: 12px 16px;
  border-radius: 12px;
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(34, 197, 94, 0.2);
  color: #22c55e;
  font-size: 14px;
  text-align: center;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE DESIGN - MOBILE FIRST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Tablet */
@media (max-width: 768px) {
  .auth-container {
    max-width: 100%;
    padding: 0 20px;
  }
  
  .brand {
    margin-bottom: 32px;
  }
  
  .brand-logo {
    font-size: 36px;
    letter-spacing: 8px;
  }
  
  .brand-tagline {
    font-size: 11px;
    letter-spacing: 2px;
  }
  
  .auth-card {
    padding: 32px 24px;
    border-radius: 20px;
  }
  
  .auth-tabs {
    margin-bottom: 28px;
  }
  
  .auth-tab {
    padding: 10px 16px;
    font-size: 13px;
  }
  
  .input-group {
    margin-bottom: 20px;
  }
  
  .input-field {
    padding: 14px 16px;
    font-size: 15px;
  }
  
  .submit-btn {
    padding: 14px 24px;
    font-size: 14px;
  }
  
  .orb-1 {
    width: 250px;
    height: 250px;
    top: -125px;
    left: -50px;
  }
  
  .orb-2 {
    width: 200px;
    height: 200px;
    bottom: -100px;
    right: -50px;
  }
}

/* Mobile */
@media (max-width: 520px) {
  .auth-page {
    padding: 20px 0;
    align-items: flex-start;
    padding-top: 60px;
  }
  
  .auth-container {
    padding: 0 16px;
  }
  
  .brand {
    margin-bottom: 24px;
  }
  
  .brand-logo {
    font-size: 32px;
    letter-spacing: 6px;
  }
  
  .brand-logo::before {
    width: 30px;
    bottom: -6px;
  }
  
  .brand-tagline {
    margin-top: 12px;
    font-size: 10px;
    letter-spacing: 2px;
  }
  
  .auth-card {
    padding: 24px 20px;
    border-radius: 16px;
  }
  
  /* Auth card border animation - mobilde daha subtle */
  .auth-card::before,
  .auth-card::after {
    opacity: 0.4;
  }
  
  .auth-tabs {
    margin-bottom: 24px;
    gap: 4px;
  }
  
  .auth-tab {
    padding: 10px 12px;
    font-size: 13px;
  }
  
  .input-group {
    margin-bottom: 18px;
  }
  
  .input-label {
    font-size: 11px;
    margin-bottom: 6px;
  }
  
  .input-field {
    padding: 12px 14px;
    font-size: 16px; /* iOS zoom'u engellemek iÃ§in 16px */
    border-radius: 10px;
  }
  
  .input-icon {
    right: 12px;
  }
  
  .form-options {
    flex-direction: column;
    gap: 12px;
    align-items: flex-start;
  }
  
  .remember-label {
    font-size: 13px;
  }
  
  .forgot-link {
    font-size: 13px;
  }
  
  .submit-btn {
    padding: 14px 20px;
    font-size: 14px;
    border-radius: 10px;
  }
  
  .divider {
    margin: 24px 0;
  }
  
  .divider-text {
    font-size: 11px;
    padding: 0 12px;
  }
  
  .social-login {
    flex-direction: column;
    gap: 10px;
  }
  
  .social-btn {
    padding: 12px 16px;
    font-size: 13px;
    border-radius: 10px;
  }
  
  .auth-footer {
    margin-top: 24px;
  }
  
  .auth-footer p {
    font-size: 12px;
  }
  
  .error-message,
  .success-message {
    padding: 10px 14px;
    font-size: 13px;
    border-radius: 10px;
    margin-bottom: 20px;
  }
  
  /* Particles - mobilde daha az */
  .particle:nth-child(n+6) {
    display: none;
  }
  
  .orb-1 {
    width: 180px;
    height: 180px;
    top: -90px;
    left: -30px;
    filter: blur(60px);
  }
  
  .orb-2 {
    width: 150px;
    height: 150px;
    bottom: -75px;
    right: -30px;
    filter: blur(60px);
  }
}

/* Small Mobile */
@media (max-width: 375px) {
  .auth-page {
    padding-top: 40px;
  }
  
  .auth-container {
    padding: 0 12px;
  }
  
  .brand-logo {
    font-size: 28px;
    letter-spacing: 4px;
  }
  
  .auth-card {
    padding: 20px 16px;
  }
  
  .auth-tab {
    padding: 8px 10px;
    font-size: 12px;
  }
  
  .input-field {
    padding: 11px 12px;
  }
  
  .submit-btn {
    padding: 12px 16px;
    font-size: 13px;
  }
}

/* Landscape Mobile */
@media (max-height: 600px) and (orientation: landscape) {
  .auth-page {
    padding: 20px 0;
    align-items: flex-start;
  }
  
  .brand {
    margin-bottom: 16px;
  }
  
  .brand-logo {
    font-size: 28px;
  }
  
  .brand-tagline {
    display: none;
  }
  
  .auth-card {
    padding: 20px 24px;
  }
  
  .auth-tabs {
    margin-bottom: 16px;
  }
  
  .input-group {
    margin-bottom: 12px;
  }
  
  .divider {
    margin: 16px 0;
  }
  
  .social-login {
    flex-direction: row;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REGISTER FORM - MOBILE SPECIFIC
   KayÄ±t formunda daha fazla input olduÄŸundan Ã¶zel stiller
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Mobile - KayÄ±t formu iÃ§in compact stiller */
@media (max-width: 520px) {
  /* KayÄ±t paneli aktifken daha compact */
  .form-panels.show-register .input-group {
    margin-bottom: 14px;
  }
  
  .form-panels.show-register .input-field {
    padding: 11px 14px;
  }
  
  .form-panels.show-register .submit-btn {
    margin-top: 8px;
  }
  
  /* KayÄ±t iÃ§in scroll alanÄ± */
  .register-panel {
    max-height: calc(100vh - 200px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Password strength indicator - mobilde daha compact */
  .password-strength {
    margin-top: 6px;
    gap: 3px;
  }
  
  .strength-bar {
    height: 3px;
  }
  
  .password-requirements {
    margin-top: 8px;
    padding: 10px 12px;
    font-size: 11px;
  }
  
  .requirement-item {
    font-size: 11px;
    margin-bottom: 4px;
  }
}

/* Small Mobile - KayÄ±t formu */
@media (max-width: 375px) {
  .form-panels.show-register .input-group {
    margin-bottom: 12px;
  }
  
  .form-panels.show-register .input-label {
    font-size: 10px;
    margin-bottom: 5px;
  }
  
  .form-panels.show-register .input-field {
    padding: 10px 12px;
    font-size: 15px;
  }
  
  /* KayÄ±t footer daha compact */
  .register-panel .auth-footer {
    margin-top: 16px;
  }
  
  .register-panel .auth-footer p {
    font-size: 11px;
  }
}

/* Ã‡ok kÃ¼Ã§Ã¼k ekranlar iÃ§in (iPhone SE gibi) */
@media (max-height: 667px) and (max-width: 375px) {
  .auth-page {
    padding-top: 30px;
  }
  
  .brand {
    margin-bottom: 16px;
  }
  
  .brand-logo {
    font-size: 26px;
  }
  
  .brand-tagline {
    display: none;
  }
  
  .auth-card {
    padding: 18px 14px;
  }
  
  .auth-tabs {
    margin-bottom: 16px;
  }
  
  .auth-tab {
    padding: 8px;
    font-size: 11px;
  }
  
  .form-panels.show-register .input-group {
    margin-bottom: 10px;
  }
  
  .form-panels.show-register .input-field {
    padding: 9px 10px;
    font-size: 14px;
  }
  
  .submit-btn {
    padding: 11px 14px;
    font-size: 12px;
  }
  
  /* Social login gizle - yer kazanmak iÃ§in */
  .divider,
  .social-login {
    display: none;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REGISTER CHECKBOX - MOBILE
   KayÄ±t formundaki checkbox iÃ§in mobil optimizasyonlar
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* KayÄ±t formunda checkbox daha compact */
@media (max-width: 520px) {
  .register-panel .form-options {
    margin-bottom: 16px !important;
  }
  
  .register-panel .checkbox-wrapper {
    gap: 8px;
  }
  
  .register-panel .checkbox-input {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }
  
  .register-panel .checkbox-label {
    font-size: 12px;
    line-height: 1.4;
  }
}

@media (max-width: 375px) {
  .register-panel .checkbox-label {
    font-size: 11px;
  }
  
  .register-panel .checkbox-input {
    width: 15px;
    height: 15px;
  }
  
  .register-panel .checkbox-input:checked::after {
    top: 2px;
    left: 5px;
    width: 3px;
    height: 7px;
  }
}

/* Safe area for notched devices */
@supports (padding: max(0px)) {
  .auth-page {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
    padding-bottom: max(20px, env(safe-area-inset-bottom));
  }
}


========== saga.client\src\pages\glass\LoginPage.tsx ==========

import { useState } from 'react';
import { useNavigate, useSearchParams } from 'react-router-dom';
import { Eye, EyeOff, Loader2, User, Mail } from 'lucide-react';
import { supabase } from '../../services/supabase';
import './LoginPage.css';

// ============================================
// SAGA AUTH PAGE - VOID THEME
// ============================================

export default function LoginPage() {
  const [searchParams] = useSearchParams();
  const initialTab = searchParams.get('tab') === 'register' ? 'register' : 'login';
  const [activeTab, setActiveTab] = useState<'login' | 'register'>(initialTab);
  const [showPassword, setShowPassword] = useState(false);
  const [showRegisterPassword, setShowRegisterPassword] = useState(false);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [success, setSuccess] = useState('');
  const navigate = useNavigate();

  // Login form state
  const [loginEmail, setLoginEmail] = useState('');
  const [loginPassword, setLoginPassword] = useState('');
  const [rememberMe, setRememberMe] = useState(false);

  // Register form state
  const [registerName, setRegisterName] = useState('');
  const [registerUsername, setRegisterUsername] = useState('');
  const [registerEmail, setRegisterEmail] = useState('');
  const [registerPassword, setRegisterPassword] = useState('');
  const [registerPasswordConfirm, setRegisterPasswordConfirm] = useState('');
  const [acceptTerms, setAcceptTerms] = useState(false);

  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setError('');

    try {
      const { error } = await supabase.auth.signInWithPassword({
        email: loginEmail,
        password: loginPassword,
      });

      if (error) throw error;
      navigate('/');
    } catch (err: any) {
      // TÃ¼rkÃ§e hata mesajlarÄ±
      const msg = err.message?.toLowerCase() || '';
      if (msg.includes('invalid login credentials') || msg.includes('invalid_credentials')) {
        setError('E-posta veya ÅŸifre hatalÄ±.');
      } else if (msg.includes('email not confirmed')) {
        setError('E-posta adresiniz henÃ¼z doÄŸrulanmamÄ±ÅŸ. LÃ¼tfen e-postanÄ±zÄ± kontrol edin.');
      } else if (msg.includes('too many requests')) {
        setError('Ã‡ok fazla deneme yaptÄ±nÄ±z. LÃ¼tfen biraz bekleyin.');
      } else {
        setError(err.message || 'GiriÅŸ yapÄ±lÄ±rken hata oluÅŸtu.');
      }
    } finally {
      setLoading(false);
    }
  };

  const handleRegister = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!acceptTerms) {
      setError('KullanÄ±m ÅŸartlarÄ±nÄ± kabul etmelisiniz.');
      return;
    }

    if (registerPassword.length < 8) {
      setError('Åifre en az 8 karakter olmalÄ±dÄ±r.');
      return;
    }

    if (registerPassword !== registerPasswordConfirm) {
      setError('Åifreler eÅŸleÅŸmiyor.');
      return;
    }

    if (registerUsername.length < 3) {
      setError('KullanÄ±cÄ± adÄ± en az 3 karakter olmalÄ±dÄ±r.');
      return;
    }
    
    setLoading(true);
    setError('');

    try {
      const { error, data } = await supabase.auth.signUp({
        email: registerEmail,
        password: registerPassword,
        options: {
          data: {
            username: registerUsername,
            full_name: registerName || registerUsername,
          },
          emailRedirectTo: `${window.location.origin}/giris`
        }
      });

      if (error) throw error;

      // Supabase e-posta doÄŸrulamasÄ± aktifse
      if (data?.user?.identities?.length === 0) {
        setError('Bu e-posta adresi zaten kayÄ±tlÄ±.');
        return;
      }

      setSuccess('KayÄ±t baÅŸarÄ±lÄ±! E-posta adresinize doÄŸrulama linki gÃ¶nderdik. LÃ¼tfen e-postanÄ±zÄ± kontrol edin.');
      setActiveTab('login');
      // Formu temizle
      setRegisterName('');
      setRegisterUsername('');
      setRegisterEmail('');
      setRegisterPassword('');
      setRegisterPasswordConfirm('');
      setAcceptTerms(false);
    } catch (err: any) {
      // TÃ¼rkÃ§e hata mesajlarÄ±
      const msg = err.message?.toLowerCase() || '';
      if (msg.includes('already registered') || msg.includes('already exists')) {
        setError('Bu e-posta adresi zaten kullanÄ±mda.');
      } else if (msg.includes('password')) {
        setError('Åifre en az 8 karakter olmalÄ± ve gÃ¼Ã§lÃ¼ olmalÄ±dÄ±r.');
      } else if (msg.includes('email')) {
        setError('GeÃ§erli bir e-posta adresi girin.');
      } else {
        setError(err.message || 'KayÄ±t olurken hata oluÅŸtu.');
      }
    } finally {
      setLoading(false);
    }
  };

  const handleSocialLogin = async (provider: 'google' | 'github') => {
    try {
      const { error } = await supabase.auth.signInWithOAuth({
        provider,
        options: {
          redirectTo: window.location.origin
        }
      });
      if (error) throw error;
    } catch (err: any) {
      setError(err.message || 'Sosyal giriÅŸ yapÄ±lÄ±rken hata oluÅŸtu.');
    }
  };

  const switchTab = (tab: 'login' | 'register') => {
    setActiveTab(tab);
    setError('');
    setSuccess('');
  };

  return (
    <div className="auth-page">
      {/* Animated Background */}
      <div className="bg-canvas">
        <div className="bg-gradient"></div>
        <div className="orb orb-1"></div>
        <div className="orb orb-2"></div>
        {[...Array(10)].map((_, i) => (
          <div key={i} className="particle"></div>
        ))}
      </div>

      {/* Main Auth Container */}
      <div className="auth-container">
        {/* Brand */}
        <div className="brand">
          <h1 className="brand-logo">SAGA</h1>
          <p className="brand-tagline">Her Hikayenin Bir DestanÄ± Var</p>
        </div>

        {/* Auth Card */}
        <div className="auth-card">
          {/* Tab Navigation */}
          <div className={`auth-tabs ${activeTab === 'register' ? 'register-active' : ''}`}>
            <div className="tab-indicator"></div>
            <button 
              className={`auth-tab ${activeTab === 'login' ? 'active' : ''}`}
              onClick={() => switchTab('login')}
            >
              GiriÅŸ Yap
            </button>
            <button 
              className={`auth-tab ${activeTab === 'register' ? 'active' : ''}`}
              onClick={() => switchTab('register')}
            >
              KayÄ±t Ol
            </button>
          </div>

          {/* Error/Success Messages */}
          {error && <div className="error-message">{error}</div>}
          {success && <div className="success-message">{success}</div>}

          {/* Form Panels */}
          <div className={`form-panels ${activeTab === 'register' ? 'show-register' : ''}`}>
            {/* Login Panel */}
            <form 
              className={`form-panel login-panel ${activeTab !== 'login' ? 'hidden' : ''}`}
              onSubmit={handleLogin}
            >
              <div className="input-group">
                <label className="input-label">E-posta veya KullanÄ±cÄ± AdÄ±</label>
                <div className="input-wrapper">
                  <input 
                    type="text" 
                    className="input-field" 
                    placeholder="ornek@email.com" 
                    autoComplete="username"
                    value={loginEmail}
                    onChange={(e) => setLoginEmail(e.target.value)}
                    required
                  />
                  <User className="input-icon" size={20} />
                </div>
              </div>

              <div className="input-group">
                <label className="input-label">Åifre</label>
                <div className="input-wrapper">
                  <input 
                    type={showPassword ? 'text' : 'password'} 
                    className="input-field" 
                    placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
                    autoComplete="current-password"
                    value={loginPassword}
                    onChange={(e) => setLoginPassword(e.target.value)}
                    required
                  />
                  <button 
                    type="button" 
                    className="toggle-password"
                    onClick={() => setShowPassword(!showPassword)}
                  >
                    {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                  </button>
                </div>
              </div>

              <div className="form-options">
                <label className="checkbox-wrapper">
                  <input 
                    type="checkbox" 
                    className="checkbox-input"
                    checked={rememberMe}
                    onChange={(e) => setRememberMe(e.target.checked)}
                  />
                  <span className="checkbox-label">Beni hatÄ±rla</span>
                </label>
                <button 
                  type="button" 
                  className="forgot-link"
                  onClick={() => navigate('/sifre-sifirla')}
                >
                  Åifremi unuttum
                </button>
              </div>

              <button type="submit" className={`submit-btn ${loading ? 'loading' : ''}`} disabled={loading}>
                <span>
                  {loading ? (
                    <>
                      <Loader2 size={18} className="loading-spinner" />
                      GiriÅŸ YapÄ±lÄ±yor...
                    </>
                  ) : (
                    'GiriÅŸ Yap'
                  )}
                </span>
              </button>

              <div className="divider">
                <span className="divider-line"></span>
                <span className="divider-text">veya</span>
                <span className="divider-line"></span>
              </div>

              <div className="social-login">
                <button type="button" className="social-btn" onClick={() => handleSocialLogin('google')}>
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                  </svg>
                  Google
                </button>
                <button type="button" className="social-btn" onClick={() => handleSocialLogin('github')}>
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.341-3.369-1.341-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.163 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
                  </svg>
                  GitHub
                </button>
              </div>
            </form>

            {/* Register Panel */}
            <form 
              className={`form-panel register-panel ${activeTab !== 'register' ? 'hidden' : ''}`}
              onSubmit={handleRegister}
            >
              <div className="input-group">
                <label className="input-label">Ad Soyad</label>
                <div className="input-wrapper">
                  <input 
                    type="text" 
                    className="input-field" 
                    placeholder="AdÄ±nÄ±z SoyadÄ±nÄ±z" 
                    autoComplete="name"
                    value={registerName}
                    onChange={(e) => setRegisterName(e.target.value)}
                    required
                  />
                  <User className="input-icon" size={20} />
                </div>
              </div>

              <div className="input-group">
                <label className="input-label">KullanÄ±cÄ± AdÄ±</label>
                <div className="input-wrapper">
                  <input 
                    type="text" 
                    className="input-field" 
                    placeholder="KullanÄ±cÄ± adÄ±nÄ±z" 
                    autoComplete="username"
                    value={registerUsername}
                    onChange={(e) => setRegisterUsername(e.target.value)}
                    required
                  />
                  <span className="input-icon" style={{ fontSize: '16px', fontWeight: 600, color: 'rgba(255,255,255,0.4)' }}>@</span>
                </div>
              </div>

              <div className="input-group">
                <label className="input-label">E-posta</label>
                <div className="input-wrapper">
                  <input 
                    type="email" 
                    className="input-field" 
                    placeholder="ornek@email.com" 
                    autoComplete="email"
                    value={registerEmail}
                    onChange={(e) => setRegisterEmail(e.target.value)}
                    required
                  />
                  <Mail className="input-icon" size={20} />
                </div>
              </div>

              <div className="input-group">
                <label className="input-label">Åifre</label>
                <div className="input-wrapper">
                  <input 
                    type={showRegisterPassword ? 'text' : 'password'} 
                    className="input-field" 
                    placeholder="En az 8 karakter" 
                    autoComplete="new-password"
                    value={registerPassword}
                    onChange={(e) => setRegisterPassword(e.target.value)}
                    required
                    minLength={8}
                  />
                  <button 
                    type="button" 
                    className="toggle-password"
                    onClick={() => setShowRegisterPassword(!showRegisterPassword)}
                  >
                    {showRegisterPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                  </button>
                </div>
              </div>

              <div className="input-group">
                <label className="input-label">Åifre TekrarÄ±</label>
                <div className="input-wrapper">
                  <input 
                    type={showRegisterPassword ? 'text' : 'password'} 
                    className="input-field" 
                    placeholder="Åifrenizi tekrar girin" 
                    autoComplete="new-password"
                    value={registerPasswordConfirm}
                    onChange={(e) => setRegisterPasswordConfirm(e.target.value)}
                    required
                    minLength={8}
                  />
                  <button 
                    type="button" 
                    className="toggle-password"
                    onClick={() => setShowRegisterPassword(!showRegisterPassword)}
                  >
                    {showRegisterPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                  </button>
                </div>
              </div>

              <div className="form-options" style={{ marginBottom: '24px' }}>
                <label className="checkbox-wrapper">
                  <input 
                    type="checkbox" 
                    className="checkbox-input"
                    checked={acceptTerms}
                    onChange={(e) => setAcceptTerms(e.target.checked)}
                    required
                  />
                  <span className="checkbox-label">
                    <button 
                      type="button"
                      style={{ 
                        color: 'var(--gold)', 
                        background: 'none', 
                        border: 'none', 
                        padding: 0, 
                        cursor: 'pointer',
                        textDecoration: 'underline',
                        font: 'inherit'
                      }}
                      onClick={(e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        alert('KullanÄ±m ÅŸartlarÄ± sayfasÄ± yakÄ±nda eklenecektir.');
                      }}
                    >
                      KullanÄ±m ÅŸartlarÄ±nÄ±
                    </button> kabul ediyorum
                  </span>
                </label>
              </div>

              <button type="submit" className={`submit-btn ${loading ? 'loading' : ''}`} disabled={loading}>
                <span>
                  {loading ? (
                    <>
                      <Loader2 size={18} className="loading-spinner" />
                      Hesap OluÅŸturuluyor...
                    </>
                  ) : (
                    'Hesap OluÅŸtur'
                  )}
                </span>
              </button>

              <div className="divider">
                <span className="divider-line"></span>
                <span className="divider-text">veya</span>
                <span className="divider-line"></span>
              </div>

              <div className="social-login">
                <button type="button" className="social-btn" onClick={() => handleSocialLogin('google')} style={{ flex: 1 }}>
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                  </svg>
                  Google ile Kaydol
                </button>
              </div>
            </form>
          </div>
        </div>

        {/* Footer */}
        <div className="auth-footer">
          <p>Â© 2024 Saga. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
        </div>
      </div>
    </div>
  );
}


========== saga.client\src\pages\glass\NotificationsPage.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SAGA NOTIFICATIONS PAGE - Yeni TasarÄ±m
   Global PageHeader ile uyumlu stiller
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.notifications-page {
  min-height: 100vh;
  background: var(--void);
  padding-top: 0; /* Gereksiz boÅŸluk kaldÄ±rÄ±ldÄ± */
  padding-bottom: 100px; /* Floating nav iÃ§in */
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE ACTIONS (Header kaldÄ±rÄ±ldÄ±, aksiyonlar tabs satÄ±rÄ±na taÅŸÄ±ndÄ±)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.notif-page-actions {
  display: flex;
  gap: 8px;
}

.notif-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 10px;
  color: var(--void-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.notif-action-btn:hover {
  background: var(--gold-glow);
  border-color: var(--gold);
  color: var(--gold);
}

.notif-action-btn.delete:hover {
  background: rgba(239, 68, 68, 0.15);
  border-color: rgba(239, 68, 68, 0.4);
  color: #ef4444;
}

.notif-action-btn svg {
  width: 18px;
  height: 18px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTER TABS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.notif-tabs-container {
  background: var(--void);
  border-bottom: 1px solid var(--void-border);
}

.notif-tabs-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  max-width: 800px;
  margin: 0 auto;
  padding: 8px 20px;
  gap: 16px;
}

.notif-tabs {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.notif-tabs::-webkit-scrollbar {
  display: none;
}

.notif-tab {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  background: transparent;
  border: 1px solid var(--void-border);
  border-radius: 25px;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.notif-tab:hover {
  background: rgba(var(--gold-rgb), 0.05);
  border-color: rgba(var(--gold-rgb), 0.2);
  color: var(--text-primary);
}

.notif-tab.active {
  background: linear-gradient(135deg, rgba(var(--gold-rgb), 0.15), rgba(var(--gold-rgb), 0.05));
  border-color: var(--gold);
  color: var(--gold);
}

.tab-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  background: rgba(239, 68, 68, 0.2);
  border-radius: 10px;
  font-size: 0.7rem;
  font-weight: 600;
  color: #ef4444;
}

.notif-tab.active .tab-count {
  background: rgba(var(--gold-rgb), 0.2);
  color: var(--gold);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.notif-content {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}

/* Loading State */
.notif-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 60px 20px;
  color: var(--text-secondary);
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--void-border);
  border-top-color: var(--gold);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Empty State */
.notif-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 80px 20px;
}

.notif-empty-state .empty-icon {
  width: 80px;
  height: 80px;
  margin-bottom: 24px;
  color: var(--text-muted);
  opacity: 0.5;
}

.notif-empty-state .empty-icon svg {
  width: 100%;
  height: 100%;
}

.notif-empty-state h3 {
  font-size: 1.3rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 8px 0;
}

.notif-empty-state p {
  font-size: 0.95rem;
  color: var(--text-secondary);
  margin: 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NOTIFICATION LIST & CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.notif-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.notif-card {
  position: relative;
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 16px;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.notif-card:hover {
  background: rgba(var(--gold-rgb), 0.03);
  border-color: rgba(var(--gold-rgb), 0.15);
  transform: translateY(-1px);
}

.notif-card.unread {
  background: rgba(var(--gold-rgb), 0.05);
  border-color: rgba(var(--gold-rgb), 0.2);
}

.unread-indicator {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 60%;
  background: linear-gradient(180deg, var(--gold), #d4a853);
  border-radius: 0 4px 4px 0;
}

/* Avatar */
.notif-avatar {
  position: relative;
  flex-shrink: 0;
  width: 48px;
  height: 48px;
}

.notif-avatar img {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--void-border);
}

.notif-avatar-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--void-elevated);
  border: 2px solid var(--void-border);
  border-radius: 50%;
}

.notif-avatar-icon svg {
  width: 24px;
  height: 24px;
  color: var(--text-secondary);
}

.type-badge {
  position: absolute;
  bottom: -2px;
  right: -2px;
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--void);
  border: 2px solid var(--void-border);
  border-radius: 50%;
}

.type-badge svg {
  width: 12px;
  height: 12px;
}

.type-badge.takip svg,
.type-badge.yeni_takipci svg { color: #3b82f6; }
.type-badge.begeni svg { color: #ef4444; }
.type-badge.yorum svg { color: #22c55e; }
.type-badge.liste svg,
.type-badge.listeye_ekleme svg { color: #a855f7; }
.type-badge.puanlama svg { color: var(--gold); }

/* Notification Type Icons */
.notif-type-icon {
  width: 24px;
  height: 24px;
}

.notif-type-icon.follow { color: #3b82f6; }
.notif-type-icon.like { color: #ef4444; }
.notif-type-icon.comment { color: #22c55e; }
.notif-type-icon.list { color: #a855f7; }
.notif-type-icon.rating { color: var(--gold); }
.notif-type-icon.default { color: var(--text-secondary); }

/* Body */
.notif-body {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.notif-main {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.notif-title {
  font-size: 0.95rem;
  font-weight: 500;
  color: var(--text-primary);
  margin: 0;
  line-height: 1.4;
}

.notif-card.unread .notif-title {
  font-weight: 600;
}

.notif-message {
  font-size: 0.85rem;
  color: var(--text-secondary);
  margin: 0;
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.notif-sender {
  font-size: 0.8rem;
  color: var(--gold);
  opacity: 0.8;
}

.notif-time {
  font-size: 0.75rem;
  color: var(--text-muted);
}

/* Actions */
.notif-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.notif-card:hover .notif-actions {
  opacity: 1;
}

.notif-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  color: var(--text-secondary);
  transition: all 0.2s ease;
}

.notif-action-btn:hover {
  background: rgba(var(--gold-rgb), 0.1);
  color: var(--gold);
}

.notif-action-btn.mark-read:hover {
  background: rgba(34, 197, 94, 0.1);
  color: #22c55e;
}

.notif-action-btn.delete:hover {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.notif-action-btn svg {
  width: 18px;
  height: 18px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGINATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.notif-pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-top: 32px;
  padding: 20px;
}

.pagination-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.pagination-btn:hover:not(:disabled) {
  background: rgba(var(--gold-rgb), 0.1);
  border-color: rgba(var(--gold-rgb), 0.2);
  color: var(--gold);
}

.pagination-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.pagination-btn svg {
  width: 18px;
  height: 18px;
}

.pagination-info {
  font-size: 0.9rem;
  color: var(--text-muted);
  min-width: 60px;
  text-align: center;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FLOATING NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.floating-nav {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: rgba(17, 17, 20, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 50px;
  border: 1px solid var(--void-border);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  z-index: 1000;
}

.nav-logo {
  font-family: 'Cinzel', serif;
  font-size: 1rem;
  font-weight: 600;
  color: var(--gold);
  letter-spacing: 0.1em;
  padding: 0 12px;
  border-right: 1px solid var(--void-border);
  margin-right: 4px;
  text-decoration: none;
}

.nav-item {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: transparent;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  text-decoration: none;
}

.nav-item svg {
  width: 22px;
  height: 22px;
  color: var(--text-muted);
  transition: all 0.3s ease;
}

.nav-item:hover {
  background: rgba(255, 255, 255, 0.05);
}

.nav-item:hover svg {
  color: var(--text-secondary);
}

.nav-item.active {
  background: var(--gold);
}

.nav-item.active svg {
  color: var(--void);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOBILE RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

@media (max-width: 640px) {
  .notifications-page {
    padding-top: 60px;
  }

  .notif-tabs-container {
    top: 56px;
  }

  .notif-tabs {
    padding: 10px 16px;
  }

  .notif-tab {
    padding: 8px 16px;
    font-size: 0.85rem;
  }

  .notif-content {
    padding: 16px;
  }

  .notif-card {
    padding: 14px;
    gap: 12px;
  }

  .notif-avatar,
  .notif-avatar img,
  .notif-avatar-icon {
    width: 44px;
    height: 44px;
  }

  .notif-title {
    font-size: 0.9rem;
  }

  .notif-message {
    font-size: 0.8rem;
  }

  /* Always show actions on mobile */
  .notif-actions {
    opacity: 1;
  }

  .notif-action-btn {
    width: 28px;
    height: 28px;
  }

  .notif-action-btn svg {
    width: 16px;
    height: 16px;
  }

  .notif-pagination {
    flex-wrap: wrap;
    gap: 12px;
  }

  .pagination-btn {
    padding: 8px 16px;
    font-size: 0.85rem;
  }

  /* Floating nav mobile */
  .floating-nav {
    bottom: 16px;
    padding: 10px 12px;
    gap: 4px;
  }

  .nav-logo {
    font-size: 0.85rem;
    padding: 0 10px;
  }

  .nav-item {
    width: 40px;
    height: 40px;
  }

  .nav-item svg {
    width: 20px;
    height: 20px;
  }
}


========== saga.client\src\pages\glass\NotificationsPage.tsx ==========

import { useState, useEffect, useCallback } from 'react';
import { useNavigate } from 'react-router-dom';
import { bildirimApi, type Bildirim } from '../../services/api';
import { formatDistanceToNow } from 'date-fns';
import { tr } from 'date-fns/locale';
import './NotificationsPage.css';

// Sidebar'daki bildirim sayÄ±sÄ±nÄ± yenilemek iÃ§in global refresh fonksiyonu
export let refreshSidebarBildirim: (() => void) | null = null;
export const setRefreshSidebarBildirim = (fn: () => void) => { refreshSidebarBildirim = fn; };

export default function NotificationsPage() {
    const navigate = useNavigate();
    const [bildirimler, setBildirimler] = useState<Bildirim[]>([]);
    const [loading, setLoading] = useState(true);
    const [sayfa, setSayfa] = useState(1);
    const [toplamSayfa, setToplamSayfa] = useState(1);
    const [filter, setFilter] = useState<'all' | 'unread'>('all');

    const fetchBildirimler = useCallback(async (currentSayfa: number, currentFilter: 'all' | 'unread') => {
        try {
            setLoading(true);
            if (currentFilter === 'unread') {
                const response = await bildirimApi.getOkunmamis();
                setBildirimler(response.bildirimler);
                setToplamSayfa(1);
            } else {
                const response = await bildirimApi.getBildirimler({ sayfa: currentSayfa, limit: 20 });
                setBildirimler(response.bildirimler);
                setToplamSayfa(response.toplamSayfa);
            }
        } catch (err) {
            console.error('Bildirimler yÃ¼klenemedi:', err);
        } finally {
            setLoading(false);
        }
    }, []);

    useEffect(() => {
        fetchBildirimler(sayfa, filter);
    }, [sayfa, filter, fetchBildirimler]);

    const handleOkunduIsaretle = async (id: number, e?: React.MouseEvent) => {
        e?.stopPropagation();
        try {
            await bildirimApi.okunduIsaretle(id);
            setBildirimler(prev => prev.map(b => b.id === id ? { ...b, okundu: true } : b));
            refreshSidebarBildirim?.();
        } catch (err) {
            console.error('Okundu iÅŸaretlenemedi:', err);
        }
    };

    const handleTumunuOkunduIsaretle = async () => {
        try {
            await bildirimApi.tumunuOkunduIsaretle();
            setBildirimler(prev => prev.map(b => ({ ...b, okundu: true })));
            refreshSidebarBildirim?.();
        } catch (err) {
            console.error('TÃ¼mÃ¼ okundu iÅŸaretlenemedi:', err);
        }
    };

    const handleSil = async (id: number, e?: React.MouseEvent) => {
        e?.stopPropagation();
        try {
            await bildirimApi.sil(id);
            setBildirimler(prev => prev.filter(b => b.id !== id));
            refreshSidebarBildirim?.();
        } catch (err) {
            console.error('Bildirim silinemedi:', err);
        }
    };

    const handleTumunuSil = async () => {
        try {
            await bildirimApi.tumunuSil();
            setBildirimler([]);
            refreshSidebarBildirim?.();
        } catch (err) {
            console.error('Bildirimler silinemedi:', err);
        }
    };

    const handleBildirimClick = (bildirim: Bildirim) => {
        if (!bildirim.okundu) {
            handleOkunduIsaretle(bildirim.id);
        }
        if (bildirim.linkUrl) {
            navigate(bildirim.linkUrl);
        }
    };

    const getBildirimIcon = (tip: string) => {
        switch (tip) {
            case 'takip':
            case 'yeni_takipci':
                return (
                    <svg className="notif-type-icon follow" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                    </svg>
                );
            case 'begeni':
                return (
                    <svg className="notif-type-icon like" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                    </svg>
                );
            case 'yorum':
                return (
                    <svg className="notif-type-icon comment" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                    </svg>
                );
            case 'liste':
            case 'listeye_ekleme':
                return (
                    <svg className="notif-type-icon list" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                    </svg>
                );
            case 'puanlama':
                return (
                    <svg className="notif-type-icon rating" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                    </svg>
                );
            default:
                return (
                    <svg className="notif-type-icon default" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                    </svg>
                );
        }
    };

    const formatTime = (dateStr: string) => {
        return formatDistanceToNow(new Date(dateStr), { addSuffix: true, locale: tr });
    };

    const okunmamisSayisi = bildirimler.filter(b => !b.okundu).length;

    return (
        <div className="notifications-page">
            {/* Filter Tabs & Actions */}
            <div className="notif-tabs-container">
                <div className="notif-tabs-row">
                    <div className="notif-tabs">
                        <button
                            onClick={() => { setFilter('all'); setSayfa(1); }}
                            className={`notif-tab ${filter === 'all' ? 'active' : ''}`}
                        >
                            TÃ¼mÃ¼
                        </button>
                        <button
                            onClick={() => { setFilter('unread'); setSayfa(1); }}
                            className={`notif-tab ${filter === 'unread' ? 'active' : ''}`}
                        >
                            OkunmamÄ±ÅŸ
                            {okunmamisSayisi > 0 && <span className="tab-count">{okunmamisSayisi}</span>}
                        </button>
                    </div>
                    <div className="notif-page-actions">
                        <button 
                            className="notif-action-btn"
                            onClick={handleTumunuOkunduIsaretle}
                            title="TÃ¼mÃ¼nÃ¼ okundu iÅŸaretle"
                        >
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </button>
                        <button 
                            className="notif-action-btn delete"
                            onClick={handleTumunuSil}
                            title="TÃ¼mÃ¼nÃ¼ sil"
                        >
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            {/* Main Content */}
            <main className="notif-content">
                {loading ? (
                    <div className="notif-skeleton-list">
                        {[1, 2, 3, 4, 5].map((i) => (
                            <div key={i} className="notif-skeleton-item">
                                <div className="skeleton-icon shimmer"></div>
                                <div className="skeleton-text-group">
                                    <div className="skeleton-line lg shimmer"></div>
                                    <div className="skeleton-line sm shimmer"></div>
                                </div>
                            </div>
                        ))}
                    </div>
                ) : bildirimler.length === 0 ? (
                    <div className="notif-empty-state">
                        <div className="empty-icon">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                            </svg>
                        </div>
                        <h3>Bildirim Yok</h3>
                        <p>
                            {filter === 'unread'
                                ? 'OkunmamÄ±ÅŸ bildiriminiz bulunmuyor.'
                                : 'HenÃ¼z bildiriminiz bulunmuyor.'}
                        </p>
                    </div>
                ) : (
                    <div className="notif-list">
                        {bildirimler.map((bildirim) => (
                            <article
                                key={bildirim.id}
                                className={`notif-card ${!bildirim.okundu ? 'unread' : ''}`}
                                onClick={() => handleBildirimClick(bildirim)}
                            >
                                {/* Unread indicator */}
                                {!bildirim.okundu && <div className="unread-indicator"></div>}
                                
                                {/* Avatar / Icon */}
                                <div className="notif-avatar">
                                    {bildirim.gonderen?.avatarUrl ? (
                                        <img 
                                            src={bildirim.gonderen.avatarUrl} 
                                            alt={bildirim.gonderen.kullaniciAdi}
                                            onError={(e) => { (e.target as HTMLImageElement).src = '/default-avatar.svg'; }}
                                        />
                                    ) : (
                                        <div className="notif-avatar-icon">
                                            {getBildirimIcon(bildirim.tip)}
                                        </div>
                                    )}
                                    {/* Type badge */}
                                    <div className={`type-badge ${bildirim.tip}`}>
                                        {getBildirimIcon(bildirim.tip)}
                                    </div>
                                </div>

                                {/* Content */}
                                <div className="notif-body">
                                    <div className="notif-main">
                                        {bildirim.baslik && (
                                            <p className="notif-title">{bildirim.baslik}</p>
                                        )}
                                        {bildirim.mesaj && (
                                            <p className="notif-message">{bildirim.mesaj}</p>
                                        )}
                                        {bildirim.gonderen && (
                                            <span className="notif-sender">@{bildirim.gonderen.kullaniciAdi}</span>
                                        )}
                                    </div>
                                    <span className="notif-time">{formatTime(bildirim.olusturulmaZamani)}</span>
                                </div>

                                {/* Actions */}
                                <div className="notif-actions">
                                    {!bildirim.okundu && (
                                        <button
                                            className="notif-action-btn mark-read"
                                            onClick={(e) => handleOkunduIsaretle(bildirim.id, e)}
                                            title="Okundu iÅŸaretle"
                                        >
                                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7"/>
                                            </svg>
                                        </button>
                                    )}
                                    <button
                                        className="notif-action-btn delete"
                                        onClick={(e) => handleSil(bildirim.id, e)}
                                        title="Sil"
                                    >
                                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                        </svg>
                                    </button>
                                </div>
                            </article>
                        ))}
                    </div>
                )}

                {/* Pagination */}
                {!loading && toplamSayfa > 1 && filter === 'all' && (
                    <div className="notif-pagination">
                        <button
                            onClick={() => setSayfa(s => Math.max(1, s - 1))}
                            disabled={sayfa === 1}
                            className="pagination-btn"
                        >
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7"/>
                            </svg>
                            Ã–nceki
                        </button>
                        <span className="pagination-info">{sayfa} / {toplamSayfa}</span>
                        <button
                            onClick={() => setSayfa(s => Math.min(toplamSayfa, s + 1))}
                            disabled={sayfa === toplamSayfa}
                            className="pagination-btn"
                        >
                            Sonraki
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                )}
            </main>
        </div>
    );
}


========== saga.client\src\pages\glass\ProfilePage.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SAGA PROFILE PAGE - Void Theme
   Gold accent, glass effects, dark aesthetic
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.profile-page {
  min-height: 100vh;
  background: var(--void, #030304);
  padding-bottom: 100px; /* Floating nav iÃ§in */
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE HERO SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.profile-hero {
  position: relative;
  padding-top: 0; /* Removed top padding */
}

.profile-cover {
  height: 160px;
  background: linear-gradient(135deg, var(--void-surface, #111115) 0%, var(--void, #030304) 50%, rgba(212, 168, 83, 0.15) 100%);
  position: relative;
  overflow: hidden;
}

.profile-cover::before {
  content: '';
  position: absolute;
  inset: 0;
  background: url('https://image.tmdb.org/t/p/w1280/8cdWjvZQUExUUTzyp4t6EDMubfO.jpg') center/cover;
  opacity: 0.15;
  filter: blur(20px);
}

.profile-cover::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 100px;
  background: linear-gradient(to top, var(--void, #030304) 0%, transparent 100%);
}

.profile-info {
  position: relative;
  padding: 0 20px;
  margin-top: -60px;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

/* Avatar */
.profile-avatar-wrapper {
  position: relative;
  width: 120px;
  margin-bottom: 16px;
}

.profile-avatar {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  overflow: hidden;
  border: 4px solid var(--void, #030304);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  background: linear-gradient(135deg, #d4af37 0%, #b8943f 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.profile-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.profile-avatar-letter {
  font-family: 'Cinzel', serif;
  font-size: 3rem;
  font-weight: 700;
  color: var(--void, #030304);
}

.profile-badge {
  position: absolute;
  bottom: 4px;
  right: 4px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #d4af37, #b8943f);
  border: 3px solid var(--void, #030304);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--void, #030304);
}

.profile-badge svg {
  width: 16px;
  height: 16px;
}

/* Profile Details */
.profile-details {
  margin-bottom: 20px;
}

.profile-name {
  font-family: 'Cinzel', serif;
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--text-primary, #ffffff);
  margin-bottom: 4px;
}

.profile-username {
  font-size: 1rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  margin-bottom: 12px;
}

.profile-bio {
  font-size: 0.95rem;
  color: var(--text-secondary, rgba(255, 255, 255, 0.85));
  line-height: 1.6;
  margin-bottom: 16px;
}

.profile-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  font-size: 0.85rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.profile-meta-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.profile-meta-item svg {
  width: 16px;
  height: 16px;
}

/* Profile Stats */
.profile-stats {
  display: flex;
  gap: 32px;
  padding: 20px 0;
  border-top: 1px solid var(--void-border, #25252d);
  border-bottom: 1px solid var(--void-border, #25252d);
  margin: 20px 0;
}

.profile-stat {
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.profile-stat:hover .stat-value {
  color: #d4af37;
}

.stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary, #ffffff);
  transition: color 0.3s ease;
}

.stat-label {
  font-size: 0.8rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

/* Profile Actions */
.profile-actions {
  display: flex;
  gap: 12px;
}

.profile-btn {
  flex: 1;
  padding: 12px 24px;
  font-size: 0.9rem;
  font-weight: 600;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  border: none;
}

.profile-btn svg {
  width: 18px;
  height: 18px;
}

.profile-btn-primary {
  background: linear-gradient(135deg, #d4af37 0%, #b8943f 100%);
  color: var(--void, #030304);
}

.profile-btn-primary:hover {
  box-shadow: 0 0 20px rgba(212, 168, 83, 0.3);
  transform: translateY(-2px);
}

.profile-btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.profile-btn-secondary {
  background: transparent;
  border: 1px solid var(--void-border, #25252d);
  color: var(--text-secondary, rgba(255, 255, 255, 0.85));
}

.profile-btn-secondary:hover {
  border-color: #b8943f;
  color: #d4af37;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.profile-main-content {
  padding: 24px 20px 0;
  max-width: 800px;
  margin: 0 auto;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WATCH STATS CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.watch-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 24px;
}

.watch-stat-card {
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 16px;
  padding: 20px 16px;
  text-align: center;
  transition: all 0.3s ease;
}

.watch-stat-card:hover {
  border-color: #b8943f;
  transform: translateY(-2px);
}

.watch-stat-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto 12px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.watch-stat-icon svg {
  width: 24px;
  height: 24px;
}

.watch-stat-icon.films {
  background: rgba(59, 130, 246, 0.15);
  color: #3b82f6;
}

.watch-stat-icon.series {
  background: rgba(168, 85, 247, 0.15);
  color: #a855f7;
}

.watch-stat-icon.books {
  background: rgba(34, 197, 94, 0.15);
  color: #22c55e;
}

.watch-stat-value {
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--text-primary, #ffffff);
  line-height: 1;
  margin-bottom: 4px;
}

.watch-stat-label {
  font-size: 0.8rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.watch-stat-sub {
  font-size: 0.7rem;
  color: #d4af37;
  margin-top: 4px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION STYLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.profile-section {
  margin-bottom: 24px;
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.section-title {
  font-family: 'Cinzel', serif;
  font-size: 1.15rem;
  font-weight: 600;
  color: var(--text-primary, #ffffff);
}

.section-link {
  font-size: 0.85rem;
  color: #d4af37;
  display: flex;
  align-items: center;
  gap: 4px;
  transition: all 0.3s ease;
  cursor: pointer;
  background: none;
  border: none;
}

.section-link:hover {
  color: #e5c378;
}

.section-link svg {
  width: 16px;
  height: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE TABS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.profile-tabs {
  display: flex;
  border-bottom: 1px solid var(--void-border, #25252d);
  margin-bottom: 24px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.profile-tabs::-webkit-scrollbar {
  display: none;
}

.profile-tab {
  flex-shrink: 0;
  padding: 14px 20px;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  cursor: pointer;
  border: none;
  background: none;
  border-bottom: 2px solid transparent;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.profile-tab:hover {
  color: var(--text-secondary, rgba(255, 255, 255, 0.85));
}

.profile-tab.active {
  color: #d4af37;
  border-bottom-color: #d4af37;
}

.profile-tab svg {
  width: 16px;
  height: 16px;
}

.tab-count {
  font-size: 0.75rem;
  padding: 2px 6px;
  background: rgba(212, 175, 55, 0.15);
  border-radius: 10px;
  color: #d4af37;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACHIEVEMENTS/BADGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.achievements-grid {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: 8px;
}

.achievements-grid::-webkit-scrollbar {
  display: none;
}

.achievement-card {
  flex-shrink: 0;
  width: 100px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.achievement-card:hover {
  transform: scale(1.05);
}

.achievement-icon {
  width: 64px;
  height: 64px;
  margin: 0 auto 10px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  font-size: 28px;
}

.achievement-icon.gold {
  background: linear-gradient(135deg, #d4af37 0%, #b8943f 100%);
  box-shadow: 0 4px 20px rgba(212, 168, 83, 0.3);
}

.achievement-icon.silver {
  background: linear-gradient(135deg, #a8a8a8 0%, #6b6b6b 100%);
  box-shadow: 0 4px 20px rgba(168, 168, 168, 0.2);
}

.achievement-icon.bronze {
  background: linear-gradient(135deg, #cd7f32 0%, #8b4513 100%);
  box-shadow: 0 4px 20px rgba(205, 127, 50, 0.2);
}

.achievement-icon.locked {
  background: var(--void-surface, #111115);
  border: 2px dashed var(--void-border, #25252d);
  opacity: 0.5;
}

.achievement-icon.locked::after {
  content: 'ğŸ”’';
  font-size: 16px;
  position: absolute;
  bottom: -4px;
  right: -4px;
}

.achievement-name {
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--text-primary, #ffffff);
  margin-bottom: 2px;
}

.achievement-desc {
  font-size: 0.65rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GENRE CHART
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.genre-chart {
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 16px;
  padding: 20px;
}

.genre-bars {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.genre-bar-item {
  display: flex;
  align-items: center;
  gap: 12px;
}

.genre-bar-label {
  width: 80px;
  font-size: 0.8rem;
  color: var(--text-secondary, rgba(255, 255, 255, 0.85));
}

.genre-bar-wrapper {
  flex: 1;
  height: 8px;
  background: var(--void-border, #25252d);
  border-radius: 4px;
  overflow: hidden;
}

.genre-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.8s ease;
}

.genre-bar-fill.sci-fi { background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%); }
.genre-bar-fill.action { background: linear-gradient(90deg, #ef4444 0%, #f97316 100%); }
.genre-bar-fill.drama { background: linear-gradient(90deg, #22c55e 0%, #10b981 100%); }
.genre-bar-fill.comedy { background: linear-gradient(90deg, #f59e0b 0%, #eab308 100%); }
.genre-bar-fill.horror { background: linear-gradient(90deg, #6b21a8 0%, #9333ea 100%); }
.genre-bar-fill.film { background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%); }
.genre-bar-fill.dizi { background: linear-gradient(90deg, #a855f7 0%, #c084fc 100%); }
.genre-bar-fill.kitap { background: linear-gradient(90deg, #22c55e 0%, #4ade80 100%); }

.genre-bar-value {
  width: 40px;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-primary, #ffffff);
  text-align: right;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RECENT WATCHES / FAVORITES GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.recent-grid {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: 8px;
}

.recent-grid::-webkit-scrollbar {
  display: none;
}

.recent-card {
  flex-shrink: 0;
  width: 130px;
  cursor: pointer;
  transition: transform 0.3s ease;
  text-decoration: none;
}

.recent-card:hover {
  transform: scale(1.03);
}

.recent-poster {
  aspect-ratio: 2/3;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 10px;
  position: relative;
  background: var(--void-surface, #111115);
}

.recent-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.recent-rating {
  position: absolute;
  bottom: 8px;
  left: 8px;
  padding: 4px 8px;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(4px);
  border-radius: 6px;
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  color: #d4af37;
}

.recent-rating svg {
  width: 12px;
  height: 12px;
  fill: #d4af37;
}

.recent-title {
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text-primary, #ffffff);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 2px;
}

.recent-date {
  font-size: 0.7rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

/* Favorites Grid */
.favorites-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

.favorite-item {
  aspect-ratio: 2/3;
  border-radius: 12px;
  overflow: hidden;
  position: relative;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.favorite-item:hover {
  transform: scale(1.05);
}

.favorite-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.favorite-rank {
  position: absolute;
  top: 8px;
  left: 8px;
  width: 24px;
  height: 24px;
  background: #d4af37;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Cinzel', serif;
  font-size: 0.8rem;
  font-weight: 700;
  color: var(--void, #030304);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIVITY TIMELINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.activity-timeline {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.activity-item {
  display: flex;
  gap: 16px;
  padding: 16px 0;
  border-bottom: 1px solid var(--void-border, #25252d);
  transition: all 0.3s ease;
  cursor: pointer;
}

.activity-item:last-child {
  border-bottom: none;
}

.activity-item:hover {
  background: var(--void-surface, #111115);
  margin: 0 -12px;
  padding: 16px 12px;
  border-radius: 12px;
}

.profile-page .activity-poster {
  width: 80px;
  height: 120px;
  border-radius: 10px;
  overflow: hidden;
  flex-shrink: 0;
  background: var(--void-surface, #111115);
}

.profile-page .activity-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.activity-content {
  flex: 1;
  min-width: 0;
}

.activity-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.activity-type {
  padding: 3px 8px;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 4px;
}

.activity-type.watched { background: rgba(34, 197, 94, 0.15); color: #22c55e; }
.activity-type.rated { background: rgba(212, 168, 83, 0.15); color: #d4af37; }
.activity-type.reviewed { background: rgba(59, 130, 246, 0.15); color: #3b82f6; }
.activity-type.listed { background: rgba(168, 85, 247, 0.15); color: #a855f7; }

.activity-time {
  font-size: 0.75rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.activity-title {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-primary, #ffffff);
  margin-bottom: 4px;
}

.activity-detail {
  font-size: 0.8rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.activity-detail .stars {
  color: #d4af37;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOLLOWERS PREVIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.followers-preview {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.followers-preview:hover {
  border-color: #b8943f;
}

.followers-avatars {
  display: flex;
}

.followers-avatars img {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid var(--void-surface, #111115);
  margin-left: -12px;
  object-fit: cover;
}

.followers-avatars img:first-child {
  margin-left: 0;
}

.followers-info {
  flex: 1;
}

.followers-text {
  font-size: 0.9rem;
  color: var(--text-primary, #ffffff);
}

.followers-names {
  font-size: 0.8rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.followers-arrow {
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.followers-arrow svg {
  width: 20px;
  height: 20px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT GRID (Library Items)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.content-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

.content-item {
  aspect-ratio: 2/3;
  border-radius: 12px;
  overflow: hidden;
  position: relative;
  cursor: pointer;
  transition: transform 0.3s ease;
  background: var(--void-surface, #111115);
}

.content-item:hover {
  transform: scale(1.03);
}

.content-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.content-item-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.content-item-status {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
}

.content-item-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 50%);
  opacity: 0;
  transition: opacity 0.3s ease;
  display: flex;
  align-items: flex-end;
  padding: 12px;
}

.content-item:hover .content-item-overlay {
  opacity: 1;
}

.content-item-title {
  font-size: 0.8rem;
  font-weight: 500;
  color: #fff;
  line-clamp: 2;
  -webkit-line-clamp: 2;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LISTS GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.lists-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  width: 100%;
}

/* Tablet */
@media (max-width: 900px) {
  .lists-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }
}

/* Mobile */
@media (max-width: 600px) {
  .lists-grid {
    grid-template-columns: 1fr;
    gap: 8px;
  }
}

.list-card {
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 12px;
  padding: 14px 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
  box-sizing: border-box;
}

.list-card:hover {
  border-color: #b8943f;
  transform: translateY(-2px);
}

.list-card-header {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.list-card-icon {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: rgba(212, 168, 83, 0.12);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #d4af37;
  flex-shrink: 0;
}

.list-card-icon svg {
  width: 20px;
  height: 20px;
}

.list-card-actions {
  display: flex;
  gap: 4px;
  margin-left: auto;
  opacity: 0;
  transition: opacity 0.2s;
}

.list-card:hover .list-card-actions {
  opacity: 1;
}

.list-card-action {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  background: transparent;
  border: none;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.list-card-action:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-primary, #ffffff);
}

.list-card-action.edit:hover {
  background: rgba(212, 168, 83, 0.15);
  color: var(--gold, #d4a853);
}

.list-card-action.delete:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

.list-card-title-wrapper {
  flex: 1;
  min-width: 0;
}

.list-card-title {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-primary, #ffffff);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.list-card-desc {
  font-size: 0.78rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  margin-top: 8px;
  margin-left: 46px; /* icon(36) + gap(10) = 46px */
  line-clamp: 2;
  -webkit-line-clamp: 2;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.list-card-meta {
  font-size: 0.75rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
  margin-top: 2px;
  display: flex;
  align-items: center;
  gap: 12px;
}

/* List Card Arrow */
.list-card-arrow {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
  margin-left: auto;
  transition: transform 0.2s ease;
}

.list-card-arrow svg {
  width: 18px;
  height: 18px;
}

.list-card:hover .list-card-arrow {
  color: var(--gold, #d4a853);
  transform: translateX(4px);
}

/* List Card Edit Button */
.list-card-edit-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 8px;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  cursor: pointer;
  transition: all 0.2s ease;
  opacity: 0;
}

.list-card:hover .list-card-edit-btn {
  opacity: 1;
}

.list-card-edit-btn:hover {
  background: var(--gold, #d4a853);
  color: #000;
}

.list-card-edit-btn svg {
  width: 16px;
  height: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SELECTED LIST VIEW (Full Screen)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.selected-list-view {
  animation: fadeInOnly 0.2s ease;
}

@keyframes fadeInOnly {
  from { opacity: 0; }
  to { opacity: 1; }
}

.selected-list-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding-bottom: 16px;
  margin-bottom: 16px;
  border-bottom: 1px solid var(--void-border, #25252d);
}

.back-to-lists-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 8px;
  color: var(--text-secondary, rgba(255, 255, 255, 0.7));
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.back-to-lists-btn:hover {
  background: var(--void-elevated, #18181c);
  border-color: var(--gold, #d4a853);
  color: var(--gold, #d4a853);
}

.back-to-lists-btn svg {
  width: 16px;
  height: 16px;
}

.selected-list-info {
  flex: 1;
  min-width: 0;
}

.selected-list-info h3 {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-primary, #ffffff);
  margin: 0 0 4px 0;
}

.selected-list-info p {
  font-size: 0.85rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  margin: 0;
}

.selected-list-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Selected List Edit Button */
.selected-list-edit-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 8px;
  color: var(--text-secondary, rgba(255, 255, 255, 0.7));
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.selected-list-edit-btn:hover {
  background: var(--gold, #d4a853);
  border-color: var(--gold, #d4a853);
  color: #000;
}

.selected-list-edit-btn svg {
  width: 16px;
  height: 16px;
}

.view-mode-toggle {
  display: flex;
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 8px;
  overflow: hidden;
}

.view-mode-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  cursor: pointer;
  transition: all 0.2s ease;
}

.view-mode-btn:hover {
  color: var(--text-primary, #ffffff);
}

.view-mode-btn.active {
  background: var(--gold, #d4a853);
  color: #000;
}

.view-mode-btn svg {
  width: 18px;
  height: 18px;
}

.selected-list-meta {
  font-size: 0.8rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  padding: 6px 12px;
  background: var(--void-surface, #111115);
  border-radius: 20px;
}

.list-content-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 60px 24px;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  font-size: 0.9rem;
}

/* Selected List Contents */
.selected-list-contents {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.selected-list-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 10px;
  transition: all 0.2s ease;
}

.selected-list-item:hover {
  border-color: rgba(212, 168, 83, 0.3);
  background: var(--void-elevated, #18181c);
}

/* Reorder Buttons */
.selected-list-item-reorder {
  display: flex;
  flex-direction: column;
  gap: 2px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.selected-list-item:hover .selected-list-item-reorder {
  opacity: 1;
}

.reorder-btn {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--void-elevated, #18181c);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 4px;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  cursor: pointer;
  transition: all 0.2s ease;
}

.reorder-btn:hover:not(:disabled) {
  background: var(--gold, #d4a853);
  border-color: var(--gold, #d4a853);
  color: #000;
}

.reorder-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.reorder-btn svg {
  width: 14px;
  height: 14px;
}

.selected-list-item-order {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--void-elevated, #18181c);
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  flex-shrink: 0;
}

.selected-list-item-poster {
  width: 45px;
  height: 67px;
  border-radius: 6px;
  overflow: hidden;
  flex-shrink: 0;
  cursor: pointer;
}

.selected-list-item-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.2s ease;
}

.selected-list-item-poster:hover img {
  transform: scale(1.05);
}

.selected-list-item-poster .poster-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--void-elevated, #18181c);
  color: var(--text-muted, rgba(255, 255, 255, 0.3));
}

.selected-list-item-poster .poster-placeholder svg {
  width: 24px;
  height: 24px;
}

.selected-list-item-info {
  flex: 1;
  min-width: 0;
  cursor: pointer;
}

.selected-list-item-title {
  font-size: 0.95rem;
  font-weight: 500;
  color: var(--text-primary, #ffffff);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.selected-list-item-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 0.8rem;
}

.selected-list-item-meta .item-type {
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  text-transform: capitalize;
}

.selected-list-item-meta .item-rating {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--gold, #d4a853);
}

.selected-list-item-meta .item-rating svg {
  width: 14px;
  height: 14px;
}

.selected-list-item-remove {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 8px;
  color: var(--text-muted, rgba(255, 255, 255, 0.4));
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.selected-list-item:hover .selected-list-item-remove {
  opacity: 1;
}

.selected-list-item-remove:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

.selected-list-item-remove svg {
  width: 16px;
  height: 16px;
}

/* Poster Grid GÃ¶rÃ¼nÃ¼mÃ¼ */
.selected-list-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
  gap: 12px;
}

.selected-grid-item {
  position: relative;
}

.selected-grid-poster {
  position: relative;
  aspect-ratio: 2/3;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  margin-bottom: 6px;
}

.selected-grid-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.selected-grid-poster:hover img {
  transform: scale(1.05);
}

.selected-grid-poster .poster-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--void-elevated, #18181c);
  color: var(--text-muted, rgba(255, 255, 255, 0.3));
}

.selected-grid-poster .poster-placeholder svg {
  width: 40px;
  height: 40px;
}

.selected-grid-order {
  position: absolute;
  top: 8px;
  left: 8px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--gold, #d4a853);
}

.selected-grid-rating {
  position: absolute;
  bottom: 8px;
  left: 8px;
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--gold, #d4a853);
}

.selected-grid-rating svg {
  width: 12px;
  height: 12px;
}

.selected-grid-info {
  padding: 0 4px;
}

.selected-grid-title {
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text-primary, #ffffff);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 2px;
}

.selected-grid-type {
  font-size: 0.75rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  text-transform: capitalize;
}

.selected-grid-remove {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.8);
  border: none;
  border-radius: 6px;
  color: var(--text-muted, rgba(255, 255, 255, 0.6));
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s ease;
}

.selected-grid-item:hover .selected-grid-remove {
  opacity: 1;
}

.selected-grid-remove:hover {
  background: rgba(239, 68, 68, 0.9);
  color: #ffffff;
}

.selected-grid-remove svg {
  width: 14px;
  height: 14px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.empty-state {
  text-align: center;
  padding: 60px 20px;
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 16px;
}

.empty-state-icon {
  width: 64px;
  height: 64px;
  margin: 0 auto 16px;
  border-radius: 50%;
  background: rgba(212, 168, 83, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.empty-state-icon svg {
  width: 32px;
  height: 32px;
}

.empty-state h3 {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary, #ffffff);
  margin-bottom: 8px;
}

.empty-state p {
  font-size: 0.9rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  margin-bottom: 20px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EDIT MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  z-index: 200;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

.modal-content {
  background: var(--void-surface, #111115);
  border-radius: 24px 24px 0 0;
  width: 100%;
  max-width: 500px;
  max-height: 90vh;
  padding: 24px;
  animation: slideUp 0.3s ease;
  overflow-y: auto;
}

@keyframes slideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24px;
}

.modal-title {
  font-family: 'Cinzel', serif;
  font-size: 1.25rem;
  color: var(--text-primary, #ffffff);
}

.modal-close {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--void-border, #25252d);
  border: none;
  color: var(--text-secondary, rgba(255, 255, 255, 0.85));
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.modal-close:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

.modal-close svg {
  width: 20px;
  height: 20px;
}

/* Avatar Section */
.edit-avatar-section {
  text-align: center;
  margin-bottom: 24px;
}

.edit-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  margin: 0 auto 12px;
  overflow: hidden;
  position: relative;
  background: linear-gradient(135deg, #d4af37 0%, #b8943f 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.edit-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.edit-avatar-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  opacity: 0;
  transition: opacity 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
}

.edit-avatar:hover .edit-avatar-overlay {
  opacity: 1;
}

.edit-avatar-btn {
  font-size: 0.85rem;
  color: #d4af37;
  cursor: pointer;
  background: none;
  border: none;
}

/* Form Groups */
.form-group {
  margin-bottom: 20px;
}

.form-label {
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--text-secondary, rgba(255, 255, 255, 0.85));
  margin-bottom: 8px;
  display: block;
}

.form-input {
  width: 100%;
  padding: 14px 16px;
  font-size: 1rem;
  font-family: 'Inter', sans-serif;
  background: var(--void-elevated, #18181c);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 12px;
  color: var(--text-primary, #ffffff);
  transition: all 0.3s ease;
}

.form-input:focus {
  outline: none;
  border-color: #d4af37;
}

.form-input::placeholder {
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.form-textarea {
  min-height: 100px;
  resize: vertical;
}

.form-char-count {
  font-size: 0.75rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  text-align: right;
  margin-top: 4px;
}

/* Modal Actions */
.modal-actions {
  display: flex;
  gap: 12px;
  margin-top: 24px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FLOATING NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.floating-nav {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: rgba(17, 17, 20, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 50px;
  border: 1px solid var(--void-border, #25252d);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  z-index: 1000;
}

.nav-logo {
  font-family: 'Cinzel', serif;
  font-size: 1rem;
  font-weight: 600;
  color: #d4af37;
  letter-spacing: 0.1em;
  padding: 0 12px;
  border-right: 1px solid var(--void-border, #25252d);
  margin-right: 4px;
  text-decoration: none;
}

.nav-item {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: transparent;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  text-decoration: none;
}

.nav-item svg {
  width: 22px;
  height: 22px;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  transition: all 0.3s ease;
}

.nav-item:hover {
  background: rgba(255, 255, 255, 0.05);
}

.nav-item:hover svg {
  color: var(--text-secondary, rgba(255, 255, 255, 0.85));
}

.nav-item.active {
  background: #d4af37;
}

.nav-item.active svg {
  color: var(--void, #030304);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.skeleton {
  background: linear-gradient(90deg, var(--void-surface, #111115) 0%, var(--void-elevated, #18181c) 50%, var(--void-surface, #111115) 100%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPINNER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.spinner {
  width: 20px;
  height: 20px;
  border: 2px solid rgba(212, 175, 55, 0.2);
  border-top-color: #d4af37;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOBILE RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

@media (max-width: 768px) {
  .profile-cover {
    height: 180px;
  }

  .profile-avatar-wrapper {
    width: 100px;
  }

  .profile-avatar {
    width: 100px;
    height: 100px;
  }

  .profile-name {
    font-size: 1.5rem;
  }

  .profile-stats {
    gap: 24px;
  }

  .stat-value {
    font-size: 1.35rem;
  }

  .watch-stats {
    gap: 10px;
  }

  .watch-stat-card {
    padding: 16px 12px;
  }

  .watch-stat-value {
    font-size: 1.5rem;
  }

  .content-grid,
  .favorites-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }

  .lists-grid {
    grid-template-columns: 1fr;
  }

  .recent-card {
    width: 120px;
  }
}

@media (max-width: 480px) {
  .profile-hero {
    padding-top: 0;
  }

  .profile-cover {
    height: 120px;
  }

  .profile-info {
    padding: 0 16px;
    margin-top: -50px;
  }

  .profile-avatar-wrapper {
    width: 90px;
  }

  .profile-avatar {
    width: 90px;
    height: 90px;
  }

  .profile-avatar-letter {
    font-size: 2.5rem;
  }

  .profile-badge {
    width: 28px;
    height: 28px;
  }

  .profile-badge svg {
    width: 14px;
    height: 14px;
  }

  .profile-name {
    font-size: 1.35rem;
  }

  .profile-username {
    font-size: 0.9rem;
  }

  .profile-bio {
    font-size: 0.9rem;
  }

  .profile-meta {
    flex-direction: column;
    gap: 8px;
  }

  .profile-stats {
    gap: 16px;
    padding: 16px 0;
  }

  .stat-value {
    font-size: 1.25rem;
  }

  .stat-label {
    font-size: 0.75rem;
  }

  .profile-actions {
    flex-direction: column;
    gap: 10px;
  }

  .profile-btn {
    padding: 12px 20px;
    font-size: 0.85rem;
  }

  .profile-main-content {
    padding: 0 16px;
  }

  .profile-section {
    margin-bottom: 24px;
  }

  .section-title {
    font-size: 1.05rem;
  }

  .watch-stats {
    gap: 8px;
  }

  .watch-stat-card {
    padding: 14px 10px;
  }

  .watch-stat-icon {
    width: 40px;
    height: 40px;
    margin-bottom: 10px;
  }

  .watch-stat-icon svg {
    width: 20px;
    height: 20px;
  }

  .watch-stat-value {
    font-size: 1.35rem;
  }

  .watch-stat-label {
    font-size: 0.75rem;
  }

  .profile-tabs {
    margin-left: -16px;
    margin-right: -16px;
    padding: 0 16px;
  }

  .profile-tab {
    padding: 12px 16px;
    font-size: 0.85rem;
  }

  .achievement-card {
    width: 85px;
  }

  .achievement-icon {
    width: 56px;
    height: 56px;
    font-size: 24px;
  }

  .achievement-name {
    font-size: 0.7rem;
  }

  .genre-chart {
    padding: 16px;
  }

  .genre-bar-label {
    width: 70px;
    font-size: 0.75rem;
  }

  .recent-card {
    width: 110px;
  }

  .recent-poster {
    border-radius: 10px;
  }

  .recent-title {
    font-size: 0.8rem;
  }

  .content-grid,
  .favorites-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
  }

  .favorite-item {
    border-radius: 10px;
  }

  .favorite-rank {
    width: 20px;
    height: 20px;
    font-size: 0.7rem;
  }

  .activity-item {
    padding: 14px 0;
  }

  .profile-page .activity-poster {
    width: 45px;
    height: 68px;
  }

  .activity-title {
    font-size: 0.9rem;
  }

  .followers-preview {
    padding: 14px;
  }

  .followers-avatars img {
    width: 32px;
    height: 32px;
  }

  /* Floating nav mobile */
  .floating-nav {
    bottom: 16px;
    padding: 10px 12px;
    gap: 4px;
  }

  .nav-logo {
    font-size: 0.85rem;
    padding: 0 10px;
  }

  .nav-item {
    width: 40px;
    height: 40px;
  }

  .nav-item svg {
    width: 20px;
    height: 20px;
  }

  /* Modal mobile */
  .modal-content {
    padding: 20px 16px;
    max-height: 85vh;
  }

  .edit-avatar {
    width: 80px;
    height: 80px;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOLLOWERS/FOLLOWING MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.followers-modal {
  max-width: 420px;
  width: 100%;
}

.followers-modal .modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--void-border, #25252d);
  margin-bottom: 16px;
}

.followers-modal .modal-header h2 {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary, #fff);
  margin: 0;
}

.modal-close {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--void-elevated, #18181c);
  border: 1px solid var(--void-border, #25252d);
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.modal-close:hover {
  background: var(--void-border, #25252d);
  color: var(--text-primary, #fff);
}

.modal-close svg {
  width: 16px;
  height: 16px;
}

.followers-list {
  max-height: 400px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.followers-list::-webkit-scrollbar {
  width: 6px;
}

.followers-list::-webkit-scrollbar-track {
  background: var(--void-surface, #111115);
  border-radius: 3px;
}

.followers-list::-webkit-scrollbar-thumb {
  background: var(--void-border, #25252d);
  border-radius: 3px;
}

.followers-list::-webkit-scrollbar-thumb:hover {
  background: var(--gold-dim, #b8943f);
}

.followers-loading,
.followers-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 40px 20px;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.followers-loading svg,
.followers-empty svg {
  width: 48px;
  height: 48px;
  opacity: 0.5;
}

.follower-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px;
  background: var(--void-surface, #111115);
  border: 1px solid var(--void-border, #25252d);
  border-radius: 12px;
  transition: all 0.2s ease;
}

.follower-item:hover {
  border-color: var(--gold-dim, #b8943f);
  background: var(--void-elevated, #18181c);
}

.follower-info {
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  flex: 1;
}

.follower-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  overflow: hidden;
  background: var(--void-elevated, #18181c);
  border: 2px solid var(--void-border, #25252d);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.follower-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.follower-avatar svg {
  width: 24px;
  height: 24px;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.follower-details {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.follower-name {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-primary, #fff);
}

.follower-username {
  font-size: 0.8rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

.follower-mutual {
  font-size: 0.7rem;
  color: var(--gold, #d4a853);
  background: rgba(212, 168, 83, 0.15);
  padding: 2px 8px;
  border-radius: 10px;
  margin-top: 2px;
  display: inline-block;
  width: fit-content;
}

.follower-action-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--void-elevated, #18181c);
  border: 1px solid var(--void-border, #25252d);
  color: var(--gold, #d4a853);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.follower-action-btn.text-btn {
  width: auto;
  height: auto;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
  white-space: nowrap;
}

.follower-actions {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-shrink: 0;
}

.follower-action-btn:hover {
  background: var(--gold, #d4a853);
  border-color: var(--gold, #d4a853);
  color: var(--void, #030304);
}

.follower-action-btn.unfollow {
  color: #ef4444;
}

.follower-action-btn.unfollow:hover {
  background: #ef4444;
  border-color: #ef4444;
  color: white;
}

.follower-action-btn.remove {
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  border-color: var(--text-muted, rgba(255, 255, 255, 0.3));
}

.follower-action-btn.remove:hover {
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

.follower-action-btn svg {
  width: 18px;
  height: 18px;
}

.follower-action-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.follower-action-btn.following {
  background: var(--gold, #d4a853);
  border-color: var(--gold, #d4a853);
  color: var(--void, #030304);
}

.follower-action-btn.following:hover {
  background: #ef4444;
  border-color: #ef4444;
  color: white;
}

.spinner-small {
  width: 14px;
  height: 14px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-top-color: var(--gold, #d4a853);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

/* Clickable stats */
.profile-stat.clickable {
  cursor: pointer;
  transition: all 0.2s ease;
}

.profile-stat.clickable:hover {
  background: var(--void-elevated, #18181c);
  border-radius: 8px;
}

.profile-stat.clickable:hover .stat-value {
  color: var(--gold, #d4a853);
}

/* Mobile */
@media (max-width: 480px) {
  .followers-modal {
    max-width: 100%;
    margin: 0 16px;
  }

  .followers-list {
    max-height: 60vh;
  }

  .follower-item {
    padding: 10px;
  }

  .follower-avatar {
    width: 40px;
    height: 40px;
  }

  .follower-name {
    font-size: 0.9rem;
  }

  .follower-action-btn {
    width: 32px;
    height: 32px;
  }

  .follower-action-btn svg {
    width: 16px;
    height: 16px;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE ACTIVITY FEED - FeedPage Activity Cards
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.profile-activity-feed {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Activity card'Ä±n profilde avatar ve kullanÄ±cÄ± adÄ±nÄ± gizle (zaten profildeyiz) */
.profile-activity-feed .activity-avatar,
.profile-activity-feed .activity-avatar-placeholder,
.profile-activity-feed .activity-username {
  display: none;
}

/* Profilde activity-meta dÃ¼zeni */
.profile-activity-feed .activity-meta {
  flex: 1;
}

.profile-activity-feed .activity-user {
  display: flex;
  align-items: center;
  gap: 6px;
}

.profile-activity-feed .activity-action {
  color: var(--text-primary, #fff);
  font-size: 0.85rem;
  font-weight: 500;
}

/* Kart kompakt */
.profile-activity-feed .activity-card {
  padding: 10px;
}

.profile-activity-feed .activity-header {
  padding: 0;
  margin-bottom: 8px;
}

/* Content preview yatay geniÅŸlesin */
.profile-activity-feed .content-preview {
  gap: 12px;
  align-items: stretch;
  padding: 10px;
}

/* Normal kart posteri - geniÅŸ */
.profile-activity-feed .content-poster {
  width: 130px !important;
  min-width: 130px !important;
  max-height: 95px !important;
  border-radius: 8px;
  overflow: hidden;
}

.profile-activity-feed .content-poster img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Puanlama kartÄ± - ekstra geniÅŸ poster ve kompakt boÅŸluklar */
.profile-activity-feed .content-preview.rating-card {
  padding: 10px !important;
  gap: 12px !important;
}

.profile-activity-feed .content-preview.rating-card .content-poster {
  width: 140px !important;
  min-width: 140px !important;
  max-height: 100px !important;
}

.profile-activity-feed .content-preview.rating-card .content-info {
  padding: 0 !important;
  gap: 4px !important;
  justify-content: center !important;
}

.profile-activity-feed .content-preview.rating-card .content-title {
  font-size: 0.9rem !important;
  margin-bottom: 0 !important;
}

.profile-activity-feed .content-preview.rating-card .content-meta {
  font-size: 0.75rem !important;
  margin-bottom: 0 !important;
}

.profile-activity-feed .content-preview.rating-card .user-rating-display {
  margin-top: 4px !important;
}

/* Ä°Ã§erik bilgisi - boÅŸluklarÄ± doldur */
.profile-activity-feed .content-info {
  padding: 0;
  min-height: auto;
  display: flex;
  flex-direction: column;
  justify-content: center;
  flex: 1;
  gap: 6px;
}

.profile-activity-feed .content-title {
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 0;
  line-height: 1.3;
  color: var(--text-primary, #fff);
}

.profile-activity-feed .content-meta {
  font-size: 0.75rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
  margin-bottom: 0;
}

.profile-activity-feed .user-rating-display {
  margin-top: auto;
  display: flex;
  align-items: center;
  gap: 8px;
}

.profile-activity-feed .user-rating-display .rating-stars {
  gap: 2px;
  display: flex;
}

.profile-activity-feed .user-rating-display .rating-stars span {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.3);
}

.profile-activity-feed .user-rating-display .rating-stars span.filled {
  color: var(--gold, #d4a853);
  font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}

.profile-activity-feed .user-rating-display .rating-value {
  font-size: 0.85rem;
  font-weight: 600;
  color: #d4a853 !important;
  background: transparent !important;
}

/* Yorum kompakt ama okunabilir */
.profile-activity-feed .content-user-comment {
  margin-top: 6px;
  padding: 8px 10px;
  font-size: 0.8rem;
  line-height: 1.4;
  color: var(--text-secondary, rgba(255, 255, 255, 0.85));
  background: var(--void-elevated, #18181c);
  border-radius: 8px;
  border-left: 2px solid var(--gold, #d4a853);
}

.profile-activity-feed .content-user-comment p {
  margin: 0;
}

/* Actions kompakt */
.profile-activity-feed .activity-actions {
  padding: 6px 0 0 0;
  margin-top: 8px;
  border-top: 1px solid var(--void-border, #25252d);
  gap: 12px;
}

.profile-activity-feed .action-button {
  padding: 4px 10px;
  font-size: 0.8rem;
  gap: 4px;
}

.profile-activity-feed .action-button span.material-symbols-rounded {
  font-size: 14px;
}

/* Activity type badge */
.profile-activity-feed .activity-type {
  padding: 4px 8px;
  font-size: 0.7rem;
  font-weight: 500;
}

.profile-activity-feed .activity-type .type-icon {
  font-size: 12px;
}

.profile-activity-feed .activity-time {
  font-size: 0.75rem;
  color: var(--text-muted, rgba(255, 255, 255, 0.5));
}

/* Poster overlay rating gizle - kÃ¼Ã§Ã¼k kartta gereksiz */
.profile-activity-feed .poster-ratings-overlay {
  display: none;
}

/* Status badge */
.profile-activity-feed .activity-status-badge {
  margin-top: 6px;
  padding: 4px 10px;
  font-size: 0.75rem;
  font-weight: 500;
}

.profile-activity-feed .activity-status-badge span {
  font-size: 12px;
}

/* List badge */
.profile-activity-feed .activity-list-badge {
  margin-top: 6px;
  padding: 4px 10px;
  font-size: 0.75rem;
  font-weight: 500;
}

.profile-activity-feed .activity-list-badge span {
  font-size: 12px;
}


========== saga.client\src\pages\glass\ProfilePage.tsx ==========

import React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { kullaniciApi, aktiviteApi, kutuphaneApi, listeApi } from '../../services/api';
import type { ListeIcerik, Aktivite } from '../../services/api';
import { supabase } from '../../services/supabase';
import { ContentCard, ContentGrid } from '../../components/ui';
import type { ContentCardData, LibraryStatus } from '../../components/ui/ContentCard';
import { FeedActivityCard } from './FeedPage';
import {
  getProfileCache, setProfileCache, invalidateProfileCache,
  getFollowDataCache, setFollowDataCache,
  getActivitiesCache, setActivitiesCache,
  getLibraryCache, setLibraryCache,
  getListsCache, setListsCache,
  getMyFollowingCache, setMyFollowingCache, updateMyFollowingCache
} from '../../services/profileCache';
import './ProfilePage.css';
import './FeedPage.css'; // Activity card stilleri iÃ§in

// Icons
const BookmarkIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" />
  </svg>
);

const UserIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
    <circle cx="12" cy="7" r="4" />
  </svg>
);

const FilmIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" />
    <line x1="7" y1="2" x2="7" y2="22" />
    <line x1="17" y1="2" x2="17" y2="22" />
    <line x1="2" y1="12" x2="22" y2="12" />
    <line x1="2" y1="7" x2="7" y2="7" />
    <line x1="2" y1="17" x2="7" y2="17" />
    <line x1="17" y1="17" x2="22" y2="17" />
    <line x1="17" y1="7" x2="22" y2="7" />
  </svg>
);

const TvIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <rect x="2" y="7" width="20" height="15" rx="2" ry="2" />
    <polyline points="17 2 12 7 7 2" />
  </svg>
);

const BookIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
  </svg>
);

const StarIcon = ({ filled = false }: { filled?: boolean }) => (
  <svg
    viewBox="0 0 24 24"
    fill={filled ? 'currentColor' : 'none'}
    stroke="currentColor"
    strokeWidth="2"
  >
    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
  </svg>
);

const EditIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
  </svg>
);

const UserPlusIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
    <circle cx="8.5" cy="7" r="4" />
    <line x1="20" y1="8" x2="20" y2="14" />
    <line x1="23" y1="11" x2="17" y2="11" />
  </svg>
);

const UserCheckIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
    <circle cx="8.5" cy="7" r="4" />
    <polyline points="17 11 19 13 23 9" />
  </svg>
);

const XIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <line x1="18" y1="6" x2="6" y2="18" />
    <line x1="6" y1="6" x2="18" y2="18" />
  </svg>
);

const ChevronRightIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <polyline points="9 18 15 12 9 6" />
  </svg>
);

const ChevronLeftIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <polyline points="15 18 9 12 15 6" />
  </svg>
);

const CloseIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <line x1="18" y1="6" x2="6" y2="18" />
    <line x1="6" y1="6" x2="18" y2="18" />
  </svg>
);

const CameraIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
    <circle cx="12" cy="13" r="4" />
  </svg>
);

const PlusIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <line x1="12" y1="5" x2="12" y2="19" />
    <line x1="5" y1="12" x2="19" y2="12" />
  </svg>
);

const ListIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <line x1="8" y1="6" x2="21" y2="6" />
    <line x1="8" y1="12" x2="21" y2="12" />
    <line x1="8" y1="18" x2="21" y2="18" />
    <line x1="3" y1="6" x2="3.01" y2="6" />
    <line x1="3" y1="12" x2="3.01" y2="12" />
    <line x1="3" y1="18" x2="3.01" y2="18" />
  </svg>
);

const ArrowUpIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <polyline points="18 15 12 9 6 15" />
  </svg>
);

const ArrowDownIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <polyline points="6 9 12 15 18 9" />
  </svg>
);

const GridViewIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <rect x="3" y="3" width="7" height="7" />
    <rect x="14" y="3" width="7" height="7" />
    <rect x="14" y="14" width="7" height="7" />
    <rect x="3" y="14" width="7" height="7" />
  </svg>
);

const ListViewIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <line x1="8" y1="6" x2="21" y2="6" />
    <line x1="8" y1="12" x2="21" y2="12" />
    <line x1="8" y1="18" x2="21" y2="18" />
    <line x1="3" y1="6" x2="3.01" y2="6" />
    <line x1="3" y1="12" x2="3.01" y2="12" />
    <line x1="3" y1="18" x2="3.01" y2="18" />
  </svg>
);

const CalendarIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
    <line x1="16" y1="2" x2="16" y2="6" />
    <line x1="8" y1="2" x2="8" y2="6" />
    <line x1="3" y1="10" x2="21" y2="10" />
  </svg>
);

const MapPinIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
    <circle cx="12" cy="10" r="3" />
  </svg>
);

const VerifiedIcon = () => (
  <svg viewBox="0 0 24 24" fill="currentColor">
    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
  </svg>
);

const ClockIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <circle cx="12" cy="12" r="10" />
    <polyline points="12 6 12 12 16 14" />
  </svg>
);

// Tab Type
type ProfileTab = 'aktivite' | 'izlediklerim' | 'kutuphane' | 'listelerim';

// Types
interface KullaniciProfilDto {
  id: string;
  kullaniciAdi: string;
  goruntulemeAdi?: string;
  biyografi?: string;
  avatarUrl?: string;
  konum?: string;
  websitesi?: string;
  olusturulmaZamani?: string;
  takipEdenSayisi?: number;
  takipEdilenSayisi?: number;
  onayliMi?: boolean;
  takipEdiyorMu?: boolean;
  // Alias'lar - eski kod uyumluluÄŸu iÃ§in
  ad?: string;
  bio?: string;
  kayitTarihi?: string;
  takipciSayisi?: number;
}

interface KutuphaneItemDto {
  id?: number;
  icerikId: number;
  baslik?: string;
  posterUrl?: string;
  icerikTipiStr?: string;
  tur?: string;
  durum: string;
  ilerleme?: number;
}

interface ListeDto {
  id: number;
  ad: string;
  aciklama?: string;
  icerikSayisi?: number;
  icerikler?: ListeIcerik[];
}

interface TakipKullaniciDto {
  id: string;
  kullaniciAdi: string;
  goruntulemeAdi?: string;
  avatarUrl?: string;
  takipEdenSayisi?: number;
  takipEdiyorMu?: boolean;
}

const ProfilePage: React.FC = () => {
  const { kullaniciAdi } = useParams<{ kullaniciAdi: string }>();
  const navigate = useNavigate();
  const { user, loading: authLoading } = useAuth();
  const fileInputRef = useRef<HTMLInputElement>(null);

  // State
  const [profil, setProfil] = useState<KullaniciProfilDto | null>(null);
  const [aktiviteler, setAktiviteler] = useState<Aktivite[]>([]);
  const [kutuphane, setKutuphane] = useState<KutuphaneItemDto[]>([]);
  const [listeler, setListeler] = useState<ListeDto[]>([]);
  const [loading, setLoading] = useState(true);
  const [activeTab, setActiveTab] = useState<ProfileTab>('aktivite');
  const [followLoading, setFollowLoading] = useState(false);

  // Edit Modal State
  const [showEditModal, setShowEditModal] = useState(false);
  const [editForm, setEditForm] = useState({
    ad: '',
    bio: '',
    konum: '',
    websitesi: '',
  });
  const [editLoading, setEditLoading] = useState(false);
  const [avatarUploading, setAvatarUploading] = useState(false);

  // Create List Modal State
  const [showCreateListModal, setShowCreateListModal] = useState(false);
  const [listForm, setListForm] = useState({
    ad: '',
    aciklama: '',
  });
  const [createListLoading, setCreateListLoading] = useState(false);

  // Edit List Modal State
  const [showEditListModal, setShowEditListModal] = useState(false);
  const [editingList, setEditingList] = useState<ListeDto | null>(null);
  const [editListForm, setEditListForm] = useState({
    ad: '',
    aciklama: '',
  });
  const [editListLoading, setEditListLoading] = useState(false);

  // Selected List View State
  const [selectedList, setSelectedList] = useState<ListeDto | null>(null);
  const [selectedListContents, setSelectedListContents] = useState<ListeIcerik[]>([]);
  const [selectedListLoading, setSelectedListLoading] = useState(false);
  const [listViewMode, setListViewMode] = useState<'list' | 'grid'>('list');

  // TakipÃ§i/Takip Edilen Modal State
  const [showFollowersModal, setShowFollowersModal] = useState(false);
  const [showFollowingModal, setShowFollowingModal] = useState(false);
  const [followers, setFollowers] = useState<TakipKullaniciDto[]>([]);
  const [following, setFollowing] = useState<TakipKullaniciDto[]>([]);
  const [followersLoading, setFollowersLoading] = useState(false);
  const [followingLoading, setFollowingLoading] = useState(false);
  
  // Modal iÃ§i takip durumu - kullanÄ±cÄ±nÄ±n takip ettiÄŸi kiÅŸilerin ID'leri
  const [myFollowingIds, setMyFollowingIds] = useState<Set<string>>(() => {
    // Cache'den baÅŸlangÄ±Ã§ deÄŸeri al
    return getMyFollowingCache() || new Set();
  });
  const [modalFollowLoading, setModalFollowLoading] = useState<string | null>(null);
  
  // Ã‡ift yÃ¼kleme Ã¶nleme
  const isDataLoadedRef = useRef(false);
  const currentProfilIdRef = useRef<string | null>(null);

  const isOwnProfile = user?.kullaniciAdi === kullaniciAdi;

  // Fetch Profile Data (cache destekli)
  const fetchProfil = useCallback(async (forceRefresh = false) => {
    if (!kullaniciAdi) return;

    // Cache kontrol
    if (!forceRefresh) {
      const cachedProfile = getProfileCache(kullaniciAdi);
      if (cachedProfile) {
        setProfil({
          ...cachedProfile,
          ad: cachedProfile.goruntulemeAdi,
          bio: cachedProfile.biyografi,
          kayitTarihi: cachedProfile.olusturulmaZamani,
          takipciSayisi: cachedProfile.takipEdenSayisi,
        });
        setEditForm({
          ad: cachedProfile.goruntulemeAdi || '',
          bio: cachedProfile.biyografi || '',
          konum: '',
          websitesi: '',
        });
        setLoading(false);
        return;
      }
    }

    try {
      setLoading(true);
      const response = await kullaniciApi.getProfil(kullaniciAdi);
      
      // Cache'e kaydet
      setProfileCache(kullaniciAdi, response);
      
      // Backend property adlarÄ±nÄ± frontend'e map et
      setProfil({
        ...response,
        ad: response.goruntulemeAdi,
        bio: response.biyografi,
        kayitTarihi: response.olusturulmaZamani,
        takipciSayisi: response.takipEdenSayisi,
      });

      // Initialize edit form
      setEditForm({
        ad: response.goruntulemeAdi || '',
        bio: response.biyografi || '',
        konum: '',
        websitesi: '',
      });
    } catch (error) {
      console.error('Profil yÃ¼klenirken hata:', error);
      navigate('/');
    } finally {
      setLoading(false);
    }
  }, [kullaniciAdi, navigate]);

  // Aktiviteler (cache destekli)
  const fetchAktiviteler = useCallback(async (profilId: string, forceRefresh = false) => {
    if (!profilId) return;
    
    if (!forceRefresh) {
      const cached = getActivitiesCache(profilId);
      if (cached) {
        setAktiviteler(cached);
        return;
      }
    }
    
    try {
      const response = await aktiviteApi.getKullaniciAktiviteleri(profilId, { sayfaBoyutu: 20 });
      const data = response.data || [];
      setActivitiesCache(profilId, data);
      setAktiviteler(data);
    } catch (error) {
      console.error('Aktiviteler yÃ¼klenirken hata:', error);
    }
  }, []);

  // KÃ¼tÃ¼phane (cache destekli)
  const fetchKutuphane = useCallback(async (profilId: string, forceRefresh = false) => {
    if (!profilId) return;
    
    if (!forceRefresh) {
      const cached = getLibraryCache(profilId);
      if (cached) {
        setKutuphane(cached);
        return;
      }
    }
    
    try {
      const response = await kutuphaneApi.getKullanicininKutuphanesi(profilId, { sayfaBoyutu: 50 });
      const data = response.data || [];
      setLibraryCache(profilId, data);
      setKutuphane(data);
    } catch (error) {
      console.error('KÃ¼tÃ¼phane yÃ¼klenirken hata:', error);
    }
  }, []);

  // Listeler (cache destekli)
  const fetchListeler = useCallback(async (profilId: string, forceRefresh = false) => {
    if (!profilId) return;
    
    if (!forceRefresh) {
      const cached = getListsCache(profilId);
      if (cached) {
        setListeler(cached);
        return;
      }
    }
    
    try {
      const response = await listeApi.getKullaniciListeleri(profilId);
      const data = response || [];
      setListsCache(profilId, data);
      setListeler(data);
    } catch (error) {
      console.error('Listeler yÃ¼klenirken hata:', error);
    }
  }, []);

  // Ä°lk yÃ¼kleme - sadece bir kez Ã§alÄ±ÅŸacak
  useEffect(() => {
    // Sayfa yÃ¼klendiÄŸinde en Ã¼ste scroll et
    window.scrollTo(0, 0);
    
    // Profil deÄŸiÅŸti mi kontrol et
    if (kullaniciAdi && kullaniciAdi !== currentProfilIdRef.current) {
      currentProfilIdRef.current = kullaniciAdi;
      isDataLoadedRef.current = false;
    }
    
    if (!isDataLoadedRef.current) {
      isDataLoadedRef.current = true;
      fetchProfil();
    }
  }, [kullaniciAdi, fetchProfil]);

  // Profil verisi yÃ¼klendiÄŸinde diÄŸer verileri yÃ¼kle (cache destekli)
  useEffect(() => {
    if (!profil?.id) return;
    
    // Paralel olarak yÃ¼kle
    fetchAktiviteler(profil.id);
    fetchKutuphane(profil.id);
    fetchListeler(profil.id);
    
    // TakipÃ§i/Takip edilen verilerini Ã¶nceden yÃ¼kle (modal iÃ§in) - cache kontrollÃ¼
    const prefetchFollowData = async () => {
      // Cache kontrol
      const cachedFollowData = getFollowDataCache(profil.id);
      const cachedMyFollowing = getMyFollowingCache();
      
      if (cachedFollowData && cachedMyFollowing) {
        setFollowers(cachedFollowData.followers);
        setFollowing(cachedFollowData.following);
        setMyFollowingIds(cachedMyFollowing);
        return;
      }
      
      try {
        const [takipciler, takipEdilenler, benimTakipEttiklerim] = await Promise.all([
          cachedFollowData ? Promise.resolve(cachedFollowData.followers) : kullaniciApi.getTakipciler(profil.id).catch(() => []),
          cachedFollowData ? Promise.resolve(cachedFollowData.following) : kullaniciApi.getTakipEdilenler(profil.id).catch(() => []),
          cachedMyFollowing ? Promise.resolve([]) : (user?.id ? kullaniciApi.getTakipEdilenler(user.id).catch(() => []) : Promise.resolve([]))
        ]);
        
        if (!cachedFollowData) {
          setFollowDataCache(profil.id, takipciler, takipEdilenler);
        }
        
        setFollowers(takipciler);
        setFollowing(takipEdilenler);
        
        if (!cachedMyFollowing && benimTakipEttiklerim.length > 0) {
          const ids = new Set(benimTakipEttiklerim.map(k => k.id));
          setMyFollowingCache(ids);
          setMyFollowingIds(ids);
        }
      } catch (error) {
        console.error('Takip verileri yÃ¼klenirken hata:', error);
      }
    };
    
    prefetchFollowData();
  }, [profil?.id, fetchAktiviteler, fetchKutuphane, fetchListeler, user?.id]);

  // Follow/Unfollow
  const handleToggleFollow = async () => {
    if (!profil || !user) return;

    try {
      setFollowLoading(true);
      await kullaniciApi.takipEt(profil.id);
      // Cache'i invalidate et ve yeniden yÃ¼kle
      invalidateProfileCache(kullaniciAdi!);
      await fetchProfil(true);
    } catch (error) {
      console.error('Takip iÅŸlemi hatasÄ±:', error);
    } finally {
      setFollowLoading(false);
    }
  };

  // TakipÃ§ileri modalÄ± aÃ§ (veriler zaten yÃ¼klÃ¼)
  const handleOpenFollowers = async () => {
    if (!profil) return;
    setShowFollowersModal(true);
    
    // Veriler yoksa yÃ¼kle (ilk aÃ§Ä±lÄ±ÅŸ veya refresh)
    if (followers.length === 0 && profil.takipciSayisi && profil.takipciSayisi > 0) {
      setFollowersLoading(true);
      try {
        const [takipciler, benimTakipEttiklerim] = await Promise.all([
          kullaniciApi.getTakipciler(profil.id),
          user?.id && myFollowingIds.size === 0 
            ? kullaniciApi.getTakipEdilenler(user.id).catch(() => []) 
            : Promise.resolve([])
        ]);
        setFollowers(takipciler);
        if (benimTakipEttiklerim.length > 0) {
          setMyFollowingIds(new Set(benimTakipEttiklerim.map(k => k.id)));
        }
      } catch (error) {
        console.error('TakipÃ§iler yÃ¼klenirken hata:', error);
      } finally {
        setFollowersLoading(false);
      }
    }
  };

  // Takip edilenler modalÄ± aÃ§ (veriler zaten yÃ¼klÃ¼)
  const handleOpenFollowing = async () => {
    if (!profil) return;
    setShowFollowingModal(true);
    
    // Veriler yoksa yÃ¼kle (ilk aÃ§Ä±lÄ±ÅŸ veya refresh)
    if (following.length === 0 && profil.takipEdilenSayisi && profil.takipEdilenSayisi > 0) {
      setFollowingLoading(true);
      try {
        const [takipEdilenler, benimTakipEttiklerim] = await Promise.all([
          kullaniciApi.getTakipEdilenler(profil.id),
          user?.id && myFollowingIds.size === 0 
            ? kullaniciApi.getTakipEdilenler(user.id).catch(() => []) 
            : Promise.resolve([])
        ]);
        setFollowing(takipEdilenler);
        if (benimTakipEttiklerim.length > 0) {
          setMyFollowingIds(new Set(benimTakipEttiklerim.map(k => k.id)));
        }
      } catch (error) {
        console.error('Takip edilenler yÃ¼klenirken hata:', error);
      } finally {
        setFollowingLoading(false);
      }
    }
  };

  // Modal iÃ§inden takip et/bÄ±rak
  const handleFollowFromModal = async (userId: string) => {
    if (modalFollowLoading) return;
    
    const isCurrentlyFollowing = myFollowingIds.has(userId);
    setModalFollowLoading(userId);
    
    try {
      await kullaniciApi.takipEt(userId); // toggle endpoint
      
      // Local state gÃ¼ncelle
      setMyFollowingIds(prev => {
        const newSet = new Set(prev);
        if (isCurrentlyFollowing) {
          newSet.delete(userId);
        } else {
          newSet.add(userId);
        }
        // Cache'i de gÃ¼ncelle
        updateMyFollowingCache(userId, !isCurrentlyFollowing);
        return newSet;
      });
      
      // EÄŸer kendi profilimizin takip ettikleri listesindeyse ve takipten Ã§Ä±ktÄ±ysak
      if (isCurrentlyFollowing && isOwnProfile && showFollowingModal) {
        setFollowing(prev => prev.filter(u => u.id !== userId));
        // Profil takip sayÄ±sÄ±nÄ± gÃ¼ncelle (modal kapatmadan)
        setProfil(prev => prev ? { ...prev, takipEdilenSayisi: (prev.takipEdilenSayisi || 1) - 1 } : prev);
      } else if (isOwnProfile) {
        // Kendi profilimizde sayÄ±yÄ± gÃ¼ncelle
        setProfil(prev => prev ? { 
          ...prev, 
          takipEdilenSayisi: isCurrentlyFollowing 
            ? (prev.takipEdilenSayisi || 1) - 1 
            : (prev.takipEdilenSayisi || 0) + 1 
        } : prev);
      }
    } catch (error) {
      console.error('Takip iÅŸlemi hatasÄ±:', error);
    } finally {
      setModalFollowLoading(null);
    }
  };

  // TakipÃ§iyi Ã§Ä±kar (kendi takipÃ§ilerinden)
  const handleRemoveFollower = async (userId: string) => {
    try {
      await kullaniciApi.takipciCikar(userId);
      // Listeden kaldÄ±r
      setFollowers(prev => prev.filter(u => u.id !== userId));
      // TakipÃ§i sayÄ±sÄ±nÄ± gÃ¼ncelle
      setProfil(prev => prev ? { ...prev, takipciSayisi: (prev.takipciSayisi || 1) - 1 } : prev);
    } catch (error) {
      console.error('TakipÃ§i Ã§Ä±karma hatasÄ±:', error);
    }
  };

  // Edit Profile
  const handleUpdateProfile = async () => {
    try {
      setEditLoading(true);
      await kullaniciApi.updateProfil({
        goruntulemeAdi: editForm.ad || undefined,
        biyografi: editForm.bio, // BoÅŸ string de gÃ¶nderilmeli (biyografi silme iÃ§in)
      });
      await fetchProfil();
      setShowEditModal(false);
    } catch (error) {
      console.error('Profil gÃ¼ncelleme hatasÄ±:', error);
    } finally {
      setEditLoading(false);
    }
  };

  // Avatar Upload
  const handleAvatarUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (!file || !user) return;

    try {
      setAvatarUploading(true);
      const fileExt = file.name.split('.').pop();
      const fileName = `${user.id}-${Date.now()}.${fileExt}`;
      const filePath = fileName;

      const { error: uploadError } = await supabase.storage
        .from('avatars')
        .upload(filePath, file, { upsert: true });

      if (uploadError) throw uploadError;

      const { data: urlData } = supabase.storage
        .from('avatars')
        .getPublicUrl(filePath);

      await kullaniciApi.updateProfil({ avatarUrl: urlData.publicUrl });
      await fetchProfil();
    } catch (error) {
      console.error('Avatar yÃ¼kleme hatasÄ±:', error);
    } finally {
      setAvatarUploading(false);
    }
  };

  // Create List
  const handleCreateList = async () => {
    if (!listForm.ad.trim()) return;

    try {
      setCreateListLoading(true);
      await listeApi.create({
        ad: listForm.ad,
        aciklama: listForm.aciklama || undefined,
        herkeseAcik: true,
      });
      if (profil?.id) await fetchListeler(profil.id, true);
      setShowCreateListModal(false);
      setListForm({ ad: '', aciklama: '' });
    } catch (error) {
      console.error('Liste oluÅŸturma hatasÄ±:', error);
    } finally {
      setCreateListLoading(false);
    }
  };

  // Edit List - Open Modal
  const handleOpenEditListModal = (liste: ListeDto, e: React.MouseEvent) => {
    e.stopPropagation();
    setEditingList(liste);
    setEditListForm({
      ad: liste.ad,
      aciklama: liste.aciklama || '',
    });
    setShowEditListModal(true);
  };

  // Edit List - Save
  const handleUpdateList = async () => {
    if (!editingList || !editListForm.ad.trim()) return;

    try {
      setEditListLoading(true);
      await listeApi.update(editingList.id, {
        ad: editListForm.ad,
        aciklama: editListForm.aciklama || undefined,
      });
      if (profil?.id) await fetchListeler(profil.id, true);
      
      // EÄŸer selectedList gÃ¼ncellenen liste ise, onu da gÃ¼ncelle
      if (selectedList?.id === editingList.id) {
        setSelectedList(prev => prev ? { ...prev, ad: editListForm.ad, aciklama: editListForm.aciklama } : null);
      }
      
      setShowEditListModal(false);
      setEditingList(null);
      setEditListForm({ ad: '', aciklama: '' });
    } catch (error) {
      console.error('Liste gÃ¼ncelleme hatasÄ±:', error);
    } finally {
      setEditListLoading(false);
    }
  };

  // Open List View
  const handleOpenList = async (liste: ListeDto) => {
    setSelectedList(liste);
    setSelectedListLoading(true);
    
    try {
      const response = await listeApi.getById(liste.id);
      const contents = response.icerikler || [];
      setSelectedListContents(contents);
      
      // Sync icerikSayisi with actual content count
      if (contents.length !== liste.icerikSayisi) {
        setListeler(prev => prev.map(l => 
          l.id === liste.id ? { ...l, icerikSayisi: contents.length } : l
        ));
        setSelectedList(prev => prev ? { ...prev, icerikSayisi: contents.length } : null);
      }
    } catch (error) {
      console.error('Liste iÃ§erikleri yÃ¼klenirken hata:', error);
      setSelectedListContents([]);
    } finally {
      setSelectedListLoading(false);
    }
  };

  // Close List View
  const handleCloseListView = () => {
    // Update listeler with correct count before closing
    if (selectedList) {
      const actualCount = selectedListContents.length;
      setListeler(prev => prev.map(l => 
        l.id === selectedList.id ? { ...l, icerikSayisi: actualCount } : l
      ));
      
      // Update cache as well
      if (profil?.id) {
        const updatedListeler = listeler.map(l => 
          l.id === selectedList.id ? { ...l, icerikSayisi: actualCount } : l
        );
        setListsCache(profil.id, updatedListeler);
      }
    }
    
    setSelectedList(null);
    setSelectedListContents([]);
  };

  // Remove Content from List
  const handleRemoveFromList = async (icerikId: number) => {
    if (!selectedList) return;
    
    try {
      await listeApi.removeIcerik(selectedList.id, icerikId);
      setSelectedListContents(prev => prev.filter(i => i.icerikId !== icerikId));
      
      // Update list count in both listeler and selectedList
      const newCount = (selectedList.icerikSayisi || 1) - 1;
      setListeler(prev => prev.map(l => 
        l.id === selectedList.id 
          ? { ...l, icerikSayisi: newCount }
          : l
      ));
      setSelectedList(prev => prev ? { ...prev, icerikSayisi: newCount } : null);
    } catch (error) {
      console.error('Ä°Ã§erik listeden Ã§Ä±karÄ±lÄ±rken hata:', error);
    }
  };

  // Move Content Up in List
  const handleMoveUp = async (index: number) => {
    if (!selectedList || index === 0) return;
    
    const newContents = [...selectedListContents];
    const item = newContents[index];
    const prevItem = newContents[index - 1];
    
    // Swap positions
    newContents[index] = prevItem;
    newContents[index - 1] = item;
    
    setSelectedListContents(newContents);
    
    // Update on server
    try {
      await listeApi.updateIcerik(selectedList.id, item.icerikId, { sira: index });
      await listeApi.updateIcerik(selectedList.id, prevItem.icerikId, { sira: index + 1 });
    } catch (error) {
      console.error('SÄ±ralama gÃ¼ncellenirken hata:', error);
      // Revert on error
      setSelectedListContents(selectedListContents);
    }
  };

  // Move Content Down in List
  const handleMoveDown = async (index: number) => {
    if (!selectedList || index === selectedListContents.length - 1) return;
    
    const newContents = [...selectedListContents];
    const item = newContents[index];
    const nextItem = newContents[index + 1];
    
    // Swap positions
    newContents[index] = nextItem;
    newContents[index + 1] = item;
    
    setSelectedListContents(newContents);
    
    // Update on server
    try {
      await listeApi.updateIcerik(selectedList.id, item.icerikId, { sira: index + 2 });
      await listeApi.updateIcerik(selectedList.id, nextItem.icerikId, { sira: index + 1 });
    } catch (error) {
      console.error('SÄ±ralama gÃ¼ncellenirken hata:', error);
      // Revert on error
      setSelectedListContents(selectedListContents);
    }
  };

  // Stats calculations - tur alanÄ± backend'den geliyor (Film, Dizi, Kitap)
  const filmCount = kutuphane.filter((item) => {
    const tur = (item.tur || item.icerikTipiStr || '').toLowerCase();
    return tur === 'film';
  }).length;
  
  const diziCount = kutuphane.filter((item) => {
    const tur = (item.tur || item.icerikTipiStr || '').toLowerCase();
    return tur === 'dizi' || tur === 'tv';
  }).length;
  
  const kitapCount = kutuphane.filter((item) => {
    const tur = (item.tur || item.icerikTipiStr || '').toLowerCase();
    return tur === 'kitap';
  }).length;

  // Filter library by status
  const izlediklerim = kutuphane.filter((item) => 
    item.durum === 'TamamlandÄ±' || item.durum === 'izlendi' || item.durum === 'okundu'
  );

  // FiltrelenmiÅŸ aktiviteler (takip ve iÃ§erik bilgisi olmayan aktiviteler hariÃ§)
  const filteredAktiviteler = useMemo(() => {
    return aktiviteler.filter((akt) => {
      const tur = (akt.aktiviteTuru || akt.aktiviteTipiStr || '').toLowerCase();
      if (tur === 'takip' || tur === 'takipetme') return false;
      if (!akt.veri?.baslik) return false;
      return true;
    });
  }, [aktiviteler]);

  // Dynamic achievements based on user stats
  const achievements = useMemo(() => {
    const totalContent = kutuphane.length;
    const totalAktivite = filteredAktiviteler.length;
    
    return [
      { 
        icon: 'ğŸ¬', 
        name: 'Film Tutkunu', 
        desc: `${filmCount} film`,
        tier: filmCount >= 100 ? 'gold' : filmCount >= 50 ? 'silver' : filmCount >= 10 ? 'bronze' : 'locked'
      },
      { 
        icon: 'ğŸ“º', 
        name: 'Dizi Kolik', 
        desc: `${diziCount} dizi`,
        tier: diziCount >= 50 ? 'gold' : diziCount >= 25 ? 'silver' : diziCount >= 5 ? 'bronze' : 'locked'
      },
      { 
        icon: 'ğŸ“–', 
        name: 'Kitap Kurdu', 
        desc: `${kitapCount} kitap`,
        tier: kitapCount >= 50 ? 'gold' : kitapCount >= 25 ? 'silver' : kitapCount >= 5 ? 'bronze' : 'locked'
      },
      { 
        icon: 'ğŸ†', 
        name: 'Koleksiyoner', 
        desc: `${totalContent} iÃ§erik`,
        tier: totalContent >= 200 ? 'gold' : totalContent >= 100 ? 'silver' : totalContent >= 25 ? 'bronze' : 'locked'
      },
      { 
        icon: 'â­', 
        name: 'EleÅŸtirmen', 
        desc: `${totalAktivite} aktivite`,
        tier: totalAktivite >= 100 ? 'gold' : totalAktivite >= 50 ? 'silver' : totalAktivite >= 10 ? 'bronze' : 'locked'
      },
      { 
        icon: 'ğŸ”¥', 
        name: 'Ä°lk AdÄ±m', 
        desc: 'Ãœye oldu',
        tier: profil ? 'gold' : 'locked'
      },
    ];
  }, [filmCount, diziCount, kitapCount, kutuphane.length, filteredAktiviteler.length, profil]);

  // Dynamic genre distribution (placeholder - would need genre data from API)
  const genres = useMemo(() => {
    // Åimdilik kÃ¼tÃ¼phane iÃ§erik tipine gÃ¶re daÄŸÄ±lÄ±m gÃ¶sterelim
    const total = kutuphane.length || 1;
    const filmPercent = Math.round((filmCount / total) * 100);
    const diziPercent = Math.round((diziCount / total) * 100);
    const kitapPercent = Math.round((kitapCount / total) * 100);
    
    return [
      { name: 'Film', percent: filmPercent, class: 'film' },
      { name: 'Dizi', percent: diziPercent, class: 'dizi' },
      { name: 'Kitap', percent: kitapPercent, class: 'kitap' },
    ].filter(g => g.percent > 0).sort((a, b) => b.percent - a.percent);
  }, [filmCount, diziCount, kitapCount, kutuphane.length]);

  if (authLoading || loading) {
    return (
      <div className="profile-page">
        <div className="profile-hero">
          <div className="profile-cover skeleton" />
          <div className="profile-info">
            <div className="profile-avatar-wrapper">
              <div className="profile-avatar skeleton" />
            </div>
            <div style={{ height: 28, width: 150 }} className="skeleton" />
            <div style={{ height: 18, width: 100, marginTop: 8 }} className="skeleton" />
          </div>
        </div>
      </div>
    );
  }

  if (!profil) {
    return (
      <div className="profile-page">
        <div className="empty-state">
          <div className="empty-state-icon">
            <UserIcon />
          </div>
          <h3>KullanÄ±cÄ± bulunamadÄ±</h3>
          <p>AradÄ±ÄŸÄ±nÄ±z kullanÄ±cÄ± mevcut deÄŸil veya silinmiÅŸ olabilir.</p>
        </div>
      </div>
    );
  }

  return (
    <div className="profile-page">
      {/* Hero Section */}
      <section className="profile-hero">
        <div className="profile-cover" />

        <div className="profile-info">
          {/* Avatar */}
          <div className="profile-avatar-wrapper">
            <div className="profile-avatar">
              {profil.avatarUrl ? (
                <img src={profil.avatarUrl} alt={profil.ad || profil.kullaniciAdi} />
              ) : (
                <span className="profile-avatar-letter">
                  {(profil.ad || profil.kullaniciAdi).charAt(0).toUpperCase()}
                </span>
              )}
            </div>
            {profil.onayliMi && (
              <div className="profile-badge">
                <VerifiedIcon />
              </div>
            )}
          </div>

          {/* Details */}
          <div className="profile-details">
            <h1 className="profile-name">{profil.ad || profil.kullaniciAdi}</h1>
            <p className="profile-username">@{profil.kullaniciAdi}</p>

            {profil.bio && <p className="profile-bio">{profil.bio}</p>}

            <div className="profile-meta">
              {profil.konum && (
                <span className="profile-meta-item">
                  <MapPinIcon />
                  {profil.konum}
                </span>
              )}
              {profil.kayitTarihi && (
                <span className="profile-meta-item">
                  <CalendarIcon />
                  {new Date(profil.kayitTarihi).toLocaleDateString('tr-TR', {
                    month: 'long',
                    year: 'numeric',
                  })}{' '}
                  tarihinden beri
                </span>
              )}
            </div>
          </div>

          {/* Stats */}
          <div className="profile-stats">
            <div className="profile-stat clickable" onClick={handleOpenFollowers}>
              <div className="stat-value">{profil.takipciSayisi || 0}</div>
              <div className="stat-label">TakipÃ§i</div>
            </div>
            <div className="profile-stat clickable" onClick={handleOpenFollowing}>
              <div className="stat-value">{profil.takipEdilenSayisi || 0}</div>
              <div className="stat-label">Takip</div>
            </div>
            <div className="profile-stat">
              <div className="stat-value">{kutuphane.length}</div>
              <div className="stat-label">Ä°Ã§erik</div>
            </div>
            <div className="profile-stat">
              <div className="stat-value">{listeler.length}</div>
              <div className="stat-label">Liste</div>
            </div>
          </div>

          {/* Actions */}
          <div className="profile-actions">
            {isOwnProfile ? (
              <button
                className="profile-btn profile-btn-primary"
                onClick={() => setShowEditModal(true)}
              >
                <EditIcon />
                Profili DÃ¼zenle
              </button>
            ) : (
              <button
                className="profile-btn profile-btn-primary"
                onClick={handleToggleFollow}
                disabled={followLoading}
              >
                {followLoading ? (
                  <span className="spinner" />
                ) : profil.takipEdiyorMu ? (
                  <>
                    <UserCheckIcon />
                    Takip Ediliyor
                  </>
                ) : (
                  <>
                    <UserPlusIcon />
                    Takip Et
                  </>
                )}
              </button>
            )}
          </div>
        </div>
      </section>

      {/* Main Content */}
      <main className="profile-main-content">
        {/* Watch Stats */}
        <section className="watch-stats">
          <div className="watch-stat-card">
            <div className="watch-stat-icon films">
              <FilmIcon />
            </div>
            <div className="watch-stat-value">{filmCount}</div>
            <div className="watch-stat-label">Film</div>
          </div>
          <div className="watch-stat-card">
            <div className="watch-stat-icon series">
              <TvIcon />
            </div>
            <div className="watch-stat-value">{diziCount}</div>
            <div className="watch-stat-label">Dizi</div>
          </div>
          <div className="watch-stat-card">
            <div className="watch-stat-icon books">
              <BookIcon />
            </div>
            <div className="watch-stat-value">{kitapCount}</div>
            <div className="watch-stat-label">Kitap</div>
          </div>
        </section>

        {/* Achievements */}
        <section className="profile-section">
          <div className="section-header">
            <h2 className="section-title">Rozetler</h2>
            <button className="section-link">
              TÃ¼mÃ¼ <ChevronRightIcon />
            </button>
          </div>
          <div className="achievements-grid">
            {achievements.map((ach, idx) => (
              <div key={idx} className="achievement-card">
                <div className={`achievement-icon ${ach.tier}`}>{ach.icon}</div>
                <div className="achievement-name">{ach.name}</div>
                <div className="achievement-desc">{ach.desc}</div>
              </div>
            ))}
          </div>
        </section>

        {/* Genre Chart */}
        <section className="profile-section">
          <div className="section-header">
            <h2 className="section-title">TÃ¼r DaÄŸÄ±lÄ±mÄ±</h2>
          </div>
          <div className="genre-chart">
            <div className="genre-bars">
              {genres.map((genre, idx) => (
                <div key={idx} className="genre-bar-item">
                  <span className="genre-bar-label">{genre.name}</span>
                  <div className="genre-bar-wrapper">
                    <div
                      className={`genre-bar-fill ${genre.class}`}
                      style={{ width: `${genre.percent}%` }}
                    />
                  </div>
                  <span className="genre-bar-value">{genre.percent}%</span>
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* Tabs */}
        <div className="profile-tabs">
          <button
            className={`profile-tab ${activeTab === 'aktivite' ? 'active' : ''}`}
            onClick={() => setActiveTab('aktivite')}
          >
            <ClockIcon />
            Aktivite
            <span className="tab-count">{filteredAktiviteler.length}</span>
          </button>
          <button
            className={`profile-tab ${activeTab === 'izlediklerim' ? 'active' : ''}`}
            onClick={() => setActiveTab('izlediklerim')}
          >
            <StarIcon filled />
            Ä°zlediklerim
            <span className="tab-count">{izlediklerim.length}</span>
          </button>
          <button
            className={`profile-tab ${activeTab === 'kutuphane' ? 'active' : ''}`}
            onClick={() => setActiveTab('kutuphane')}
          >
            <BookmarkIcon />
            KÃ¼tÃ¼phane
            <span className="tab-count">{kutuphane.length}</span>
          </button>
          <button
            className={`profile-tab ${activeTab === 'listelerim' ? 'active' : ''}`}
            onClick={() => setActiveTab('listelerim')}
          >
            <ListIcon />
            Listelerim
            <span className="tab-count">{listeler.length}</span>
          </button>
        </div>

        {/* Tab Content */}
        {activeTab === 'aktivite' && (
          <section className="profile-section feed-page">
            {filteredAktiviteler.length > 0 ? (
              <div className="profile-activity-feed activity-feed">
                {filteredAktiviteler.map((akt, index) => (
                  <FeedActivityCard
                    key={akt.id}
                    aktivite={akt}
                    isLoggedIn={!!user}
                    index={index}
                    currentUserName={user?.kullaniciAdi}
                    onDelete={(id) => setAktiviteler(prev => prev.filter(a => a.id !== id))}
                  />
                ))}
              </div>
            ) : (
              <div className="empty-state">
                <div className="empty-state-icon">
                  <ClockIcon />
                </div>
                <h3>HenÃ¼z aktivite yok</h3>
                <p>Film ve dizileri izlemeye baÅŸlayÄ±n!</p>
              </div>
            )}
          </section>
        )}

        {activeTab === 'izlediklerim' && (
          <section className="profile-section">
            {izlediklerim.length > 0 ? (
              <ContentGrid>
                {izlediklerim.map((item) => {
                  const itemTur = (item.tur || item.icerikTipiStr || 'film').toLowerCase();
                  const cardData: ContentCardData = {
                    id: item.icerikId,
                    title: item.baslik || 'Bilinmiyor',
                    posterUrl: item.posterUrl?.startsWith('http') 
                      ? item.posterUrl 
                      : item.posterUrl 
                        ? `https://image.tmdb.org/t/p/w342${item.posterUrl}`
                        : undefined,
                    type: (itemTur === 'dizi' ? 'tv' : itemTur) as 'film' | 'kitap' | 'tv',
                    dbId: item.icerikId,
                    libraryStatus: item.durum as LibraryStatus,
                  };
                  return (
                    <ContentCard
                      key={item.id}
                      data={cardData}
                      showStatus={true}
                      showBadge={true}
                      showRatings={true}
                    />
                  );
                })}
              </ContentGrid>
            ) : (
              <div className="empty-state">
                <div className="empty-state-icon">
                  <StarIcon filled />
                </div>
                <h3>HenÃ¼z iÃ§erik izlenmemiÅŸ</h3>
                <p>Ä°zlediÄŸiniz iÃ§erikleri iÅŸaretleyin!</p>
              </div>
            )}
          </section>
        )}

        {activeTab === 'kutuphane' && (
          <section className="profile-section">
            {kutuphane.length > 0 ? (
              <ContentGrid>
                {kutuphane.map((item) => {
                  const itemTur = (item.tur || item.icerikTipiStr || 'film').toLowerCase();
                  const cardData: ContentCardData = {
                    id: item.icerikId,
                    title: item.baslik || 'Bilinmiyor',
                    posterUrl: item.posterUrl?.startsWith('http') 
                      ? item.posterUrl 
                      : item.posterUrl 
                        ? `https://image.tmdb.org/t/p/w342${item.posterUrl}`
                        : undefined,
                    type: (itemTur === 'dizi' ? 'tv' : itemTur) as 'film' | 'kitap' | 'tv',
                    dbId: item.icerikId,
                    libraryStatus: item.durum as LibraryStatus,
                  };
                  return (
                    <ContentCard
                      key={item.id}
                      data={cardData}
                      showStatus={true}
                      showBadge={true}
                      showRatings={true}
                    />
                  );
                })}
              </ContentGrid>
            ) : (
              <div className="empty-state">
                <div className="empty-state-icon">
                  <BookmarkIcon />
                </div>
                <h3>KÃ¼tÃ¼phane boÅŸ</h3>
                <p>Ä°Ã§erikleri kÃ¼tÃ¼phanenize ekleyin!</p>
              </div>
            )}
          </section>
        )}

        {activeTab === 'listelerim' && (
          <section className="profile-section">
            {/* Selected List Full View */}
            {selectedList ? (
              <div className="selected-list-view">
                <div className="selected-list-header">
                  <button 
                    className="back-to-lists-btn"
                    onClick={handleCloseListView}
                  >
                    <ChevronLeftIcon />
                    <span>Listeler</span>
                  </button>
                  <div className="selected-list-info">
                    <h3>{selectedList.ad}</h3>
                    {selectedList.aciklama && (
                      <p>{selectedList.aciklama}</p>
                    )}
                  </div>
                  <div className="selected-list-actions">
                    {isOwnProfile && (
                      <button 
                        className="selected-list-edit-btn"
                        onClick={(e) => handleOpenEditListModal(selectedList, e)}
                        title="Listeyi dÃ¼zenle"
                      >
                        <EditIcon />
                        <span>DÃ¼zenle</span>
                      </button>
                    )}
                    <div className="view-mode-toggle">
                      <button 
                        className={`view-mode-btn ${listViewMode === 'list' ? 'active' : ''}`}
                        onClick={() => setListViewMode('list')}
                        title="Liste gÃ¶rÃ¼nÃ¼mÃ¼"
                      >
                        <ListViewIcon />
                      </button>
                      <button 
                        className={`view-mode-btn ${listViewMode === 'grid' ? 'active' : ''}`}
                        onClick={() => setListViewMode('grid')}
                        title="Poster gÃ¶rÃ¼nÃ¼mÃ¼"
                      >
                        <GridViewIcon />
                      </button>
                    </div>
                    <div className="selected-list-meta">
                      {selectedListContents.length} iÃ§erik
                    </div>
                  </div>
                </div>

                {selectedListLoading ? (
                  <div className="list-content-loading">
                    <div className="loading-spinner"></div>
                    <span>Ä°Ã§erikler yÃ¼kleniyor...</span>
                  </div>
                ) : selectedListContents.length > 0 ? (
                  listViewMode === 'list' ? (
                    /* Liste GÃ¶rÃ¼nÃ¼mÃ¼ */
                    <div className="selected-list-contents">
                      {selectedListContents.map((icerik, index) => (
                        <div key={icerik.icerikId} className="selected-list-item">
                          {isOwnProfile && (
                            <div className="selected-list-item-reorder">
                              <button 
                                className="reorder-btn"
                                onClick={() => handleMoveUp(index)}
                                disabled={index === 0}
                                title="YukarÄ± taÅŸÄ±"
                              >
                                <ArrowUpIcon />
                              </button>
                              <button 
                                className="reorder-btn"
                                onClick={() => handleMoveDown(index)}
                                disabled={index === selectedListContents.length - 1}
                                title="AÅŸaÄŸÄ± taÅŸÄ±"
                              >
                                <ArrowDownIcon />
                              </button>
                            </div>
                          )}
                          <div className="selected-list-item-order">{index + 1}</div>
                          <div 
                            className="selected-list-item-poster"
                            onClick={() => navigate(`/icerik/${icerik.icerikId}`)}
                          >
                            {icerik.posterUrl ? (
                              <img src={icerik.posterUrl} alt={icerik.baslik} />
                            ) : (
                              <div className="poster-placeholder">
                                <FilmIcon />
                              </div>
                            )}
                          </div>
                          <div 
                            className="selected-list-item-info"
                            onClick={() => navigate(`/icerik/${icerik.icerikId}`)}
                          >
                            <div className="selected-list-item-title">{icerik.baslik}</div>
                            <div className="selected-list-item-meta">
                              <span className="item-type">{icerik.tur}</span>
                              {icerik.ortalamaPuan > 0 && (
                                <span className="item-rating">
                                  <StarIcon filled />
                                  {icerik.ortalamaPuan.toFixed(1)}
                                </span>
                              )}
                            </div>
                          </div>
                          {isOwnProfile && (
                            <button 
                              className="selected-list-item-remove"
                              onClick={() => handleRemoveFromList(icerik.icerikId)}
                              title="Listeden Ã§Ä±kar"
                            >
                              <CloseIcon />
                            </button>
                          )}
                        </div>
                      ))}
                    </div>
                  ) : (
                    /* Poster Grid GÃ¶rÃ¼nÃ¼mÃ¼ */
                    <div className="selected-list-grid">
                      {selectedListContents.map((icerik, index) => (
                        <div key={icerik.icerikId} className="selected-grid-item">
                          <div 
                            className="selected-grid-poster"
                            onClick={() => navigate(`/icerik/${icerik.icerikId}`)}
                          >
                            {icerik.posterUrl ? (
                              <img src={icerik.posterUrl} alt={icerik.baslik} />
                            ) : (
                              <div className="poster-placeholder">
                                <FilmIcon />
                              </div>
                            )}
                            <div className="selected-grid-order">{index + 1}</div>
                            {icerik.ortalamaPuan > 0 && (
                              <div className="selected-grid-rating">
                                <StarIcon filled />
                                {icerik.ortalamaPuan.toFixed(1)}
                              </div>
                            )}
                          </div>
                          <div className="selected-grid-info">
                            <div className="selected-grid-title">{icerik.baslik}</div>
                            <div className="selected-grid-type">{icerik.tur}</div>
                          </div>
                          {isOwnProfile && (
                            <button 
                              className="selected-grid-remove"
                              onClick={() => handleRemoveFromList(icerik.icerikId)}
                              title="Listeden Ã§Ä±kar"
                            >
                              <CloseIcon />
                            </button>
                          )}
                        </div>
                      ))}
                    </div>
                  )
                ) : (
                  <div className="empty-state">
                    <div className="empty-state-icon">
                      <ListIcon />
                    </div>
                    <h3>Liste boÅŸ</h3>
                    <p>Bu listede henÃ¼z iÃ§erik yok</p>
                  </div>
                )}
              </div>
            ) : (
              /* Lists Grid View */
              <>
                {isOwnProfile && (
                  <button
                    className="profile-btn profile-btn-secondary"
                    onClick={() => setShowCreateListModal(true)}
                    style={{ marginBottom: 16, width: '100%' }}
                  >
                    <PlusIcon />
                    Yeni Liste OluÅŸtur
                  </button>
                )}

                {listeler.length > 0 ? (
                  <div className="lists-grid">
                    {listeler.map((liste) => (
                      <div
                        key={liste.id}
                        className="list-card"
                        onClick={() => handleOpenList(liste)}
                      >
                        <div className="list-card-header">
                          <div className="list-card-icon">
                            <ListIcon />
                          </div>
                          <div className="list-card-title-wrapper">
                            <div className="list-card-title">{liste.ad}</div>
                            <div className="list-card-meta">
                              <span>{liste.icerikSayisi || 0} iÃ§erik</span>
                            </div>
                          </div>
                          {isOwnProfile && (
                            <button 
                              className="list-card-edit-btn"
                              onClick={(e) => handleOpenEditListModal(liste, e)}
                              title="Listeyi dÃ¼zenle"
                            >
                              <EditIcon />
                            </button>
                          )}
                          <div className="list-card-arrow">
                            <ChevronRightIcon />
                          </div>
                        </div>
                        {liste.aciklama && (
                          <div className="list-card-desc">{liste.aciklama}</div>
                        )}
                      </div>
                    ))}
                  </div>
                ) : (
                  <div className="empty-state">
                    <div className="empty-state-icon">
                      <ListIcon />
                    </div>
                    <h3>HenÃ¼z liste yok</h3>
                    <p>Favori iÃ§eriklerinizi listeleyin!</p>
                  </div>
                )}
              </>
            )}
          </section>
        )}
      </main>

      {/* Edit Profile Modal */}
      {showEditModal && (
        <div className="modal-backdrop" onClick={() => setShowEditModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">Profili DÃ¼zenle</h2>
              <button className="modal-close" onClick={() => setShowEditModal(false)}>
                <CloseIcon />
              </button>
            </div>

            <div className="edit-avatar-section">
              <input
                type="file"
                ref={fileInputRef}
                onChange={handleAvatarUpload}
                accept="image/*"
                style={{ display: 'none' }}
              />
              <div
                className="edit-avatar"
                onClick={() => fileInputRef.current?.click()}
              >
                {profil.avatarUrl ? (
                  <img src={profil.avatarUrl} alt="Avatar" />
                ) : (
                  <span className="profile-avatar-letter">
                    {(profil.ad || profil.kullaniciAdi).charAt(0).toUpperCase()}
                  </span>
                )}
                <div className="edit-avatar-overlay">
                  {avatarUploading ? <span className="spinner" /> : <CameraIcon />}
                </div>
              </div>
              <button
                className="edit-avatar-btn"
                onClick={() => fileInputRef.current?.click()}
              >
                FotoÄŸrafÄ± DeÄŸiÅŸtir
              </button>
            </div>

            <div className="form-group">
              <label className="form-label">Ad</label>
              <input
                type="text"
                className="form-input"
                value={editForm.ad}
                onChange={(e) =>
                  setEditForm((prev) => ({ ...prev, ad: e.target.value }))
                }
                placeholder="AdÄ±nÄ±z"
              />
            </div>

            <div className="form-group">
              <label className="form-label">Biyografi</label>
              <textarea
                className="form-input form-textarea"
                value={editForm.bio}
                onChange={(e) =>
                  setEditForm((prev) => ({ ...prev, bio: e.target.value }))
                }
                placeholder="Kendinizden bahsedin..."
                maxLength={200}
              />
              <div className="form-char-count">{editForm.bio.length}/200</div>
            </div>

            <div className="form-group">
              <label className="form-label">Konum</label>
              <input
                type="text"
                className="form-input"
                value={editForm.konum}
                onChange={(e) =>
                  setEditForm((prev) => ({ ...prev, konum: e.target.value }))
                }
                placeholder="Åehir, Ãœlke"
              />
            </div>

            <div className="form-group">
              <label className="form-label">Website</label>
              <input
                type="text"
                className="form-input"
                value={editForm.websitesi}
                onChange={(e) =>
                  setEditForm((prev) => ({ ...prev, websitesi: e.target.value }))
                }
                placeholder="https://..."
              />
            </div>

            <div className="modal-actions">
              <button
                className="profile-btn profile-btn-secondary"
                onClick={() => setShowEditModal(false)}
              >
                Ä°ptal
              </button>
              <button
                className="profile-btn profile-btn-primary"
                onClick={handleUpdateProfile}
                disabled={editLoading}
              >
                {editLoading ? <span className="spinner" /> : 'Kaydet'}
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Create List Modal */}
      {showCreateListModal && (
        <div
          className="modal-backdrop"
          onClick={() => setShowCreateListModal(false)}
        >
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">Yeni Liste</h2>
              <button
                className="modal-close"
                onClick={() => setShowCreateListModal(false)}
              >
                <CloseIcon />
              </button>
            </div>

            <div className="form-group">
              <label className="form-label">Liste AdÄ±</label>
              <input
                type="text"
                className="form-input"
                value={listForm.ad}
                onChange={(e) =>
                  setListForm((prev) => ({ ...prev, ad: e.target.value }))
                }
                placeholder="Liste adÄ± girin"
              />
            </div>

            <div className="form-group">
              <label className="form-label">AÃ§Ä±klama (Ä°steÄŸe baÄŸlÄ±)</label>
              <textarea
                className="form-input form-textarea"
                value={listForm.aciklama}
                onChange={(e) =>
                  setListForm((prev) => ({ ...prev, aciklama: e.target.value }))
                }
                placeholder="Liste hakkÄ±nda kÄ±sa bir aÃ§Ä±klama..."
                maxLength={200}
              />
              <div className="form-char-count">{listForm.aciklama.length}/200</div>
            </div>

            <div className="modal-actions">
              <button
                className="profile-btn profile-btn-secondary"
                onClick={() => setShowCreateListModal(false)}
              >
                Ä°ptal
              </button>
              <button
                className="profile-btn profile-btn-primary"
                onClick={handleCreateList}
                disabled={createListLoading || !listForm.ad.trim()}
              >
                {createListLoading ? <span className="spinner" /> : 'OluÅŸtur'}
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Edit List Modal */}
      {showEditListModal && editingList && (
        <div
          className="modal-backdrop"
          onClick={() => setShowEditListModal(false)}
        >
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">Listeyi DÃ¼zenle</h2>
              <button
                className="modal-close"
                onClick={() => setShowEditListModal(false)}
              >
                <CloseIcon />
              </button>
            </div>

            <div className="form-group">
              <label className="form-label">Liste AdÄ±</label>
              <input
                type="text"
                className="form-input"
                value={editListForm.ad}
                onChange={(e) =>
                  setEditListForm((prev) => ({ ...prev, ad: e.target.value }))
                }
                placeholder="Liste adÄ± girin"
              />
            </div>

            <div className="form-group">
              <label className="form-label">AÃ§Ä±klama (Ä°steÄŸe baÄŸlÄ±)</label>
              <textarea
                className="form-input form-textarea"
                value={editListForm.aciklama}
                onChange={(e) =>
                  setEditListForm((prev) => ({ ...prev, aciklama: e.target.value }))
                }
                placeholder="Liste hakkÄ±nda kÄ±sa bir aÃ§Ä±klama..."
                maxLength={200}
              />
              <div className="form-char-count">{editListForm.aciklama.length}/200</div>
            </div>

            <div className="modal-actions">
              <button
                className="profile-btn profile-btn-secondary"
                onClick={() => setShowEditListModal(false)}
              >
                Ä°ptal
              </button>
              <button
                className="profile-btn profile-btn-primary"
                onClick={handleUpdateList}
                disabled={editListLoading || !editListForm.ad.trim()}
              >
                {editListLoading ? <span className="spinner" /> : 'Kaydet'}
              </button>
            </div>
          </div>
        </div>
      )}

      {/* TakipÃ§iler Modal */}
      {showFollowersModal && (
        <div className="modal-overlay" onClick={() => setShowFollowersModal(false)}>
          <div className="modal-content followers-modal" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2>TakipÃ§iler ({profil?.takipciSayisi || followers.length})</h2>
              <button className="modal-close" onClick={() => setShowFollowersModal(false)}>
                <XIcon />
              </button>
            </div>
            <div className="followers-list">
              {followersLoading && followers.length === 0 ? (
                <div className="followers-loading">
                  <span className="spinner" />
                  <span>YÃ¼kleniyor...</span>
                </div>
              ) : followers.length === 0 ? (
                <div className="followers-empty">
                  <UserIcon />
                  <span>HenÃ¼z takipÃ§i yok</span>
                </div>
              ) : (
                followers.map((follower) => (
                  <div key={follower.id} className="follower-item">
                    <div 
                      className="follower-info"
                      onClick={() => {
                        setShowFollowersModal(false);
                        navigate(`/profil/${follower.kullaniciAdi}`);
                      }}
                    >
                      <div className="follower-avatar">
                        {follower.avatarUrl ? (
                          <img src={follower.avatarUrl} alt={follower.kullaniciAdi} />
                        ) : (
                          <UserIcon />
                        )}
                      </div>
                      <div className="follower-details">
                        <span className="follower-name">{follower.goruntulemeAdi || follower.kullaniciAdi}</span>
                        <span className="follower-username">@{follower.kullaniciAdi}</span>
                        {/* BaÅŸka profilde ortak takipÃ§i gÃ¶stergesi */}
                        {!isOwnProfile && myFollowingIds.has(follower.id) && (
                          <span className="follower-mutual">Ortak takip</span>
                        )}
                      </div>
                    </div>
                    <div className="follower-actions">
                      {/* Takip et/bÄ±rak butonu - kendimiz deÄŸilsek gÃ¶ster */}
                      {user && user.id !== follower.id && (
                        <button
                          className={`follower-action-btn text-btn ${myFollowingIds.has(follower.id) ? 'following' : ''}`}
                          disabled={modalFollowLoading === follower.id}
                          onClick={() => handleFollowFromModal(follower.id)}
                        >
                          {modalFollowLoading === follower.id ? (
                            <span className="spinner-small" />
                          ) : myFollowingIds.has(follower.id) ? (
                            'Takipten Ã‡Ä±k'
                          ) : isOwnProfile ? (
                            'Geri Takip Et'
                          ) : (
                            'Takip Et'
                          )}
                        </button>
                      )}
                      {/* Kendi profilimizse takipÃ§iyi Ã§Ä±karma butonu */}
                      {isOwnProfile && (
                        <button
                          className="follower-action-btn text-btn remove"
                          onClick={() => handleRemoveFollower(follower.id)}
                        >
                          TakipÃ§iden Ã‡Ä±kar
                        </button>
                      )}
                    </div>
                  </div>
                ))
              )}
            </div>
          </div>
        </div>
      )}

      {/* Takip Edilenler Modal */}
      {showFollowingModal && (
        <div className="modal-overlay" onClick={() => setShowFollowingModal(false)}>
          <div className="modal-content followers-modal" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2>Takip Edilenler ({profil?.takipEdilenSayisi || following.length})</h2>
              <button className="modal-close" onClick={() => setShowFollowingModal(false)}>
                <XIcon />
              </button>
            </div>
            <div className="followers-list">
              {followingLoading && following.length === 0 ? (
                <div className="followers-loading">
                  <span className="spinner" />
                  <span>YÃ¼kleniyor...</span>
                </div>
              ) : following.length === 0 ? (
                <div className="followers-empty">
                  <UserIcon />
                  <span>HenÃ¼z kimse takip edilmiyor</span>
                </div>
              ) : (
                following.map((followedUser) => (
                  <div key={followedUser.id} className="follower-item">
                    <div 
                      className="follower-info"
                      onClick={() => {
                        setShowFollowingModal(false);
                        navigate(`/profil/${followedUser.kullaniciAdi}`);
                      }}
                    >
                      <div className="follower-avatar">
                        {followedUser.avatarUrl ? (
                          <img src={followedUser.avatarUrl} alt={followedUser.kullaniciAdi} />
                        ) : (
                          <UserIcon />
                        )}
                      </div>
                      <div className="follower-details">
                        <span className="follower-name">{followedUser.goruntulemeAdi || followedUser.kullaniciAdi}</span>
                        <span className="follower-username">@{followedUser.kullaniciAdi}</span>
                        {/* BaÅŸka profilde ortak takip gÃ¶stergesi */}
                        {!isOwnProfile && myFollowingIds.has(followedUser.id) && (
                          <span className="follower-mutual">Ortak takip</span>
                        )}
                      </div>
                    </div>
                    {isOwnProfile && (
                      <button
                        className="follower-action-btn text-btn unfollow"
                        disabled={modalFollowLoading === followedUser.id}
                        onClick={() => handleFollowFromModal(followedUser.id)}
                      >
                        {modalFollowLoading === followedUser.id ? (
                          <span className="spinner-small" />
                        ) : (
                          'Takibi BÄ±rak'
                        )}
                      </button>
                    )}
                    {!isOwnProfile && user && user.id !== followedUser.id && (
                      <button
                        className={`follower-action-btn text-btn ${myFollowingIds.has(followedUser.id) ? 'following' : ''}`}
                        disabled={modalFollowLoading === followedUser.id}
                        onClick={() => handleFollowFromModal(followedUser.id)}
                      >
                        {modalFollowLoading === followedUser.id ? (
                          <span className="spinner-small" />
                        ) : myFollowingIds.has(followedUser.id) ? (
                          'Takipten Ã‡Ä±k'
                        ) : (
                          'Takip Et'
                        )}
                      </button>
                    )}
                  </div>
                ))
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default ProfilePage;


========== saga.client\src\pages\glass\RegisterPage.tsx ==========

import { useEffect } from 'react';
import { useNavigate } from 'react-router-dom';

// RegisterPage artÄ±k LoginPage'deki "KayÄ±t Ol" sekmesine yÃ¶nlendiriyor
export default function RegisterPage() {
  const navigate = useNavigate();

  useEffect(() => {
    // LoginPage'e yÃ¶nlendir, kayÄ±t sekmesi URL parametresiyle aÃ§Ä±labilir
    navigate('/giris?tab=register', { replace: true });
  }, [navigate]);

  return null;
}


========== saga.client\src\pages\glass\ResetPasswordPage.tsx ==========

import { useState, useEffect } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { ArrowLeft, Loader2, CheckCircle, Eye, EyeOff, AlertTriangle } from 'lucide-react';
import { supabase } from '../../services/supabase';
import './LoginPage.css';

// ============================================
// SAGA RESET PASSWORD PAGE - VOID THEME
// ============================================

export default function ResetPasswordPage() {
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [success, setSuccess] = useState(false);
  const [hasValidSession, setHasValidSession] = useState<boolean | null>(null);
  const navigate = useNavigate();

  useEffect(() => {
    // Supabase recovery flow'dan gelen session'Ä± kontrol et
    const checkSession = async () => {
      const { data: { session } } = await supabase.auth.getSession();
      
      // URL hash'ten recovery token kontrolÃ¼
      const hashParams = new URLSearchParams(window.location.hash.substring(1));
      const type = hashParams.get('type');
      
      if (type === 'recovery' || session) {
        setHasValidSession(true);
      } else {
        setHasValidSession(false);
      }
    };
    
    checkSession();

    // Auth state deÄŸiÅŸikliklerini dinle
    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {
      if (event === 'PASSWORD_RECOVERY') {
        setHasValidSession(true);
      } else if (session) {
        setHasValidSession(true);
      }
    });

    return () => subscription.unsubscribe();
  }, []);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');

    if (password !== confirmPassword) {
      setError('Åifreler eÅŸleÅŸmiyor.');
      return;
    }

    if (password.length < 8) {
      setError('Åifre en az 8 karakter olmalÄ±dÄ±r.');
      return;
    }

    setLoading(true);

    try {
      const { error } = await supabase.auth.updateUser({ password });
      
      if (error) throw error;
      
      setSuccess(true);
      
      // KullanÄ±cÄ±yÄ± Ã§Ä±kÄ±ÅŸ yaptÄ±r
      await supabase.auth.signOut();
    } catch (err: any) {
      setError(err.message || 'Åifre sÄ±fÄ±rlama baÅŸarÄ±sÄ±z. LÃ¼tfen tekrar deneyin.');
    } finally {
      setLoading(false);
    }
  };

  // YÃ¼kleniyor durumu
  if (hasValidSession === null) {
    return (
      <div className="auth-page">
        <div className="bg-canvas">
          <div className="bg-gradient"></div>
          <div className="orb orb-1"></div>
          <div className="orb orb-2"></div>
        </div>
        <div className="auth-container">
          <div style={{ textAlign: 'center', color: 'rgba(255,255,255,0.5)' }}>
            <Loader2 size={32} className="loading-spinner" style={{ margin: '0 auto 16px' }} />
            DoÄŸrulanÄ±yor...
          </div>
        </div>
      </div>
    );
  }

  // Token yoksa hata gÃ¶ster
  if (!hasValidSession && !success) {
    return (
      <div className="auth-page">
        <div className="bg-canvas">
          <div className="bg-gradient"></div>
          <div className="orb orb-1"></div>
          <div className="orb orb-2"></div>
          {[...Array(10)].map((_, i) => (
            <div key={i} className="particle"></div>
          ))}
        </div>

        <div className="auth-container">
          <div className="brand">
            <h1 className="brand-logo">SAGA</h1>
            <p className="brand-tagline">Her Hikayenin Bir DestanÄ± Var</p>
          </div>

          <div className="auth-card">
            <div style={{ textAlign: 'center' }}>
              <div style={{ 
                width: '64px', 
                height: '64px', 
                margin: '0 auto 24px',
                borderRadius: '50%',
                background: 'rgba(239, 68, 68, 0.2)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center'
              }}>
                <AlertTriangle size={32} color="#ef4444" />
              </div>

              <h2 style={{ fontSize: '1.5rem', fontWeight: 600, color: '#fff', marginBottom: '12px' }}>
                GeÃ§ersiz Link
              </h2>
              
              <p style={{ color: 'rgba(255,255,255,0.5)', fontSize: '14px', marginBottom: '24px', lineHeight: 1.6 }}>
                Åifre sÄ±fÄ±rlama linki geÃ§ersiz veya sÃ¼resi dolmuÅŸ.
                LÃ¼tfen yeni bir ÅŸifre sÄ±fÄ±rlama talebi oluÅŸturun.
              </p>

              <Link
                to="/sifre-sifirla"
                className="submit-btn"
                style={{ display: 'block', textDecoration: 'none', marginBottom: '16px' }}
              >
                <span>Yeni Åifre SÄ±fÄ±rlama Talebi</span>
              </Link>

              <Link
                to="/giris"
                className="forgot-link"
                style={{ display: 'block' }}
              >
                GiriÅŸ SayfasÄ±na DÃ¶n
              </Link>
            </div>
          </div>

          <div className="auth-footer">
            <p>Â© 2024 Saga. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
          </div>
        </div>
      </div>
    );
  }

  if (success) {
    return (
      <div className="auth-page">
        <div className="bg-canvas">
          <div className="bg-gradient"></div>
          <div className="orb orb-1"></div>
          <div className="orb orb-2"></div>
          {[...Array(10)].map((_, i) => (
            <div key={i} className="particle"></div>
          ))}
        </div>

        <div className="auth-container">
          <div className="brand">
            <h1 className="brand-logo">SAGA</h1>
            <p className="brand-tagline">Her Hikayenin Bir DestanÄ± Var</p>
          </div>

          <div className="auth-card">
            <div style={{ textAlign: 'center' }}>
              <div style={{ 
                width: '64px', 
                height: '64px', 
                margin: '0 auto 24px',
                borderRadius: '50%',
                background: 'rgba(34, 197, 94, 0.2)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center'
              }}>
                <CheckCircle size={32} color="#22c55e" />
              </div>

              <h2 style={{ fontSize: '1.5rem', fontWeight: 600, color: '#fff', marginBottom: '12px' }}>
                Åifre GÃ¼ncellendi
              </h2>
              
              <p style={{ color: 'rgba(255,255,255,0.5)', fontSize: '14px', marginBottom: '24px', lineHeight: 1.6 }}>
                Åifreniz baÅŸarÄ±yla deÄŸiÅŸtirildi. ArtÄ±k yeni ÅŸifrenizle giriÅŸ yapabilirsiniz.
              </p>

              <button
                onClick={() => navigate('/giris')}
                className="submit-btn"
              >
                <span>GiriÅŸ Yap</span>
              </button>
            </div>
          </div>

          <div className="auth-footer">
            <p>Â© 2024 Saga. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="auth-page">
      <div className="bg-canvas">
        <div className="bg-gradient"></div>
        <div className="orb orb-1"></div>
        <div className="orb orb-2"></div>
        {[...Array(10)].map((_, i) => (
          <div key={i} className="particle"></div>
        ))}
      </div>

      <div className="auth-container">
        <div className="brand">
          <h1 className="brand-logo">SAGA</h1>
          <p className="brand-tagline">Her Hikayenin Bir DestanÄ± Var</p>
        </div>

        <div className="auth-card">
          <div style={{ textAlign: 'center', marginBottom: '32px' }}>
            <h2 style={{ fontSize: '1.5rem', fontWeight: 600, color: '#fff', marginBottom: '8px' }}>
              Yeni Åifre Belirle
            </h2>
            <p style={{ color: 'rgba(255,255,255,0.5)', fontSize: '14px' }}>
              HesabÄ±nÄ±z iÃ§in yeni bir ÅŸifre belirleyin.
            </p>
          </div>

          {error && <div className="error-message">{error}</div>}

          <form onSubmit={handleSubmit}>
            <div className="input-group">
              <label className="input-label">Yeni Åifre</label>
              <div className="input-wrapper">
                <input 
                  type={showPassword ? 'text' : 'password'} 
                  className="input-field" 
                  placeholder="En az 8 karakter" 
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  required
                  minLength={8}
                />
                <button 
                  type="button" 
                  className="toggle-password"
                  onClick={() => setShowPassword(!showPassword)}
                >
                  {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                </button>
              </div>
            </div>

            <div className="input-group">
              <label className="input-label">Åifre Tekrar</label>
              <div className="input-wrapper">
                <input 
                  type={showConfirmPassword ? 'text' : 'password'} 
                  className="input-field" 
                  placeholder="Åifrenizi tekrar girin" 
                  value={confirmPassword}
                  onChange={(e) => setConfirmPassword(e.target.value)}
                  required
                  minLength={8}
                />
                <button 
                  type="button" 
                  className="toggle-password"
                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                >
                  {showConfirmPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                </button>
              </div>
            </div>

            <button 
              type="submit" 
              className={`submit-btn ${loading ? 'loading' : ''}`} 
              disabled={loading || !password || !confirmPassword}
              style={{ marginBottom: '16px' }}
            >
              <span>
                {loading ? (
                  <>
                    <Loader2 size={18} className="loading-spinner" />
                    Åifre GÃ¼ncelleniyor...
                  </>
                ) : (
                  'Åifreyi GÃ¼ncelle'
                )}
              </span>
            </button>

            <Link
              to="/giris"
              className="social-btn"
              style={{ 
                width: '100%', 
                textDecoration: 'none',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                gap: '8px'
              }}
            >
              <ArrowLeft size={16} />
              GiriÅŸ SayfasÄ±na DÃ¶n
            </Link>
          </form>
        </div>

        <div className="auth-footer">
          <p>Â© 2024 Saga. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
        </div>
      </div>
    </div>
  );
}


========== saga.client\src\pages\glass\SettingsPage.css ==========

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SAGA SETTINGS PAGE - Void/Gold Theme
   HTML Prototipi ile birebir uyumlu
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-page {
  min-height: 100vh;
  background: var(--void);
  padding-top: 0; /* Gereksiz boÅŸluk kaldÄ±rÄ±ldÄ± */
  padding-bottom: 100px; /* Floating nav iÃ§in */
}

.settings-content {
  max-width: 600px;
  margin: 0 auto;
  padding: 20px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-page-header {
  margin-bottom: 24px;
}

.settings-page-title {
  font-family: 'Cinzel', serif;
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--void-text);
  margin: 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAB HEADER (Back Navigation)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-tab-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 24px;
}

.settings-back-btn {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  color: var(--void-text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.settings-back-btn:hover {
  background: var(--void-border);
  border-color: var(--gold);
  color: var(--gold);
}

.settings-back-btn svg {
  width: 20px;
  height: 20px;
}

.settings-tab-title {
  font-family: 'Cinzel', serif;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--void-text);
  margin: 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAB CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-tab-content {
  animation: fadeInUp 0.3s ease;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE EDIT TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.profile-edit-section {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 20px;
}

.profile-avatar-edit {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 24px;
}

.profile-avatar-preview {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(212, 175, 55, 0.1));
  border: 3px solid rgba(212, 175, 55, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 12px;
}

.profile-avatar-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.profile-avatar-preview .avatar-letter {
  font-family: 'Cinzel', serif;
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--gold);
}

.profile-avatar-change {
  color: var(--gold);
  font-size: 0.9rem;
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.profile-avatar-change:hover {
  opacity: 0.8;
}

.profile-form-group {
  margin-bottom: 20px;
}

.profile-form-group:last-child {
  margin-bottom: 0;
}

.profile-form-group label {
  display: block;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--void-text-secondary);
  margin-bottom: 8px;
}

.profile-form-group input,
.profile-form-group textarea {
  width: 100%;
  padding: 14px 16px;
  font-size: 1rem;
  font-family: 'Inter', sans-serif;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  color: var(--void-text);
  transition: all 0.2s ease;
  box-sizing: border-box;
}

.profile-form-group input::placeholder,
.profile-form-group textarea::placeholder {
  color: var(--void-text-muted);
}

.profile-form-group input:focus,
.profile-form-group textarea:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
}

.profile-form-group textarea {
  resize: none;
  min-height: 100px;
}

.profile-save-btn {
  width: 100%;
  padding: 16px;
  background: linear-gradient(135deg, var(--gold), var(--gold-light));
  color: var(--void);
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 8px;
}

.profile-save-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
}

.profile-save-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NOTIFICATION SETTINGS TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.notification-settings-list {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  overflow: hidden;
}

.notification-setting-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px;
  border-bottom: 1px solid var(--void-border);
}

.notification-setting-item:last-child {
  border-bottom: none;
}

.notification-setting-info {
  flex: 1;
}

.notification-setting-label {
  font-size: 0.95rem;
  font-weight: 500;
  color: var(--void-text);
  margin-bottom: 4px;
}

.notification-setting-desc {
  font-size: 0.8rem;
  color: var(--void-text-muted);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRIVACY SETTINGS TAB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.privacy-settings-list {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  overflow: hidden;
  margin-bottom: 20px;
}

.privacy-setting-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px;
  border-bottom: 1px solid var(--void-border);
}

.privacy-setting-item:last-child {
  border-bottom: none;
}

.privacy-setting-info {
  flex: 1;
}

.privacy-setting-label {
  font-size: 0.95rem;
  font-weight: 500;
  color: var(--void-text);
  margin-bottom: 4px;
}

.privacy-setting-desc {
  font-size: 0.8rem;
  color: var(--void-text-muted);
}

/* Success message */
.settings-success {
  background: rgba(34, 197, 94, 0.15);
  color: #22c55e;
  padding: 12px 16px;
  border-radius: 12px;
  font-size: 0.9rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.settings-success svg {
  width: 18px;
  height: 18px;
}

/* Error message */
.settings-error {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
  padding: 12px 16px;
  border-radius: 12px;
  font-size: 0.9rem;
  margin-bottom: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS GROUPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-groups {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.settings-group {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  overflow: hidden;
}

.settings-group.danger {
  border-color: rgba(239, 68, 68, 0.3);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS ITEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
  border-bottom: 1px solid var(--void-border);
}

.settings-item:last-child {
  border-bottom: none;
}

.settings-item:hover {
  background: var(--void-elevated);
}

.settings-item.logout:hover {
  background: rgba(239, 68, 68, 0.1);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS ICON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--void-elevated);
  color: var(--void-text-secondary);
  flex-shrink: 0;
}

.settings-icon svg {
  width: 20px;
  height: 20px;
}

.settings-icon.gold {
  background: var(--gold-glow);
  color: var(--gold);
}

.settings-icon.blue {
  background: rgba(59, 130, 246, 0.15);
  color: #3b82f6;
}

.settings-icon.red {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-item-content {
  flex: 1;
  min-width: 0;
}

.settings-label {
  font-size: 0.95rem;
  font-weight: 500;
  color: var(--void-text);
  margin-bottom: 2px;
}

.settings-label.red {
  color: #ef4444;
}

.settings-desc {
  font-size: 0.8rem;
  color: var(--void-text-muted);
}

.settings-arrow {
  color: var(--void-text-muted);
  flex-shrink: 0;
}

.settings-arrow svg {
  width: 18px;
  height: 18px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOGGLE SWITCH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-toggle {
  width: 48px;
  height: 28px;
  background: var(--void-border);
  border-radius: 14px;
  position: relative;
  cursor: pointer;
  transition: background 0.3s ease;
  flex-shrink: 0;
}

.settings-toggle.active {
  background: var(--gold);
}

.settings-toggle::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  width: 22px;
  height: 22px;
  background: white;
  border-radius: 50%;
  transition: transform 0.3s ease;
}

.settings-toggle.active::after {
  transform: translateX(20px);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-footer {
  text-align: center;
  padding: 32px 0;
  color: var(--void-text-muted);
  font-size: 0.75rem;
}

.settings-footer p {
  margin: 4px 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
  text-align: center;
  padding: 40px;
}

.settings-empty svg {
  width: 64px;
  height: 64px;
  color: var(--void-text-muted);
  margin-bottom: 16px;
}

.settings-empty h2 {
  font-size: 1.25rem;
  color: var(--void-text);
  margin: 0 0 8px;
}

.settings-empty p {
  color: var(--void-text-secondary);
  margin: 0 0 24px;
}

.settings-login-btn {
  padding: 12px 32px;
  background: linear-gradient(135deg, var(--gold), var(--gold-light));
  color: var(--void);
  border: none;
  border-radius: 12px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.settings-login-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODALS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  z-index: 1200;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

.modal-content {
  background: var(--void-surface);
  border-radius: 24px 24px 0 0;
  width: 100%;
  max-width: 500px;
  max-height: 90vh;
  padding: 24px;
  animation: modalSlideUp 0.3s ease;
  overflow-y: auto;
}

.modal-content.small {
  max-width: 400px;
  text-align: center;
}

@keyframes modalSlideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24px;
}

.modal-title {
  font-family: 'Cinzel', serif;
  font-size: 1.25rem;
  color: var(--void-text);
  margin: 0;
}

.modal-title.centered {
  width: 100%;
  text-align: center;
  margin-bottom: 12px;
}

.modal-close {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--void-border);
  border: none;
  color: var(--void-text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.modal-close:hover {
  background: var(--void-elevated);
  color: var(--void-text);
}

.modal-close svg {
  width: 18px;
  height: 18px;
}

.modal-icon {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 16px;
}

.modal-icon.warning {
  background: rgba(245, 158, 11, 0.15);
  color: #f59e0b;
}

.modal-icon.danger {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

.modal-icon svg {
  width: 32px;
  height: 32px;
}

.modal-text {
  color: var(--void-text-secondary);
  font-size: 0.9rem;
  margin-bottom: 24px;
  line-height: 1.5;
}

.modal-error {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
  padding: 12px;
  border-radius: 10px;
  font-size: 0.85rem;
  margin-bottom: 16px;
}

.modal-actions {
  display: flex;
  gap: 12px;
}

.modal-btn {
  flex: 1;
  padding: 14px 20px;
  border-radius: 12px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.modal-btn.secondary {
  background: var(--void-elevated);
  color: var(--void-text);
  border: 1px solid var(--void-border);
}

.modal-btn.secondary:hover {
  background: var(--void-border);
}

.modal-btn.primary {
  background: linear-gradient(135deg, var(--gold), var(--gold-light));
  color: var(--void);
}

.modal-btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
}

.modal-btn.danger {
  background: #ef4444;
  color: white;
}

.modal-btn.danger:hover {
  background: #dc2626;
}

.modal-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EDIT PROFILE MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.edit-avatar-section {
  text-align: center;
  margin-bottom: 24px;
}

.edit-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  margin: 0 auto 12px;
  overflow: hidden;
  position: relative;
  background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(212, 175, 55, 0.1));
  border: 3px solid rgba(212, 175, 55, 0.3);
}

.edit-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.edit-avatar .avatar-letter {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  font-family: 'Cinzel', serif;
  font-size: 2rem;
  font-weight: 700;
  color: var(--gold);
}

.edit-avatar-btn {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 32px;
  height: 32px;
  background: var(--gold);
  border: none;
  border-radius: 50%;
  color: var(--void);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.edit-avatar-btn:hover {
  transform: scale(1.1);
}

.edit-avatar-btn svg {
  width: 16px;
  height: 16px;
}

.edit-avatar-text {
  font-size: 0.85rem;
  color: var(--gold);
  cursor: pointer;
}

.edit-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-bottom: 24px;
}

.edit-field label {
  display: block;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--void-text-secondary);
  margin-bottom: 8px;
}

.edit-field input,
.edit-field textarea {
  width: 100%;
  padding: 14px 16px;
  font-size: 1rem;
  font-family: 'Inter', sans-serif;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  color: var(--void-text);
  transition: all 0.2s ease;
  box-sizing: border-box;
}

.edit-field input::placeholder,
.edit-field textarea::placeholder {
  color: var(--void-text-muted);
}

.edit-field input:focus,
.edit-field textarea:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
}

.edit-field textarea {
  resize: none;
  min-height: 80px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

@media (min-width: 768px) {
  .modal-backdrop {
    align-items: center;
  }
  
  .modal-content {
    border-radius: 24px;
    max-height: 80vh;
  }
}

@media (max-width: 480px) {
  .settings-content {
    padding: 16px;
  }
  
  .settings-page-title {
    font-size: 1.5rem;
  }
  
  .settings-item {
    padding: 14px;
  }
  
  .settings-icon {
    width: 36px;
    height: 36px;
  }
  
  .settings-icon svg {
    width: 18px;
    height: 18px;
  }
  
  .settings-label {
    font-size: 0.9rem;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE EDIT - Avatar Section
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-avatar-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 24px;
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  margin-bottom: 16px;
}

.settings-avatar-wrapper {
  position: relative;
  margin-bottom: 12px;
}

.settings-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(212, 175, 55, 0.1));
  border: 3px solid rgba(212, 175, 55, 0.3);
}

.settings-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.settings-avatar .avatar-letter {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Cinzel', serif;
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--gold);
}

.settings-avatar-btn {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--gold);
  border: none;
  color: var(--void);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.settings-avatar-btn:hover {
  transform: scale(1.1);
}

.settings-avatar-btn svg {
  width: 16px;
  height: 16px;
}

.settings-avatar-text {
  color: var(--gold);
  font-size: 0.9rem;
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.settings-avatar-text:hover {
  opacity: 0.8;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE EDIT - Form Fields
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-form {
  background: var(--void-surface);
  border: 1px solid var(--void-border);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 16px;
}

.settings-field {
  margin-bottom: 20px;
}

.settings-field:last-child {
  margin-bottom: 0;
}

.settings-field label {
  display: block;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--void-text-secondary);
  margin-bottom: 8px;
}

.settings-field input,
.settings-field textarea {
  width: 100%;
  padding: 14px 16px;
  font-size: 1rem;
  font-family: 'Inter', sans-serif;
  background: var(--void-elevated);
  border: 1px solid var(--void-border);
  border-radius: 12px;
  color: var(--void-text);
  transition: all 0.2s ease;
  box-sizing: border-box;
}

.settings-field input::placeholder,
.settings-field textarea::placeholder {
  color: var(--void-text-muted);
}

.settings-field input:focus,
.settings-field textarea:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
}

.settings-field input:disabled,
.settings-field input.disabled {
  background: var(--void-border);
  color: var(--void-text-muted);
  cursor: not-allowed;
}

.settings-field textarea {
  resize: none;
  min-height: 100px;
}

.field-hint {
  display: block;
  margin-top: 6px;
  font-size: 0.75rem;
  color: var(--void-text-muted);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SAVE BUTTON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-save-btn {
  width: 100%;
  padding: 16px;
  background: linear-gradient(135deg, var(--gold), var(--gold-light));
  color: var(--void);
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.settings-save-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
}

.settings-save-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.settings-save-btn.saved {
  background: #22c55e;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAB SPACER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-tab-spacer {
  width: 40px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING STATES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.settings-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: var(--void-text-muted);
  font-size: 0.95rem;
}

.settings-saving-indicator {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--void-surface);
  border: 1px solid var(--gold);
  color: var(--gold);
  padding: 10px 20px;
  border-radius: 20px;
  font-size: 0.85rem;
  z-index: 100;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateX(-50%) translateY(10px); }
  to { opacity: 1; transform: translateX(-50%) translateY(0); }
}


========== saga.client\src\pages\glass\SettingsPage.tsx ==========

import { useState, useEffect, useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { kullaniciApi, ayarlarApi, authApi } from '../../services/api';
import { supabase } from '../../services/supabase';
import './SettingsPage.css';

// ============================================
// ICONS
// ============================================
const CrownIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14" />
  </svg>
);

const UserIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
    <circle cx="12" cy="7" r="4" />
  </svg>
);

const BellIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
    <path d="M13.73 21a2 2 0 0 1-3.46 0" />
  </svg>
);

const LockIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
    <path d="M7 11V7a5 5 0 0 1 10 0v4" />
  </svg>
);

const MoonIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
  </svg>
);

const GlobeIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <circle cx="12" cy="12" r="10" />
    <line x1="2" y1="12" x2="22" y2="12" />
    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
  </svg>
);

const DownloadIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
    <polyline points="7 10 12 15 17 10" />
    <line x1="12" y1="15" x2="12" y2="3" />
  </svg>
);

const HelpIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <circle cx="12" cy="12" r="10" />
    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
    <line x1="12" y1="17" x2="12.01" y2="17" />
  </svg>
);

const LogOutIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
    <polyline points="16 17 21 12 16 7" />
    <line x1="21" y1="12" x2="9" y2="12" />
  </svg>
);

const ChevronRightIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <polyline points="9 18 15 12 9 6" />
  </svg>
);

const ChevronLeftIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <polyline points="15 18 9 12 15 6" />
  </svg>
);

const CameraIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
    <circle cx="12" cy="13" r="4" />
  </svg>
);

const TrashIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <polyline points="3 6 5 6 21 6" />
    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
  </svg>
);

const ShieldIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
  </svg>
);

// ============================================
// TYPES
// ============================================
type SettingsTab = 'main' | 'profil' | 'bildirimler' | 'gizlilik';

// ============================================
// MAIN COMPONENT
// ============================================
export default function SettingsPage() {
  const navigate = useNavigate();
  const { user, signOut } = useAuth();
  const fileInputRef = useRef<HTMLInputElement>(null);

  // Tab state
  const [activeTab, setActiveTab] = useState<SettingsTab>('main');

  // Preferences state
  const [darkMode, setDarkMode] = useState(true);
  
  // Modal state
  const [showLogoutModal, setShowLogoutModal] = useState(false);
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  
  // Profile edit state
  const [profilForm, setProfilForm] = useState({
    goruntulemeAdi: '',
    biyografi: '',
    avatarUrl: '',
  });
  const [profilLoading, setProfilLoading] = useState(false);
  const [profilSaved, setProfilSaved] = useState(false);
  const [avatarUploading, setAvatarUploading] = useState(false);
  
  // Bildirim ayarlarÄ± state
  const [bildirimAyarlari, setBildirimAyarlari] = useState({
    yeniTakipci: true,
    yorumlar: true,
    begeniler: true,
    oneriler: false,
    emailBildirimleri: false,
  });
  const [bildirimLoading, setBildirimLoading] = useState(false);
  const [bildirimSaving, setBildirimSaving] = useState(false);

  // Gizlilik ayarlarÄ± state
  const [gizlilikAyarlari, setGizlilikAyarlari] = useState({
    profilGizli: false,
    aktiviteGizli: false,
  });
  const [gizlilikLoading, setGizlilikLoading] = useState(false);
  const [gizlilikSaving, setGizlilikSaving] = useState(false);
  
  // Delete account state
  const [deleteLoading, setDeleteLoading] = useState(false);
  const [deleteError, setDeleteError] = useState('');

  // Load profil data
  useEffect(() => {
    if (activeTab === 'profil' && user) {
      loadProfilData();
    }
  }, [activeTab, user]);

  // Load bildirim ayarlarÄ±
  useEffect(() => {
    if (activeTab === 'bildirimler' && user) {
      loadBildirimAyarlari();
    }
  }, [activeTab, user]);

  // Load gizlilik ayarlarÄ±
  useEffect(() => {
    if (activeTab === 'gizlilik' && user) {
      loadGizlilikAyarlari();
    }
  }, [activeTab, user]);

  const loadProfilData = async () => {
    if (!user) return;
    try {
      const profil = await kullaniciApi.getProfil(user.kullaniciAdi);
      setProfilForm({
        goruntulemeAdi: profil.goruntulemeAdi || '',
        biyografi: profil.biyografi || '',
        avatarUrl: profil.avatarUrl || '',
      });
    } catch (err) {
      console.error('Profil yÃ¼klenemedi:', err);
    }
  };

  const loadBildirimAyarlari = async () => {
    setBildirimLoading(true);
    try {
      const ayarlar = await ayarlarApi.getAyarlar();
      setBildirimAyarlari({
        yeniTakipci: ayarlar.bildirimYeniTakipci,
        yorumlar: ayarlar.bildirimYorumlar,
        begeniler: ayarlar.bildirimBegeniler,
        oneriler: ayarlar.bildirimOneriler,
        emailBildirimleri: ayarlar.bildirimEmail,
      });
    } catch (err) {
      console.error('Bildirim ayarlarÄ± yÃ¼klenemedi:', err);
    } finally {
      setBildirimLoading(false);
    }
  };

  const loadGizlilikAyarlari = async () => {
    setGizlilikLoading(true);
    try {
      const ayarlar = await ayarlarApi.getAyarlar();
      setGizlilikAyarlari({
        profilGizli: ayarlar.profilGizli || false,
        aktiviteGizli: ayarlar.aktiviteGizli || false,
      });
    } catch (err) {
      console.error('Gizlilik ayarlarÄ± yÃ¼klenemedi:', err);
    } finally {
      setGizlilikLoading(false);
    }
  };

  // Avatar upload
  const handleAvatarUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (!file || !user) return;

    if (file.size > 2 * 1024 * 1024) {
      alert('Dosya boyutu 2MB\'dan kÃ¼Ã§Ã¼k olmalÄ±dÄ±r.');
      return;
    }

    setAvatarUploading(true);
    try {
      const fileExt = file.name.split('.').pop();
      const fileName = `${user.id}-${Date.now()}.${fileExt}`;

      const { error: uploadError } = await supabase.storage
        .from('avatars')
        .upload(fileName, file, { cacheControl: '3600', upsert: true });

      if (uploadError) throw uploadError;

      const { data: publicUrlData } = supabase.storage
        .from('avatars')
        .getPublicUrl(fileName);

      setProfilForm({ ...profilForm, avatarUrl: publicUrlData.publicUrl });
    } catch (err) {
      console.error('Avatar yÃ¼kleme hatasÄ±:', err);
      alert('Avatar yÃ¼klenirken bir hata oluÅŸtu.');
    } finally {
      setAvatarUploading(false);
      if (fileInputRef.current) fileInputRef.current.value = '';
    }
  };

  // Save profile
  const handleSaveProfile = async () => {
    setProfilLoading(true);
    setProfilSaved(false);
    try {
      await kullaniciApi.updateProfil({
        goruntulemeAdi: profilForm.goruntulemeAdi || undefined,
        biyografi: profilForm.biyografi || undefined,
        avatarUrl: profilForm.avatarUrl || undefined,
      });
      setProfilSaved(true);
      setTimeout(() => setProfilSaved(false), 3000);
    } catch (err) {
      console.error('Profil gÃ¼ncelleme hatasÄ±:', err);
      alert('Profil gÃ¼ncellenirken bir hata oluÅŸtu.');
    } finally {
      setProfilLoading(false);
    }
  };

  // Toggle bildirim ayarÄ±
  const handleBildirimToggle = async (key: keyof typeof bildirimAyarlari) => {
    const newValue = !bildirimAyarlari[key];
    setBildirimAyarlari({ ...bildirimAyarlari, [key]: newValue });
    
    setBildirimSaving(true);
    try {
      const apiKeyMap: Record<string, string> = {
        yeniTakipci: 'bildirimYeniTakipci',
        yorumlar: 'bildirimYorumlar',
        begeniler: 'bildirimBegeniler',
        oneriler: 'bildirimOneriler',
        emailBildirimleri: 'bildirimEmail',
      };
      await ayarlarApi.updateBildirimler({ [apiKeyMap[key]]: newValue });
    } catch (err) {
      console.error('Bildirim ayarÄ± gÃ¼ncellenemedi:', err);
      setBildirimAyarlari({ ...bildirimAyarlari, [key]: !newValue });
    } finally {
      setBildirimSaving(false);
    }
  };

  // Toggle gizlilik ayarÄ±
  const handleGizlilikToggle = async (key: keyof typeof gizlilikAyarlari) => {
    const newValue = !gizlilikAyarlari[key];
    setGizlilikAyarlari({ ...gizlilikAyarlari, [key]: newValue });
    
    setGizlilikSaving(true);
    try {
      await ayarlarApi.updateGizlilik({ [key]: newValue });
    } catch (err) {
      console.error('Gizlilik ayarÄ± gÃ¼ncellenemedi:', err);
      setGizlilikAyarlari({ ...gizlilikAyarlari, [key]: !newValue });
    } finally {
      setGizlilikSaving(false);
    }
  };

  // Logout
  const handleLogout = async () => {
    await signOut();
    navigate('/giris');
  };

  // Delete account
  const handleDeleteAccount = async () => {
    setDeleteLoading(true);
    setDeleteError('');
    try {
      await authApi.deleteAccount();
      await signOut();
      navigate('/');
    } catch (err: any) {
      setDeleteError(err.response?.data?.message || 'Hesap silinirken bir hata oluÅŸtu.');
    } finally {
      setDeleteLoading(false);
    }
  };

  if (!user) {
    return (
      <div className="settings-page">
        <div className="settings-empty">
          <UserIcon />
          <h2>GiriÅŸ YapmalÄ±sÄ±nÄ±z</h2>
          <p>AyarlarÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapÄ±n.</p>
          <button className="settings-login-btn" onClick={() => navigate('/giris')}>
            GiriÅŸ Yap
          </button>
        </div>
      </div>
    );
  }

  // ============================================
  // RENDER FUNCTIONS
  // ============================================

  const renderMainTab = () => (
    <>
      <div className="settings-page-header">
        <h1 className="settings-page-title">Hesap</h1>
      </div>

      <div className="settings-groups">
        {/* Group 1: Premium & Profile */}
        <div className="settings-group">
          <div className="settings-item" onClick={() => alert('Premium Ã¶zelliÄŸi yakÄ±nda!')}>
            <div className="settings-icon gold">
              <CrownIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label">SAGA Premium</div>
              <div className="settings-desc">ReklamsÄ±z deneyim, Ã¶zel Ã¶zellikler</div>
            </div>
            <span className="settings-arrow">
              <ChevronRightIcon />
            </span>
          </div>

          <div className="settings-item" onClick={() => setActiveTab('profil')}>
            <div className="settings-icon">
              <UserIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label">Profili DÃ¼zenle</div>
              <div className="settings-desc">Ad, bio, fotoÄŸraf</div>
            </div>
            <span className="settings-arrow">
              <ChevronRightIcon />
            </span>
          </div>

          <div className="settings-item" onClick={() => setActiveTab('bildirimler')}>
            <div className="settings-icon blue">
              <BellIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label">Bildirimler</div>
              <div className="settings-desc">Push bildirimleri, e-posta</div>
            </div>
            <span className="settings-arrow">
              <ChevronRightIcon />
            </span>
          </div>

          <div className="settings-item" onClick={() => setActiveTab('gizlilik')}>
            <div className="settings-icon">
              <LockIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label">Gizlilik</div>
              <div className="settings-desc">Profil gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼, engellenenler</div>
            </div>
            <span className="settings-arrow">
              <ChevronRightIcon />
            </span>
          </div>
        </div>

        {/* Group 2: Preferences */}
        <div className="settings-group">
          <div className="settings-item" onClick={() => setDarkMode(!darkMode)}>
            <div className="settings-icon">
              <MoonIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label">KaranlÄ±k Mod</div>
              <div className="settings-desc">Sistem ayarÄ±nÄ± kullan</div>
            </div>
            <div className={`settings-toggle ${darkMode ? 'active' : ''}`} />
          </div>

          <div className="settings-item" onClick={() => alert('Dil ayarlarÄ± yakÄ±nda!')}>
            <div className="settings-icon">
              <GlobeIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label">Dil</div>
              <div className="settings-desc">TÃ¼rkÃ§e</div>
            </div>
            <span className="settings-arrow">
              <ChevronRightIcon />
            </span>
          </div>

          <div className="settings-item" onClick={() => alert('Veri indirme yakÄ±nda!')}>
            <div className="settings-icon">
              <DownloadIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label">Verilerimi Ä°ndir</div>
              <div className="settings-desc">TÃ¼m izleme geÃ§miÅŸi ve listeler</div>
            </div>
            <span className="settings-arrow">
              <ChevronRightIcon />
            </span>
          </div>
        </div>

        {/* Group 3: Support & Logout */}
        <div className="settings-group">
          <div className="settings-item" onClick={() => alert('YardÄ±m & Destek yakÄ±nda!')}>
            <div className="settings-icon">
              <HelpIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label">YardÄ±m & Destek</div>
              <div className="settings-desc">SSS, iletiÅŸim</div>
            </div>
            <span className="settings-arrow">
              <ChevronRightIcon />
            </span>
          </div>

          <div className="settings-item logout" onClick={() => setShowLogoutModal(true)}>
            <div className="settings-icon red">
              <LogOutIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label red">Ã‡Ä±kÄ±ÅŸ Yap</div>
            </div>
          </div>
        </div>

        {/* Group 4: Danger Zone */}
        <div className="settings-group danger">
          <div className="settings-item" onClick={() => setShowDeleteModal(true)}>
            <div className="settings-icon red">
              <TrashIcon />
            </div>
            <div className="settings-item-content">
              <div className="settings-label red">HesabÄ± Sil</div>
              <div className="settings-desc">Bu iÅŸlem geri alÄ±namaz</div>
            </div>
            <span className="settings-arrow">
              <ChevronRightIcon />
            </span>
          </div>
        </div>
      </div>

      <div className="settings-footer">
        <p>SAGA v1.0.0</p>
        <p>Â© 2024 SAGA. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
      </div>
    </>
  );

  const renderProfilTab = () => (
    <>
      <div className="settings-tab-header">
        <button className="settings-back-btn" onClick={() => setActiveTab('main')}>
          <ChevronLeftIcon />
        </button>
        <h1 className="settings-tab-title">Profili DÃ¼zenle</h1>
        <div className="settings-tab-spacer" />
      </div>

      <div className="settings-tab-content">
        {/* Avatar Section */}
        <div className="profile-avatar-section">
          <div className="profile-avatar-wrapper">
            <div className="profile-avatar">
              {profilForm.avatarUrl ? (
                <img src={profilForm.avatarUrl} alt="Avatar" />
              ) : (
                <span className="avatar-letter">
                  {(user.ad || user.kullaniciAdi).charAt(0).toUpperCase()}
                </span>
              )}
            </div>
            <button 
              className="avatar-edit-btn"
              onClick={() => fileInputRef.current?.click()}
              disabled={avatarUploading}
            >
              <CameraIcon />
            </button>
          </div>
          <input
            type="file"
            ref={fileInputRef}
            onChange={handleAvatarUpload}
            accept="image/jpeg,image/png,image/gif,image/webp"
            style={{ display: 'none' }}
          />
          <span 
            className="avatar-change-text"
            onClick={() => fileInputRef.current?.click()}
          >
            {avatarUploading ? 'YÃ¼kleniyor...' : 'FotoÄŸrafÄ± DeÄŸiÅŸtir'}
          </span>
        </div>

        {/* Form Fields */}
        <div className="settings-form">
          <div className="settings-field">
            <label>Ä°sim</label>
            <input
              type="text"
              value={profilForm.goruntulemeAdi}
              onChange={(e) => setProfilForm({ ...profilForm, goruntulemeAdi: e.target.value })}
              placeholder="Ä°sminiz"
            />
          </div>

          <div className="settings-field">
            <label>KullanÄ±cÄ± AdÄ±</label>
            <input
              type="text"
              value={`@${user.kullaniciAdi}`}
              disabled
              className="disabled"
            />
            <span className="field-hint">KullanÄ±cÄ± adÄ± deÄŸiÅŸtirilemez</span>
          </div>

          <div className="settings-field">
            <label>Bio</label>
            <textarea
              value={profilForm.biyografi}
              onChange={(e) => setProfilForm({ ...profilForm, biyografi: e.target.value })}
              placeholder="Kendinizden bahsedin..."
              rows={3}
            />
          </div>
        </div>

        {/* Save Button */}
        <button 
          className={`settings-save-btn ${profilSaved ? 'saved' : ''}`}
          onClick={handleSaveProfile}
          disabled={profilLoading}
        >
          {profilLoading ? 'Kaydediliyor...' : profilSaved ? 'Kaydedildi!' : 'Kaydet'}
        </button>
      </div>
    </>
  );

  const renderBildirimlerTab = () => (
    <>
      <div className="settings-tab-header">
        <button className="settings-back-btn" onClick={() => setActiveTab('main')}>
          <ChevronLeftIcon />
        </button>
        <h1 className="settings-tab-title">Bildirimler</h1>
        <div className="settings-tab-spacer" />
      </div>

      <div className="settings-tab-content">
        {bildirimLoading ? (
          <div className="settings-loading">
            <div className="loading-spinner" />
            <span>YÃ¼kleniyor...</span>
          </div>
        ) : (
          <div className="settings-groups">
            <div className="settings-group">
              <div className="settings-item" onClick={() => handleBildirimToggle('yeniTakipci')}>
                <div className="settings-item-content">
                  <div className="settings-label">Yeni takipÃ§i</div>
                  <div className="settings-desc">Biri sizi takip ettiÄŸinde bildirim alÄ±n</div>
                </div>
                <div className={`settings-toggle ${bildirimAyarlari.yeniTakipci ? 'active' : ''}`} />
              </div>

              <div className="settings-item" onClick={() => handleBildirimToggle('yorumlar')}>
                <div className="settings-item-content">
                  <div className="settings-label">Yorumlar</div>
                  <div className="settings-desc">YorumlarÄ±nÄ±za yanÄ±t geldiÄŸinde</div>
                </div>
                <div className={`settings-toggle ${bildirimAyarlari.yorumlar ? 'active' : ''}`} />
              </div>

              <div className="settings-item" onClick={() => handleBildirimToggle('begeniler')}>
                <div className="settings-item-content">
                  <div className="settings-label">BeÄŸeniler</div>
                  <div className="settings-desc">Ä°Ã§eriÄŸiniz beÄŸenildiÄŸinde</div>
                </div>
                <div className={`settings-toggle ${bildirimAyarlari.begeniler ? 'active' : ''}`} />
              </div>

              <div className="settings-item" onClick={() => handleBildirimToggle('oneriler')}>
                <div className="settings-item-content">
                  <div className="settings-label">Ã–neriler</div>
                  <div className="settings-desc">Size Ã¶zel iÃ§erik Ã¶nerileri</div>
                </div>
                <div className={`settings-toggle ${bildirimAyarlari.oneriler ? 'active' : ''}`} />
              </div>
            </div>

            <div className="settings-group">
              <div className="settings-item" onClick={() => handleBildirimToggle('emailBildirimleri')}>
                <div className="settings-item-content">
                  <div className="settings-label">E-posta bildirimleri</div>
                  <div className="settings-desc">Ã–nemli gÃ¼ncellemeleri e-posta ile alÄ±n</div>
                </div>
                <div className={`settings-toggle ${bildirimAyarlari.emailBildirimleri ? 'active' : ''}`} />
              </div>
            </div>
          </div>
        )}

        {bildirimSaving && (
          <div className="settings-saving-indicator">
            Kaydediliyor...
          </div>
        )}
      </div>
    </>
  );

  const renderGizlilikTab = () => (
    <>
      <div className="settings-tab-header">
        <button className="settings-back-btn" onClick={() => setActiveTab('main')}>
          <ChevronLeftIcon />
        </button>
        <h1 className="settings-tab-title">Gizlilik</h1>
        <div className="settings-tab-spacer" />
      </div>

      <div className="settings-tab-content">
        {gizlilikLoading ? (
          <div className="settings-loading">
            <div className="loading-spinner" />
            <span>YÃ¼kleniyor...</span>
          </div>
        ) : (
          <div className="settings-groups">
            <div className="settings-group">
              <div className="settings-item" onClick={() => handleGizlilikToggle('profilGizli')}>
                <div className="settings-icon">
                  <UserIcon />
                </div>
                <div className="settings-item-content">
                  <div className="settings-label">Gizli Profil</div>
                  <div className="settings-desc">Sadece takipÃ§ileriniz profilinizi gÃ¶rebilir</div>
                </div>
                <div className={`settings-toggle ${gizlilikAyarlari.profilGizli ? 'active' : ''}`} />
              </div>

              <div className="settings-item" onClick={() => handleGizlilikToggle('aktiviteGizli')}>
                <div className="settings-icon">
                  <ShieldIcon />
                </div>
                <div className="settings-item-content">
                  <div className="settings-label">Aktivite GizliliÄŸi</div>
                  <div className="settings-desc">Aktiviteleriniz akÄ±ÅŸta gÃ¶rÃ¼nmesin</div>
                </div>
                <div className={`settings-toggle ${gizlilikAyarlari.aktiviteGizli ? 'active' : ''}`} />
              </div>
            </div>
          </div>
        )}

        {gizlilikSaving && (
          <div className="settings-saving-indicator">
            Kaydediliyor...
          </div>
        )}
      </div>
    </>
  );

  return (
    <div className="settings-page">
      <main className="settings-content">
        {activeTab === 'main' && renderMainTab()}
        {activeTab === 'profil' && renderProfilTab()}
        {activeTab === 'bildirimler' && renderBildirimlerTab()}
        {activeTab === 'gizlilik' && renderGizlilikTab()}
      </main>

      {/* Logout Modal */}
      {showLogoutModal && (
        <div className="modal-backdrop" onClick={() => setShowLogoutModal(false)}>
          <div className="modal-content small" onClick={(e) => e.stopPropagation()}>
            <div className="modal-icon warning">
              <LogOutIcon />
            </div>
            <h3 className="modal-title centered">Ã‡Ä±kÄ±ÅŸ Yap</h3>
            <p className="modal-text">HesabÄ±nÄ±zdan Ã§Ä±kÄ±ÅŸ yapmak istediÄŸinize emin misiniz?</p>
            <div className="modal-actions">
              <button 
                className="modal-btn secondary" 
                onClick={() => setShowLogoutModal(false)}
              >
                Ä°ptal
              </button>
              <button 
                className="modal-btn primary"
                onClick={handleLogout}
              >
                Ã‡Ä±kÄ±ÅŸ Yap
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Delete Account Modal */}
      {showDeleteModal && (
        <div className="modal-backdrop" onClick={() => setShowDeleteModal(false)}>
          <div className="modal-content small" onClick={(e) => e.stopPropagation()}>
            <div className="modal-icon danger">
              <TrashIcon />
            </div>
            <h3 className="modal-title centered">HesabÄ± Sil</h3>
            <p className="modal-text">
              Bu iÅŸlem geri alÄ±namaz. TÃ¼m verileriniz kalÄ±cÄ± olarak silinecektir.
            </p>
            {deleteError && (
              <div className="modal-error">{deleteError}</div>
            )}
            <div className="modal-actions">
              <button 
                className="modal-btn secondary" 
                onClick={() => { setShowDeleteModal(false); setDeleteError(''); }}
                disabled={deleteLoading}
              >
                Ä°ptal
              </button>
              <button 
                className="modal-btn danger"
                onClick={handleDeleteAccount}
                disabled={deleteLoading}
              >
                {deleteLoading ? 'Siliniyor...' : 'HesabÄ± Sil'}
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}


========== saga.client\src\services\api.ts ==========

import axios from 'axios';
import { supabase } from './supabase';

// Backend'in Ã§alÄ±ÅŸtÄ±ÄŸÄ± adres
const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:5054/api';

const api = axios.create({
    baseURL: API_URL,
    headers: {
        'Content-Type': 'application/json',
    },
});

// REQUEST INTERCEPTOR: Ä°stek gÃ¶nderilmeden hemen Ã¶nce araya girer
api.interceptors.request.use(async (config) => {
    // 1. Supabase'den gÃ¼ncel oturum bilgisini al
    const { data } = await supabase.auth.getSession();

    // 2. EÄŸer kullanÄ±cÄ± giriÅŸ yapmÄ±ÅŸsa, Token'Ä± baÅŸlÄ±ÄŸa ekle
    if (data.session?.access_token) {
        config.headers.Authorization = `Bearer ${data.session.access_token}`;
    }

    return config;
}, (error) => {
    return Promise.reject(error);
});

// RESPONSE INTERCEPTOR: Cevap geldikten hemen sonra araya girer
api.interceptors.response.use((response) => {
    return response;
}, (error) => {
    // Hata yÃ¶netimi
    const message = error.response?.data?.message || 'Bir hata oluÅŸtu.';

    // 401 (Yetkisiz) hatasÄ± gelirse konsola bas
    if (error.response?.status === 401) {
        console.warn("Oturum sÃ¼resi dolmuÅŸ veya yetkisiz eriÅŸim.");
    } else {
        console.error('API Error:', message);
    }

    return Promise.reject(error);
});

// ============================================
// TYPE DEFINITIONS
// ============================================

export interface AktiviteVeri {
    baslik?: string;
    icerikAdi?: string;
    posterUrl?: string;
    tur?: string;
    puan?: number;
    ortalamaPuan?: number; // Saga platform ortalamasÄ±
    hariciPuan?: number; // TMDB/IMDB puanÄ±
    yorumOzet?: string;
    yorumTamUzunluk?: number; // Tam yorum uzunluÄŸu
    spoilerIceriyor?: boolean;
    yorumId?: number;
    listeAdi?: string;
    takipEdilenKullaniciAdi?: string;
    takipEdilenAvatar?: string;
    durum?: string;
    // Detay bilgileri (feed.html ile uyumlu)
    yil?: number;
    sure?: string;
    sezonSayisi?: number;
    bolumSayisi?: number;
    sayfaSayisi?: number;
    yazar?: string;
}

export interface Aktivite {
    id: number;
    kullaniciId: string;
    kullaniciAdi: string;
    kullaniciAvatar?: string;
    aktiviteTipi?: number;
    aktiviteTipiStr?: string;
    aktiviteTuru?: 'puanlama' | 'yorum' | 'listeye_ekleme' | 'takip' | 'durum_guncelleme';
    icerikId?: number;
    icerikTur?: string;
    olusturulmaZamani: string;
    // Yeni istatistik alanlarÄ±
    begeniSayisi?: number;
    yorumSayisi?: number;
    paylasimSayisi?: number;
    begendim?: boolean;
    veri?: AktiviteVeri;
}

// Aktivite yorumu
export interface AktiviteYorum {
    id: number;
    aktiviteId: number;
    kullaniciId: string;
    kullaniciAdi: string;
    kullaniciAvatar?: string;
    icerik: string;
    ustYorumId?: number;
    begeniSayisi: number;
    begendim: boolean;
    olusturulmaZamani: string;
    yanitlar?: AktiviteYorum[];
}

// Aktivite beÄŸeni
export interface AktiviteBegeni {
    aktiviteId: number;
    kullaniciId: string;
    kullaniciAdi: string;
    avatarUrl?: string;
    olusturulmaZamani: string;
}

// KullanÄ±cÄ± ayarlarÄ±
export interface KullaniciAyarlari {
    bildirimYeniTakipci: boolean;
    bildirimYorumlar: boolean;
    bildirimBegeniler: boolean;
    bildirimOneriler: boolean;
    bildirimEmail: boolean;
    profilGizli: boolean;
    aktiviteGizli: boolean;
    tema: string;
    dil: string;
}

export interface OyuncuInfo {
    id?: number;
    hariciId?: string;
    ad: string;
    karakter?: string;
    profilUrl?: string;
    rolTipi?: string; // oyuncu, yonetmen, yapimci, senarist
}

export interface Icerik {
    id: number;
    hariciId: string;
    apiKaynagi: string;
    tur: string; // Backend "Film", "Dizi", "Kitap" dÃ¶ndÃ¼rÃ¼yor
    baslik: string;
    aciklama?: string;
    posterUrl?: string;
    yayinTarihi?: string;
    ortalamaPuan: number;
    puanlamaSayisi: number;
    hariciPuan: number; // TMDB/IMDB puanÄ±
    hariciOySayisi: number;
    yorumSayisi: number;
    listeyeEklenmeSayisi: number;
    goruntulemeSayisi: number;
    populerlikSkoru: number;
    olusturulmaZamani: string;
    kullaniciPuani?: number;
    kullanicininDurumu?: string;
    
    // Film/Dizi meta verileri
    yonetmen?: string;
    oyuncular?: OyuncuInfo[];
    turler?: string[];
    sure?: number; // Dakika
    sezonSayisi?: number;
    bolumSayisi?: number;
    
    // Kitap meta verileri
    yazarlar?: string[];
    sayfaSayisi?: number;
    yayinevi?: string;
    isbn?: string;
    kategoriler?: string[];
}

export interface IcerikListItem {
    id: number;
    baslik: string;
    tur: string;
    aciklama?: string;
    posterUrl?: string;
    ortalamaPuan: number;
    puanlamaSayisi?: number;
    hariciPuan?: number; // TMDB/IMDB puanÄ±
    hariciOySayisi?: number;
    populerlikSkoru?: number;
    yayinTarihi?: string;
    // SÃ¼re ve bÃ¶lÃ¼m bilgileri
    sure?: number; // Film sÃ¼resi (dakika)
    sezonSayisi?: number; // Diziler iÃ§in sezon sayÄ±sÄ±
    bolumSayisi?: number; // Diziler iÃ§in bÃ¶lÃ¼m sayÄ±sÄ±
    sayfaSayisi?: number; // Kitaplar iÃ§in sayfa sayÄ±sÄ±
    // Ek bilgiler
    yazar?: string; // Kitaplar iÃ§in yazar
    turler?: string[]; // TÃ¼rler (Aksiyon, Komedi vb.)
}

export interface Yorum {
    id: number;
    icerikId: number;
    kullaniciId: string;
    kullaniciAdi: string;
    kullaniciAvatar?: string;
    baslik?: string;
    icerik?: string;
    icerikOzet?: string;
    puan?: number;
    spoilerIceriyor: boolean;
    begeniSayisi: number;
    kullaniciBegendiMi: boolean;
    olusturulmaZamani: string;
    guncellemeZamani?: string;
    ustYorumId?: number;
    yanitlar?: Yorum[];
}

export interface YorumCreateDto {
    icerikId: number;
    baslik?: string;
    icerik: string;
    puan?: number;
    spoilerIceriyor?: boolean;
    ustYorumId?: number;
}

export interface Puanlama {
    id: number;
    kullaniciId: string;
    icerikId: number;
    puan: number;
    olusturulmaZamani: string;
}

export interface PuanlamaCreateDto {
    icerikId: number;
    puan: number;
}

export interface Kullanici {
    id: string;
    kullaniciAdi: string;
    eposta?: string;
    goruntulemeAdi?: string;
    biyografi?: string;
    avatarUrl?: string;
    rol?: string;
    olusturulmaZamani: string;
    // Ä°statistikler
    toplamPuanlama: number;
    toplamYorum: number;
    toplamListe: number;
    takipEdenSayisi: number;
    takipEdilenSayisi: number;
    takipEdiyorMu?: boolean;
}

// AkÄ±llÄ± Ã–neri Sistemi - Benzer iÃ§erik tÃ¼rleriyle ilgilenen kullanÄ±cÄ± Ã¶nerileri
export interface OnerilenKullanici {
    id: string;
    kullaniciAdi: string;
    goruntulemeAdi?: string;
    avatarUrl?: string;
    takipEdenSayisi: number;
    toplamPuanlama: number;
    ortakIcerikSayisi: number;
    oneriNedeni: string; // "5 ortak iÃ§erik", "Film ilgisi", "Kitap ilgisi", "PopÃ¼ler kullanÄ±cÄ±" vb.
}

export interface KutuphaneDurumu {
    id?: number;
    kullaniciId?: string;
    icerikId: number;
    icerik?: IcerikListItem;
    // Backend KutuphaneListDto alanlarÄ±
    baslik?: string;
    tur?: string;
    posterUrl?: string;
    ortalamaPuan?: number;
    durum: string;
    ilerleme?: number;
    guncellemeZamani?: string;
    // Eski alan adlarÄ± (uyumluluk)
    icerikAdi?: string;
    icerikTur?: string;
    durumStr?: string;
    olusturulmaZamani?: string;
}

export interface TmdbFilm {
    id: string;
    // Backend TÃ¼rkÃ§e alan adlarÄ±
    baslik?: string;
    aciklama?: string;
    posterUrl?: string;
    arkaplanUrl?: string; // Backdrop image
    yayinTarihi?: string;
    puan?: number;
    oySayisi?: number;
    mediaType?: 'movie' | 'tv'; // Film mi dizi mi
    tur?: string; // Ä°Ã§erik tÃ¼rÃ¼ (Film, Dizi, Kitap)
    turIds?: number[]; // TÃ¼r ID'leri (TMDB genre IDs)
    turler?: string[]; // TÃ¼r adlarÄ±
    // SAGA platformundaki veriler
    sagaOrtalamaPuan?: number; // SAGA platform ortalamasÄ±
    sagaIcerikId?: number; // VeritabanÄ±ndaki iÃ§erik ID'si
    // Alternatif alanlar (uyumluluk iÃ§in)
    title?: string;
    overview?: string;
    posterPath?: string;
    releaseDate?: string;
    voteAverage?: number;
    voteCount?: number;
}

// Google Books arama sonucu (totalItems ile birlikte)
export interface GoogleBooksSearchResult {
    items: GoogleBook[];
    totalItems: number;
}

export interface GoogleBook {
    id: string;
    baslik: string;
    yazarlar?: string[];
    aciklama?: string;
    posterUrl?: string;
    yayinTarihi?: string;
    ortalamaPuan?: number;
    oySayisi?: number;
    dil?: string; // Backend'den gelen dil bilgisi (tr, en, vs.)
    // Alternatif alanlar (frontend uyumluluÄŸu iÃ§in)
    title?: string;
    authors?: string[];
    description?: string;
    thumbnail?: string;
    publishedDate?: string;
    averageRating?: number;
    ratingsCount?: number;
    language?: string; // Alternatif dil alanÄ±
}

// ============================================
// AKTIVITE API
// ============================================

export const aktiviteApi = {
    // Takip edilen kullanÄ±cÄ±larÄ±n feed'i (auth gerekli)
    getFeed: async (params?: { aktiviteTuru?: string; sayfa?: number; limit?: number }) => {
        const response = await api.get<Aktivite[]>('/aktivite/feed', { params });
        return {
            data: response.data,
            toplamSayfa: parseInt(response.headers['x-toplam-sayfa'] || '1'),
            toplamKayit: parseInt(response.headers['x-toplam-kayit'] || '0'),
        };
    },

    // Genel feed (herkese aÃ§Ä±k)
    getGenelFeed: async (params?: { aktiviteTuru?: string; sayfa?: number; limit?: number }) => {
        const response = await api.get<Aktivite[]>('/aktivite/genel', { params });
        return {
            data: response.data,
            toplamSayfa: parseInt(response.headers['x-toplam-sayfa'] || '1'),
            toplamKayit: parseInt(response.headers['x-toplam-kayit'] || '0'),
        };
    },

    // KullanÄ±cÄ±nÄ±n aktiviteleri (GUID id ile) - AktiviteController endpoint'i kullanÄ±lÄ±yor
    getKullaniciAktiviteleri: async (
        kullaniciId: string,
        params?: { aktiviteTuru?: string; sayfa?: number; limit?: number; sayfaBoyutu?: number }
    ) => {
        // sayfaBoyutu'nu limit'e dÃ¶nÃ¼ÅŸtÃ¼r
        const queryParams = {
            ...params,
            limit: params?.limit || params?.sayfaBoyutu,
        };
        delete (queryParams as any).sayfaBoyutu;
        // AktiviteController endpoint'i - tam veri iÃ§eriyor (veri objesi ile)
        const response = await api.get<Aktivite[]>(`/aktivite/kullanici/${kullaniciId}`, { params: queryParams });
        return {
            data: response.data,
            toplamSayfa: parseInt(response.headers['x-toplam-sayfa'] || '1'),
            toplamKayit: parseInt(response.headers['x-toplam-kayit'] || '0'),
        };
    },

    // Aktivite sil
    deleteAktivite: async (aktiviteId: number) => {
        await api.delete(`/aktivite/${aktiviteId}`);
    },
    
    // Aktivite beÄŸen/beÄŸeniyi kaldÄ±r
    toggleBegeni: async (aktiviteId: number) => {
        const response = await api.post<{ begendim: boolean; begeniSayisi: number }>(`/aktivite/${aktiviteId}/begen`);
        return response.data;
    },
    
    // Aktivite beÄŸenilerini getir
    getBegeniler: async (aktiviteId: number, limit = 20) => {
        const response = await api.get<AktiviteBegeni[]>(`/aktivite/${aktiviteId}/begeniler`, { params: { limit } });
        return response.data;
    },
    
    // Aktivite yorumlarÄ± getir
    getYorumlar: async (aktiviteId: number, params?: { sayfa?: number; limit?: number }) => {
        const response = await api.get<AktiviteYorum[]>(`/aktivite/${aktiviteId}/yorumlar`, { params });
        return {
            data: response.data,
            toplamSayfa: parseInt(response.headers['x-toplam-sayfa'] || '1'),
            toplamKayit: parseInt(response.headers['x-toplam-kayit'] || '0'),
        };
    },
    
    // Aktiviteye yorum ekle
    yorumEkle: async (aktiviteId: number, data: { icerik: string; ustYorumId?: number }) => {
        const response = await api.post<AktiviteYorum>(`/aktivite/${aktiviteId}/yorum`, data);
        return response.data;
    },
    
    // Aktivite yorumunu beÄŸen
    yorumBegen: async (yorumId: number) => {
        const response = await api.post<{ begendim: boolean; begeniSayisi: number }>(`/aktivite/yorum/${yorumId}/begen`);
        return response.data;
    },
    
    // Aktivite yorumunu sil
    yorumSil: async (yorumId: number) => {
        await api.delete(`/aktivite/yorum/${yorumId}`);
    },
    
    // Aktivite sil
    aktiviteSil: async (aktiviteId: number) => {
        await api.delete(`/aktivite/${aktiviteId}`);
    },
};

// ============================================
// AYARLAR API
// ============================================

export const ayarlarApi = {
    // KullanÄ±cÄ± ayarlarÄ±nÄ± getir
    getAyarlar: async () => {
        const response = await api.get<KullaniciAyarlari>('/ayarlar');
        return response.data;
    },
    
    // AyarlarÄ± gÃ¼ncelle
    updateAyarlar: async (data: Partial<KullaniciAyarlari>) => {
        const response = await api.put<KullaniciAyarlari>('/ayarlar', data);
        return response.data;
    },
    
    // Bildirim ayarlarÄ±nÄ± gÃ¼ncelle
    updateBildirimler: async (data: {
        bildirimYeniTakipci?: boolean;
        bildirimYorumlar?: boolean;
        bildirimBegeniler?: boolean;
        bildirimOneriler?: boolean;
        bildirimEmail?: boolean;
    }) => {
        await api.put('/ayarlar/bildirimler', data);
    },
    
    // Gizlilik ayarlarÄ±nÄ± gÃ¼ncelle
    updateGizlilik: async (data: {
        profilGizli?: boolean;
        aktiviteGizli?: boolean;
    }) => {
        await api.put('/ayarlar/gizlilik', data);
    },
};

// ============================================
// ICERIK API
// ============================================

export const icerikApi = {
    // Ä°Ã§erik detayÄ±
    getById: async (id: number) => {
        const response = await api.get<Icerik>(`/icerik/${id}`);
        return response.data;
    },

    // Ä°Ã§erik ara
    ara: async (q: string, params?: { tur?: string; sayfa?: number; limit?: number }) => {
        const response = await api.get<IcerikListItem[]>('/icerik/ara', { params: { q, ...params } });
        return {
            data: response.data,
            toplamSayfa: parseInt(response.headers['x-toplam-sayfa'] || '1'),
            toplamKayit: parseInt(response.headers['x-toplam-kayit'] || '0'),
        };
    },

    // Filtreli iÃ§erikler
    filtrele: async (params?: {
        tur?: string;
        yil?: number;
        minPuan?: number;
        maxPuan?: number;
        sayfa?: number;
        limit?: number;
    }) => {
        const response = await api.get<IcerikListItem[]>('/icerik/filtrele', { params });
        return {
            data: response.data,
            toplamSayfa: parseInt(response.headers['x-toplam-sayfa'] || '1'),
            toplamKayit: parseInt(response.headers['x-toplam-kayit'] || '0'),
        };
    },

    // PopÃ¼ler iÃ§erikler
    getPopuler: async (params?: { tur?: string; limit?: number }) => {
        const response = await api.get<IcerikListItem[]>('/icerik/populer', { params });
        return response.data;
    },

    // En yÃ¼ksek puanlÄ±lar
    getEnYuksekPuanlilar: async (params?: { tur?: string; limit?: number }) => {
        const response = await api.get<IcerikListItem[]>('/icerik/en-yuksek-puanlilar', { params });
        return response.data;
    },

    // Yeni iÃ§erikler
    getYeni: async (params?: { tur?: string; limit?: number }) => {
        const response = await api.get<IcerikListItem[]>('/icerik/yeni', { params });
        return response.data;
    },

    // Ã–nerilen iÃ§erikler (auth gerekli)
    getOnerilenler: async (limit?: number) => {
        const response = await api.get<IcerikListItem[]>('/icerik/onerilenler', { params: { limit } });
        return response.data;
    },

    // Benzer iÃ§erikler - AkÄ±llÄ± algoritma ile (tÃ¼r, puan, yÄ±l, popÃ¼lerlik)
    getSimilar: async (icerikId: number, _tur?: string, limit?: number) => {
        const response = await api.get<IcerikListItem[]>(`/icerik/${icerikId}/benzer`, { 
            params: { limit: limit || 6 } 
        });
        return response.data;
    },
};

// ============================================
// YORUM API
// ============================================

export const yorumApi = {
    // Yorum oluÅŸtur
    create: async (dto: YorumCreateDto) => {
        const response = await api.post<Yorum>('/yorum', dto);
        return response.data;
    },

    // Yorum getir
    getById: async (id: number) => {
        const response = await api.get<Yorum>(`/yorum/${id}`);
        return response.data;
    },

    // Yorum gÃ¼ncelle
    update: async (id: number, dto: Partial<YorumCreateDto>) => {
        const response = await api.put<Yorum>(`/yorum/${id}`, dto);
        return response.data;
    },

    // Yorum sil
    delete: async (id: number) => {
        await api.delete(`/yorum/${id}`);
    },

    // Ä°Ã§eriÄŸin yorumlarÄ±
    getIcerikYorumlari: async (icerikId: number, params?: { sayfa?: number; sayfaBoyutu?: number }) => {
        const response = await api.get<Yorum[]>(`/yorum/icerik/${icerikId}`, { params });
        return {
            data: response.data,
            toplamSayfa: parseInt(response.headers['x-toplam-sayfa'] || '1'),
            toplamKayit: parseInt(response.headers['x-toplam-kayit'] || '0'),
        };
    },

    // BeÄŸeni toggle
    toggleBegeni: async (yorumId: number) => {
        const response = await api.post<{ begendi: boolean; begeniSayisi: number }>(
            `/yorum/${yorumId}/begeni`
        );
        return response.data;
    },
};

// ============================================
// PUANLAMA API
// ============================================

export const puanlamaApi = {
    // Puanlama oluÅŸtur veya gÃ¼ncelle (Ã¶nce kontrol et)
    puanla: async (dto: PuanlamaCreateDto) => {
        try {
            // Ã–nce mevcut puanlamayÄ± kontrol et
            const mevcut = await puanlamaApi.getKullaniciPuani(dto.icerikId);
            if (mevcut) {
                // GÃ¼ncelle
                const response = await api.put<Puanlama>(`/puanlama/${mevcut.id}`, { puan: dto.puan });
                return response.data;
            }
        } catch {
            // Puanlama yok, yeni oluÅŸtur
        }
        // Yeni puanlama oluÅŸtur
        const response = await api.post<Puanlama>('/puanlama', dto);
        return response.data;
    },

    // KullanÄ±cÄ±nÄ±n puanlamasÄ±
    getKullaniciPuani: async (icerikId: number) => {
        try {
            const response = await api.get<Puanlama>(`/puanlama/icerik/${icerikId}/benim`);
            return response.data;
        } catch {
            return null;
        }
    },

    // Puanlama sil
    delete: async (id: number) => {
        await api.delete(`/puanlama/${id}`);
    },
};

// ============================================
// KUTUPHANE API
// ============================================

export interface Liste {
    id: number;
    kullaniciId?: string;
    kullaniciAdi: string;
    ad: string;
    tur: 'ozel' | 'sistem';
    aciklama?: string;
    herkeseAcik: boolean;
    icerikSayisi: number;
    olusturulmaZamani: string;
    guncellemeZamani?: string;
    icerikler?: ListeIcerik[];
}

export interface ListeIcerik {
    icerikId: number;
    baslik: string;
    tur: string;
    posterUrl?: string;
    ortalamaPuan: number;
    sira: number;
    notMetni?: string;
    eklenmeZamani: string;
}

export interface ListeCreateDto {
    ad: string;
    tur?: string;
    aciklama?: string;
    herkeseAcik?: boolean;
}

// KeÅŸfet sayfasÄ± iÃ§in popÃ¼ler liste
export interface PopulerListe {
    id: number;
    ad: string;
    aciklama?: string;
    icerikSayisi: number;
    begeniSayisi: number;
    kullaniciId: string;
    kullaniciAdi: string;
    kullaniciAvatar?: string;
    onaylandi: boolean;
    olusturulmaZamani: string;
    kapakGorselleri: string[];
}

// KeÅŸfet sayfasÄ± iÃ§in Ã¶nerilen kullanÄ±cÄ±
export interface OnerilenKullanici {
    id: string;
    kullaniciAdi: string;
    goruntulemeAdi?: string;
    avatarUrl?: string;
    takipEdenSayisi: number;
    toplamPuanlama: number;
    ortakIcerikSayisi: number;
    oneriNedeni: string;
}

export const kutuphaneApi = {
    // KÃ¼tÃ¼phaneye ekle/gÃ¼ncelle (Ã¶nce kontrol et)
    durumGuncelle: async (icerikId: number, durum: string) => {
        try {
            // Ã–nce mevcut durumu kontrol et
            const mevcut = await kutuphaneApi.getDurum(icerikId);
            if (mevcut) {
                // GÃ¼ncelle
                const response = await api.put<KutuphaneDurumu>(`/kutuphane/${mevcut.id}`, { durum });
                return response.data;
            }
        } catch {
            // Durum yok, yeni oluÅŸtur
        }
        // Yeni durum oluÅŸtur
        const response = await api.post<KutuphaneDurumu>('/kutuphane', { icerikId, durum });
        return response.data;
    },

    // KullanÄ±cÄ±nÄ±n kÃ¼tÃ¼phanesi (ID ile)
    getKutuphane: async (
        kullaniciId: string,
        params?: { durum?: string; tur?: string; sayfa?: number; limit?: number }
    ) => {
        const response = await api.get<KutuphaneDurumu[]>(`/kutuphane/kullanici/${kullaniciId}`, {
            params,
        });
        return response.data;
    },

    // KullanÄ±cÄ±nÄ±n kÃ¼tÃ¼phanesi (GUID id ile) - sayfalÄ±
    getKullanicininKutuphanesi: async (
        kullaniciId: string,
        params?: { durum?: string; tur?: string; sayfa?: number; sayfaBoyutu?: number }
    ) => {
        const response = await api.get<KutuphaneDurumu[]>(`/kutuphane/kullanici/${kullaniciId}`, {
            params,
        });
        return {
            data: response.data,
            toplamSayfa: parseInt(response.headers['x-toplam-sayfa'] || '1'),
            toplamKayit: parseInt(response.headers['x-toplam-kayit'] || '0'),
        };
    },

    // Ä°Ã§eriÄŸin durumu
    getDurum: async (icerikId: number) => {
        try {
            const response = await api.get<KutuphaneDurumu>(`/kutuphane/icerik/${icerikId}`);
            return response.data;
        } catch {
            return null;
        }
    },

    // KÃ¼tÃ¼phaneden kaldÄ±r
    kaldir: async (icerikId: number) => {
        await api.delete(`/kutuphane/icerik/${icerikId}`);
    },
};

// ============================================
// LISTE API - Proje Ä°steri 2.1.5
// ============================================

export const listeApi = {
    // KullanÄ±cÄ±nÄ±n kendi listeleri
    getMyListeler: async () => {
        const response = await api.get<Liste[]>('/liste');
        return response.data;
    },

    // Liste oluÅŸtur
    create: async (dto: ListeCreateDto) => {
        const response = await api.post<Liste>('/liste', { ...dto, tur: dto.tur || 'ozel' });
        return response.data;
    },

    // Liste detayÄ±
    getById: async (id: number) => {
        const response = await api.get<Liste>(`/liste/${id}`);
        return response.data;
    },

    // Liste gÃ¼ncelle
    update: async (id: number, dto: { ad: string; aciklama?: string; herkeseAcik?: boolean }) => {
        const response = await api.put<Liste>(`/liste/${id}`, dto);
        return response.data;
    },

    // Liste sil
    delete: async (id: number) => {
        await api.delete(`/liste/${id}`);
    },

    // KullanÄ±cÄ±nÄ±n listeleri (GUID id ile)
    getKullaniciListeleri: async (kullaniciId: string) => {
        const response = await api.get<Liste[]>(`/liste/kullanici/${kullaniciId}`);
        return response.data;
    },

    // Ä°Ã§eriÄŸin listeleri (hangi listelerde var)
    getIcerikListeleri: async (icerikId: number) => {
        const response = await api.get<Liste[]>(`/liste/icerik/${icerikId}`);
        return response.data;
    },

    // Listeye iÃ§erik ekle
    addIcerik: async (listeId: number, icerikId: number, sira?: number, notMetni?: string) => {
        const response = await api.post(`/liste/${listeId}/icerik`, { icerikId, sira, notMetni });
        return response.data;
    },

    // Liste iÃ§eriÄŸi gÃ¼ncelle
    updateIcerik: async (listeId: number, icerikId: number, dto: { sira?: number; notMetni?: string }) => {
        const response = await api.put(`/liste/${listeId}/icerik/${icerikId}`, dto);
        return response.data;
    },

    // Listeden iÃ§erik Ã§Ä±kar
    removeIcerik: async (listeId: number, icerikId: number) => {
        const response = await api.delete(`/liste/${listeId}/icerik/${icerikId}`);
        return response.data;
    },

    // Liste paylaÅŸ
    paylas: async (listeId: number) => {
        const response = await api.post<{ listeId: number; listeAdi: string; paylasimUrl: string }>(`/liste/${listeId}/paylas`);
        return response.data;
    },

    // Liste gizlilik toggle
    toggleGizlilik: async (listeId: number) => {
        const response = await api.post<{ herkeseAcik: boolean }>(`/liste/${listeId}/gizlilik`);
        return response.data;
    },

    // PopÃ¼ler listeler (keÅŸfet sayfasÄ± iÃ§in)
    getPopuler: async (limit?: number) => {
        const response = await api.get<PopulerListe[]>('/liste/populer', { params: { limit } });
        return response.data;
    },
};

// ============================================
// KULLANICI API
// ============================================

export const kullaniciApi = {
    // Profil getir (username ile)
    getProfil: async (username: string) => {
        const response = await api.get<Kullanici>(`/kullanici/username/${username}`);
        return response.data;
    },

    // Profil gÃ¼ncelle
    updateProfil: async (data: { goruntulemeAdi?: string; biyografi?: string; avatarUrl?: string }) => {
        const response = await api.put<Kullanici>('/kullanici/profil', data);
        return response.data;
    },

    // Takip et (GUID id ile)
    takipEt: async (kullaniciId: string) => {
        const response = await api.post(`/kullanici/${kullaniciId}/takip`);
        return response.data;
    },

    // Takibi bÄ±rak (aynÄ± endpoint toggle yapar)
    takipBirak: async (kullaniciId: string) => {
        const response = await api.post(`/kullanici/${kullaniciId}/takip`);
        return response.data;
    },

    // TakipÃ§iyi Ã§Ä±kar (kendi takipÃ§ilerinden birini kaldÄ±r)
    takipciCikar: async (kullaniciId: string) => {
        const response = await api.delete(`/kullanici/${kullaniciId}/takipci-cikar`);
        return response.data;
    },

    // Takip durumunu kontrol et
    takipDurumuKontrol: async (kullaniciId: string) => {
        try {
            const response = await api.get<{ takipEdiyor: boolean }>(`/kullanici/${kullaniciId}/takip-durumu`);
            return response.data.takipEdiyor;
        } catch {
            return false;
        }
    },

    // Ã–nerilen kullanÄ±cÄ±lar (akÄ±llÄ± Ã¶neri sistemi - benzer iÃ§erik tÃ¼rleriyle ilgilenenler)
    getOnerilenler: async (limit?: number) => {
        const response = await api.get<OnerilenKullanici[]>('/kullanici/onerilen', { params: { limit } });
        return response.data;
    },

    // PopÃ¼ler kullanÄ±cÄ±lar (en Ã§ok takipÃ§ili)
    getPopuler: async (limit?: number) => {
        const response = await api.get<Kullanici[]>('/kullanici/populer', { params: { limit } });
        return response.data;
    },

    // KullanÄ±cÄ± ara
    ara: async (q: string, limit?: number) => {
        const response = await api.get<Kullanici[]>('/kullanici/ara', { params: { q, limit } });
        return response.data;
    },

    // TakipÃ§ileri getir (backend: /api/kullanici/{id}/takip-edenler)
    getTakipciler: async (kullaniciId: string) => {
        const response = await api.get<Kullanici[]>(`/kullanici/${kullaniciId}/takip-edenler`);
        return response.data;
    },

    // Takip edilenleri getir (backend: /api/kullanici/{id}/takip-ettikleri)
    getTakipEdilenler: async (kullaniciId: string) => {
        const response = await api.get<Kullanici[]>(`/kullanici/${kullaniciId}/takip-ettikleri`);
        return response.data;
    },
};

// ============================================
// EXTERNAL API (TMDB & Google Books)
// ============================================

export const externalApi = {
    // TMDB Film ara
    searchTmdb: async (q: string, sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/search', { params: { q, sayfa } });
        return response.data;
    },
    // TMDB Dizi ara
    searchTmdbTv: async (q: string, sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/search-tv', { params: { q, sayfa } });
        return response.data;
    },
    // TMDB Film + Dizi ara (multi)
    searchTmdbMulti: async (q: string, sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/search-multi', { params: { q, sayfa } });
        return response.data;
    },

    // TMDB PopÃ¼ler filmler
    getTmdbPopular: async (sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/popular', { params: { sayfa } });
        return response.data;
    },

    // TMDB PopÃ¼ler diziler
    getTmdbPopularTv: async (sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/popular-tv', { params: { sayfa } });
        return response.data;
    },

    // TMDB En yÃ¼ksek puanlÄ± filmler
    getTmdbTopRated: async (sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/top-rated', { params: { sayfa } });
        return response.data;
    },

    // TMDB En yÃ¼ksek puanlÄ± diziler
    getTmdbTopRatedTv: async (sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/top-rated-tv', { params: { sayfa } });
        return response.data;
    },

    // TMDB Vizyondaki filmler
    getTmdbNowPlaying: async (sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/now-playing', { params: { sayfa } });
        return response.data;
    },

    // TMDB YayÄ±ndaki diziler
    getTmdbOnTheAir: async (sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/on-the-air', { params: { sayfa } });
        return response.data;
    },

    // TMDB Trending (Film + Dizi)
    getTmdbTrending: async (mediaType: 'all' | 'movie' | 'tv' = 'all', timeWindow: 'day' | 'week' = 'week', sayfa: number = 1) => {
        const response = await api.get<TmdbFilm[]>('/externalapi/tmdb/trending', { params: { mediaType, timeWindow, sayfa } });
        return response.data;
    },

    // TMDB Film detayÄ±
    getTmdbFilm: async (id: string) => {
        const response = await api.get<TmdbFilm>(`/externalapi/tmdb/${id}`);
        return response.data;
    },

    // TMDB Dizi detayÄ±
    getTmdbTvShow: async (id: string) => {
        const response = await api.get<TmdbFilm>(`/externalapi/tmdb/tv/${id}`);
        return response.data;
    },

    // Import iÅŸlemleri
    importTmdbFilm: async (tmdbId: string) => {
        const response = await api.post<Icerik>('/externalapi/tmdb/import/' + tmdbId);
        return response.data;
    },
    importTmdbTvShow: async (tmdbId: string) => {
        const response = await api.post<Icerik>('/externalapi/tmdb/import-tv/' + tmdbId);
        return response.data;
    },

    // Google Books - totalItems bilgisi ile birlikte dÃ¶ner
    // filter: 'paid-ebooks' (ticari), 'free-ebooks', 'ebooks', 'full', 'partial'
    searchBooks: async (q: string, baslangic?: number, limit?: number, orderBy?: 'relevance' | 'newest', langRestrict?: string, filter?: string) => {
        const response = await api.get<GoogleBooksSearchResult>('/externalapi/books/search', {
            params: { q, baslangic, limit, orderBy, langRestrict, filter },
        });
        return response.data;
    },
    getBook: async (id: string) => {
        const response = await api.get<GoogleBook>('/externalapi/books/' + id);
        return response.data;
    },
    importBook: async (googleBooksId: string) => {
        const response = await api.post<Icerik>('/externalapi/books/import/' + googleBooksId);
        return response.data;
    },
};

// ============================================
// BILDIRIM API - Bildirim Ä°ÅŸlemleri
// ============================================

export interface BildirimKullanici {
    id: string;
    kullaniciAdi: string;
    avatarUrl?: string;
}

export interface Bildirim {
    id: number;
    tip: string;
    baslik?: string;
    mesaj?: string;
    linkUrl?: string;
    okundu: boolean;
    olusturulmaZamani: string;
    gonderen?: BildirimKullanici;
}

export interface BildirimListResponse {
    bildirimler: Bildirim[];
    toplamSayisi: number;
    sayfa: number;
    toplamSayfa: number;
}

export interface OkunmamisBildirimlerResponse {
    bildirimler: Bildirim[];
    okunmamisSayisi: number;
}

export const bildirimApi = {
    // Bildirimleri getir (sayfalÄ±)
    getBildirimler: async (params?: { sayfa?: number; limit?: number }) => {
        const response = await api.get<BildirimListResponse>('/bildirim', { params });
        return response.data;
    },

    // OkunmamÄ±ÅŸ bildirimleri getir
    getOkunmamis: async () => {
        const response = await api.get<OkunmamisBildirimlerResponse>('/bildirim/okunmamis');
        return response.data;
    },

    // OkunmamÄ±ÅŸ bildirim sayÄ±sÄ±nÄ± getir
    getOkunmamisSayisi: async () => {
        const response = await api.get<{ okunmamisSayisi: number }>('/bildirim/sayisi');
        return response.data.okunmamisSayisi;
    },

    // Bildirimi okundu iÅŸaretle
    okunduIsaretle: async (id: number) => {
        const response = await api.post<{ message: string }>(`/bildirim/${id}/okundu`);
        return response.data;
    },

    // TÃ¼m bildirimleri okundu iÅŸaretle
    tumunuOkunduIsaretle: async () => {
        const response = await api.post<{ message: string }>('/bildirim/tumunu-okundu-isaretle');
        return response.data;
    },

    // Bildirimi sil
    sil: async (id: number) => {
        const response = await api.delete<{ message: string }>(`/bildirim/${id}`);
        return response.data;
    },

    // TÃ¼m bildirimleri sil
    tumunuSil: async () => {
        const response = await api.delete<{ message: string }>('/bildirim/tumunu-sil');
        return response.data;
    },
};

// ============================================
// AUTH API - Kimlik DoÄŸrulama Ä°ÅŸlemleri
// ============================================

export const authApi = {
    // Åifremi unuttum - e-posta gÃ¶nder
    forgotPassword: async (eposta: string) => {
        const response = await api.post<{ message: string }>('/auth/forgot-password', { eposta });
        return response.data;
    },

    // Åifre sÄ±fÄ±rlama (token ile)
    resetPassword: async (data: { token: string; yeniSifre: string; yeniSifreTekrar: string }) => {
        const response = await api.post<{ message: string }>('/auth/reset-password', data);
        return response.data;
    },

    // Hesap silme
    deleteAccount: async () => {
        const response = await api.delete<{ message: string }>('/kullanici/hesap');
        return response.data;
    },
};

export default api;

========== saga.client\src\services\detailCache.ts ==========

/**
 * DetailPage iÃ§in in-memory cache modÃ¼lÃ¼
 * Ä°Ã§erik detaylarÄ±nÄ± cache'leyerek gereksiz API Ã§aÄŸrÄ±larÄ±nÄ± Ã¶nler
 */

import type { Icerik, IcerikListItem, Yorum, Liste, Aktivite } from './api';

interface DetailCacheData {
  icerik: Icerik;
  yorumlar: Yorum[];
  listeler: Liste[];
  similarContent: IcerikListItem[];
  aktiviteler: Aktivite[];
  kullaniciListeleri: Liste[];
  icerikListeIds: number[];
  timestamp: number;
}

const CACHE_TTL = 3 * 60 * 1000; // 3 dakika
const cache = new Map<number, DetailCacheData>();

/**
 * Cache'den iÃ§erik detaylarÄ±nÄ± getir
 */
export function getDetailCache(icerikId: number): DetailCacheData | null {
  const cached = cache.get(icerikId);
  if (!cached) return null;

  // TTL kontrolÃ¼
  if (Date.now() - cached.timestamp > CACHE_TTL) {
    cache.delete(icerikId);
    return null;
  }

  return cached;
}

/**
 * Ä°Ã§erik detaylarÄ±nÄ± cache'e kaydet
 */
export function setDetailCache(icerikId: number, data: Omit<DetailCacheData, 'timestamp'>): void {
  cache.set(icerikId, {
    ...data,
    timestamp: Date.now(),
  });
}

/**
 * Belirli bir iÃ§eriÄŸin cache'ini geÃ§ersiz kÄ±l
 */
export function invalidateDetailCache(icerikId: number): void {
  cache.delete(icerikId);
}

/**
 * TÃ¼m cache'i temizle
 */
export function clearDetailCache(): void {
  cache.clear();
}

/**
 * Cache'deki iÃ§eriÄŸi gÃ¼ncelle (partial update)
 */
export function updateDetailCache(icerikId: number, updates: Partial<Omit<DetailCacheData, 'timestamp'>>): void {
  const cached = cache.get(icerikId);
  if (cached) {
    cache.set(icerikId, {
      ...cached,
      ...updates,
      timestamp: cached.timestamp, // Timestamp'i koru
    });
  }
}

/**
 * Cache'deki yorumlarÄ± gÃ¼ncelle
 */
export function updateCachedYorumlar(icerikId: number, yorumlar: Yorum[]): void {
  const cached = cache.get(icerikId);
  if (cached) {
    cache.set(icerikId, {
      ...cached,
      yorumlar,
    });
  }
}

/**
 * Cache'deki listeIds'i gÃ¼ncelle
 */
export function updateCachedListeIds(icerikId: number, icerikListeIds: number[]): void {
  const cached = cache.get(icerikId);
  if (cached) {
    cache.set(icerikId, {
      ...cached,
      icerikListeIds,
    });
  }
}

/**
 * Cache'deki puanÄ± gÃ¼ncelle
 */
export function updateCachedPuan(icerikId: number, icerik: Icerik): void {
  const cached = cache.get(icerikId);
  if (cached) {
    cache.set(icerikId, {
      ...cached,
      icerik,
    });
  }
}


========== saga.client\src\services\exploreCache.ts ==========

/**
 * ExplorePage iÃ§in Global Cache YÃ¶netimi
 * 
 * Bu modÃ¼l, KeÅŸfet sayfasÄ±ndaki TMDB ve Kitap sonuÃ§larÄ±nÄ±
 * in-memory cache'te tutar. KullanÄ±cÄ± detay sayfasÄ±na gidip
 * geri dÃ¶ndÃ¼ÄŸÃ¼nde sonuÃ§lar hÄ±zlÄ±ca yÃ¼klenir.
 */

import type { TmdbFilm, GoogleBook, PopulerListe, OnerilenKullanici } from './api';

// Cache sÃ¼releri (ms)
const CACHE_TTL = 10 * 60 * 1000; // 10 dakika
const SCROLL_CACHE_TTL = 5 * 60 * 1000; // 5 dakika

// Cache veri yapÄ±larÄ±
interface TmdbCacheEntry {
  results: TmdbFilm[];
  page: number;
  hasMore: boolean;
  filter: 'all' | 'movie' | 'tv';
  sort: 'popular' | 'top_rated' | 'trending' | 'now_playing';
  timestamp: number;
}

interface BookCacheEntry {
  results: GoogleBook[];
  startIndex: number;
  queryIndex: number;
  hasMore: boolean;
  category: string;
  lang: string;
  timestamp: number;
  seenIds: string[];
}

interface ExploreDataCache {
  populerListeler: PopulerListe[];
  onerilenKullanicilar: OnerilenKullanici[];
  timestamp: number;
}

interface ScrollCache {
  position: number;
  tab: 'tmdb' | 'kitaplar';
  timestamp: number;
}

// In-memory cache nesneleri
let tmdbCache: TmdbCacheEntry | null = null;
let bookCache: BookCacheEntry | null = null;
let exploreDataCache: ExploreDataCache | null = null;
let scrollCache: ScrollCache | null = null;

// ============================================
// TMDB CACHE
// ============================================

export function getTmdbCache(
  filter: 'all' | 'movie' | 'tv',
  sort: 'popular' | 'top_rated' | 'trending' | 'now_playing'
): TmdbCacheEntry | null {
  if (!tmdbCache) return null;
  
  // AynÄ± filtre ve sÄ±ralama mÄ±?
  if (tmdbCache.filter !== filter || tmdbCache.sort !== sort) {
    return null;
  }
  
  // Cache sÃ¼resi dolmuÅŸ mu?
  if (Date.now() - tmdbCache.timestamp > CACHE_TTL) {
    tmdbCache = null;
    return null;
  }
  
  return tmdbCache;
}

export function setTmdbCache(
  results: TmdbFilm[],
  page: number,
  hasMore: boolean,
  filter: 'all' | 'movie' | 'tv',
  sort: 'popular' | 'top_rated' | 'trending' | 'now_playing'
): void {
  tmdbCache = {
    results,
    page,
    hasMore,
    filter,
    sort,
    timestamp: Date.now(),
  };
}

export function appendTmdbCache(newResults: TmdbFilm[], page: number, hasMore: boolean): void {
  if (!tmdbCache) return;
  
  // Duplicate kontrolÃ¼
  const existingIds = new Set(tmdbCache.results.map(r => `${r.mediaType}-${r.id}`));
  const uniqueNewResults = newResults.filter(r => !existingIds.has(`${r.mediaType}-${r.id}`));
  
  tmdbCache = {
    ...tmdbCache,
    results: [...tmdbCache.results, ...uniqueNewResults],
    page,
    hasMore,
    timestamp: Date.now(),
  };
}

export function clearTmdbCache(): void {
  tmdbCache = null;
}

// ============================================
// BOOK CACHE
// ============================================

export function getBookCache(category: string, lang: string): BookCacheEntry | null {
  if (!bookCache) return null;
  
  // AynÄ± kategori ve dil mi?
  if (bookCache.category !== category || bookCache.lang !== lang) {
    return null;
  }
  
  // Cache sÃ¼resi dolmuÅŸ mu?
  if (Date.now() - bookCache.timestamp > CACHE_TTL) {
    bookCache = null;
    return null;
  }
  
  return bookCache;
}

export function setBookCache(
  results: GoogleBook[],
  startIndex: number,
  queryIndex: number,
  hasMore: boolean,
  category: string,
  lang: string,
  seenIds: string[]
): void {
  bookCache = {
    results,
    startIndex,
    queryIndex,
    hasMore,
    category,
    lang,
    timestamp: Date.now(),
    seenIds,
  };
}

export function appendBookCache(
  newResults: GoogleBook[],
  startIndex: number,
  queryIndex: number,
  hasMore: boolean,
  newSeenIds: string[]
): void {
  if (!bookCache) return;
  
  // Duplicate kontrolÃ¼
  const existingIds = new Set(bookCache.results.map(b => b.id));
  const uniqueNewResults = newResults.filter(b => !existingIds.has(b.id));
  
  bookCache = {
    ...bookCache,
    results: [...bookCache.results, ...uniqueNewResults],
    startIndex,
    queryIndex,
    hasMore,
    timestamp: Date.now(),
    seenIds: [...new Set([...bookCache.seenIds, ...newSeenIds])],
  };
}

export function clearBookCache(): void {
  bookCache = null;
}

// ============================================
// EXPLORE DATA CACHE (PopÃ¼ler Listeler, Ã–nerilen KullanÄ±cÄ±lar)
// ============================================

export function getExploreDataCache(): ExploreDataCache | null {
  if (!exploreDataCache) return null;
  
  // Cache sÃ¼resi dolmuÅŸ mu?
  if (Date.now() - exploreDataCache.timestamp > CACHE_TTL) {
    exploreDataCache = null;
    return null;
  }
  
  return exploreDataCache;
}

export function setExploreDataCache(
  populerListeler: PopulerListe[],
  onerilenKullanicilar: OnerilenKullanici[]
): void {
  exploreDataCache = {
    populerListeler,
    onerilenKullanicilar,
    timestamp: Date.now(),
  };
}

// ============================================
// SCROLL POSITION CACHE
// ============================================

export function getScrollCache(tab: 'tmdb' | 'kitaplar'): number | null {
  if (!scrollCache) return null;
  
  // AynÄ± tab mÄ±?
  if (scrollCache.tab !== tab) {
    return null;
  }
  
  // Cache sÃ¼resi dolmuÅŸ mu?
  if (Date.now() - scrollCache.timestamp > SCROLL_CACHE_TTL) {
    scrollCache = null;
    return null;
  }
  
  return scrollCache.position;
}

export function setScrollCache(position: number, tab: 'tmdb' | 'kitaplar'): void {
  scrollCache = {
    position,
    tab,
    timestamp: Date.now(),
  };
}

export function clearScrollCache(): void {
  scrollCache = null;
}

// ============================================
// GENEL CACHE TEMÄ°ZLEME
// ============================================

export function clearAllExploreCache(): void {
  tmdbCache = null;
  bookCache = null;
  exploreDataCache = null;
  scrollCache = null;
}

// Debug iÃ§in cache durumunu gÃ¶rÃ¼ntÃ¼le
export function getExploreCacheStatus(): {
  tmdb: boolean;
  book: boolean;
  exploreData: boolean;
  scroll: boolean;
} {
  return {
    tmdb: tmdbCache !== null,
    book: bookCache !== null,
    exploreData: exploreDataCache !== null,
    scroll: scrollCache !== null,
  };
}


========== saga.client\src\services\feedCache.ts ==========

// Feed sayfasÄ± iÃ§in in-memory cache
// TTL: 2 dakika (feed daha sÄ±k gÃ¼ncellenmeli)

import type { Aktivite } from './api';

interface CachedFeed {
  data: Aktivite[];
  toplamSayfa: number;
  timestamp: number;
}

const CACHE_TTL = 2 * 60 * 1000; // 2 dakika (feed daha dinamik)

// Cache storage - tab bazlÄ±
const feedCache = new Map<string, CachedFeed>();

// Helper: Cache geÃ§erli mi?
const isCacheValid = (timestamp: number, ttl: number = CACHE_TTL): boolean => {
  return Date.now() - timestamp < ttl;
};

// Feed Cache Key oluÅŸtur (tab + userId)
const getCacheKey = (tab: string, userId?: string): string => {
  return `${tab}_${userId || 'anon'}`;
};

// Feed Cache Get
export const getFeedCache = (tab: string, userId?: string): CachedFeed | null => {
  const key = getCacheKey(tab, userId);
  const cached = feedCache.get(key);
  if (cached && isCacheValid(cached.timestamp)) {
    console.log(`ğŸ“¦ Feed cache hit: ${key}`);
    return cached;
  }
  return null;
};

// Feed Cache Set
export const setFeedCache = (tab: string, data: Aktivite[], toplamSayfa: number, userId?: string): void => {
  const key = getCacheKey(tab, userId);
  feedCache.set(key, { data, toplamSayfa, timestamp: Date.now() });
};

// Feed Cache Invalidate
export const invalidateFeedCache = (tab?: string, userId?: string): void => {
  if (tab) {
    const key = getCacheKey(tab, userId);
    feedCache.delete(key);
  } else {
    // TÃ¼m feed cache'ini temizle
    feedCache.clear();
  }
};

// Aktivite ekle (cache gÃ¼ncelle)
export const addToFeedCache = (tab: string, aktivite: Aktivite, userId?: string): void => {
  const key = getCacheKey(tab, userId);
  const cached = feedCache.get(key);
  if (cached) {
    feedCache.set(key, {
      ...cached,
      data: [aktivite, ...cached.data],
      timestamp: cached.timestamp
    });
  }
};

// Aktivite sil (cache gÃ¼ncelle)
export const removeFromFeedCache = (aktiviteId: number): void => {
  feedCache.forEach((cached, key) => {
    const filtered = cached.data.filter(a => a.id !== aktiviteId);
    if (filtered.length !== cached.data.length) {
      feedCache.set(key, { ...cached, data: filtered });
    }
  });
};

// Aktivite gÃ¼ncelle (beÄŸeni vb.)
export const updateFeedCacheItem = (aktiviteId: number, updater: (item: Aktivite) => Aktivite): void => {
  feedCache.forEach((cached, key) => {
    const updated = cached.data.map(a => a.id === aktiviteId ? updater(a) : a);
    feedCache.set(key, { ...cached, data: updated });
  });
};


========== saga.client\src\services\libraryCache.ts ==========

// Library sayfasÄ± iÃ§in in-memory cache
// TTL: 5 dakika

import type { KutuphaneDurumu, Liste } from './api';

interface CachedKutuphane {
  data: KutuphaneDurumu[];
  timestamp: number;
}

interface CachedListeler {
  data: Liste[];
  timestamp: number;
}

interface CachedTakipciSayisi {
  count: number;
  timestamp: number;
}

const CACHE_TTL = 5 * 60 * 1000; // 5 dakika

// Cache storage
const kutuphaneCache = new Map<string, CachedKutuphane>();
const listelerCache = new Map<string, CachedListeler>();
const takipciSayisiCache = new Map<string, CachedTakipciSayisi>();

// Helper: Cache geÃ§erli mi?
const isCacheValid = (timestamp: number, ttl: number = CACHE_TTL): boolean => {
  return Date.now() - timestamp < ttl;
};

// KÃ¼tÃ¼phane Cache
export const getKutuphaneCache = (userId: string): KutuphaneDurumu[] | null => {
  const cached = kutuphaneCache.get(userId);
  if (cached && isCacheValid(cached.timestamp)) {
    console.log(`ğŸ“¦ Kutuphane cache hit: ${userId}`);
    return cached.data;
  }
  return null;
};

export const setKutuphaneCache = (userId: string, data: KutuphaneDurumu[]): void => {
  kutuphaneCache.set(userId, { data, timestamp: Date.now() });
};

export const invalidateKutuphaneCache = (userId: string): void => {
  kutuphaneCache.delete(userId);
};

// Listeler Cache
export const getListelerCache = (userId: string): Liste[] | null => {
  const cached = listelerCache.get(userId);
  if (cached && isCacheValid(cached.timestamp)) {
    console.log(`ğŸ“¦ Listeler cache hit: ${userId}`);
    return cached.data;
  }
  return null;
};

export const setListelerCache = (userId: string, data: Liste[]): void => {
  listelerCache.set(userId, { data, timestamp: Date.now() });
};

export const invalidateListelerCache = (userId: string): void => {
  listelerCache.delete(userId);
};

export const updateListelerCache = (userId: string, updater: (data: Liste[]) => Liste[]): void => {
  const cached = listelerCache.get(userId);
  if (cached) {
    listelerCache.set(userId, { 
      data: updater(cached.data), 
      timestamp: cached.timestamp 
    });
  }
};

// TakipÃ§i SayÄ±sÄ± Cache
export const getTakipciSayisiCache = (userId: string): number | null => {
  const cached = takipciSayisiCache.get(userId);
  if (cached && isCacheValid(cached.timestamp)) {
    console.log(`ğŸ“¦ Takipci sayisi cache hit: ${userId}`);
    return cached.count;
  }
  return null;
};

export const setTakipciSayisiCache = (userId: string, count: number): void => {
  takipciSayisiCache.set(userId, { count, timestamp: Date.now() });
};

// TÃ¼m library cache'ini temizle
export const invalidateAllLibraryCache = (userId: string): void => {
  kutuphaneCache.delete(userId);
  listelerCache.delete(userId);
  takipciSayisiCache.delete(userId);
};

// KÃ¼tÃ¼phaneyi gÃ¼ncelle (item ekle/Ã§Ä±kar/gÃ¼ncelle)
export const updateKutuphaneItem = (
  userId: string, 
  icerikId: number, 
  updater: (item: KutuphaneDurumu | undefined) => KutuphaneDurumu | null
): void => {
  const cached = kutuphaneCache.get(userId);
  if (!cached) return;
  
  const existingIndex = cached.data.findIndex(i => i.icerikId === icerikId);
  const existingItem = existingIndex >= 0 ? cached.data[existingIndex] : undefined;
  const updatedItem = updater(existingItem);
  
  let newData: KutuphaneDurumu[];
  
  if (updatedItem === null) {
    // Item silindi
    newData = cached.data.filter(i => i.icerikId !== icerikId);
  } else if (existingIndex >= 0) {
    // Item gÃ¼ncellendi
    newData = [...cached.data];
    newData[existingIndex] = updatedItem;
  } else {
    // Yeni item eklendi
    newData = [updatedItem, ...cached.data];
  }
  
  kutuphaneCache.set(userId, { data: newData, timestamp: cached.timestamp });
};


========== saga.client\src\services\profileCache.ts ==========

// Profile sayfasÄ± iÃ§in in-memory cache
// TTL: 5 dakika

interface CachedProfile {
  data: any;
  timestamp: number;
}

interface CachedFollowData {
  followers: any[];
  following: any[];
  timestamp: number;
}

interface CachedActivities {
  data: any[];
  timestamp: number;
}

interface CachedLibrary {
  data: any[];
  timestamp: number;
}

interface CachedLists {
  data: any[];
  timestamp: number;
}

const CACHE_TTL = 5 * 60 * 1000; // 5 dakika
const FOLLOW_CACHE_TTL = 3 * 60 * 1000; // 3 dakika (daha sÄ±k deÄŸiÅŸebilir)

// Cache storage
const profileCache = new Map<string, CachedProfile>();
const followDataCache = new Map<string, CachedFollowData>();
const activitiesCache = new Map<string, CachedActivities>();
const libraryCache = new Map<string, CachedLibrary>();
const listsCache = new Map<string, CachedLists>();

// Helper: Cache geÃ§erli mi?
const isCacheValid = (timestamp: number, ttl: number = CACHE_TTL): boolean => {
  return Date.now() - timestamp < ttl;
};

// Profile Cache
export const getProfileCache = (kullaniciAdi: string): any | null => {
  const cached = profileCache.get(kullaniciAdi);
  if (cached && isCacheValid(cached.timestamp)) {
    console.log(`ğŸ“¦ Profile cache hit: ${kullaniciAdi}`);
    return cached.data;
  }
  return null;
};

export const setProfileCache = (kullaniciAdi: string, data: any): void => {
  profileCache.set(kullaniciAdi, { data, timestamp: Date.now() });
};

export const invalidateProfileCache = (kullaniciAdi: string): void => {
  profileCache.delete(kullaniciAdi);
};

// Follow Data Cache (followers + following)
export const getFollowDataCache = (profilId: string): CachedFollowData | null => {
  const cached = followDataCache.get(profilId);
  if (cached && isCacheValid(cached.timestamp, FOLLOW_CACHE_TTL)) {
    console.log(`ğŸ“¦ Follow data cache hit: ${profilId}`);
    return cached;
  }
  return null;
};

export const setFollowDataCache = (profilId: string, followers: any[], following: any[]): void => {
  followDataCache.set(profilId, { followers, following, timestamp: Date.now() });
};

export const invalidateFollowDataCache = (profilId: string): void => {
  followDataCache.delete(profilId);
};

// Activities Cache
export const getActivitiesCache = (profilId: string): any[] | null => {
  const cached = activitiesCache.get(profilId);
  if (cached && isCacheValid(cached.timestamp)) {
    console.log(`ğŸ“¦ Activities cache hit: ${profilId}`);
    return cached.data;
  }
  return null;
};

export const setActivitiesCache = (profilId: string, data: any[]): void => {
  activitiesCache.set(profilId, { data, timestamp: Date.now() });
};

// Library Cache
export const getLibraryCache = (profilId: string): any[] | null => {
  const cached = libraryCache.get(profilId);
  if (cached && isCacheValid(cached.timestamp)) {
    console.log(`ğŸ“¦ Library cache hit: ${profilId}`);
    return cached.data;
  }
  return null;
};

export const setLibraryCache = (profilId: string, data: any[]): void => {
  libraryCache.set(profilId, { data, timestamp: Date.now() });
};

// Lists Cache
export const getListsCache = (profilId: string): any[] | null => {
  const cached = listsCache.get(profilId);
  if (cached && isCacheValid(cached.timestamp)) {
    console.log(`ğŸ“¦ Lists cache hit: ${profilId}`);
    return cached.data;
  }
  return null;
};

export const setListsCache = (profilId: string, data: any[]): void => {
  listsCache.set(profilId, { data, timestamp: Date.now() });
};

// My Following IDs Cache (kullanÄ±cÄ±nÄ±n takip ettikleri)
let _myFollowingCache: { ids: Set<string>; timestamp: number } | null = null;

export const getMyFollowingCache = (): Set<string> | null => {
  if (_myFollowingCache && isCacheValid(_myFollowingCache.timestamp, FOLLOW_CACHE_TTL)) {
    console.log(`ğŸ“¦ My following cache hit`);
    return _myFollowingCache.ids;
  }
  return null;
};

export const setMyFollowingCache = (ids: Set<string>): void => {
  _myFollowingCache = { ids, timestamp: Date.now() };
};

export const updateMyFollowingCache = (userId: string, isFollowing: boolean): void => {
  if (_myFollowingCache) {
    if (isFollowing) {
      _myFollowingCache.ids.add(userId);
    } else {
      _myFollowingCache.ids.delete(userId);
    }
    _myFollowingCache.timestamp = Date.now();
  }
};

export const invalidateMyFollowingCache = (): void => {
  _myFollowingCache = null;
};

// TÃ¼m cache'i temizle
export const clearAllProfileCache = (): void => {
  profileCache.clear();
  followDataCache.clear();
  activitiesCache.clear();
  libraryCache.clear();
  listsCache.clear();
  _myFollowingCache = null;
  console.log('ğŸ—‘ï¸ All profile cache cleared');
};

// Belirli bir profil iÃ§in tÃ¼m cache'i temizle
export const clearProfileAllData = (kullaniciAdi: string, profilId?: string): void => {
  profileCache.delete(kullaniciAdi);
  if (profilId) {
    followDataCache.delete(profilId);
    activitiesCache.delete(profilId);
    libraryCache.delete(profilId);
    listsCache.delete(profilId);
  }
  console.log(`ğŸ—‘ï¸ Profile cache cleared: ${kullaniciAdi}`);
};


========== saga.client\src\services\supabase.ts ==========

import { createClient } from '@supabase/supabase-js';

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;

if (!supabaseUrl || !supabaseAnonKey) {
    console.error("âŒ Supabase konfigÃ¼rasyonu eksik!");
    console.error("URL:", supabaseUrl);
    console.error("KEY:", supabaseAnonKey ? "Mevcut (gizli)" : "EKSÄ°K!");
    throw new Error('Supabase URL veya Anon Key eksik! .env dosyasÄ±nÄ± kontrol et.');
}

console.log("âœ… Supabase baÅŸlatÄ±ldÄ±:");
console.log("URL:", supabaseUrl);
console.log("KEY baÅŸlangÄ±cÄ±:", supabaseAnonKey.substring(0, 20) + "...");

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
    auth: {
        autoRefreshToken: true,
        persistSession: true,
        detectSessionInUrl: true
    }
});

========== saga.client\src\styles\globals.css ==========

@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&family=Cinzel:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   SAGA - MODERN GLASSMORPHISM DESIGN
   Dark/Light Theme Support
   ============================================ */

:root {
  /* ===== SAGA BRAND COLORS ===== */
  --gold: #d4a853;
  --gold-light: #e8c676;
  --gold-dim: #a68532;
  --gold-glow: rgba(212, 168, 83, 0.4);
  
  /* ===== DARK THEME (Default) ===== */
  --void: #030304;
  --void-light: #0a0a0c;
  --void-surface: #111114;
  --void-elevated: #18181c;
  --void-border: #222228;
  
  /* ===== VOID TEXT COLORS ===== */
  --void-text: #f5f5f7;
  --void-text-secondary: rgba(245, 245, 247, 0.7);
  --void-text-muted: rgba(245, 245, 247, 0.45);
  
  /* ===== CORE PALETTE ===== */
  --bg-core: #0a0a12;
  --bg-deep: #0d0d16;
  --bg-surface: #12121a;
  --bg-elevated: #1a1a24;
  
  /* ===== GLASS EFFECTS ===== */
  --glass-base: rgba(20, 20, 35, 0.65);
  --glass-light: rgba(30, 30, 50, 0.5);
  --glass-dark: rgba(10, 10, 20, 0.8);
  --glass-bg: rgba(255, 255, 255, 0.03);
  --glass-border: rgba(255, 255, 255, 0.08);
  --glass-border-light: rgba(255, 255, 255, 0.12);
  --blur-amt: 20px;
  --blur-heavy: 30px;
  
  /* ===== ACCENT COLORS ===== */
  --accent-primary: #6C5CE7;      /* Cosmic Purple */
  --accent-secondary: #00CEC9;    /* Nebula Teal */
  --accent-pink: #fd79a8;         /* Stellar Pink */
  --accent-green: #00b894;        /* Aurora Green */
  --accent-orange: #FF9F0A;       /* Solar Orange */
  --accent-red: #FF6B6B;          /* Nova Red */
  --accent-yellow: #ffeaa7;       /* Star Yellow */
  --accent-blue: #74b9ff;         /* Galaxy Blue */
  
  /* ===== STATUS COLORS ===== */
  --success: #22c55e;
  --warning: #f59e0b;
  --error: #ef4444;
  
  /* ===== GRADIENTS ===== */
  --gradient-primary: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  --gradient-pink: linear-gradient(135deg, var(--accent-pink), var(--accent-primary));
  --gradient-teal: linear-gradient(135deg, var(--accent-secondary), var(--accent-green));
  --gradient-warm: linear-gradient(135deg, var(--accent-orange), var(--accent-pink));
  --gradient-cosmic: linear-gradient(135deg, #667eea, #764ba2);
  --gradient-gold: linear-gradient(135deg, var(--gold), var(--gold-dim));
  
  /* ===== TYPOGRAPHY ===== */
  --font-display: 'Cinzel', serif;
  --font-heading: 'Outfit', sans-serif;
  --font-body: 'Inter', 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-muted: rgba(255, 255, 255, 0.45);
  --text-faint: rgba(255, 255, 255, 0.3);
  
  /* ===== SPACING & SIZING ===== */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --radius-2xl: 32px;
  
  /* Layout */
  --nav-width: 260px;
  --widget-width: 340px;
  --content-max: 680px;
  --page-padding: 24px;
  
  /* ===== SHADOWS ===== */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.25);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);
  --shadow-glow-primary: 0 0 20px rgba(108, 92, 231, 0.3);
  --shadow-glow-secondary: 0 0 20px rgba(0, 206, 201, 0.3);
  --shadow-glow-gold: 0 4px 20px rgba(212, 168, 83, 0.3);
  
  /* ===== TRANSITIONS ===== */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ============================================
   LIGHT THEME
   ============================================ */
.light {
  --void: #ffffff;
  --void-light: #f8f9fa;
  --void-surface: #f1f3f5;
  --void-elevated: #e9ecef;
  --void-border: #dee2e6;
  
  /* Void text colors for light theme */
  --void-text: #1a1a2e;
  --void-text-secondary: rgba(26, 26, 46, 0.7);
  --void-text-muted: rgba(26, 26, 46, 0.5);
  
  --bg-core: #ffffff;
  --bg-deep: #f8f9fa;
  --bg-surface: #f1f3f5;
  --bg-elevated: #e9ecef;
  
  --glass-base: rgba(255, 255, 255, 0.85);
  --glass-light: rgba(255, 255, 255, 0.9);
  --glass-dark: rgba(248, 249, 250, 0.95);
  --glass-bg: rgba(0, 0, 0, 0.02);
  --glass-border: rgba(0, 0, 0, 0.08);
  --glass-border-light: rgba(0, 0, 0, 0.12);
  
  --text-primary: #1a1a2e;
  --text-secondary: rgba(26, 26, 46, 0.7);
  --text-muted: rgba(26, 26, 46, 0.5);
  --text-faint: rgba(26, 26, 46, 0.3);
  
  --gold: #b8942e;
  --gold-light: #d4a853;
  --gold-dim: #96771f;
}

/* Reset & Base */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* html scroll-behavior varsayÄ±lan (auto) - sayfalar arasÄ± animasyonsuz geÃ§iÅŸ iÃ§in */

body {
  font-family: var(--font-body);
  background-color: var(--bg-core);
  color: var(--text-primary);
  overflow-x: hidden;
  min-height: 100vh;
  line-height: 1.6;
  /* Clean dark background - minimal gradient */
  background: 
    radial-gradient(ellipse at 20% 0%, rgba(108, 92, 231, 0.05) 0%, transparent 40%),
    radial-gradient(ellipse at 80% 100%, rgba(0, 206, 201, 0.04) 0%, transparent 40%),
    var(--bg-core);
  background-attachment: fixed;
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-heading);
  font-weight: 600;
  line-height: 1.2;
  letter-spacing: -0.02em;
}

/* ============================================
   GLASS PANEL - Core Component (Nebula Style)
   ============================================ */

@layer components {
  .glass-panel {
    @apply bg-[rgba(20,20,35,0.65)] rounded-2xl;
    backdrop-filter: blur(var(--blur-amt)) saturate(180%);
    -webkit-backdrop-filter: blur(var(--blur-amt)) saturate(180%);
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-lg);
  }

  .glass-panel-light {
    @apply bg-[rgba(30,30,50,0.5)] rounded-2xl;
    backdrop-filter: blur(var(--blur-amt)) saturate(150%);
    -webkit-backdrop-filter: blur(var(--blur-amt)) saturate(150%);
    border: 1px solid var(--glass-border);
  }

  .glass-card {
    @apply glass-panel p-5 transition-all;
    transition-duration: var(--transition-base);
  }

  .glass-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg), var(--shadow-glow-primary);
    border-color: var(--glass-border-light);
  }

  /* ===== BUTTONS ===== */
  .btn {
    @apply inline-flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-semibold border-none cursor-pointer gap-2;
    font-family: var(--font-body);
    transition: all var(--transition-base);
  }

  .btn:active {
    transform: scale(0.96);
  }

  .btn-primary {
    background: var(--gradient-primary);
    color: white;
    box-shadow: var(--shadow-glow-primary);
  }

  .btn-primary:hover {
    filter: brightness(1.1);
    box-shadow: 0 0 30px rgba(108, 92, 231, 0.5);
  }

  .btn-secondary {
    @apply bg-[rgba(255,255,255,0.08)] text-white;
    border: 1px solid var(--glass-border);
  }

  .btn-secondary:hover {
    @apply bg-[rgba(255,255,255,0.12)];
    border-color: var(--glass-border-light);
  }

  .btn-ghost {
    @apply bg-transparent text-[rgba(255,255,255,0.7)];
  }

  .btn-ghost:hover {
    @apply bg-[rgba(255,255,255,0.05)] text-white;
  }

  .btn-danger {
    @apply bg-[#FF6B6B] text-white;
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
  }

  .btn-success {
    @apply bg-[#00b894] text-white;
    box-shadow: 0 4px 12px rgba(0, 184, 148, 0.3);
  }

  .btn-icon {
    @apply w-10 h-10 rounded-full p-0 flex items-center justify-center;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--glass-border);
  }

  .btn-icon:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--glass-border-light);
  }

  /* ===== INPUTS ===== */
  .glass-input {
    @apply w-full px-4 py-3 rounded-xl text-white text-sm;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--glass-border);
    font-family: var(--font-body);
    transition: all var(--transition-base);
  }

  .glass-input:focus {
    @apply outline-none;
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
  }

  .glass-input::placeholder {
    color: var(--text-muted);
  }

  /* ===== RATING BADGE ===== */
  .rating-badge {
    @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-semibold text-sm;
    background: rgba(255, 159, 10, 0.15);
    color: var(--accent-orange);
  }

  .rating-badge-saga {
    background: rgba(108, 92, 231, 0.15);
    color: var(--accent-primary);
  }

  .rating-badge-tmdb {
    background: rgba(0, 206, 201, 0.15);
    color: var(--accent-secondary);
  }

  /* ===== SEGMENTED CONTROL ===== */
  .segmented-control {
    @apply flex p-1 rounded-xl;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--glass-border);
  }

  .segment-btn {
    @apply flex-1 py-2 px-4 text-center text-sm font-medium rounded-lg cursor-pointer;
    color: var(--text-secondary);
    transition: all var(--transition-base);
  }

  .segment-btn.active {
    @apply text-white font-semibold;
    background: var(--gradient-primary);
    box-shadow: var(--shadow-sm);
  }

  .segment-btn:hover:not(.active) {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.05);
  }

  /* ===== FILTER CHIPS ===== */
  .filter-chip {
    @apply px-4 py-2 rounded-full text-sm cursor-pointer;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--glass-border);
    color: var(--text-secondary);
    transition: all var(--transition-base);
  }

  .filter-chip:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--glass-border-light);
  }

  .filter-chip.active {
    @apply text-white;
    background: var(--accent-primary);
    border-color: var(--accent-primary);
  }

  /* ===== BADGES ===== */
  .badge {
    @apply inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium;
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }

  .badge-primary {
    background: rgba(108, 92, 231, 0.2);
    color: var(--accent-primary);
  }

  .badge-secondary {
    background: rgba(0, 206, 201, 0.2);
    color: var(--accent-secondary);
  }

  .badge-green {
    background: rgba(0, 184, 148, 0.2);
    color: var(--accent-green);
  }

  .badge-orange {
    background: rgba(255, 159, 10, 0.2);
    color: var(--accent-orange);
  }

  .badge-pink {
    background: rgba(253, 121, 168, 0.2);
    color: var(--accent-pink);
  }
}

/* ============================================
   ANIMATIONS (Nebula Style)
   ============================================ */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 15px rgba(108, 92, 231, 0.3);
  }
  50% {
    box-shadow: 0 0 25px rgba(108, 92, 231, 0.5);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-5px);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-fade-in {
  animation: fadeIn 0.4s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-fadeInUp {
  opacity: 0;
  animation: fadeInUp 0.5s ease forwards;
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* Skeleton Loader */
.skeleton {
  @apply relative overflow-hidden bg-[rgba(255,255,255,0.05)] rounded-lg;
}

.skeleton::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.05),
    transparent
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* ============================================
   SCROLLBAR STYLING
   ============================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* ============================================
   UTILITIES (Nebula Style)
   ============================================ */

.text-gradient {
  background: linear-gradient(135deg, #fff, rgba(255,255,255,0.7));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.text-gradient-primary {
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.text-gradient-pink {
  background: var(--gradient-pink);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.bg-gradient-primary {
  background: var(--gradient-primary);
}

.bg-gradient-cosmic {
  background: var(--gradient-cosmic);
}

.border-glass {
  border: 1px solid var(--glass-border);
}

.border-glass-light {
  border: 1px solid var(--glass-border-light);
}

/* Focus visible for accessibility */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.3);
}

/* Hide scrollbar but keep functionality */
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Line clamp utilities */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Poster hover effect */
.poster-hover {
  @apply transition-transform duration-300;
}

.poster-hover:hover {
  transform: scale(1.03);
  box-shadow: var(--shadow-lg), var(--shadow-glow-primary);
}

/* Modal Overlay */
.modal-overlay {
  @apply fixed inset-0 z-50 flex items-center justify-center p-4;
  background: rgba(10, 10, 18, 0.85);
  backdrop-filter: blur(8px);
}

/* Interaction button */
.interaction-btn {
  @apply flex items-center gap-1.5 text-sm cursor-pointer bg-transparent border-none;
  color: var(--text-secondary);
  transition: all var(--transition-base);
}

.interaction-btn:hover {
  color: var(--text-primary);
}

.interaction-btn.liked {
  color: var(--accent-pink);
}

/* Nebula Glow Effects */
.glow-primary {
  box-shadow: var(--shadow-glow-primary);
}

.glow-secondary {
  box-shadow: var(--shadow-glow-secondary);
}

/* Avatar Ring */
.avatar-ring {
  padding: 2px;
  background: var(--gradient-primary);
  border-radius: 50%;
}

.avatar-ring img {
  border-radius: 50%;
  border: 2px solid var(--bg-core);
}

/* ============================================ */
/* RESPONSIVE UTILITIES                          */
/* ============================================ */

/* Safe Area for mobile devices */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

.safe-area-top {
  padding-top: env(safe-area-inset-top, 0px);
}

/* Mobile optimized touch targets */
@media (max-width: 1023px) {
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Larger tap areas for mobile */
  button, a {
    touch-action: manipulation;
  }
  
  /* Prevent zoom on input focus (iOS) */
  input, select, textarea {
    font-size: 16px !important;
  }
}

/* Hide scrollbar but keep functionality */
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Mobile header with blur */
.mobile-header {
  background: rgba(10, 10, 18, 0.9);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

/* Responsive grid for content cards */
.content-grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(2, 1fr);
}

@media (min-width: 640px) {
  .content-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (min-width: 768px) {
  .content-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (min-width: 1024px) {
  .content-grid {
    grid-template-columns: repeat(5, 1fr);
  }
}

@media (min-width: 1280px) {
  .content-grid {
    grid-template-columns: repeat(6, 1fr);
  }
}

/* Responsive container padding */
.container-padding {
  padding-left: 1rem;
  padding-right: 1rem;
}

@media (min-width: 640px) {
  .container-padding {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

@media (min-width: 1024px) {
  .container-padding {
    padding-left: 2rem;
    padding-right: 2rem;
  }
}

/* Float animation for decorative orbs */
@keyframes float {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-20px) rotate(5deg);
  }
}

.animate-float {
  animation: float 8s ease-in-out infinite;
}


========== saga.client\src\App.css ==========

/* Saga - Global Styles */

/* Scroll - sayfalar arası animasyonsuz geçiş */
html {
  /* scroll-behavior varsayılan auto kalacak */
}


========== saga.client\src\App.tsx ==========

import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { MantineProvider } from '@mantine/core';
import '@mantine/core/styles.css';

import { AuthProvider, AuthModalProvider } from './context/AuthContext';
import { ThemeProvider } from './context/ThemeContext';
import { VoidLayout } from './components/layout';
import LoginPage from './pages/glass/LoginPage';
import RegisterPage from './pages/glass/RegisterPage';
import ForgotPasswordPage from './pages/glass/ForgotPasswordPage';
import ResetPasswordPage from './pages/glass/ResetPasswordPage';
import FeedPage from './pages/glass/FeedPage';
import ExplorePage from './pages/glass/ExplorePage';
import DetailPage from './pages/glass/DetailPage';
import ProfilePage from './pages/glass/ProfilePage';
import SettingsPage from './pages/glass/SettingsPage';
import LibraryPage from './pages/glass/LibraryPage';
import ListsPage from './pages/glass/ListsPage';
import ListEditPage from './pages/glass/ListEditPage';
import LikesPage from './pages/glass/LikesPage';
import NotificationsPage from './pages/glass/NotificationsPage';

// Client örneğini oluştur (Cache ayarlarıyla)
const queryClient = new QueryClient({
    defaultOptions: {
        queries: {
            staleTime: 1000 * 60 * 5, // Veriler 5 dakika taze sayılsın (tekrar istek atma)
            retry: 1, // Hata olursa 1 kere daha dene
        },
    },
});

function App() {
    return (
        <QueryClientProvider client={queryClient}>
            <MantineProvider>
                <ThemeProvider>
                    <AuthProvider>
                        <BrowserRouter>
                            <AuthModalProvider>
                                <Routes>
                                    {/* Auth Routes - No Layout */}
                                    <Route path="/giris" element={<LoginPage />} />
                                    <Route path="/kayit" element={<RegisterPage />} />
                                    <Route path="/sifre-sifirla" element={<ForgotPasswordPage />} />
                                    <Route path="/sifre-yenile" element={<ResetPasswordPage />} />

                                    {/* All Pages with VoidLayout */}
                                    <Route element={<VoidLayout />}>
                                        <Route path="/" element={<FeedPage />} />
                                        <Route path="/akis" element={<FeedPage />} />
                                        <Route path="/bildirimler" element={<NotificationsPage />} />
                                        <Route path="/profil/:kullaniciAdi" element={<ProfilePage />} />
                                        <Route path="/kesfet" element={<ExplorePage />} />
                                        <Route path="/ayarlar" element={<SettingsPage />} />
                                        <Route path="/kutuphane" element={<LibraryPage />} />
                                        <Route path="/listelerim" element={<ListsPage />} />
                                        <Route path="/liste/:id/duzenle" element={<ListEditPage />} />
                                        <Route path="/begeniler" element={<LikesPage />} />
                                        <Route path="/icerik/:tip/:id" element={<DetailPage />} />
                                        <Route path="/icerik/:id" element={<DetailPage />} />
                                    </Route>

                                    {/* Fallback */}
                                    <Route path="*" element={<Navigate to="/" replace />} />
                                </Routes>
                            </AuthModalProvider>
                        </BrowserRouter>
                    </AuthProvider>
                </ThemeProvider>
            </MantineProvider>
        </QueryClientProvider>
    );
}

export default App;

========== saga.client\src\index.css ==========

* {
  box-sizing: border-box;
}

html {
  /* Safari uyumluluk iÃ§in webkit prefix Ã¶nce */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

#root {
  min-height: 100vh;
}

/* Safari uyumluluk iÃ§in backdrop-filter */
.backdrop-blur-sm {
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
}

.backdrop-blur-md {
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
}

.backdrop-blur-xl {
  -webkit-backdrop-filter: blur(24px);
  backdrop-filter: blur(24px);
}


========== saga.client\src\main.tsx ==========

import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './styles/globals.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
    <StrictMode>
        <App />
    </StrictMode>,
)

========== saga.client\index.html ==========

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Saga - Sosyal Ä°Ã§erik Platformu. Filmleri, kitaplarÄ± keÅŸfet, listeler oluÅŸtur ve arkadaÅŸlarÄ±nla paylaÅŸ." />
    <title>Saga | KeÅŸfet, PaylaÅŸ, Takip Et</title>
    
    <!-- Preconnect for faster font loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Material Symbols Rounded - with display=swap for faster rendering -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0&display=swap" />
    
    <!-- Cinzel & Inter Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font loading style - hide icon text until font loads -->
    <style>
      .material-symbols-rounded {
        font-family: 'Material Symbols Rounded';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;
        line-height: 1;
        letter-spacing: normal;
        text-transform: none;
        display: inline-block;
        white-space: nowrap;
        word-wrap: normal;
        direction: ltr;
        font-feature-settings: 'liga';
        -webkit-font-feature-settings: 'liga';
        -webkit-font-smoothing: antialiased;
        font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
      }
      .material-symbols-rounded.filled {
        font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


========== saga.client\package-lock.json ==========

{
  "name": "saga.client",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "saga.client",
      "version": "0.0.0",
      "dependencies": {
        "@emotion/react": "^11.14.0",
        "@emotion/styled": "^11.14.1",
        "@mantine/core": "^8.3.9",
        "@mantine/hooks": "^8.3.9",
        "@mantine/notifications": "^8.3.9",
        "@supabase/supabase-js": "^2.84.0",
        "@tabler/icons-react": "^3.35.0",
        "@tanstack/react-query": "^5.90.10",
        "axios": "^1.13.2",
        "date-fns": "^4.1.0",
        "lucide-react": "^0.554.0",
        "react": "^19.2.0",
        "react-dom": "^19.2.0",
        "react-hot-toast": "^2.6.0",
        "react-router-dom": "^7.9.6"
      },
      "devDependencies": {
        "@eslint/js": "^9.39.1",
        "@types/node": "^24.10.1",
        "@types/react": "^19.2.5",
        "@types/react-dom": "^19.2.3",
        "@vitejs/plugin-react": "^5.1.1",
        "autoprefixer": "^10.4.22",
        "eslint": "^9.39.1",
        "eslint-plugin-react-hooks": "^7.0.1",
        "eslint-plugin-react-refresh": "^0.4.24",
        "globals": "^16.5.0",
        "postcss": "^8.5.6",
        "tailwindcss": "^3.4.18",
        "typescript": "~5.9.3",
        "typescript-eslint": "^8.46.4",
        "vite": "^7.2.4"
      }
    },
    "node_modules/@alloc/quick-lru": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@alloc/quick-lru/-/quick-lru-5.2.0.tgz",
      "integrity": "sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
      "integrity": "sha512-KKBU1VGYR7ORr3At5HAtUQ+TV3SzRCXmA/8OdDZiLDBIZxVyzXuztPjfLd3BV1PRAQGCMWWSHYhL0F8d5uHBDQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.5"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/runtime": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/runtime/-/runtime-7.28.4.tgz",
      "integrity": "sha512-Q/N6JNWvIvPnLDvjlE1OUBLPQHH6l3CltCEsHIujp45zQUSSh8K+gHnaEX45yAT1nyngnINhvWtzN+Nb9D8RAQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.5",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
      "integrity": "sha512-qQ5m48eI/MFLQ5PxQj4PFaprjyCTLI37ElWMmNs0K8Lk3dVeOdNpB3ks8jc7yM5CDmVC73eMVk/trk3fgmrUpA==",
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@emotion/babel-plugin": {
      "version": "11.13.5",
      "resolved": "https://registry.npmjs.org/@emotion/babel-plugin/-/babel-plugin-11.13.5.tgz",
      "integrity": "sha512-pxHCpT2ex+0q+HH91/zsdHkw/lXd468DIN2zvfvLtPKLLMo6gQj7oLObq8PhkrxOZb/gGCq03S3Z7PDhS8pduQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.16.7",
        "@babel/runtime": "^7.18.3",
        "@emotion/hash": "^0.9.2",
        "@emotion/memoize": "^0.9.0",
        "@emotion/serialize": "^1.3.3",
        "babel-plugin-macros": "^3.1.0",
        "convert-source-map": "^1.5.0",
        "escape-string-regexp": "^4.0.0",
        "find-root": "^1.1.0",
        "source-map": "^0.5.7",
        "stylis": "4.2.0"
      }
    },
    "node_modules/@emotion/babel-plugin/node_modules/convert-source-map": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-1.9.0.tgz",
      "integrity": "sha512-ASFBup0Mz1uyiIjANan1jzLQami9z1PoYSZCiiYW2FczPbenXc45FZdBZLzOT+r6+iciuEModtmCti+hjaAk0A==",
      "license": "MIT"
    },
    "node_modules/@emotion/cache": {
      "version": "11.14.0",
      "resolved": "https://registry.npmjs.org/@emotion/cache/-/cache-11.14.0.tgz",
      "integrity": "sha512-L/B1lc/TViYk4DcpGxtAVbx0ZyiKM5ktoIyafGkH6zg/tj+mA+NE//aPYKG0k8kCHSHVJrpLpcAlOBEXQ3SavA==",
      "license": "MIT",
      "dependencies": {
        "@emotion/memoize": "^0.9.0",
        "@emotion/sheet": "^1.4.0",
        "@emotion/utils": "^1.4.2",
        "@emotion/weak-memoize": "^0.4.0",
        "stylis": "4.2.0"
      }
    },
    "node_modules/@emotion/hash": {
      "version": "0.9.2",
      "resolved": "https://registry.npmjs.org/@emotion/hash/-/hash-0.9.2.tgz",
      "integrity": "sha512-MyqliTZGuOm3+5ZRSaaBGP3USLw6+EGykkwZns2EPC5g8jJ4z9OrdZY9apkl3+UP9+sdz76YYkwCKP5gh8iY3g==",
      "license": "MIT"
    },
    "node_modules/@emotion/is-prop-valid": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/@emotion/is-prop-valid/-/is-prop-valid-1.4.0.tgz",
      "integrity": "sha512-QgD4fyscGcbbKwJmqNvUMSE02OsHUa+lAWKdEUIJKgqe5IwRSKd7+KhibEWdaKwgjLj0DRSHA9biAIqGBk05lw==",
      "license": "MIT",
      "dependencies": {
        "@emotion/memoize": "^0.9.0"
      }
    },
    "node_modules/@emotion/memoize": {
      "version": "0.9.0",
      "resolved": "https://registry.npmjs.org/@emotion/memoize/-/memoize-0.9.0.tgz",
      "integrity": "sha512-30FAj7/EoJ5mwVPOWhAyCX+FPfMDrVecJAM+Iw9NRoSl4BBAQeqj4cApHHUXOVvIPgLVDsCFoz/hGD+5QQD1GQ==",
      "license": "MIT"
    },
    "node_modules/@emotion/react": {
      "version": "11.14.0",
      "resolved": "https://registry.npmjs.org/@emotion/react/-/react-11.14.0.tgz",
      "integrity": "sha512-O000MLDBDdk/EohJPFUqvnp4qnHeYkVP5B0xEG0D/L7cOKP9kefu2DXn8dj74cQfsEzUqh+sr1RzFqiL1o+PpA==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.18.3",
        "@emotion/babel-plugin": "^11.13.5",
        "@emotion/cache": "^11.14.0",
        "@emotion/serialize": "^1.3.3",
        "@emotion/use-insertion-effect-with-fallbacks": "^1.2.0",
        "@emotion/utils": "^1.4.2",
        "@emotion/weak-memoize": "^0.4.0",
        "hoist-non-react-statics": "^3.3.1"
      },
      "peerDependencies": {
        "react": ">=16.8.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@emotion/serialize": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/@emotion/serialize/-/serialize-1.3.3.tgz",
      "integrity": "sha512-EISGqt7sSNWHGI76hC7x1CksiXPahbxEOrC5RjmFRJTqLyEK9/9hZvBbiYn70dw4wuwMKiEMCUlR6ZXTSWQqxA==",
      "license": "MIT",
      "dependencies": {
        "@emotion/hash": "^0.9.2",
        "@emotion/memoize": "^0.9.0",
        "@emotion/unitless": "^0.10.0",
        "@emotion/utils": "^1.4.2",
        "csstype": "^3.0.2"
      }
    },
    "node_modules/@emotion/sheet": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/@emotion/sheet/-/sheet-1.4.0.tgz",
      "integrity": "sha512-fTBW9/8r2w3dXWYM4HCB1Rdp8NLibOw2+XELH5m5+AkWiL/KqYX6dc0kKYlaYyKjrQ6ds33MCdMPEwgs2z1rqg==",
      "license": "MIT"
    },
    "node_modules/@emotion/styled": {
      "version": "11.14.1",
      "resolved": "https://registry.npmjs.org/@emotion/styled/-/styled-11.14.1.tgz",
      "integrity": "sha512-qEEJt42DuToa3gurlH4Qqc1kVpNq8wO8cJtDzU46TjlzWjDlsVyevtYCRijVq3SrHsROS+gVQ8Fnea108GnKzw==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.18.3",
        "@emotion/babel-plugin": "^11.13.5",
        "@emotion/is-prop-valid": "^1.3.0",
        "@emotion/serialize": "^1.3.3",
        "@emotion/use-insertion-effect-with-fallbacks": "^1.2.0",
        "@emotion/utils": "^1.4.2"
      },
      "peerDependencies": {
        "@emotion/react": "^11.0.0-rc.0",
        "react": ">=16.8.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@emotion/unitless": {
      "version": "0.10.0",
      "resolved": "https://registry.npmjs.org/@emotion/unitless/-/unitless-0.10.0.tgz",
      "integrity": "sha512-dFoMUuQA20zvtVTuxZww6OHoJYgrzfKM1t52mVySDJnMSEa08ruEvdYQbhvyu6soU+NeLVd3yKfTfT0NeV6qGg==",
      "license": "MIT"
    },
    "node_modules/@emotion/use-insertion-effect-with-fallbacks": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@emotion/use-insertion-effect-with-fallbacks/-/use-insertion-effect-with-fallbacks-1.2.0.tgz",
      "integrity": "sha512-yJMtVdH59sxi/aVJBpk9FQq+OR8ll5GT8oWd57UpeaKEVGab41JWaCFA7FRLoMLloOZF/c/wsPoe+bfGmRKgDg==",
      "license": "MIT",
      "peerDependencies": {
        "react": ">=16.8.0"
      }
    },
    "node_modules/@emotion/utils": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/@emotion/utils/-/utils-1.4.2.tgz",
      "integrity": "sha512-3vLclRofFziIa3J2wDh9jjbkUz9qk5Vi3IZ/FSTKViB0k+ef0fPV7dYrUIugbgupYDx7v9ud/SjrtEP8Y4xLoA==",
      "license": "MIT"
    },
    "node_modules/@emotion/weak-memoize": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/@emotion/weak-memoize/-/weak-memoize-0.4.0.tgz",
      "integrity": "sha512-snKqtPW01tN0ui7yu9rGv69aJXr/a/Ywvl11sUjNtEcRc+ng/mQriFL0wLXMef74iHa/EkftbDzU9F8iFbH+zg==",
      "license": "MIT"
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.12.tgz",
      "integrity": "sha512-Hhmwd6CInZ3dwpuGTF8fJG6yoWmsToE+vYgD4nytZVxcu1ulHpUQRAB1UJ8+N1Am3Mz4+xOByoQoSZf4D+CpkA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.12.tgz",
      "integrity": "sha512-VJ+sKvNA/GE7Ccacc9Cha7bpS8nyzVv0jdVgwNDaR4gDMC/2TTRc33Ip8qrNYUcpkOHUT5OZ0bUcNNVZQ9RLlg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.12.tgz",
      "integrity": "sha512-6AAmLG7zwD1Z159jCKPvAxZd4y/VTO0VkprYy+3N2FtJ8+BQWFXU+OxARIwA46c5tdD9SsKGZ/1ocqBS/gAKHg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.12.tgz",
      "integrity": "sha512-5jbb+2hhDHx5phYR2By8GTWEzn6I9UqR11Kwf22iKbNpYrsmRB18aX/9ivc5cabcUiAT/wM+YIZ6SG9QO6a8kg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.12.tgz",
      "integrity": "sha512-N3zl+lxHCifgIlcMUP5016ESkeQjLj/959RxxNYIthIg+CQHInujFuXeWbWMgnTo4cp5XVHqFPmpyu9J65C1Yg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.12.tgz",
      "integrity": "sha512-HQ9ka4Kx21qHXwtlTUVbKJOAnmG1ipXhdWTmNXiPzPfWKpXqASVcWdnf2bnL73wgjNrFXAa3yYvBSd9pzfEIpA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.12.tgz",
      "integrity": "sha512-gA0Bx759+7Jve03K1S0vkOu5Lg/85dou3EseOGUes8flVOGxbhDDh/iZaoek11Y8mtyKPGF3vP8XhnkDEAmzeg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.12.tgz",
      "integrity": "sha512-TGbO26Yw2xsHzxtbVFGEXBFH0FRAP7gtcPE7P5yP7wGy7cXK2oO7RyOhL5NLiqTlBh47XhmIUXuGciXEqYFfBQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.12.tgz",
      "integrity": "sha512-lPDGyC1JPDou8kGcywY0YILzWlhhnRjdof3UlcoqYmS9El818LLfJJc3PXXgZHrHCAKs/Z2SeZtDJr5MrkxtOw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.12.tgz",
      "integrity": "sha512-8bwX7a8FghIgrupcxb4aUmYDLp8pX06rGh5HqDT7bB+8Rdells6mHvrFHHW2JAOPZUbnjUpKTLg6ECyzvas2AQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.12.tgz",
      "integrity": "sha512-0y9KrdVnbMM2/vG8KfU0byhUN+EFCny9+8g202gYqSSVMonbsCfLjUO+rCci7pM0WBEtz+oK/PIwHkzxkyharA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.12.tgz",
      "integrity": "sha512-h///Lr5a9rib/v1GGqXVGzjL4TMvVTv+s1DPoxQdz7l/AYv6LDSxdIwzxkrPW438oUXiDtwM10o9PmwS/6Z0Ng==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.12.tgz",
      "integrity": "sha512-iyRrM1Pzy9GFMDLsXn1iHUm18nhKnNMWscjmp4+hpafcZjrr2WbT//d20xaGljXDBYHqRcl8HnxbX6uaA/eGVw==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.12.tgz",
      "integrity": "sha512-9meM/lRXxMi5PSUqEXRCtVjEZBGwB7P/D4yT8UG/mwIdze2aV4Vo6U5gD3+RsoHXKkHCfSxZKzmDssVlRj1QQA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.12.tgz",
      "integrity": "sha512-Zr7KR4hgKUpWAwb1f3o5ygT04MzqVrGEGXGLnj15YQDJErYu/BGg+wmFlIDOdJp0PmB0lLvxFIOXZgFRrdjR0w==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.12.tgz",
      "integrity": "sha512-MsKncOcgTNvdtiISc/jZs/Zf8d0cl/t3gYWX8J9ubBnVOwlk65UIEEvgBORTiljloIWnBzLs4qhzPkJcitIzIg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.12.tgz",
      "integrity": "sha512-uqZMTLr/zR/ed4jIGnwSLkaHmPjOjJvnm6TVVitAa08SLS9Z0VM8wIRx7gWbJB5/J54YuIMInDquWyYvQLZkgw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.12.tgz",
      "integrity": "sha512-xXwcTq4GhRM7J9A8Gv5boanHhRa/Q9KLVmcyXHCTaM4wKfIpWkdXiMog/KsnxzJ0A1+nD+zoecuzqPmCRyBGjg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.12.tgz",
      "integrity": "sha512-Ld5pTlzPy3YwGec4OuHh1aCVCRvOXdH8DgRjfDy/oumVovmuSzWfnSJg+VtakB9Cm0gxNO9BzWkj6mtO1FMXkQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.12.tgz",
      "integrity": "sha512-fF96T6KsBo/pkQI950FARU9apGNTSlZGsv1jZBAlcLL1MLjLNIWPBkj5NlSz8aAzYKg+eNqknrUJ24QBybeR5A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.12.tgz",
      "integrity": "sha512-MZyXUkZHjQxUvzK7rN8DJ3SRmrVrke8ZyRusHlP+kuwqTcfWLyqMOE3sScPPyeIXN/mDJIfGXvcMqCgYKekoQw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openharmony-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.25.12.tgz",
      "integrity": "sha512-rm0YWsqUSRrjncSXGA7Zv78Nbnw4XL6/dzr20cyrQf7ZmRcsovpcRBdhD43Nuk3y7XIoW2OxMVvwuRvk9XdASg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.12.tgz",
      "integrity": "sha512-3wGSCDyuTHQUzt0nV7bocDy72r2lI33QL3gkDNGkod22EsYl04sMf0qLb8luNKTOmgF/eDEDP5BFNwoBKH441w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.12.tgz",
      "integrity": "sha512-rMmLrur64A7+DKlnSuwqUdRKyd3UE7oPJZmnljqEptesKM8wx9J8gx5u0+9Pq0fQQW8vqeKebwNXdfOyP+8Bsg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.12.tgz",
      "integrity": "sha512-HkqnmmBoCbCwxUKKNPBixiWDGCpQGVsrQfJoVGYLPT41XWF8lHuE5N6WhVia2n4o5QK5M4tYr21827fNhi4byQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.12.tgz",
      "integrity": "sha512-alJC0uCZpTFrSL0CCDjcgleBXPnCrEAhTBILpeAp7M/OFgoqtAetfBzX0xM00MUsVVPpVjlPuMbREqnZCXaTnA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.2",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.21.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.7",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.1.tgz",
      "integrity": "sha512-gtF186CXhIl1p4pJNGZw8Yc6RlshoePRvE0X91oPGb3vZ8pM3qOS9W9NGPat9LziaBV7XrJWGylNQXkGcnM3IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.1.tgz",
      "integrity": "sha512-S26Stp4zCy88tH94QbBv3XCuzRQiZ9yXofEILmglYTh/Ug/a9/umqvgFtYBAo3Lp0nsI/5/qH1CCrbdK3AP1Tw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@floating-ui/core": {
      "version": "1.7.3",
      "resolved": "https://registry.npmjs.org/@floating-ui/core/-/core-1.7.3.tgz",
      "integrity": "sha512-sGnvb5dmrJaKEZ+LDIpguvdX3bDlEllmv4/ClQ9awcmCZrlx5jQyyMWFM5kBI+EyNOCDDiKk8il0zeuX3Zlg/w==",
      "license": "MIT",
      "dependencies": {
        "@floating-ui/utils": "^0.2.10"
      }
    },
    "node_modules/@floating-ui/dom": {
      "version": "1.7.4",
      "resolved": "https://registry.npmjs.org/@floating-ui/dom/-/dom-1.7.4.tgz",
      "integrity": "sha512-OOchDgh4F2CchOX94cRVqhvy7b3AFb+/rQXyswmzmGakRfkMgoWVjfnLWkRirfLEfuD4ysVW16eXzwt3jHIzKA==",
      "license": "MIT",
      "dependencies": {
        "@floating-ui/core": "^1.7.3",
        "@floating-ui/utils": "^0.2.10"
      }
    },
    "node_modules/@floating-ui/react": {
      "version": "0.27.16",
      "resolved": "https://registry.npmjs.org/@floating-ui/react/-/react-0.27.16.tgz",
      "integrity": "sha512-9O8N4SeG2z++TSM8QA/KTeKFBVCNEz/AGS7gWPJf6KFRzmRWixFRnCnkPHRDwSVZW6QPDO6uT0P2SpWNKCc9/g==",
      "license": "MIT",
      "dependencies": {
        "@floating-ui/react-dom": "^2.1.6",
        "@floating-ui/utils": "^0.2.10",
        "tabbable": "^6.0.0"
      },
      "peerDependencies": {
        "react": ">=17.0.0",
        "react-dom": ">=17.0.0"
      }
    },
    "node_modules/@floating-ui/react-dom": {
      "version": "2.1.6",
      "resolved": "https://registry.npmjs.org/@floating-ui/react-dom/-/react-dom-2.1.6.tgz",
      "integrity": "sha512-4JX6rEatQEvlmgU80wZyq9RT96HZJa88q8hp0pBd+LrczeDI4o6uA2M+uvxngVHo4Ihr8uibXxH6+70zhAFrVw==",
      "license": "MIT",
      "dependencies": {
        "@floating-ui/dom": "^1.7.4"
      },
      "peerDependencies": {
        "react": ">=16.8.0",
        "react-dom": ">=16.8.0"
      }
    },
    "node_modules/@floating-ui/utils": {
      "version": "0.2.10",
      "resolved": "https://registry.npmjs.org/@floating-ui/utils/-/utils-0.2.10.tgz",
      "integrity": "sha512-aGTxbpbg8/b5JfU1HXSrbH3wXZuLPJcNEcZQFMxLs3oSzgtVu6nFPkbbGGUvBcUjKV2YyB9Wxxabo+HEH9tcRQ==",
      "license": "MIT"
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.7",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.4.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@mantine/core": {
      "version": "8.3.9",
      "resolved": "https://registry.npmjs.org/@mantine/core/-/core-8.3.9.tgz",
      "integrity": "sha512-ivj0Crn5N521cI2eWZBsBGckg0ZYRqfOJz5vbbvYmfj65bp0EdsyqZuOxXzIcn2aUScQhskfvzyhV5XIUv81PQ==",
      "license": "MIT",
      "dependencies": {
        "@floating-ui/react": "^0.27.16",
        "clsx": "^2.1.1",
        "react-number-format": "^5.4.4",
        "react-remove-scroll": "^2.7.1",
        "react-textarea-autosize": "8.5.9",
        "type-fest": "^4.41.0"
      },
      "peerDependencies": {
        "@mantine/hooks": "8.3.9",
        "react": "^18.x || ^19.x",
        "react-dom": "^18.x || ^19.x"
      }
    },
    "node_modules/@mantine/hooks": {
      "version": "8.3.9",
      "resolved": "https://registry.npmjs.org/@mantine/hooks/-/hooks-8.3.9.tgz",
      "integrity": "sha512-Dfz7W0+K1cq4Gb1WFQCZn8tsMXkLH6MV409wZR/ToqsxdNDUMJ/xxbfnwEXWEZjXNJd1wDETHgc+cZG2lTe3Xw==",
      "license": "MIT",
      "peerDependencies": {
        "react": "^18.x || ^19.x"
      }
    },
    "node_modules/@mantine/notifications": {
      "version": "8.3.9",
      "resolved": "https://registry.npmjs.org/@mantine/notifications/-/notifications-8.3.9.tgz",
      "integrity": "sha512-emUdoCyaccf/NuNmJ4fQgloJ7hEod0Pde7XIoD9xUUztVchL143oWRU2gYm6cwqzSyjpjTaqPXfz5UvEBRYjZw==",
      "license": "MIT",
      "dependencies": {
        "@mantine/store": "8.3.9",
        "react-transition-group": "4.4.5"
      },
      "peerDependencies": {
        "@mantine/core": "8.3.9",
        "@mantine/hooks": "8.3.9",
        "react": "^18.x || ^19.x",
        "react-dom": "^18.x || ^19.x"
      }
    },
    "node_modules/@mantine/store": {
      "version": "8.3.9",
      "resolved": "https://registry.npmjs.org/@mantine/store/-/store-8.3.9.tgz",
      "integrity": "sha512-Z4tYW597mD3NxHLlJ3OJ1aKucmwrD9nhqobz+142JNw01aHqzKjxVXlu3L5GGa7F3u3OjXJk/qb1QmUs4sU+Jw==",
      "license": "MIT",
      "peerDependencies": {
        "react": "^18.x || ^19.x"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.47",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.47.tgz",
      "integrity": "sha512-8QagwMH3kNCuzD8EWL8R2YPW5e4OrHNSAHRFDdmFqEwEaD/KcNKjVoumo+gP2vW5eKB2UPbM6vTYiGZX0ixLnw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.53.3.tgz",
      "integrity": "sha512-mRSi+4cBjrRLoaal2PnqH82Wqyb+d3HsPUN/W+WslCXsZsyHa9ZeQQX/pQsZaVIWDkPcpV6jJ+3KLbTbgnwv8w==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.53.3.tgz",
      "integrity": "sha512-CbDGaMpdE9sh7sCmTrTUyllhrg65t6SwhjlMJsLr+J8YjFuPmCEjbBSx4Z/e4SmDyH3aB5hGaJUP2ltV/vcs4w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.53.3.tgz",
      "integrity": "sha512-Nr7SlQeqIBpOV6BHHGZgYBuSdanCXuw09hon14MGOLGmXAFYjx1wNvquVPmpZnl0tLjg25dEdr4IQ6GgyToCUA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.53.3.tgz",
      "integrity": "sha512-DZ8N4CSNfl965CmPktJ8oBnfYr3F8dTTNBQkRlffnUarJ2ohudQD17sZBa097J8xhQ26AwhHJ5mvUyQW8ddTsQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.53.3.tgz",
      "integrity": "sha512-yMTrCrK92aGyi7GuDNtGn2sNW+Gdb4vErx4t3Gv/Tr+1zRb8ax4z8GWVRfr3Jw8zJWvpGHNpss3vVlbF58DZ4w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.53.3.tgz",
      "integrity": "sha512-lMfF8X7QhdQzseM6XaX0vbno2m3hlyZFhwcndRMw8fbAGUGL3WFMBdK0hbUBIUYcEcMhVLr1SIamDeuLBnXS+Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.53.3.tgz",
      "integrity": "sha512-k9oD15soC/Ln6d2Wv/JOFPzZXIAIFLp6B+i14KhxAfnq76ajt0EhYc5YPeX6W1xJkAdItcVT+JhKl1QZh44/qw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.53.3.tgz",
      "integrity": "sha512-vTNlKq+N6CK/8UktsrFuc+/7NlEYVxgaEgRXVUVK258Z5ymho29skzW1sutgYjqNnquGwVUObAaxae8rZ6YMhg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.53.3.tgz",
      "integrity": "sha512-RGrFLWgMhSxRs/EWJMIFM1O5Mzuz3Xy3/mnxJp/5cVhZ2XoCAxJnmNsEyeMJtpK+wu0FJFWz+QF4mjCA7AUQ3w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.53.3.tgz",
      "integrity": "sha512-kASyvfBEWYPEwe0Qv4nfu6pNkITLTb32p4yTgzFCocHnJLAHs+9LjUu9ONIhvfT/5lv4YS5muBHyuV84epBo/A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.53.3.tgz",
      "integrity": "sha512-JiuKcp2teLJwQ7vkJ95EwESWkNRFJD7TQgYmCnrPtlu50b4XvT5MOmurWNrCj3IFdyjBQ5p9vnrX4JM6I8OE7g==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.53.3.tgz",
      "integrity": "sha512-EoGSa8nd6d3T7zLuqdojxC20oBfNT8nexBbB/rkxgKj5T5vhpAQKKnD+h3UkoMuTyXkP5jTjK/ccNRmQrPNDuw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.53.3.tgz",
      "integrity": "sha512-4s+Wped2IHXHPnAEbIB0YWBv7SDohqxobiiPA1FIWZpX+w9o2i4LezzH/NkFUl8LRci/8udci6cLq+jJQlh+0g==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.53.3.tgz",
      "integrity": "sha512-68k2g7+0vs2u9CxDt5ktXTngsxOQkSEV/xBbwlqYcUrAVh6P9EgMZvFsnHy4SEiUl46Xf0IObWVbMvPrr2gw8A==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.53.3.tgz",
      "integrity": "sha512-VYsFMpULAz87ZW6BVYw3I6sWesGpsP9OPcyKe8ofdg9LHxSbRMd7zrVrr5xi/3kMZtpWL/wC+UIJWJYVX5uTKg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.53.3.tgz",
      "integrity": "sha512-3EhFi1FU6YL8HTUJZ51imGJWEX//ajQPfqWLI3BQq4TlvHy4X0MOr5q3D2Zof/ka0d5FNdPwZXm3Yyib/UEd+w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.53.3.tgz",
      "integrity": "sha512-eoROhjcc6HbZCJr+tvVT8X4fW3/5g/WkGvvmwz/88sDtSJzO7r/blvoBDgISDiCjDRZmHpwud7h+6Q9JxFwq1Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.53.3.tgz",
      "integrity": "sha512-OueLAWgrNSPGAdUdIjSWXw+u/02BRTcnfw9PN41D2vq/JSEPnJnVuBgw18VkN8wcd4fjUs+jFHVM4t9+kBSNLw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.53.3.tgz",
      "integrity": "sha512-GOFuKpsxR/whszbF/bzydebLiXIHSgsEUp6M0JI8dWvi+fFa1TD6YQa4aSZHtpmh2/uAlj/Dy+nmby3TJ3pkTw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.53.3.tgz",
      "integrity": "sha512-iah+THLcBJdpfZ1TstDFbKNznlzoxa8fmnFYK4V67HvmuNYkVdAywJSoteUszvBQ9/HqN2+9AZghbajMsFT+oA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.53.3.tgz",
      "integrity": "sha512-J9QDiOIZlZLdcot5NXEepDkstocktoVjkaKUtqzgzpt2yWjGlbYiKyp05rWwk4nypbYUNoFAztEgixoLaSETkg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.53.3.tgz",
      "integrity": "sha512-UhTd8u31dXadv0MopwGgNOBpUVROFKWVQgAg5N1ESyCz8AuBcMqm4AuTjrwgQKGDfoFuz02EuMRHQIw/frmYKQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@supabase/auth-js": {
      "version": "2.84.0",
      "resolved": "https://registry.npmjs.org/@supabase/auth-js/-/auth-js-2.84.0.tgz",
      "integrity": "sha512-J6XKbqqg1HQPMfYkAT9BrC8anPpAiifl7qoVLsYhQq5B/dnu/lxab1pabnxtJEsvYG5rwI5HEVEGXMjoQ6Wz2Q==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/functions-js": {
      "version": "2.84.0",
      "resolved": "https://registry.npmjs.org/@supabase/functions-js/-/functions-js-2.84.0.tgz",
      "integrity": "sha512-2oY5QBV4py/s64zMlhPEz+4RTdlwxzmfhM1k2xftD2v1DruRZKfoe7Yn9DCz1VondxX8evcvpc2udEIGzHI+VA==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/postgrest-js": {
      "version": "2.84.0",
      "resolved": "https://registry.npmjs.org/@supabase/postgrest-js/-/postgrest-js-2.84.0.tgz",
      "integrity": "sha512-oplc/3jfJeVW4F0J8wqywHkjIZvOVHtqzF0RESijepDAv5Dn/LThlGW1ftysoP4+PXVIrnghAbzPHo88fNomPQ==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/realtime-js": {
      "version": "2.84.0",
      "resolved": "https://registry.npmjs.org/@supabase/realtime-js/-/realtime-js-2.84.0.tgz",
      "integrity": "sha512-ThqjxiCwWiZAroHnYPmnNl6tZk6jxGcG2a7Hp/3kcolPcMj89kWjUTA3cHmhdIWYsP84fHp8MAQjYWMLf7HEUg==",
      "license": "MIT",
      "dependencies": {
        "@types/phoenix": "^1.6.6",
        "@types/ws": "^8.18.1",
        "tslib": "2.8.1",
        "ws": "^8.18.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/storage-js": {
      "version": "2.84.0",
      "resolved": "https://registry.npmjs.org/@supabase/storage-js/-/storage-js-2.84.0.tgz",
      "integrity": "sha512-vXvAJ1euCuhryOhC6j60dG8ky+lk0V06ubNo+CbhuoUv+sl39PyY0lc+k+qpQhTk/VcI6SiM0OECLN83+nyJ5A==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/supabase-js": {
      "version": "2.84.0",
      "resolved": "https://registry.npmjs.org/@supabase/supabase-js/-/supabase-js-2.84.0.tgz",
      "integrity": "sha512-byMqYBvb91sx2jcZsdp0qLpmd4Dioe80e4OU/UexXftCkpTcgrkoENXHf5dO8FCSai8SgNeq16BKg10QiDI6xg==",
      "license": "MIT",
      "dependencies": {
        "@supabase/auth-js": "2.84.0",
        "@supabase/functions-js": "2.84.0",
        "@supabase/postgrest-js": "2.84.0",
        "@supabase/realtime-js": "2.84.0",
        "@supabase/storage-js": "2.84.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@tabler/icons": {
      "version": "3.35.0",
      "resolved": "https://registry.npmjs.org/@tabler/icons/-/icons-3.35.0.tgz",
      "integrity": "sha512-yYXe+gJ56xlZFiXwV9zVoe3FWCGuZ/D7/G4ZIlDtGxSx5CGQK110wrnT29gUj52kEZoxqF7oURTk97GQxELOFQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/codecalm"
      }
    },
    "node_modules/@tabler/icons-react": {
      "version": "3.35.0",
      "resolved": "https://registry.npmjs.org/@tabler/icons-react/-/icons-react-3.35.0.tgz",
      "integrity": "sha512-XG7t2DYf3DyHT5jxFNp5xyLVbL4hMJYJhiSdHADzAjLRYfL7AnjlRfiHDHeXxkb2N103rEIvTsBRazxXtAUz2g==",
      "license": "MIT",
      "dependencies": {
        "@tabler/icons": "3.35.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/codecalm"
      },
      "peerDependencies": {
        "react": ">= 16"
      }
    },
    "node_modules/@tanstack/query-core": {
      "version": "5.90.10",
      "resolved": "https://registry.npmjs.org/@tanstack/query-core/-/query-core-5.90.10.tgz",
      "integrity": "sha512-EhZVFu9rl7GfRNuJLJ3Y7wtbTnENsvzp+YpcAV7kCYiXni1v8qZh++lpw4ch4rrwC0u/EZRnBHIehzCGzwXDSQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/tannerlinsley"
      }
    },
    "node_modules/@tanstack/react-query": {
      "version": "5.90.10",
      "resolved": "https://registry.npmjs.org/@tanstack/react-query/-/react-query-5.90.10.tgz",
      "integrity": "sha512-BKLss9Y8PQ9IUjPYQiv3/Zmlx92uxffUOX8ZZNoQlCIZBJPT5M+GOMQj7xislvVQ6l1BstBjcX0XB/aHfFYVNw==",
      "license": "MIT",
      "dependencies": {
        "@tanstack/query-core": "5.90.10"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/tannerlinsley"
      },
      "peerDependencies": {
        "react": "^18 || ^19"
      }
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "24.10.1",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-24.10.1.tgz",
      "integrity": "sha512-GNWcUTRBgIRJD5zj+Tq0fKOJ5XZajIiBroOF0yvj2bSU1WvNdYS/dn9UxwsujGW4JX06dnHyjV2y9rRaybH0iQ==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~7.16.0"
      }
    },
    "node_modules/@types/parse-json": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/@types/parse-json/-/parse-json-4.0.2.tgz",
      "integrity": "sha512-dISoDXWWQwUquiKsyZ4Ng+HX2KsPL7LyHKHQwgGFEA3IaKac4Obd+h2a/a6waisAoepJlBcx9paWqjA8/HVjCw==",
      "license": "MIT"
    },
    "node_modules/@types/phoenix": {
      "version": "1.6.6",
      "resolved": "https://registry.npmjs.org/@types/phoenix/-/phoenix-1.6.6.tgz",
      "integrity": "sha512-PIzZZlEppgrpoT2QgbnDU+MMzuR6BbCjllj0bM70lWoejMeNJAxCchxnv7J3XFkI8MpygtRpzXrIlmWUBclP5A==",
      "license": "MIT"
    },
    "node_modules/@types/react": {
      "version": "19.2.7",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-19.2.7.tgz",
      "integrity": "sha512-MWtvHrGZLFttgeEj28VXHxpmwYbor/ATPYbBfSFZEIRK0ecCFLl2Qo55z52Hss+UV9CRN7trSeq1zbgx7YDWWg==",
      "devOptional": true,
      "license": "MIT",
      "dependencies": {
        "csstype": "^3.2.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "19.2.3",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-19.2.3.tgz",
      "integrity": "sha512-jp2L/eY6fn+KgVVQAOqYItbF0VY/YApe5Mz2F0aykSO8gx31bYCZyvSeYxCHKvzHG5eZjc+zyaS5BrBWya2+kQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^19.2.0"
      }
    },
    "node_modules/@types/ws": {
      "version": "8.18.1",
      "resolved": "https://registry.npmjs.org/@types/ws/-/ws-8.18.1.tgz",
      "integrity": "sha512-ThVF6DCVhA8kUGy+aazFQ4kXQ7E1Ty7A3ypFOe0IcJV8O/M511G99AW24irKrW56Wt44yG9+ij8FaqoBGkuBXg==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.47.0.tgz",
      "integrity": "sha512-fe0rz9WJQ5t2iaLfdbDc9T80GJy0AeO453q8C3YCilnGozvOyCG5t+EZtg7j7D88+c3FipfP/x+wzGnh1xp8ZA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.10.0",
        "@typescript-eslint/scope-manager": "8.47.0",
        "@typescript-eslint/type-utils": "8.47.0",
        "@typescript-eslint/utils": "8.47.0",
        "@typescript-eslint/visitor-keys": "8.47.0",
        "graphemer": "^1.4.0",
        "ignore": "^7.0.0",
        "natural-compare": "^1.4.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^8.47.0",
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin/node_modules/ignore": {
      "version": "7.0.5",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-7.0.5.tgz",
      "integrity": "sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-8.47.0.tgz",
      "integrity": "sha512-lJi3PfxVmo0AkEY93ecfN+r8SofEqZNGByvHAI3GBLrvt1Cw6H5k1IM02nSzu0RfUafr2EvFSw0wAsZgubNplQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/scope-manager": "8.47.0",
        "@typescript-eslint/types": "8.47.0",
        "@typescript-eslint/typescript-estree": "8.47.0",
        "@typescript-eslint/visitor-keys": "8.47.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/project-service": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/project-service/-/project-service-8.47.0.tgz",
      "integrity": "sha512-2X4BX8hUeB5JcA1TQJ7GjcgulXQ+5UkNb0DL8gHsHUHdFoiCTJoYLTpib3LtSDPZsRET5ygN4qqIWrHyYIKERA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/tsconfig-utils": "^8.47.0",
        "@typescript-eslint/types": "^8.47.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-8.47.0.tgz",
      "integrity": "sha512-a0TTJk4HXMkfpFkL9/WaGTNuv7JWfFTQFJd6zS9dVAjKsojmv9HT55xzbEpnZoY+VUb+YXLMp+ihMLz/UlZfDg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.47.0",
        "@typescript-eslint/visitor-keys": "8.47.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/tsconfig-utils": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.47.0.tgz",
      "integrity": "sha512-ybUAvjy4ZCL11uryalkKxuT3w3sXJAuWhOoGS3T/Wu+iUu1tGJmk5ytSY8gbdACNARmcYEB0COksD2j6hfGK2g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-8.47.0.tgz",
      "integrity": "sha512-QC9RiCmZ2HmIdCEvhd1aJELBlD93ErziOXXlHEZyuBo3tBiAZieya0HLIxp+DoDWlsQqDawyKuNEhORyku+P8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.47.0",
        "@typescript-eslint/typescript-estree": "8.47.0",
        "@typescript-eslint/utils": "8.47.0",
        "debug": "^4.3.4",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-8.47.0.tgz",
      "integrity": "sha512-nHAE6bMKsizhA2uuYZbEbmp5z2UpffNrPEqiKIeN7VsV6UY/roxanWfoRrf6x/k9+Obf+GQdkm0nPU+vnMXo9A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-8.47.0.tgz",
      "integrity": "sha512-k6ti9UepJf5NpzCjH31hQNLHQWupTRPhZ+KFF8WtTuTpy7uHPfeg2NM7cP27aCGajoEplxJDFVCEm9TGPYyiVg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/project-service": "8.47.0",
        "@typescript-eslint/tsconfig-utils": "8.47.0",
        "@typescript-eslint/types": "8.47.0",
        "@typescript-eslint/visitor-keys": "8.47.0",
        "debug": "^4.3.4",
        "fast-glob": "^3.3.2",
        "is-glob": "^4.0.3",
        "minimatch": "^9.0.4",
        "semver": "^7.6.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-8.47.0.tgz",
      "integrity": "sha512-g7XrNf25iL4TJOiPqatNuaChyqt49a/onq5YsJ9+hXeugK+41LVg7AxikMfM02PC6jbNtZLCJj6AUcQXJS/jGQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.7.0",
        "@typescript-eslint/scope-manager": "8.47.0",
        "@typescript-eslint/types": "8.47.0",
        "@typescript-eslint/typescript-estree": "8.47.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-8.47.0.tgz",
      "integrity": "sha512-SIV3/6eftCy1bNzCQoPmbWsRLujS8t5iDIZ4spZOBHqrM+yfX2ogg8Tt3PDTAVKw3sSCiUgg30uOAvK2r9zGjQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.47.0",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-5.1.1.tgz",
      "integrity": "sha512-WQfkSw0QbQ5aJ2CHYw23ZGkqnRwqKHD/KYsMeTkZzPT4Jcf0DcBxBtwMJxnu6E7oxw5+JC6ZAiePgh28uJ1HBA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.28.5",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.47",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.18.0"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/any-promise": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/any-promise/-/any-promise-1.3.0.tgz",
      "integrity": "sha512-7UvmKalWRt1wgjL1RrGxoSJW/0QZFIegpeGvZG9kjp8vrRu55XTHbwnqq2GpXm9uLbcuhxm3IqX9OB4MZR1b2A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/arg": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/arg/-/arg-5.0.2.tgz",
      "integrity": "sha512-PYjyFOLKQ9y57JvQ6QLo8dAgNqswh8M1RMJYdQduT6xbWSgK36P/Z/v+p888pM69jMMfS8Xd8F6I1kQ/I9HUGg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/autoprefixer": {
      "version": "10.4.22",
      "resolved": "https://registry.npmjs.org/autoprefixer/-/autoprefixer-10.4.22.tgz",
      "integrity": "sha512-ARe0v/t9gO28Bznv6GgqARmVqcWOV3mfgUPn9becPHMiD3o9BwlRgaeccZnwTpZ7Zwqrm+c1sUSsMxIzQzc8Xg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/autoprefixer"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "browserslist": "^4.27.0",
        "caniuse-lite": "^1.0.30001754",
        "fraction.js": "^5.3.4",
        "normalize-range": "^0.1.2",
        "picocolors": "^1.1.1",
        "postcss-value-parser": "^4.2.0"
      },
      "bin": {
        "autoprefixer": "bin/autoprefixer"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      },
      "peerDependencies": {
        "postcss": "^8.1.0"
      }
    },
    "node_modules/axios": {
      "version": "1.13.2",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.13.2.tgz",
      "integrity": "sha512-VPk9ebNqPcy5lRGuSlKx752IlDatOjT9paPlm8A7yOuW2Fbvp4X3JznJtT4f0GzGLLiWE9W8onz51SqLYwzGaA==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/babel-plugin-macros": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/babel-plugin-macros/-/babel-plugin-macros-3.1.0.tgz",
      "integrity": "sha512-Cg7TFGpIr01vOQNODXOOaGz2NpCU5gl8x1qJFbb6hbZxR7XrcE2vtbAsTAbJ7/xwJtUuJEw8K8Zr/AE0LHlesg==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.12.5",
        "cosmiconfig": "^7.0.0",
        "resolve": "^1.19.0"
      },
      "engines": {
        "node": ">=10",
        "npm": ">=6"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.8.31",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.8.31.tgz",
      "integrity": "sha512-a28v2eWrrRWPpJSzxc+mKwm0ZtVx/G8SepdQZDArnXYU/XS+IF6mp8aB/4E+hH1tyGCoDo3KlUCdlSxGDsRkAw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.28.0",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.0.tgz",
      "integrity": "sha512-tbydkR/CxfMwelN0vwdP/pLkDwyAASZ+VfWm4EOwlB6SWhx1sYnWLqo8N5j0rAzPfzfRaxt0mM/4wPU/Su84RQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "baseline-browser-mapping": "^2.8.25",
        "caniuse-lite": "^1.0.30001754",
        "electron-to-chromium": "^1.5.249",
        "node-releases": "^2.0.27",
        "update-browserslist-db": "^1.1.4"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/camelcase-css": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/camelcase-css/-/camelcase-css-2.0.1.tgz",
      "integrity": "sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001757",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001757.tgz",
      "integrity": "sha512-r0nnL/I28Zi/yjk1el6ilj27tKcdjLsNqAOZr0yVjWPrSQyHgKI2INaEWw21bAQSv2LXRt1XuCS/GomNpWOxsQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/clsx": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/clsx/-/clsx-2.1.1.tgz",
      "integrity": "sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/commander": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/commander/-/commander-4.1.1.tgz",
      "integrity": "sha512-NOKm8xhkzAjzFx8B2v5OAHT+u5pRQc2UCa2Vq9jYL/31o2wi9mxBA7LIFs3sV5VSC49z6pEhfbMULvShKj26WA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cookie": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-1.0.2.tgz",
      "integrity": "sha512-9Kr/j4O16ISv8zBBhJoi4bXOYNTkFLOqSL3UDB0njXxCXNezjeyVrJyGOWtgfs/q2km1gwBcfH8q1yEGoMYunA==",
      "license": "MIT",
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/cosmiconfig": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/cosmiconfig/-/cosmiconfig-7.1.0.tgz",
      "integrity": "sha512-AdmX6xUzdNASswsFtmwSt7Vj8po9IuqXm0UXz7QKPuEUmPB4XyjGfaAr2PSuELMwkRMVH1EpIkX5bTZGRB3eCA==",
      "license": "MIT",
      "dependencies": {
        "@types/parse-json": "^4.0.0",
        "import-fresh": "^3.2.1",
        "parse-json": "^5.0.0",
        "path-type": "^4.0.0",
        "yaml": "^1.10.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/cosmiconfig/node_modules/yaml": {
      "version": "1.10.2",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-1.10.2.tgz",
      "integrity": "sha512-r3vXyErRCYJ7wg28yvBY5VSoAF8ZvlcW9/BwUzEtUsjvX/DKs24dIkuwjtuprwJJHsbyUbLApepYTR1BN4uHrg==",
      "license": "ISC",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/cssesc": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssesc/-/cssesc-3.0.0.tgz",
      "integrity": "sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "cssesc": "bin/cssesc"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/csstype": {
      "version": "3.2.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.2.3.tgz",
      "integrity": "sha512-z1HGKcYy2xA8AGQfwrn0PAy+PB7X/GSj3UVJW9qKyn43xWa+gl5nXmU4qqLMRzWVLFC8KusUX8T/0kCiOYpAIQ==",
      "license": "MIT"
    },
    "node_modules/date-fns": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/date-fns/-/date-fns-4.1.0.tgz",
      "integrity": "sha512-Ukq0owbQXxa/U3EGtsdVBkR1w7KOQ5gIBqdH2hkvknzZPYvBxb/aa6E8L7tmjFtkwZBu3UXBbjIgPo/Ez4xaNg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/kossnocorp"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/detect-libc": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.1.2.tgz",
      "integrity": "sha512-Btj2BOOO83o3WyH59e8MgXsxEQVcarkUOpEYrubB0urwnN10yQ364rsiByU11nZlqWYZm05i/of7io4mzihBtQ==",
      "dev": true,
      "license": "Apache-2.0",
      "optional": true,
      "peer": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/detect-node-es": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/detect-node-es/-/detect-node-es-1.1.0.tgz",
      "integrity": "sha512-ypdmJU/TbBby2Dxibuv7ZLW3Bs1QEmM7nHjEANfohJLvE0XVujisn1qPJcZxg+qDucsr+bP6fLD1rPS3AhJ7EQ==",
      "license": "MIT"
    },
    "node_modules/didyoumean": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/didyoumean/-/didyoumean-1.2.2.tgz",
      "integrity": "sha512-gxtyfqMg7GKyhQmb056K7M3xszy/myH8w+B4RT+QXBQsvAOdc3XymqDDPHx1BgPgsdAA5SIifona89YtRATDzw==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/dlv": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.1.3.tgz",
      "integrity": "sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/dom-helpers": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/dom-helpers/-/dom-helpers-5.2.1.tgz",
      "integrity": "sha512-nRCa7CK3VTrM2NmGkIy4cbK7IZlgBE/PYMn55rrXefr5xXDP0LdtfPnblFDoVdcAfslJ7or6iqAUnx0CCGIWQA==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.8.7",
        "csstype": "^3.0.2"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.259",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.259.tgz",
      "integrity": "sha512-I+oLXgpEJzD6Cwuwt1gYjxsDmu/S/Kd41mmLA3O+/uH2pFRO/DvOjUyGozL8j3KeLV6WyZ7ssPwELMsXCcsJAQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/error-ex": {
      "version": "1.3.4",
      "resolved": "https://registry.npmjs.org/error-ex/-/error-ex-1.3.4.tgz",
      "integrity": "sha512-sqQamAnR14VgCr1A618A3sGrygcpK+HEbenA/HiEAkkUwcZIIB/tgWqHFxWgOyDh4nB4JCRimh79dR5Ywc9MDQ==",
      "license": "MIT",
      "dependencies": {
        "is-arrayish": "^0.2.1"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.12.tgz",
      "integrity": "sha512-bbPBYYrtZbkt6Os6FiTLCTFxvq4tt3JKall1vRwshA3fdVztsLAatFaZobhkBC8/BrPetoa0oksYoKXoG4ryJg==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.12",
        "@esbuild/android-arm": "0.25.12",
        "@esbuild/android-arm64": "0.25.12",
        "@esbuild/android-x64": "0.25.12",
        "@esbuild/darwin-arm64": "0.25.12",
        "@esbuild/darwin-x64": "0.25.12",
        "@esbuild/freebsd-arm64": "0.25.12",
        "@esbuild/freebsd-x64": "0.25.12",
        "@esbuild/linux-arm": "0.25.12",
        "@esbuild/linux-arm64": "0.25.12",
        "@esbuild/linux-ia32": "0.25.12",
        "@esbuild/linux-loong64": "0.25.12",
        "@esbuild/linux-mips64el": "0.25.12",
        "@esbuild/linux-ppc64": "0.25.12",
        "@esbuild/linux-riscv64": "0.25.12",
        "@esbuild/linux-s390x": "0.25.12",
        "@esbuild/linux-x64": "0.25.12",
        "@esbuild/netbsd-arm64": "0.25.12",
        "@esbuild/netbsd-x64": "0.25.12",
        "@esbuild/openbsd-arm64": "0.25.12",
        "@esbuild/openbsd-x64": "0.25.12",
        "@esbuild/openharmony-arm64": "0.25.12",
        "@esbuild/sunos-x64": "0.25.12",
        "@esbuild/win32-arm64": "0.25.12",
        "@esbuild/win32-ia32": "0.25.12",
        "@esbuild/win32-x64": "0.25.12"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.39.1.tgz",
      "integrity": "sha512-BhHmn2yNOFA9H9JmmIVKJmd288g9hrVRDkdoIgRCRuSySRUHH7r/DI6aAXW9T1WwUuY3DFgrcaqB+deURBLR5g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.8.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.21.1",
        "@eslint/config-helpers": "^0.4.2",
        "@eslint/core": "^0.17.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.39.1",
        "@eslint/plugin-kit": "^0.4.1",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-7.0.1.tgz",
      "integrity": "sha512-O0d0m04evaNzEPoSW+59Mezf8Qt0InfgGIBJnpC0h3NH/WjUAR7BIKUfysC6todmtiZ/A0oUVS8Gce0WhBrHsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.24.4",
        "@babel/parser": "^7.24.4",
        "hermes-parser": "^0.25.1",
        "zod": "^3.25.0 || ^4.0.0",
        "zod-validation-error": "^3.5.0 || ^4.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-plugin-react-refresh": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-refresh/-/eslint-plugin-react-refresh-0.4.24.tgz",
      "integrity": "sha512-nLHIW7TEq3aLrEYWpVaJ1dRgFR+wLDPN8e8FpYAql/bMV2oBEfC37K0gLEGgv9fy66juNShSMV8OkTqzltcG/w==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "eslint": ">=8.40"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-root": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/find-root/-/find-root-1.1.0.tgz",
      "integrity": "sha512-NKfW6bec6GfKc0SGx1e07QZY9PE99u0Bft/0rzSD5k3sO/vwkVUpDUKVm5Gpp5Ue3YfShPFTX2070tDs5kB9Ng==",
      "license": "MIT"
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.5.tgz",
      "integrity": "sha512-8RipRLol37bNs2bhoV67fiTEvdTrbMUYcFTiy3+wuuOnUog2QBHCZWXDRijWQfAkhBj2Uf5UnVaiWwA5vdd82w==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fraction.js": {
      "version": "5.3.4",
      "resolved": "https://registry.npmjs.org/fraction.js/-/fraction.js-5.3.4.tgz",
      "integrity": "sha512-1X1NTtiJphryn/uLQz3whtY6jK3fTqoE3ohKs0tT+Ujr1W59oopxmoEh7Lu5p6vBaPbgoM0bzveAW4Qi5RyWDQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "*"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/rawify"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-nonce": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-nonce/-/get-nonce-1.0.1.tgz",
      "integrity": "sha512-FJhYRoDaiatfEkUK8HKlicmu/3SGFD51q3itKDGoSTysQJBnfOcxU5GxnhE1E6soB76MbT0MBtnKJuXyAx+96Q==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "16.5.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-16.5.0.tgz",
      "integrity": "sha512-c/c15i26VrJ4IRt5Z89DnIzCGDn9EcebibhAOjw5ibqEHsE1wLUgkPn9RDmNcUKyU87GeaL633nyJ+pplFR2ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/goober": {
      "version": "2.1.18",
      "resolved": "https://registry.npmjs.org/goober/-/goober-2.1.18.tgz",
      "integrity": "sha512-2vFqsaDVIT9Gz7N6kAL++pLpp41l3PfDuusHcjnGLfR6+huZkl6ziX+zgVC3ZxpqWhzH6pyDdGrCeDhMIvwaxw==",
      "license": "MIT",
      "peerDependencies": {
        "csstype": "^3.0.10"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hermes-estree": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-estree/-/hermes-estree-0.25.1.tgz",
      "integrity": "sha512-0wUoCcLp+5Ev5pDW2OriHC2MJCbwLwuRx+gAqMTOkGKJJiBCLjtrvy4PWUGn6MIVefecRpzoOZ/UV6iGdOr+Cw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/hermes-parser": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-parser/-/hermes-parser-0.25.1.tgz",
      "integrity": "sha512-6pEjquH3rqaI6cYAXYPcz9MS4rY6R4ngRgrgfDshRptUZIc3lw0MCIJIGDj9++mfySOuPTHB4nrSW99BCvOPIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hermes-estree": "0.25.1"
      }
    },
    "node_modules/hoist-non-react-statics": {
      "version": "3.3.2",
      "resolved": "https://registry.npmjs.org/hoist-non-react-statics/-/hoist-non-react-statics-3.3.2.tgz",
      "integrity": "sha512-/gGivxi8JPKWNm/W0jSmzcMPpfpPLc3dY/6GxhX2hQ9iGj3aDfklV4ET7NjKpSinLpJ5vafa9iiGIEZg10SfBw==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "react-is": "^16.7.0"
      }
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/is-arrayish": {
      "version": "0.2.1",
      "resolved": "https://registry.npmjs.org/is-arrayish/-/is-arrayish-0.2.1.tgz",
      "integrity": "sha512-zz06S8t0ozoDXMG+ube26zeCTNXcKIPJZJi8hBrF4idCLms4CG9QtK7qBl1boi5ODzFpjswb5JPmHCbMpjaYzg==",
      "license": "MIT"
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/jiti": {
      "version": "2.6.1",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-2.6.1.tgz",
      "integrity": "sha512-ekilCSN1jwRvIbgeg/57YFh8qQDNbwDb9xT/qu2DAHbFFZUicIl4ygVaAvzveMhMVr3LnpSKTNnwt8PoOfmKhQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "peer": true,
      "bin": {
        "jiti": "lib/jiti-cli.mjs"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.1.tgz",
      "integrity": "sha512-qQKT4zQxXl8lLwBtHMWwaTcGfFOZviOJet3Oy/xmGk2gZH677CJM9EvtfdSkgWcATZhj/55JZ0rmy3myCT5lsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-parse-even-better-errors": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/json-parse-even-better-errors/-/json-parse-even-better-errors-2.3.1.tgz",
      "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lightningcss": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss/-/lightningcss-1.30.2.tgz",
      "integrity": "sha512-utfs7Pr5uJyyvDETitgsaqSyjCb2qNRAtuqUeWIAKztsOYdcACf2KtARYXg2pSvhkt+9NfoaNY7fxjl6nuMjIQ==",
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "peer": true,
      "dependencies": {
        "detect-libc": "^2.0.3"
      },
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      },
      "optionalDependencies": {
        "lightningcss-android-arm64": "1.30.2",
        "lightningcss-darwin-arm64": "1.30.2",
        "lightningcss-darwin-x64": "1.30.2",
        "lightningcss-freebsd-x64": "1.30.2",
        "lightningcss-linux-arm-gnueabihf": "1.30.2",
        "lightningcss-linux-arm64-gnu": "1.30.2",
        "lightningcss-linux-arm64-musl": "1.30.2",
        "lightningcss-linux-x64-gnu": "1.30.2",
        "lightningcss-linux-x64-musl": "1.30.2",
        "lightningcss-win32-arm64-msvc": "1.30.2",
        "lightningcss-win32-x64-msvc": "1.30.2"
      }
    },
    "node_modules/lightningcss-android-arm64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-android-arm64/-/lightningcss-android-arm64-1.30.2.tgz",
      "integrity": "sha512-BH9sEdOCahSgmkVhBLeU7Hc9DWeZ1Eb6wNS6Da8igvUwAe0sqROHddIlvU06q3WyXVEOYDZ6ykBZQnjTbmo4+A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "android"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-darwin-arm64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-darwin-arm64/-/lightningcss-darwin-arm64-1.30.2.tgz",
      "integrity": "sha512-ylTcDJBN3Hp21TdhRT5zBOIi73P6/W0qwvlFEk22fkdXchtNTOU4Qc37SkzV+EKYxLouZ6M4LG9NfZ1qkhhBWA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-darwin-x64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-darwin-x64/-/lightningcss-darwin-x64-1.30.2.tgz",
      "integrity": "sha512-oBZgKchomuDYxr7ilwLcyms6BCyLn0z8J0+ZZmfpjwg9fRVZIR5/GMXd7r9RH94iDhld3UmSjBM6nXWM2TfZTQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-freebsd-x64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-freebsd-x64/-/lightningcss-freebsd-x64-1.30.2.tgz",
      "integrity": "sha512-c2bH6xTrf4BDpK8MoGG4Bd6zAMZDAXS569UxCAGcA7IKbHNMlhGQ89eRmvpIUGfKWNVdbhSbkQaWhEoMGmGslA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm-gnueabihf": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm-gnueabihf/-/lightningcss-linux-arm-gnueabihf-1.30.2.tgz",
      "integrity": "sha512-eVdpxh4wYcm0PofJIZVuYuLiqBIakQ9uFZmipf6LF/HRj5Bgm0eb3qL/mr1smyXIS1twwOxNWndd8z0E374hiA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm64-gnu": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm64-gnu/-/lightningcss-linux-arm64-gnu-1.30.2.tgz",
      "integrity": "sha512-UK65WJAbwIJbiBFXpxrbTNArtfuznvxAJw4Q2ZGlU8kPeDIWEX1dg3rn2veBVUylA2Ezg89ktszWbaQnxD/e3A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm64-musl": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm64-musl/-/lightningcss-linux-arm64-musl-1.30.2.tgz",
      "integrity": "sha512-5Vh9dGeblpTxWHpOx8iauV02popZDsCYMPIgiuw97OJ5uaDsL86cnqSFs5LZkG3ghHoX5isLgWzMs+eD1YzrnA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-x64-gnu": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-x64-gnu/-/lightningcss-linux-x64-gnu-1.30.2.tgz",
      "integrity": "sha512-Cfd46gdmj1vQ+lR6VRTTadNHu6ALuw2pKR9lYq4FnhvgBc4zWY1EtZcAc6EffShbb1MFrIPfLDXD6Xprbnni4w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-x64-musl": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-x64-musl/-/lightningcss-linux-x64-musl-1.30.2.tgz",
      "integrity": "sha512-XJaLUUFXb6/QG2lGIW6aIk6jKdtjtcffUT0NKvIqhSBY3hh9Ch+1LCeH80dR9q9LBjG3ewbDjnumefsLsP6aiA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-win32-arm64-msvc": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-win32-arm64-msvc/-/lightningcss-win32-arm64-msvc-1.30.2.tgz",
      "integrity": "sha512-FZn+vaj7zLv//D/192WFFVA0RgHawIcHqLX9xuWiQt7P0PtdFEVaxgF9rjM/IRYHQXNnk61/H/gb2Ei+kUQ4xQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "win32"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-win32-x64-msvc": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-win32-x64-msvc/-/lightningcss-win32-x64-msvc-1.30.2.tgz",
      "integrity": "sha512-5g1yc73p+iAkid5phb4oVFMB45417DkRevRbt/El/gKXJk4jid+vPFF/AXbxn05Aky8PapwzZrdJShv5C0avjw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "win32"
      ],
      "peer": true,
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lilconfig": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-3.1.3.tgz",
      "integrity": "sha512-/vlFKAoH5Cgt3Ie+JLhRbwOsCQePABiU3tJ1egGvyQ+33R/vcwM2Zl2QR/LzjsBeItPt3oSVXapn+m4nQDvpzw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/antonk52"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "license": "MIT"
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/lucide-react": {
      "version": "0.554.0",
      "resolved": "https://registry.npmjs.org/lucide-react/-/lucide-react-0.554.0.tgz",
      "integrity": "sha512-St+z29uthEJVx0Is7ellNkgTEhaeSoA42I7JjOCBCrc5X6LYMGSv0P/2uS5HDLTExP5tpiqRD2PyUEOS6s9UXA==",
      "license": "ISC",
      "peerDependencies": {
        "react": "^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/mz": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/mz/-/mz-2.7.0.tgz",
      "integrity": "sha512-z81GNO7nnYMEhrGh9LeymoE4+Yr0Wn5McHIZMK5cfQCl+NDX08sCZgUc9/6MHni9IWuFLm1Z3HTCXu2z9fN62Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0",
        "object-assign": "^4.0.1",
        "thenify-all": "^1.0.0"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/normalize-range": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/normalize-range/-/normalize-range-0.1.2.tgz",
      "integrity": "sha512-bdok/XvKII3nUpklnV6P2hxtMNrCboOjAcyBuQnWEhO665FwrSNRxU+AqpsyvO6LgGYPspN+lu5CLtw4jPRKNA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-hash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-3.0.0.tgz",
      "integrity": "sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parse-json": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/parse-json/-/parse-json-5.2.0.tgz",
      "integrity": "sha512-ayCKvm/phCGxOkYRSCM82iDwct8/EonSEgCSxWxD7ve6jHggsFl4fZVQBPRNgQoKiuV/odhFrGzQXZwbifC8Rg==",
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.0.0",
        "error-ex": "^1.3.1",
        "json-parse-even-better-errors": "^2.3.0",
        "lines-and-columns": "^1.1.6"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "license": "MIT"
    },
    "node_modules/path-type": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
      "integrity": "sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pify": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/pify/-/pify-2.3.0.tgz",
      "integrity": "sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/postcss-import": {
      "version": "15.1.0",
      "resolved": "https://registry.npmjs.org/postcss-import/-/postcss-import-15.1.0.tgz",
      "integrity": "sha512-hpr+J05B2FVYUAXHeK1YyI267J/dDDhMU6B6civm8hSY1jYJnBXxzKDKDswzJmtLHryrjhnDjqqp/49t8FALew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "postcss-value-parser": "^4.0.0",
        "read-cache": "^1.0.0",
        "resolve": "^1.1.7"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "postcss": "^8.0.0"
      }
    },
    "node_modules/postcss-js": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/postcss-js/-/postcss-js-4.1.0.tgz",
      "integrity": "sha512-oIAOTqgIo7q2EOwbhb8UalYePMvYoIeRY2YKntdpFQXNosSu3vLrniGgmH9OKs/qAkfoj5oB3le/7mINW1LCfw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "camelcase-css": "^2.0.1"
      },
      "engines": {
        "node": "^12 || ^14 || >= 16"
      },
      "peerDependencies": {
        "postcss": "^8.4.21"
      }
    },
    "node_modules/postcss-load-config": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/postcss-load-config/-/postcss-load-config-6.0.1.tgz",
      "integrity": "sha512-oPtTM4oerL+UXmx+93ytZVN82RrlY/wPUV8IeDxFrzIjXOLF1pN+EmKPLbubvKHT2HC20xXsCAH2Z+CKV6Oz/g==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "lilconfig": "^3.1.1"
      },
      "engines": {
        "node": ">= 18"
      },
      "peerDependencies": {
        "jiti": ">=1.21.0",
        "postcss": ">=8.0.9",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        },
        "postcss": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/postcss-nested": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/postcss-nested/-/postcss-nested-6.2.0.tgz",
      "integrity": "sha512-HQbt28KulC5AJzG+cZtj9kvKB93CFCdLvog1WFLf1D+xmMvPGlBstkpTEZfK5+AN9hfJocyBFCNiqyS48bpgzQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "postcss-selector-parser": "^6.1.1"
      },
      "engines": {
        "node": ">=12.0"
      },
      "peerDependencies": {
        "postcss": "^8.2.14"
      }
    },
    "node_modules/postcss-selector-parser": {
      "version": "6.1.2",
      "resolved": "https://registry.npmjs.org/postcss-selector-parser/-/postcss-selector-parser-6.1.2.tgz",
      "integrity": "sha512-Q8qQfPiZ+THO/3ZrOrO0cJJKfpYCagtMUkXbnEfmgUjwXg6z/WBeOyS9APBBPCTSiDV+s4SwQGu8yFsiMRIudg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cssesc": "^3.0.0",
        "util-deprecate": "^1.0.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postcss-value-parser": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/postcss-value-parser/-/postcss-value-parser-4.2.0.tgz",
      "integrity": "sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/prop-types": {
      "version": "15.8.1",
      "resolved": "https://registry.npmjs.org/prop-types/-/prop-types-15.8.1.tgz",
      "integrity": "sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.4.0",
        "object-assign": "^4.1.1",
        "react-is": "^16.13.1"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "19.2.0",
      "resolved": "https://registry.npmjs.org/react/-/react-19.2.0.tgz",
      "integrity": "sha512-tmbWg6W31tQLeB5cdIBOicJDJRR2KzXsV7uSK9iNfLWQ5bIZfxuPEHp7M8wiHyHnn0DD1i7w3Zmin0FtkrwoCQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "19.2.0",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-19.2.0.tgz",
      "integrity": "sha512-UlbRu4cAiGaIewkPyiRGJk0imDN2T3JjieT6spoL2UeSf5od4n5LB/mQ4ejmxhCFT1tYe8IvaFulzynWovsEFQ==",
      "license": "MIT",
      "dependencies": {
        "scheduler": "^0.27.0"
      },
      "peerDependencies": {
        "react": "^19.2.0"
      }
    },
    "node_modules/react-hot-toast": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/react-hot-toast/-/react-hot-toast-2.6.0.tgz",
      "integrity": "sha512-bH+2EBMZ4sdyou/DPrfgIouFpcRLCJ+HoCA32UoAYHn6T3Ur5yfcDCeSr5mwldl6pFOsiocmrXMuoCJ1vV8bWg==",
      "license": "MIT",
      "dependencies": {
        "csstype": "^3.1.3",
        "goober": "^2.1.16"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "react": ">=16",
        "react-dom": ">=16"
      }
    },
    "node_modules/react-is": {
      "version": "16.13.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-16.13.1.tgz",
      "integrity": "sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==",
      "license": "MIT"
    },
    "node_modules/react-number-format": {
      "version": "5.4.4",
      "resolved": "https://registry.npmjs.org/react-number-format/-/react-number-format-5.4.4.tgz",
      "integrity": "sha512-wOmoNZoOpvMminhifQYiYSTCLUDOiUbBunrMrMjA+dV52sY+vck1S4UhR6PkgnoCquvvMSeJjErXZ4qSaWCliA==",
      "license": "MIT",
      "peerDependencies": {
        "react": "^0.14 || ^15.0.0 || ^16.0.0 || ^17.0.0 || ^18.0.0 || ^19.0.0",
        "react-dom": "^0.14 || ^15.0.0 || ^16.0.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/react-refresh": {
      "version": "0.18.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.18.0.tgz",
      "integrity": "sha512-QgT5//D3jfjJb6Gsjxv0Slpj23ip+HtOpnNgnb2S5zU3CB26G/IDPGoy4RJB42wzFE46DRsstbW6tKHoKbhAxw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-remove-scroll": {
      "version": "2.7.1",
      "resolved": "https://registry.npmjs.org/react-remove-scroll/-/react-remove-scroll-2.7.1.tgz",
      "integrity": "sha512-HpMh8+oahmIdOuS5aFKKY6Pyog+FNaZV/XyJOq7b4YFwsFHe5yYfdbIalI4k3vU2nSDql7YskmUseHsRrJqIPA==",
      "license": "MIT",
      "dependencies": {
        "react-remove-scroll-bar": "^2.3.7",
        "react-style-singleton": "^2.2.3",
        "tslib": "^2.1.0",
        "use-callback-ref": "^1.3.3",
        "use-sidecar": "^1.1.3"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/react-remove-scroll-bar": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/react-remove-scroll-bar/-/react-remove-scroll-bar-2.3.8.tgz",
      "integrity": "sha512-9r+yi9+mgU33AKcj6IbT9oRCO78WriSj6t/cF8DWBZJ9aOGPOTEDvdUDz1FwKim7QXWwmHqtdHnRJfhAxEG46Q==",
      "license": "MIT",
      "dependencies": {
        "react-style-singleton": "^2.2.2",
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/react-router": {
      "version": "7.9.6",
      "resolved": "https://registry.npmjs.org/react-router/-/react-router-7.9.6.tgz",
      "integrity": "sha512-Y1tUp8clYRXpfPITyuifmSoE2vncSME18uVLgaqyxh9H35JWpIfzHo+9y3Fzh5odk/jxPW29IgLgzcdwxGqyNA==",
      "license": "MIT",
      "dependencies": {
        "cookie": "^1.0.1",
        "set-cookie-parser": "^2.6.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "react": ">=18",
        "react-dom": ">=18"
      },
      "peerDependenciesMeta": {
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/react-router-dom": {
      "version": "7.9.6",
      "resolved": "https://registry.npmjs.org/react-router-dom/-/react-router-dom-7.9.6.tgz",
      "integrity": "sha512-2MkC2XSXq6HjGcihnx1s0DBWQETI4mlis4Ux7YTLvP67xnGxCvq+BcCQSO81qQHVUTM1V53tl4iVVaY5sReCOA==",
      "license": "MIT",
      "dependencies": {
        "react-router": "7.9.6"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "react": ">=18",
        "react-dom": ">=18"
      }
    },
    "node_modules/react-style-singleton": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/react-style-singleton/-/react-style-singleton-2.2.3.tgz",
      "integrity": "sha512-b6jSvxvVnyptAiLjbkWLE/lOnR4lfTtDAl+eUC7RZy+QQWc6wRzIV2CE6xBuMmDxc2qIihtDCZD5NPOFl7fRBQ==",
      "license": "MIT",
      "dependencies": {
        "get-nonce": "^1.0.0",
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/react-textarea-autosize": {
      "version": "8.5.9",
      "resolved": "https://registry.npmjs.org/react-textarea-autosize/-/react-textarea-autosize-8.5.9.tgz",
      "integrity": "sha512-U1DGlIQN5AwgjTyOEnI1oCcMuEr1pv1qOtklB2l4nyMGbHzWrI0eFsYK0zos2YWqAolJyG0IWJaqWmWj5ETh0A==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.20.13",
        "use-composed-ref": "^1.3.0",
        "use-latest": "^1.2.1"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/react-transition-group": {
      "version": "4.4.5",
      "resolved": "https://registry.npmjs.org/react-transition-group/-/react-transition-group-4.4.5.tgz",
      "integrity": "sha512-pZcd1MCJoiKiBR2NRxeCRg13uCXbydPnmB4EOeRrY7480qNWO8IIgQG6zlDkm6uRMsURXPuKq0GWtiM59a5Q6g==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/runtime": "^7.5.5",
        "dom-helpers": "^5.0.1",
        "loose-envify": "^1.4.0",
        "prop-types": "^15.6.2"
      },
      "peerDependencies": {
        "react": ">=16.6.0",
        "react-dom": ">=16.6.0"
      }
    },
    "node_modules/read-cache": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/read-cache/-/read-cache-1.0.0.tgz",
      "integrity": "sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pify": "^2.3.0"
      }
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.11",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.11.tgz",
      "integrity": "sha512-RfqAvLnMl313r7c9oclB1HhUEAezcpLjz95wFH4LVuhk9JF/r22qmVP9AMmOU4vMX7Q8pN8jwNg/CSpdFnMjTQ==",
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.1",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rollup": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.53.3.tgz",
      "integrity": "sha512-w8GmOxZfBmKknvdXU1sdM9NHcoQejwF/4mNgj2JuEEdRaHwwF12K7e9eXn1nLZ07ad+du76mkVsyeb2rKGllsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.53.3",
        "@rollup/rollup-android-arm64": "4.53.3",
        "@rollup/rollup-darwin-arm64": "4.53.3",
        "@rollup/rollup-darwin-x64": "4.53.3",
        "@rollup/rollup-freebsd-arm64": "4.53.3",
        "@rollup/rollup-freebsd-x64": "4.53.3",
        "@rollup/rollup-linux-arm-gnueabihf": "4.53.3",
        "@rollup/rollup-linux-arm-musleabihf": "4.53.3",
        "@rollup/rollup-linux-arm64-gnu": "4.53.3",
        "@rollup/rollup-linux-arm64-musl": "4.53.3",
        "@rollup/rollup-linux-loong64-gnu": "4.53.3",
        "@rollup/rollup-linux-ppc64-gnu": "4.53.3",
        "@rollup/rollup-linux-riscv64-gnu": "4.53.3",
        "@rollup/rollup-linux-riscv64-musl": "4.53.3",
        "@rollup/rollup-linux-s390x-gnu": "4.53.3",
        "@rollup/rollup-linux-x64-gnu": "4.53.3",
        "@rollup/rollup-linux-x64-musl": "4.53.3",
        "@rollup/rollup-openharmony-arm64": "4.53.3",
        "@rollup/rollup-win32-arm64-msvc": "4.53.3",
        "@rollup/rollup-win32-ia32-msvc": "4.53.3",
        "@rollup/rollup-win32-x64-gnu": "4.53.3",
        "@rollup/rollup-win32-x64-msvc": "4.53.3",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/scheduler": {
      "version": "0.27.0",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.27.0.tgz",
      "integrity": "sha512-eNv+WrVbKu1f3vbYJT/xtiF5syA5HPIMtf9IgY/nKg0sWqzAUEvqY/xm7OcZc/qafLx/iO9FgOmeSAp4v5ti/Q==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/set-cookie-parser": {
      "version": "2.7.2",
      "resolved": "https://registry.npmjs.org/set-cookie-parser/-/set-cookie-parser-2.7.2.tgz",
      "integrity": "sha512-oeM1lpU/UvhTxw+g3cIfxXHyJRc/uidd3yK1P242gzHds0udQBYzs3y8j4gCCW+ZJ7ad0yctld8RYO+bdurlvw==",
      "license": "MIT"
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/source-map": {
      "version": "0.5.7",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.5.7.tgz",
      "integrity": "sha512-LbrmJOMUSdEVxIKvdcJzQC+nQhe8FUZQTXQy6+I75skNgn3OoQ0DZA8YnFa7gp8tqtL3KPf1kmo0R5DoApeSGQ==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/stylis": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/stylis/-/stylis-4.2.0.tgz",
      "integrity": "sha512-Orov6g6BB1sDfYgzWfTHDOxamtX1bE/zo104Dh9e6fqJ3PooipYyfJ0pUmrZO2wAvO8YbEyeFrkV91XTsGMSrw==",
      "license": "MIT"
    },
    "node_modules/sucrase": {
      "version": "3.35.1",
      "resolved": "https://registry.npmjs.org/sucrase/-/sucrase-3.35.1.tgz",
      "integrity": "sha512-DhuTmvZWux4H1UOnWMB3sk0sbaCVOoQZjv8u1rDoTV0HTdGem9hkAZtl4JZy8P2z4Bg0nT+YMeOFyVr4zcG5Tw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.2",
        "commander": "^4.0.0",
        "lines-and-columns": "^1.1.6",
        "mz": "^2.7.0",
        "pirates": "^4.0.1",
        "tinyglobby": "^0.2.11",
        "ts-interface-checker": "^0.1.9"
      },
      "bin": {
        "sucrase": "bin/sucrase",
        "sucrase-node": "bin/sucrase-node"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tabbable": {
      "version": "6.3.0",
      "resolved": "https://registry.npmjs.org/tabbable/-/tabbable-6.3.0.tgz",
      "integrity": "sha512-EIHvdY5bPLuWForiR/AN2Bxngzpuwn1is4asboytXtpTgsArc+WmSJKVLlhdh71u7jFcryDqB2A8lQvj78MkyQ==",
      "license": "MIT"
    },
    "node_modules/tailwindcss": {
      "version": "3.4.18",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-3.4.18.tgz",
      "integrity": "sha512-6A2rnmW5xZMdw11LYjhcI5846rt9pbLSabY5XPxo+XWdxwZaFEn47Go4NzFiHu9sNNmr/kXivP1vStfvMaK1GQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@alloc/quick-lru": "^5.2.0",
        "arg": "^5.0.2",
        "chokidar": "^3.6.0",
        "didyoumean": "^1.2.2",
        "dlv": "^1.1.3",
        "fast-glob": "^3.3.2",
        "glob-parent": "^6.0.2",
        "is-glob": "^4.0.3",
        "jiti": "^1.21.7",
        "lilconfig": "^3.1.3",
        "micromatch": "^4.0.8",
        "normalize-path": "^3.0.0",
        "object-hash": "^3.0.0",
        "picocolors": "^1.1.1",
        "postcss": "^8.4.47",
        "postcss-import": "^15.1.0",
        "postcss-js": "^4.0.1",
        "postcss-load-config": "^4.0.2 || ^5.0 || ^6.0",
        "postcss-nested": "^6.2.0",
        "postcss-selector-parser": "^6.1.2",
        "resolve": "^1.22.8",
        "sucrase": "^3.35.0"
      },
      "bin": {
        "tailwind": "lib/cli.js",
        "tailwindcss": "lib/cli.js"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tailwindcss/node_modules/jiti": {
      "version": "1.21.7",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-1.21.7.tgz",
      "integrity": "sha512-/imKNG4EbWNrVjoNC/1H5/9GFy+tqjGBHCaSsN+P2RnPqjsLmv6UD3Ej+Kj8nBWaRAwyk7kK5ZUc+OEatnTR3A==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jiti": "bin/jiti.js"
      }
    },
    "node_modules/thenify": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/thenify/-/thenify-3.3.1.tgz",
      "integrity": "sha512-RVZSIV5IG10Hk3enotrhvz0T9em6cyHBLkH/YAZuKqd8hRkKhSfCGIcP2KUY0EPxndzANBmNllzWPwak+bheSw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0"
      }
    },
    "node_modules/thenify-all": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/thenify-all/-/thenify-all-1.6.0.tgz",
      "integrity": "sha512-RNxQH/qI8/t3thXJDwcstUO4zeqo64+Uy/+sNVRBx4Xn2OX+OZ9oP+iJnNFqplFra2ZUVeKCSa2oVWi3T4uVmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "thenify": ">= 3.1.0 < 4"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tinyglobby/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/tinyglobby/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-2.1.0.tgz",
      "integrity": "sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.12"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4"
      }
    },
    "node_modules/ts-interface-checker": {
      "version": "0.1.13",
      "resolved": "https://registry.npmjs.org/ts-interface-checker/-/ts-interface-checker-0.1.13.tgz",
      "integrity": "sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-fest": {
      "version": "4.41.0",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-4.41.0.tgz",
      "integrity": "sha512-TeTSQ6H5YHvpqVwBRcnLDCBnDOHWYu7IvGbHT6N8AOymcr9PJGjc1GTtiWZTYg0NCgYwvnYWEkVChQAr9bjfwA==",
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=16"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/typescript": {
      "version": "5.9.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
      "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/typescript-eslint": {
      "version": "8.47.0",
      "resolved": "https://registry.npmjs.org/typescript-eslint/-/typescript-eslint-8.47.0.tgz",
      "integrity": "sha512-Lwe8i2XQ3WoMjua/r1PHrCTpkubPYJCAfOurtn+mtTzqB6jNd+14n9UN1bJ4s3F49x9ixAm0FLflB/JzQ57M8Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/eslint-plugin": "8.47.0",
        "@typescript-eslint/parser": "8.47.0",
        "@typescript-eslint/typescript-estree": "8.47.0",
        "@typescript-eslint/utils": "8.47.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/undici-types": {
      "version": "7.16.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-7.16.0.tgz",
      "integrity": "sha512-Zz+aZWSj8LE6zoxD+xrjh4VfkIG8Ya6LvYkZqtUQGJPZjYl53ypCaUwWqo7eI0x66KBGeRo+mlBEkMSeSZ38Nw==",
      "license": "MIT"
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.4.tgz",
      "integrity": "sha512-q0SPT4xyU84saUX+tomz1WLkxUbuaJnR1xWt17M7fJtEJigJeWUNGUqrauFXsHnqev9y9JTRGwk13tFBuKby4A==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/use-callback-ref": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/use-callback-ref/-/use-callback-ref-1.3.3.tgz",
      "integrity": "sha512-jQL3lRnocaFtu3V00JToYz/4QkNWswxijDaCVNZRiRTO3HQDLsdu1ZtmIUvV4yPp+rvWm5j0y0TG/S61cuijTg==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/use-composed-ref": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/use-composed-ref/-/use-composed-ref-1.4.0.tgz",
      "integrity": "sha512-djviaxuOOh7wkj0paeO1Q/4wMZ8Zrnag5H6yBvzN7AKKe8beOaED9SF5/ByLqsku8NP4zQqsvM2u3ew/tJK8/w==",
      "license": "MIT",
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/use-isomorphic-layout-effect": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/use-isomorphic-layout-effect/-/use-isomorphic-layout-effect-1.2.1.tgz",
      "integrity": "sha512-tpZZ+EX0gaghDAiFR37hj5MgY6ZN55kLiPkJsKxBMZ6GZdOSPJXiOzPM984oPYZ5AnehYx5WQp1+ME8I/P/pRA==",
      "license": "MIT",
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/use-latest": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/use-latest/-/use-latest-1.3.0.tgz",
      "integrity": "sha512-mhg3xdm9NaM8q+gLT8KryJPnRFOz1/5XPBhmDEVZK1webPzDjrPk7f/mbpeLqTgB9msytYWANxgALOCJKnLvcQ==",
      "license": "MIT",
      "dependencies": {
        "use-isomorphic-layout-effect": "^1.1.1"
      },
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/use-sidecar": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/use-sidecar/-/use-sidecar-1.1.3.tgz",
      "integrity": "sha512-Fedw0aZvkhynoPYlA5WXrMCAMm+nSWdZt6lzJQ7Ok8S6Q+VsHmHpRWndVRJ8Be0ZbkfPc5LRYH+5XrzXcEeLRQ==",
      "license": "MIT",
      "dependencies": {
        "detect-node-es": "^1.1.0",
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/vite": {
      "version": "7.2.4",
      "resolved": "https://registry.npmjs.org/vite/-/vite-7.2.4.tgz",
      "integrity": "sha512-NL8jTlbo0Tn4dUEXEsUg8KeyG/Lkmc4Fnzb8JXN/Ykm9G4HNImjtABMJgkQoVjOBN/j2WAwDTRytdqJbZsah7w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3",
        "postcss": "^8.5.6",
        "rollup": "^4.43.0",
        "tinyglobby": "^0.2.15"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^20.19.0 || >=22.12.0",
        "jiti": ">=1.21.0",
        "less": "^4.0.0",
        "lightningcss": "^1.21.0",
        "sass": "^1.70.0",
        "sass-embedded": "^1.70.0",
        "stylus": ">=0.54.8",
        "sugarss": "^5.0.0",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/vite/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/vite/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ws": {
      "version": "8.18.3",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.18.3.tgz",
      "integrity": "sha512-PEIGCY5tSlUt50cqyMXfCzX+oOPqN0vuGqWzbcJ2xvnkzkq46oOpz7dQaTDBdfICb4N14+GARUDw2XV2N4tvzg==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yaml": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-2.8.1.tgz",
      "integrity": "sha512-lcYcMxX2PO9XMGvAJkJ3OsNMw+/7FKes7/hgerGUYWIoWu5j/+YQqcZr5JnPZWzOsEBgMbSbiSTn/dv/69Mkpw==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "peer": true,
      "bin": {
        "yaml": "bin.mjs"
      },
      "engines": {
        "node": ">= 14.6"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zod": {
      "version": "4.1.13",
      "resolved": "https://registry.npmjs.org/zod/-/zod-4.1.13.tgz",
      "integrity": "sha512-AvvthqfqrAhNH9dnfmrfKzX5upOdjUVJYFqNSlkmGf64gRaTzlPwz99IHYnVs28qYAybvAlBV+H7pn0saFY4Ig==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/colinhacks"
      }
    },
    "node_modules/zod-validation-error": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/zod-validation-error/-/zod-validation-error-4.0.2.tgz",
      "integrity": "sha512-Q6/nZLe6jxuU80qb/4uJ4t5v2VEZ44lzQjPDhYJNztRQ4wyWc6VF3D3Kb/fAuPetZQnhS3hnajCf9CsWesghLQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "zod": "^3.25.0 || ^4.0.0"
      }
    }
  }
}


========== saga.client\package.json ==========

{
  "name": "saga.client",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@emotion/react": "^11.14.0",
    "@emotion/styled": "^11.14.1",
    "@mantine/core": "^8.3.9",
    "@mantine/hooks": "^8.3.9",
    "@mantine/notifications": "^8.3.9",
    "@supabase/supabase-js": "^2.84.0",
    "@tabler/icons-react": "^3.35.0",
    "@tanstack/react-query": "^5.90.10",
    "axios": "^1.13.2",
    "date-fns": "^4.1.0",
    "lucide-react": "^0.554.0",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-hot-toast": "^2.6.0",
    "react-router-dom": "^7.9.6"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "autoprefixer": "^10.4.22",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.18",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4"
  }
}


========== saga.client\tsconfig.app.json ==========

{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}


========== saga.client\tsconfig.json ==========

{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}


========== saga.client\tsconfig.node.json ==========

{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}


========== saga.client\vite.config.ts ==========

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
    plugins: [react()],
    server: {
        port: 5173,
    },
    build: {
        rollupOptions: {
            output: {
                manualChunks: {
                    vendor: ['react', 'react-dom', 'react-router-dom'],
                    ui: ['@mantine/core', '@mantine/hooks', '@emotion/react', '@emotion/styled'],
                    utils: ['axios', '@tanstack/react-query', 'date-fns']
                }
            }
        },
        chunkSizeWarningLimit: 1000
    }
})

========== Saga.Server\Controllers\AktiviteController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;
using System.Text.Json;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class AktiviteController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<AktiviteController> _logger;

        public AktiviteController(SagaDbContext context, ILogger<AktiviteController> logger)
        {
            _context = context;
            _logger = logger;
        }

        // GET: api/aktivite/feed
        // Proje Ä°steri 2.1.2: Takip edilen kullanÄ±cÄ±larÄ±n aktivite feed'i (timeline)
        [HttpGet("feed")]
        [Authorize]
        public async Task<ActionResult<List<AktiviteFeedDto>>> GetFeed(
            [FromQuery] string? aktiviteTuru = null,
            [FromQuery] int sayfa = 1,
            [FromQuery] int limit = 15)  // Proje isterine gÃ¶re 10-15
        {
            try
            {
                var currentUserId = GetCurrentUserId();

                // Takip edilen kullanÄ±cÄ±larÄ±n ID'lerini al
                var takipEdilenIds = await _context.Takipler
                    .Where(t => t.TakipEdenId == currentUserId)
                    .Select(t => t.TakipEdilenId)
                    .ToListAsync();

                // Kendi ID'sini de ekle (kendi aktivitelerini de gÃ¶rsÃ¼n)
                takipEdilenIds.Add(currentUserId);

                var query = _context.Aktiviteler
                    .Include(a => a.Kullanici)
                    .Include(a => a.Icerik)
                    .Include(a => a.Puanlama)
                    .Include(a => a.Yorum)
                    .Include(a => a.Liste)
                    .Where(a => !a.Silindi && takipEdilenIds.Contains(a.KullaniciId))
                    .AsNoTracking();

                // Aktivite tÃ¼rÃ¼ filtresi
                if (!string.IsNullOrEmpty(aktiviteTuru) && Enum.TryParse<AktiviteTuru>(aktiviteTuru, true, out var tur))
                {
                    query = query.Where(a => a.AktiviteTuru == tur);
                }

                // Pagination
                var toplam = await query.CountAsync();
                var aktiviteler = await query
                    .OrderByDescending(a => a.OlusturulmaZamani)
                    .Skip((sayfa - 1) * limit)
                    .Take(limit)
                    .ToListAsync();

                var feedItems = await BuildFeedItems(aktiviteler, currentUserId);

                Response.Headers.Append("X-Toplam-Sayfa", ((toplam + limit - 1) / limit).ToString());
                Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());
                Response.Headers.Append("X-Mevcut-Sayfa", sayfa.ToString());

                return Ok(feedItems);
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Feed yÃ¼klenirken hata");
                return StatusCode(500, new { message = "Feed yÃ¼klenirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/aktivite/genel
        // TÃ¼m kullanÄ±cÄ±larÄ±n aktiviteleri (keÅŸfet/explore sayfasÄ± iÃ§in)
        [HttpGet("genel")]
        public async Task<ActionResult<List<AktiviteFeedDto>>> GetGenelFeed(
            [FromQuery] string? aktiviteTuru = null,
            [FromQuery] int sayfa = 1,
            [FromQuery] int limit = 20)
        {
            try
            {
                // Opsiyonel olarak giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±yÄ± al
                Guid? currentUserId = null;
                try { currentUserId = GetCurrentUserId(); } catch { }
                
                var query = _context.Aktiviteler
                    .Include(a => a.Kullanici)
                    .Include(a => a.Icerik)
                    .Include(a => a.Puanlama)
                    .Include(a => a.Yorum)
                    .Include(a => a.Liste)
                    .Where(a => !a.Silindi)
                    .AsNoTracking();

                // Aktivite tÃ¼rÃ¼ filtresi
                if (!string.IsNullOrEmpty(aktiviteTuru) && Enum.TryParse<AktiviteTuru>(aktiviteTuru, true, out var tur))
                {
                    query = query.Where(a => a.AktiviteTuru == tur);
                }

                // Pagination
                var toplam = await query.CountAsync();
                var aktiviteler = await query
                    .OrderByDescending(a => a.OlusturulmaZamani)
                    .Skip((sayfa - 1) * limit)
                    .Take(limit)
                    .ToListAsync();

                var feedItems = await BuildFeedItems(aktiviteler, currentUserId);

                Response.Headers.Append("X-Toplam-Sayfa", ((toplam + limit - 1) / limit).ToString());
                Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());

                return Ok(feedItems);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Feed yÃ¼klenirken hata");
                return StatusCode(500, new { message = "Feed yÃ¼klenirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/aktivite/kullanici/{kullaniciId}
        [HttpGet("kullanici/{kullaniciId}")]
        public async Task<ActionResult<List<AktiviteFeedDto>>> GetKullaniciAktiviteleri(
            Guid kullaniciId,
            [FromQuery] string? aktiviteTuru = null,
            [FromQuery] DateTime? baslangic = null,
            [FromQuery] DateTime? bitis = null,
            [FromQuery] int sayfa = 1,
            [FromQuery] int limit = 20)
        {
            var query = _context.Aktiviteler
                .Include(a => a.Kullanici)
                .Include(a => a.Icerik)
                .Include(a => a.Puanlama)
                .Include(a => a.Yorum)
                .Include(a => a.Liste)
                .Where(a => a.KullaniciId == kullaniciId && !a.Silindi)
                .AsNoTracking();

            // Aktivite tÃ¼rÃ¼ filtresi
            if (!string.IsNullOrEmpty(aktiviteTuru) && Enum.TryParse<AktiviteTuru>(aktiviteTuru, true, out var tur))
            {
                query = query.Where(a => a.AktiviteTuru == tur);
            }

            // Tarih aralÄ±ÄŸÄ± filtresi
            if (baslangic.HasValue)
            {
                query = query.Where(a => a.OlusturulmaZamani >= baslangic.Value);
            }

            if (bitis.HasValue)
            {
                query = query.Where(a => a.OlusturulmaZamani <= bitis.Value);
            }

            // Pagination iÃ§in toplam sayÄ±
            var toplam = await query.CountAsync();
            
            var aktiviteler = await query
                .OrderByDescending(a => a.OlusturulmaZamani)
                .Skip((sayfa - 1) * limit)
                .Take(limit)
                .ToListAsync();
            
            // Opsiyonel olarak giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±yÄ± al
            Guid? currentUserId = null;
            try { currentUserId = GetCurrentUserId(); } catch { }

            var feedItems = await BuildFeedItems(aktiviteler, currentUserId);

            // Sayfalama header'larÄ±
            Response.Headers.Append("X-Toplam-Sayfa", ((toplam + limit - 1) / limit).ToString());
            Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());
            Response.Headers.Append("X-Mevcut-Sayfa", sayfa.ToString());

            return Ok(feedItems);
        }

        // GET: api/aktivite
        // GiriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±nÄ±n kendi aktiviteleri
        [HttpGet]
        [Authorize]
        public async Task<ActionResult<List<AktiviteFeedDto>>> GetMyActivities(
            [FromQuery] string? aktiviteTuru = null,
            [FromQuery] int sayfa = 1,
            [FromQuery] int limit = 10)
        {
            try
            {
                var currentUserId = GetCurrentUserId();

                var query = _context.Aktiviteler
                    .Include(a => a.Kullanici)
                    .Include(a => a.Icerik)
                    .Include(a => a.Puanlama)
                    .Include(a => a.Yorum)
                    .Include(a => a.Liste)
                    .Where(a => a.KullaniciId == currentUserId && !a.Silindi)
                    .AsNoTracking();

                // Aktivite tÃ¼rÃ¼ filtresi
                if (!string.IsNullOrEmpty(aktiviteTuru) && Enum.TryParse<AktiviteTuru>(aktiviteTuru, true, out var tur))
                {
                    query = query.Where(a => a.AktiviteTuru == tur);
                }

                // Pagination
                var toplam = await query.CountAsync();
                var aktiviteler = await query
                    .OrderByDescending(a => a.OlusturulmaZamani)
                    .Skip((sayfa - 1) * limit)
                    .Take(limit)
                    .ToListAsync();

                var feedItems = await BuildFeedItems(aktiviteler, currentUserId);

                Response.Headers.Append("X-Toplam-Sayfa", ((toplam + limit - 1) / limit).ToString());
                Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());
                Response.Headers.Append("X-Mevcut-Sayfa", sayfa.ToString());

                return Ok(feedItems);
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Aktiviteler yÃ¼klenirken hata");
                return StatusCode(500, new { message = "Aktiviteler yÃ¼klenirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/aktivite/{id}
        [HttpGet("{id}")]
        public async Task<ActionResult<AktiviteResponseDto>> GetAktivite(long id)
        {
            var aktivite = await _context.Aktiviteler
                .AsNoTracking()
                .FirstOrDefaultAsync(a => a.Id == id && !a.Silindi);

            if (aktivite == null)
            {
                return NotFound(new { message = "Aktivite bulunamadÄ±." });
            }

            var response = new AktiviteResponseDto
            {
                Id = aktivite.Id,
                KullaniciId = aktivite.KullaniciId,
                AktiviteTuru = aktivite.AktiviteTuru.ToString(),
                IcerikId = aktivite.IcerikId,
                PuanlamaId = aktivite.PuanlamaId,
                YorumId = aktivite.YorumId,
                ListeId = aktivite.ListeId,
                Veri = aktivite.Veri,
                OlusturulmaZamani = aktivite.OlusturulmaZamani
            };

            return Ok(response);
        }

        // DELETE: api/aktivite/{id}
        [HttpDelete("{id}")]
        [Authorize]
        public async Task<ActionResult> DeleteAktivite(long id)
        {
            try
            {
                var currentUserId = GetCurrentUserId();

                var aktivite = await _context.Aktiviteler
                    .FirstOrDefaultAsync(a => a.Id == id && !a.Silindi);

                if (aktivite == null)
                {
                    return NotFound(new { message = "Aktivite bulunamadÄ±." });
                }

                // Sadece kendi aktivitesini silebilir
                if (aktivite.KullaniciId != currentUserId)
                {
                    return Forbid();
                }

                // Soft delete
                aktivite.Silindi = true;
                await _context.SaveChangesAsync();

                return Ok(new { message = "Aktivite silindi." });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Aktivite silinirken hata: {AktiviteId}", id);
                return StatusCode(500, new { message = "Aktivite silinirken bir hata oluÅŸtu." });
            }
        }

        // ============================================
        // AKTÄ°VÄ°TE BEÄENÄ° Ä°ÅLEMLERÄ°
        // ============================================
        
        // POST: api/aktivite/{id}/begen
        [HttpPost("{id}/begen")]
        [Authorize]
        public async Task<ActionResult<object>> AktiviteBegen(long id)
        {
            try
            {
                var currentUserId = GetCurrentUserId();
                
                var aktivite = await _context.Aktiviteler
                    .Include(a => a.Kullanici)
                    .FirstOrDefaultAsync(a => a.Id == id);
                if (aktivite == null || aktivite.Silindi)
                    return NotFound(new { message = "Aktivite bulunamadÄ±" });
                
                // Zaten beÄŸenmiÅŸ mi kontrol et
                var mevcutBegeni = await _context.AktiviteBegenileri
                    .FirstOrDefaultAsync(b => b.AktiviteId == id && b.KullaniciId == currentUserId);
                
                if (mevcutBegeni != null)
                {
                    // BeÄŸeniyi kaldÄ±r
                    _context.AktiviteBegenileri.Remove(mevcutBegeni);
                    aktivite.BegeniSayisi = Math.Max(0, aktivite.BegeniSayisi - 1);
                    await _context.SaveChangesAsync();
                    
                    return Ok(new { begendim = false, begeniSayisi = aktivite.BegeniSayisi });
                }
                
                // Yeni beÄŸeni ekle
                var yeniBegeni = new Models.AktiviteBegeni
                {
                    AktiviteId = id,
                    KullaniciId = currentUserId,
                    OlusturulmaZamani = DateTime.UtcNow
                };
                
                _context.AktiviteBegenileri.Add(yeniBegeni);
                aktivite.BegeniSayisi = aktivite.BegeniSayisi + 1;
                
                // Bildirim PostgreSQL trigger ile otomatik oluÅŸturuluyor (trg_bildirim_aktivite_begeni)
                
                await _context.SaveChangesAsync();
                
                return Ok(new { begendim = true, begeniSayisi = aktivite.BegeniSayisi });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Aktivite beÄŸenilirken hata: {AktiviteId}", id);
                return StatusCode(500, new { message = "BeÄŸeni iÅŸlemi sÄ±rasÄ±nda bir hata oluÅŸtu." });
            }
        }
        
        // GET: api/aktivite/{id}/begeniler
        [HttpGet("{id}/begeniler")]
        public async Task<ActionResult<List<AktiviteBegeniDto>>> GetAktiviteBegenileri(long id, [FromQuery] int limit = 20)
        {
            try
            {
                var begeniler = await _context.AktiviteBegenileri
                    .Include(b => b.Kullanici)
                    .Where(b => b.AktiviteId == id)
                    .OrderByDescending(b => b.OlusturulmaZamani)
                    .Take(limit)
                    .Select(b => new AktiviteBegeniDto
                    {
                        AktiviteId = b.AktiviteId,
                        KullaniciId = b.KullaniciId,
                        KullaniciAdi = b.Kullanici.KullaniciAdi,
                        AvatarUrl = b.Kullanici.AvatarUrl,
                        OlusturulmaZamani = b.OlusturulmaZamani
                    })
                    .ToListAsync();
                
                return Ok(begeniler);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "BeÄŸeniler alÄ±nÄ±rken hata: {AktiviteId}", id);
                return StatusCode(500, new { message = "BeÄŸeniler alÄ±nÄ±rken bir hata oluÅŸtu." });
            }
        }
        
        // ============================================
        // AKTÄ°VÄ°TE YORUM Ä°ÅLEMLERÄ°
        // ============================================
        
        // POST: api/aktivite/{id}/yorum
        [HttpPost("{id}/yorum")]
        [Authorize]
        public async Task<ActionResult<AktiviteYorumDto>> AktiviteYorumEkle(long id, [FromBody] AktiviteYorumOlusturDto dto)
        {
            try
            {
                var currentUserId = GetCurrentUserId();
                
                var aktivite = await _context.Aktiviteler
                    .Include(a => a.Kullanici)
                    .FirstOrDefaultAsync(a => a.Id == id);
                if (aktivite == null || aktivite.Silindi)
                    return NotFound(new { message = "Aktivite bulunamadÄ±" });
                
                if (string.IsNullOrWhiteSpace(dto.Icerik))
                    return BadRequest(new { message = "Yorum iÃ§eriÄŸi boÅŸ olamaz" });
                
                // Ãœst yorum varsa kontrol et (yanÄ±t durumu)
                Models.AktiviteYorum? ustYorum = null;
                if (dto.UstYorumId.HasValue)
                {
                    ustYorum = await _context.AktiviteYorumlari
                        .Include(y => y.Kullanici)
                        .FirstOrDefaultAsync(y => y.Id == dto.UstYorumId && y.AktiviteId == id);
                    if (ustYorum == null)
                        return BadRequest(new { message = "YanÄ±tlanacak yorum bulunamadÄ±" });
                }
                
                var kullanici = await _context.Kullanicilar.FindAsync(currentUserId);
                
                var yeniYorum = new Models.AktiviteYorum
                {
                    AktiviteId = id,
                    KullaniciId = currentUserId,
                    Icerik = dto.Icerik.Trim(),
                    UstYorumId = dto.UstYorumId,
                    OlusturulmaZamani = DateTime.UtcNow,
                    GuncellemeZamani = DateTime.UtcNow
                };
                
                _context.AktiviteYorumlari.Add(yeniYorum);
                aktivite.YorumSayisi = aktivite.YorumSayisi + 1;
                
                // Aktivite yorum bildirimi PostgreSQL trigger ile otomatik oluÅŸturuluyor (trg_bildirim_aktivite_yorum)
                // YanÄ±t bildirimi iÃ§in Ã¼st yorum sahibine bildirim (bu trigger'da yok, manuel yapÄ±lÄ±yor)
                if (ustYorum != null && ustYorum.KullaniciId != currentUserId)
                {
                    var bildirimYanit = new Bildirim
                    {
                        AliciId = ustYorum.KullaniciId,
                        GonderenId = currentUserId,
                        Tip = "yorum_yanit",
                        Baslik = "Yorumunuza YanÄ±t",
                        Mesaj = $"{kullanici?.KullaniciAdi ?? "Birisi"} yorumunuza yanÄ±t verdi: \"{dto.Icerik.Substring(0, Math.Min(50, dto.Icerik.Length))}...\"",
                        AktiviteId = id,
                        LinkUrl = $"/aktivite/{id}",
                        OlusturulmaZamani = DateTime.UtcNow
                    };
                    _context.Bildirimler.Add(bildirimYanit);
                }
                
                await _context.SaveChangesAsync();
                
                return Ok(new AktiviteYorumDto
                {
                    Id = yeniYorum.Id,
                    AktiviteId = yeniYorum.AktiviteId,
                    KullaniciId = yeniYorum.KullaniciId,
                    KullaniciAdi = kullanici?.KullaniciAdi ?? "Anonim",
                    KullaniciAvatar = kullanici?.AvatarUrl,
                    Icerik = yeniYorum.Icerik,
                    UstYorumId = yeniYorum.UstYorumId,
                    BegeniSayisi = 0,
                    Begendim = false,
                    OlusturulmaZamani = yeniYorum.OlusturulmaZamani
                });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Yorum eklenirken hata: {AktiviteId}", id);
                return StatusCode(500, new { message = "Yorum eklenirken bir hata oluÅŸtu." });
            }
        }
        
        // GET: api/aktivite/{id}/yorumlar
        [HttpGet("{id}/yorumlar")]
        public async Task<ActionResult<List<AktiviteYorumDto>>> GetAktiviteYorumlari(long id, [FromQuery] int sayfa = 1, [FromQuery] int limit = 20)
        {
            try
            {
                Guid? currentUserId = null;
                try { currentUserId = GetCurrentUserId(); } catch { }
                
                var yorumlar = await _context.AktiviteYorumlari
                    .Include(y => y.Kullanici)
                    .Include(y => y.Begeniler)
                    .Include(y => y.Yanitlar)
                        .ThenInclude(r => r.Kullanici)
                    .Where(y => y.AktiviteId == id && !y.Silindi && y.UstYorumId == null)
                    .OrderByDescending(y => y.OlusturulmaZamani)
                    .Skip((sayfa - 1) * limit)
                    .Take(limit)
                    .ToListAsync();
                
                var result = yorumlar.Select(y => new AktiviteYorumDto
                {
                    Id = y.Id,
                    AktiviteId = y.AktiviteId,
                    KullaniciId = y.KullaniciId,
                    KullaniciAdi = y.Kullanici.KullaniciAdi,
                    KullaniciAvatar = y.Kullanici.AvatarUrl,
                    Icerik = y.Icerik,
                    BegeniSayisi = y.BegeniSayisi,
                    Begendim = currentUserId.HasValue && y.Begeniler.Any(b => b.KullaniciId == currentUserId),
                    OlusturulmaZamani = y.OlusturulmaZamani,
                    Yanitlar = y.Yanitlar
                        .Where(r => !r.Silindi)
                        .OrderBy(r => r.OlusturulmaZamani)
                        .Select(r => new AktiviteYorumDto
                        {
                            Id = r.Id,
                            AktiviteId = r.AktiviteId,
                            KullaniciId = r.KullaniciId,
                            KullaniciAdi = r.Kullanici.KullaniciAdi,
                            KullaniciAvatar = r.Kullanici.AvatarUrl,
                            Icerik = r.Icerik,
                            UstYorumId = r.UstYorumId,
                            BegeniSayisi = r.BegeniSayisi,
                            Begendim = currentUserId.HasValue && r.Begeniler.Any(b => b.KullaniciId == currentUserId),
                            OlusturulmaZamani = r.OlusturulmaZamani
                        }).ToList()
                }).ToList();
                
                var toplam = await _context.AktiviteYorumlari
                    .CountAsync(y => y.AktiviteId == id && !y.Silindi && y.UstYorumId == null);
                
                Response.Headers.Append("X-Toplam-Sayfa", ((toplam + limit - 1) / limit).ToString());
                Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());
                
                return Ok(result);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Yorumlar alÄ±nÄ±rken hata: {AktiviteId}", id);
                return StatusCode(500, new { message = "Yorumlar alÄ±nÄ±rken bir hata oluÅŸtu." });
            }
        }
        
        // POST: api/aktivite/yorum/{yorumId}/begen
        [HttpPost("yorum/{yorumId}/begen")]
        [Authorize]
        public async Task<ActionResult<object>> AktiviteYorumBegen(long yorumId)
        {
            try
            {
                var currentUserId = GetCurrentUserId();
                
                var yorum = await _context.AktiviteYorumlari
                    .Include(y => y.Kullanici)
                    .FirstOrDefaultAsync(y => y.Id == yorumId);
                if (yorum == null || yorum.Silindi)
                    return NotFound(new { message = "Yorum bulunamadÄ±" });
                
                var mevcutBegeni = await _context.AktiviteYorumBegenileri
                    .FirstOrDefaultAsync(b => b.YorumId == yorumId && b.KullaniciId == currentUserId);
                
                if (mevcutBegeni != null)
                {
                    _context.AktiviteYorumBegenileri.Remove(mevcutBegeni);
                    yorum.BegeniSayisi = Math.Max(0, yorum.BegeniSayisi - 1);
                    await _context.SaveChangesAsync();
                    return Ok(new { begendim = false, begeniSayisi = yorum.BegeniSayisi });
                }
                
                var yeniBegeni = new Models.AktiviteYorumBegeni
                {
                    YorumId = yorumId,
                    KullaniciId = currentUserId,
                    OlusturulmaZamani = DateTime.UtcNow
                };
                
                _context.AktiviteYorumBegenileri.Add(yeniBegeni);
                yorum.BegeniSayisi = yorum.BegeniSayisi + 1;
                
                // Bildirim oluÅŸtur (kendi yorumunu beÄŸendiyse hariÃ§)
                if (yorum.KullaniciId != currentUserId)
                {
                    var begenen = await _context.Kullanicilar.FindAsync(currentUserId);
                    var bildirim = new Bildirim
                    {
                        AliciId = yorum.KullaniciId,
                        GonderenId = currentUserId,
                        Tip = "yorum_begeni",
                        Baslik = "Yorumunuz BeÄŸenildi",
                        Mesaj = $"{begenen?.KullaniciAdi ?? "Birisi"} yorumunuzu beÄŸendi: \"{yorum.Icerik.Substring(0, Math.Min(30, yorum.Icerik.Length))}...\"",
                        AktiviteId = yorum.AktiviteId,
                        LinkUrl = $"/aktivite/{yorum.AktiviteId}",
                        OlusturulmaZamani = DateTime.UtcNow
                    };
                    _context.Bildirimler.Add(bildirim);
                }
                
                await _context.SaveChangesAsync();
                
                return Ok(new { begendim = true, begeniSayisi = yorum.BegeniSayisi });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Yorum beÄŸenilirken hata: {YorumId}", yorumId);
                return StatusCode(500, new { message = "BeÄŸeni iÅŸlemi sÄ±rasÄ±nda bir hata oluÅŸtu." });
            }
        }
        
        // DELETE: api/aktivite/yorum/{yorumId}
        [HttpDelete("yorum/{yorumId}")]
        [Authorize]
        public async Task<ActionResult> AktiviteYorumSil(long yorumId)
        {
            try
            {
                var currentUserId = GetCurrentUserId();
                
                var yorum = await _context.AktiviteYorumlari
                    .Include(y => y.Aktivite)
                    .FirstOrDefaultAsync(y => y.Id == yorumId);
                if (yorum == null)
                    return NotFound(new { message = "Yorum bulunamadÄ±" });
                
                if (yorum.KullaniciId != currentUserId)
                    return Forbid();
                
                yorum.Silindi = true;
                yorum.GuncellemeZamani = DateTime.UtcNow;
                
                // Aktivite yorum sayÄ±sÄ±nÄ± gÃ¼ncelle
                if (yorum.Aktivite != null)
                {
                    yorum.Aktivite.YorumSayisi = Math.Max(0, yorum.Aktivite.YorumSayisi - 1);
                }
                
                await _context.SaveChangesAsync();
                
                return Ok(new { message = "Yorum silindi" });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Yorum silinirken hata: {YorumId}", yorumId);
                return StatusCode(500, new { message = "Yorum silinirken bir hata oluÅŸtu." });
            }
        }

        // Helper Methods
        private async Task<List<AktiviteFeedDto>> BuildFeedItems(List<Aktivite> aktiviteler, Guid? currentUserId = null)
        {
            var feedItems = new List<AktiviteFeedDto>();
            
            // TÃ¼m aktivite ID'lerini al
            var aktiviteIds = aktiviteler.Select(a => a.Id).ToList();
            
            // KullanÄ±cÄ±nÄ±n beÄŸenilerini tek sorguda al
            HashSet<long> begenilenAktiviteIds = new();
            if (currentUserId.HasValue)
            {
                begenilenAktiviteIds = (await _context.AktiviteBegenileri
                    .Where(b => aktiviteIds.Contains(b.AktiviteId) && b.KullaniciId == currentUserId)
                    .Select(b => b.AktiviteId)
                    .ToListAsync())
                    .ToHashSet();
            }

            foreach (var aktivite in aktiviteler)
            {
                var feedItem = new AktiviteFeedDto
                {
                    Id = aktivite.Id,
                    KullaniciId = aktivite.KullaniciId,
                    KullaniciAdi = aktivite.Kullanici.KullaniciAdi,
                    KullaniciAvatar = aktivite.Kullanici.AvatarUrl,
                    AktiviteTuru = aktivite.AktiviteTuru.ToString(),
                    IcerikId = aktivite.IcerikId,
                    IcerikTur = aktivite.Icerik?.Tur.ToString(),
                    OlusturulmaZamani = aktivite.OlusturulmaZamani,
                    BegeniSayisi = aktivite.BegeniSayisi,
                    YorumSayisi = aktivite.YorumSayisi,
                    PaylasimSayisi = aktivite.PaylasimSayisi,
                    Begendim = begenilenAktiviteIds.Contains(aktivite.Id),
                    Veri = await BuildAktiviteVeri(aktivite)
                };

                feedItems.Add(feedItem);
            }

            return feedItems;
        }

        private async Task<AktiviteVeriDto?> BuildAktiviteVeri(Aktivite aktivite)
        {
            var veri = new AktiviteVeriDto();

            // YardÄ±mcÄ± metod: Ä°Ã§erik detaylarÄ±nÄ± doldur
            void FillIcerikDetails(Icerik? icerik)
            {
                if (icerik == null) return;
                
                veri.Baslik = icerik.Baslik;
                veri.PosterUrl = icerik.PosterUrl;
                veri.Tur = icerik.Tur.ToString(); // BaÅŸlangÄ±Ã§ta enum deÄŸerini al
                veri.Yil = icerik.YayinTarihi?.Year;
                
                // Platform ve harici puanlarÄ± ekle
                veri.OrtalamaPuan = icerik.OrtalamaPuan;
                veri.HariciPuan = icerik.HariciPuan;
                
                // MetaVeri'den ek bilgileri Ã§ek (IcerikController ile aynÄ± key isimleri)
                if (!string.IsNullOrEmpty(icerik.MetaVeri) && icerik.MetaVeri != "{}")
                {
                    try
                    {
                        var metaDoc = JsonDocument.Parse(icerik.MetaVeri);
                        var root = metaDoc.RootElement;
                        
                        // Film iÃ§in sÃ¼re (sure key'i - dakika cinsinden)
                        if (root.TryGetProperty("sure", out var sure) && sure.ValueKind == JsonValueKind.Number)
                        {
                            var dakika = sure.GetInt32();
                            var saat = dakika / 60;
                            var dk = dakika % 60;
                            veri.Sure = saat > 0 ? $"{saat}s {dk}dk" : $"{dk}dk";
                        }
                        
                        // Dizi iÃ§in sezon ve bÃ¶lÃ¼m sayÄ±sÄ±
                        if (root.TryGetProperty("sezonSayisi", out var sezon) && sezon.ValueKind == JsonValueKind.Number)
                            veri.SezonSayisi = sezon.GetInt32();
                        if (root.TryGetProperty("bolumSayisi", out var bolum) && bolum.ValueKind == JsonValueKind.Number)
                            veri.BolumSayisi = bolum.GetInt32();
                            
                        // Kitap iÃ§in sayfa sayÄ±sÄ± ve yazar
                        if (root.TryGetProperty("sayfaSayisi", out var sayfa) && sayfa.ValueKind == JsonValueKind.Number)
                            veri.SayfaSayisi = sayfa.GetInt32();
                        if (root.TryGetProperty("yazarlar", out var yazarlar) && yazarlar.ValueKind == JsonValueKind.Array)
                        {
                            var authorList = new List<string>();
                            foreach (var yazar in yazarlar.EnumerateArray())
                            {
                                var yazarStr = yazar.GetString();
                                if (!string.IsNullOrEmpty(yazarStr))
                                    authorList.Add(yazarStr);
                            }
                            veri.Yazar = string.Join(", ", authorList);
                        }
                    }
                    catch { }
                }
                
                // Type correction: MetaVeri bilgilerine gÃ¶re tÃ¼r dÃ¼zeltmesi
                // SezonSayisi veya BolumSayisi varsa bu bir Dizi'dir
                if ((veri.SezonSayisi > 0 || veri.BolumSayisi > 0) && veri.Tur != "Dizi")
                {
                    veri.Tur = "Dizi";
                }
                // SayfaSayisi varsa bu bir Kitap'tÄ±r
                else if (veri.SayfaSayisi > 0 && veri.Tur != "Kitap")
                {
                    veri.Tur = "Kitap";
                }
                // Sure varsa ve Dizi/Kitap deÄŸilse Film'dir
                else if (!string.IsNullOrEmpty(veri.Sure) && veri.Tur != "Dizi" && veri.Tur != "Kitap")
                {
                    veri.Tur = "Film";
                }
            }

            switch (aktivite.AktiviteTuru)
            {
                case AktiviteTuru.puanlama:
                    if (aktivite.Puanlama != null)
                    {
                        var icerik = await _context.Icerikler.FindAsync(aktivite.Puanlama.IcerikId);
                        FillIcerikDetails(icerik);
                        veri.Puan = aktivite.Puanlama.Puan;
                    }
                    break;

                case AktiviteTuru.yorum:
                    if (aktivite.Yorum != null)
                    {
                        var icerik = await _context.Icerikler.FindAsync(aktivite.Yorum.IcerikId);
                        FillIcerikDetails(icerik);
                        veri.YorumTamUzunluk = aktivite.Yorum.IcerikMetni.Length;
                        veri.YorumOzet = aktivite.Yorum.IcerikMetni.Length > 200
                            ? aktivite.Yorum.IcerikMetni.Substring(0, 200) + "..."
                            : aktivite.Yorum.IcerikMetni;
                        veri.SpoilerIceriyor = aktivite.Yorum.SpoilerIceriyor;
                        veri.YorumId = aktivite.Yorum.Id;
                    }
                    break;

                case AktiviteTuru.listeye_ekleme:
                    if (aktivite.Liste != null && aktivite.Icerik != null)
                    {
                        veri.ListeAdi = aktivite.Liste.Ad;
                        FillIcerikDetails(aktivite.Icerik);
                    }
                    break;

                case AktiviteTuru.takip:
                    // Veri JSONB'den parse et
                    try
                    {
                        var jsonData = JsonSerializer.Deserialize<Dictionary<string, object>>(aktivite.Veri);
                        if (jsonData != null && jsonData.ContainsKey("takipEdilenId"))
                        {
                            var takipEdilenIdStr = jsonData["takipEdilenId"].ToString();
                            if (Guid.TryParse(takipEdilenIdStr, out var takipEdilenId))
                            {
                                var takipEdilen = await _context.Kullanicilar.FindAsync(takipEdilenId);
                                veri.TakipEdilenKullaniciAdi = takipEdilen?.KullaniciAdi;
                                veri.TakipEdilenAvatar = takipEdilen?.AvatarUrl;
                            }
                        }
                    }
                    catch { }
                    break;

                case AktiviteTuru.durum_guncelleme:
                    if (aktivite.Icerik != null)
                    {
                        FillIcerikDetails(aktivite.Icerik);

                        // Veri JSONB'den durum bilgisini al
                        try
                        {
                            var jsonData = JsonSerializer.Deserialize<Dictionary<string, object>>(aktivite.Veri);
                            if (jsonData != null && jsonData.ContainsKey("durum"))
                            {
                                veri.Durum = jsonData["durum"].ToString();
                            }
                        }
                        catch { }
                    }
                    break;
            }

            return veri;
        }
    }
}


========== Saga.Server\Controllers\AuthController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Saga.Server.DTOs;
using System.Net.Http.Headers;
using System.Text.Json;
using System.Text;

namespace Saga.Server.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class AuthController : ControllerBase
    {
        private readonly IConfiguration _configuration;
        private readonly ILogger<AuthController> _logger;
        private readonly HttpClient _httpClient;
        private readonly string _supabaseUrl;
        private readonly string _supabaseAnonKey;

        public AuthController(
            IConfiguration configuration,
            ILogger<AuthController> logger,
            IHttpClientFactory httpClientFactory)
        {
            _configuration = configuration;
            _logger = logger;
            _httpClient = httpClientFactory.CreateClient();
            _supabaseUrl = configuration["Supabase:Url"] ?? throw new Exception("Supabase URL bulunamadı!");
            _supabaseAnonKey = configuration["Supabase:AnonKey"] ?? throw new Exception("Supabase Anon Key bulunamadı!");
        }

        // POST: api/auth/register
        [HttpPost("register")]
        [AllowAnonymous]
        public async Task<ActionResult<AuthResponseDto>> Register([FromBody] RegisterDto model)
        {
            try
            {
                var requestBody = new
                {
                    email = model.Eposta,
                    password = model.Sifre,
                    data = new
                    {
                        username = model.KullaniciAdi,
                        full_name = model.KullaniciAdi
                    }
                };

                var content = new StringContent(
                    JsonSerializer.Serialize(requestBody),
                    Encoding.UTF8,
                    "application/json");

                _httpClient.DefaultRequestHeaders.Clear();
                _httpClient.DefaultRequestHeaders.Add("apikey", _supabaseAnonKey);
                _httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", _supabaseAnonKey);

                var response = await _httpClient.PostAsync(
                    $"{_supabaseUrl}/auth/v1/signup",
                    content);

                var responseContent = await response.Content.ReadAsStringAsync();

                if (!response.IsSuccessStatusCode)
                {
                    _logger.LogError("Supabase kayıt hatası: {StatusCode} - {Content}", response.StatusCode, responseContent);
                    
                    var errorObj = JsonSerializer.Deserialize<JsonElement>(responseContent);
                    var errorMessage = errorObj.TryGetProperty("msg", out var msg) 
                        ? msg.GetString() 
                        : "Kayıt başarısız oldu.";

                    return BadRequest(new { message = errorMessage });
                }

                var authResponse = JsonSerializer.Deserialize<JsonElement>(responseContent);
                
                var result = new AuthResponseDto
                {
                    AccessToken = authResponse.GetProperty("access_token").GetString(),
                    RefreshToken = authResponse.GetProperty("refresh_token").GetString(),
                    User = new UserDto
                    {
                        Id = Guid.Parse(authResponse.GetProperty("user").GetProperty("id").GetString()!),
                        Eposta = authResponse.GetProperty("user").GetProperty("email").GetString()!,
                        KullaniciAdi = model.KullaniciAdi
                    }
                };

                return Ok(result);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Kayıt işlemi sırasında hata oluştu");
                return StatusCode(500, new { message = "Kayıt işlemi sırasında bir hata oluştu." });
            }
        }

        // POST: api/auth/login
        [HttpPost("login")]
        [AllowAnonymous]
        public async Task<ActionResult<AuthResponseDto>> Login([FromBody] LoginDto model)
        {
            try
            {
                var requestBody = new
                {
                    email = model.Eposta,
                    password = model.Sifre
                };

                var content = new StringContent(
                    JsonSerializer.Serialize(requestBody),
                    Encoding.UTF8,
                    "application/json");

                _httpClient.DefaultRequestHeaders.Clear();
                _httpClient.DefaultRequestHeaders.Add("apikey", _supabaseAnonKey);

                var response = await _httpClient.PostAsync(
                    $"{_supabaseUrl}/auth/v1/token?grant_type=password",
                    content);

                var responseContent = await response.Content.ReadAsStringAsync();

                if (!response.IsSuccessStatusCode)
                {
                    _logger.LogError("Supabase giriş hatası: {StatusCode} - {Content}", response.StatusCode, responseContent);
                    return Unauthorized(new { message = "E-posta veya şifre hatalı." });
                }

                var authResponse = JsonSerializer.Deserialize<JsonElement>(responseContent);
                
                var result = new AuthResponseDto
                {
                    AccessToken = authResponse.GetProperty("access_token").GetString(),
                    RefreshToken = authResponse.GetProperty("refresh_token").GetString(),
                    User = new UserDto
                    {
                        Id = Guid.Parse(authResponse.GetProperty("user").GetProperty("id").GetString()!),
                        Eposta = authResponse.GetProperty("user").GetProperty("email").GetString()!,
                        KullaniciAdi = authResponse.GetProperty("user").GetProperty("user_metadata")
                            .GetProperty("username").GetString() ?? 
                            authResponse.GetProperty("user").GetProperty("email").GetString()!.Split('@')[0]
                    }
                };

                return Ok(result);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Giriş işlemi sırasında hata oluştu");
                return StatusCode(500, new { message = "Giriş işlemi sırasında bir hata oluştu." });
            }
        }

        // POST: api/auth/forgot-password
        [HttpPost("forgot-password")]
        [AllowAnonymous]
        public async Task<ActionResult> ForgotPassword([FromBody] ForgotPasswordDto model)
        {
            try
            {
                var requestBody = new
                {
                    email = model.Eposta
                };

                var content = new StringContent(
                    JsonSerializer.Serialize(requestBody),
                    Encoding.UTF8,
                    "application/json");

                _httpClient.DefaultRequestHeaders.Clear();
                _httpClient.DefaultRequestHeaders.Add("apikey", _supabaseAnonKey);

                var response = await _httpClient.PostAsync(
                    $"{_supabaseUrl}/auth/v1/recover",
                    content);

                if (!response.IsSuccessStatusCode)
                {
                    var errorContent = await response.Content.ReadAsStringAsync();
                    _logger.LogError("Şifre sıfırlama hatası: {StatusCode} - {Content}", response.StatusCode, errorContent);
                }

                // Güvenlik nedeniyle her zaman başarılı mesaj dön
                return Ok(new { message = "Eğer e-posta kayıtlıysa, şifre sıfırlama linki gönderildi." });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Şifre sıfırlama işlemi sırasında hata oluştu");
                return StatusCode(500, new { message = "Şifre sıfırlama işlemi sırasında bir hata oluştu." });
            }
        }

        // POST: api/auth/reset-password
        [HttpPost("reset-password")]
        [AllowAnonymous]
        public async Task<ActionResult> ResetPassword([FromBody] ResetPasswordDto model)
        {
            try
            {
                var requestBody = new
                {
                    password = model.YeniSifre
                };

                var content = new StringContent(
                    JsonSerializer.Serialize(requestBody),
                    Encoding.UTF8,
                    "application/json");

                _httpClient.DefaultRequestHeaders.Clear();
                _httpClient.DefaultRequestHeaders.Add("apikey", _supabaseAnonKey);
                _httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", model.Token);

                var response = await _httpClient.PutAsync(
                    $"{_supabaseUrl}/auth/v1/user",
                    content);

                var responseContent = await response.Content.ReadAsStringAsync();

                if (!response.IsSuccessStatusCode)
                {
                    _logger.LogError("Şifre güncelleme hatası: {StatusCode} - {Content}", response.StatusCode, responseContent);
                    return BadRequest(new { message = "Şifre sıfırlama başarısız oldu. Token geçersiz veya süresi dolmuş olabilir." });
                }

                return Ok(new { message = "Şifreniz başarıyla güncellendi." });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Şifre güncelleme işlemi sırasında hata oluştu");
                return StatusCode(500, new { message = "Şifre güncelleme işlemi sırasında bir hata oluştu." });
            }
        }

        // POST: api/auth/refresh
        [HttpPost("refresh")]
        [AllowAnonymous]
        public async Task<ActionResult<AuthResponseDto>> RefreshToken([FromBody] RefreshTokenDto model)
        {
            try
            {
                var requestBody = new
                {
                    refresh_token = model.RefreshToken
                };

                var content = new StringContent(
                    JsonSerializer.Serialize(requestBody),
                    Encoding.UTF8,
                    "application/json");

                _httpClient.DefaultRequestHeaders.Clear();
                _httpClient.DefaultRequestHeaders.Add("apikey", _supabaseAnonKey);

                var response = await _httpClient.PostAsync(
                    $"{_supabaseUrl}/auth/v1/token?grant_type=refresh_token",
                    content);

                var responseContent = await response.Content.ReadAsStringAsync();

                if (!response.IsSuccessStatusCode)
                {
                    _logger.LogError("Token yenileme hatası: {StatusCode} - {Content}", response.StatusCode, responseContent);
                    return Unauthorized(new { message = "Token yenileme başarısız oldu." });
                }

                var authResponse = JsonSerializer.Deserialize<JsonElement>(responseContent);
                
                var result = new AuthResponseDto
                {
                    AccessToken = authResponse.GetProperty("access_token").GetString(),
                    RefreshToken = authResponse.GetProperty("refresh_token").GetString(),
                    User = new UserDto
                    {
                        Id = Guid.Parse(authResponse.GetProperty("user").GetProperty("id").GetString()!),
                        Eposta = authResponse.GetProperty("user").GetProperty("email").GetString()!,
                        KullaniciAdi = authResponse.GetProperty("user").GetProperty("user_metadata")
                            .GetProperty("username").GetString() ?? 
                            authResponse.GetProperty("user").GetProperty("email").GetString()!.Split('@')[0]
                    }
                };

                return Ok(result);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Token yenileme işlemi sırasında hata oluştu");
                return StatusCode(500, new { message = "Token yenileme işlemi sırasında bir hata oluştu." });
            }
        }

        // POST: api/auth/logout
        [HttpPost("logout")]
        [Authorize]
        public async Task<ActionResult> Logout()
        {
            try
            {
                var token = Request.Headers["Authorization"].ToString().Replace("Bearer ", "");

                _httpClient.DefaultRequestHeaders.Clear();
                _httpClient.DefaultRequestHeaders.Add("apikey", _supabaseAnonKey);
                _httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", token);

                var response = await _httpClient.PostAsync(
                    $"{_supabaseUrl}/auth/v1/logout",
                    null);

                if (!response.IsSuccessStatusCode)
                {
                    var errorContent = await response.Content.ReadAsStringAsync();
                    _logger.LogWarning("Logout hatası: {StatusCode} - {Content}", response.StatusCode, errorContent);
                }

                return Ok(new { message = "Çıkış başarılı." });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Çıkış işlemi sırasında hata oluştu");
                return StatusCode(500, new { message = "Çıkış işlemi sırasında bir hata oluştu." });
            }
        }

        // GET: api/auth/me
        [HttpGet("me")]
        [Authorize]
        public ActionResult<UserDto> GetCurrentUser()
        {
            var userId = User.FindFirst("sub")?.Value;
            var email = User.FindFirst("email")?.Value;

            if (string.IsNullOrEmpty(userId) || string.IsNullOrEmpty(email))
            {
                return Unauthorized(new { message = "Kullanıcı bilgisi alınamadı." });
            }

            return Ok(new UserDto
            {
                Id = Guid.Parse(userId),
                Eposta = email,
                KullaniciAdi = User.FindFirst("username")?.Value ?? email.Split('@')[0]
            });
        }
    }
}

========== Saga.Server\Controllers\AyarlarController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class AyarlarController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<AyarlarController> _logger;

        public AyarlarController(SagaDbContext context, ILogger<AyarlarController> logger)
        {
            _context = context;
            _logger = logger;
        }

        // GET: api/ayarlar
        // KullanÄ±cÄ± ayarlarÄ±nÄ± getir
        [HttpGet]
        [Authorize]
        public async Task<ActionResult<KullaniciAyarlariDto>> GetAyarlar()
        {
            try
            {
                var currentUserId = GetCurrentUserId();
                
                var ayarlar = await _context.KullaniciAyarlari
                    .FirstOrDefaultAsync(a => a.KullaniciId == currentUserId);
                
                // Ayar yoksa default deÄŸerlerle oluÅŸtur
                if (ayarlar == null)
                {
                    ayarlar = new KullaniciAyarlari
                    {
                        KullaniciId = currentUserId,
                        OlusturulmaZamani = DateTime.UtcNow,
                        GuncellemeZamani = DateTime.UtcNow
                    };
                    _context.KullaniciAyarlari.Add(ayarlar);
                    await _context.SaveChangesAsync();
                }
                
                return Ok(new KullaniciAyarlariDto
                {
                    BildirimYeniTakipci = ayarlar.BildirimYeniTakipci,
                    BildirimYorumlar = ayarlar.BildirimYorumlar,
                    BildirimBegeniler = ayarlar.BildirimBegeniler,
                    BildirimOneriler = ayarlar.BildirimOneriler,
                    BildirimEmail = ayarlar.BildirimEmail,
                    ProfilGizli = ayarlar.ProfilGizli,
                    AktiviteGizli = ayarlar.AktiviteGizli,
                    Tema = ayarlar.Tema,
                    Dil = ayarlar.Dil
                });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Ayarlar alÄ±nÄ±rken hata");
                return StatusCode(500, new { message = "Ayarlar alÄ±nÄ±rken bir hata oluÅŸtu." });
            }
        }

        // PUT: api/ayarlar
        // KullanÄ±cÄ± ayarlarÄ±nÄ± gÃ¼ncelle
        [HttpPut]
        [Authorize]
        public async Task<ActionResult<KullaniciAyarlariDto>> UpdateAyarlar([FromBody] KullaniciAyarlariGuncelleDto dto)
        {
            try
            {
                var currentUserId = GetCurrentUserId();
                
                var ayarlar = await _context.KullaniciAyarlari
                    .FirstOrDefaultAsync(a => a.KullaniciId == currentUserId);
                
                if (ayarlar == null)
                {
                    ayarlar = new KullaniciAyarlari
                    {
                        KullaniciId = currentUserId,
                        OlusturulmaZamani = DateTime.UtcNow
                    };
                    _context.KullaniciAyarlari.Add(ayarlar);
                }
                
                // Sadece gÃ¶nderilen alanlarÄ± gÃ¼ncelle
                if (dto.BildirimYeniTakipci.HasValue)
                    ayarlar.BildirimYeniTakipci = dto.BildirimYeniTakipci.Value;
                if (dto.BildirimYorumlar.HasValue)
                    ayarlar.BildirimYorumlar = dto.BildirimYorumlar.Value;
                if (dto.BildirimBegeniler.HasValue)
                    ayarlar.BildirimBegeniler = dto.BildirimBegeniler.Value;
                if (dto.BildirimOneriler.HasValue)
                    ayarlar.BildirimOneriler = dto.BildirimOneriler.Value;
                if (dto.BildirimEmail.HasValue)
                    ayarlar.BildirimEmail = dto.BildirimEmail.Value;
                if (dto.ProfilGizli.HasValue)
                    ayarlar.ProfilGizli = dto.ProfilGizli.Value;
                if (dto.AktiviteGizli.HasValue)
                    ayarlar.AktiviteGizli = dto.AktiviteGizli.Value;
                if (!string.IsNullOrEmpty(dto.Tema))
                    ayarlar.Tema = dto.Tema;
                if (!string.IsNullOrEmpty(dto.Dil))
                    ayarlar.Dil = dto.Dil;
                
                ayarlar.GuncellemeZamani = DateTime.UtcNow;
                
                await _context.SaveChangesAsync();
                
                return Ok(new KullaniciAyarlariDto
                {
                    BildirimYeniTakipci = ayarlar.BildirimYeniTakipci,
                    BildirimYorumlar = ayarlar.BildirimYorumlar,
                    BildirimBegeniler = ayarlar.BildirimBegeniler,
                    BildirimOneriler = ayarlar.BildirimOneriler,
                    BildirimEmail = ayarlar.BildirimEmail,
                    ProfilGizli = ayarlar.ProfilGizli,
                    AktiviteGizli = ayarlar.AktiviteGizli,
                    Tema = ayarlar.Tema,
                    Dil = ayarlar.Dil
                });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Ayarlar gÃ¼ncellenirken hata");
                return StatusCode(500, new { message = "Ayarlar gÃ¼ncellenirken bir hata oluÅŸtu." });
            }
        }

        // PUT: api/ayarlar/bildirimler
        // Bildirim ayarlarÄ±nÄ± toplu gÃ¼ncelle
        [HttpPut("bildirimler")]
        [Authorize]
        public async Task<ActionResult> UpdateBildirimAyarlari([FromBody] KullaniciAyarlariGuncelleDto dto)
        {
            try
            {
                var currentUserId = GetCurrentUserId();
                
                var ayarlar = await _context.KullaniciAyarlari
                    .FirstOrDefaultAsync(a => a.KullaniciId == currentUserId);
                
                if (ayarlar == null)
                {
                    ayarlar = new KullaniciAyarlari
                    {
                        KullaniciId = currentUserId,
                        OlusturulmaZamani = DateTime.UtcNow
                    };
                    _context.KullaniciAyarlari.Add(ayarlar);
                }
                
                if (dto.BildirimYeniTakipci.HasValue)
                    ayarlar.BildirimYeniTakipci = dto.BildirimYeniTakipci.Value;
                if (dto.BildirimYorumlar.HasValue)
                    ayarlar.BildirimYorumlar = dto.BildirimYorumlar.Value;
                if (dto.BildirimBegeniler.HasValue)
                    ayarlar.BildirimBegeniler = dto.BildirimBegeniler.Value;
                if (dto.BildirimOneriler.HasValue)
                    ayarlar.BildirimOneriler = dto.BildirimOneriler.Value;
                if (dto.BildirimEmail.HasValue)
                    ayarlar.BildirimEmail = dto.BildirimEmail.Value;
                
                ayarlar.GuncellemeZamani = DateTime.UtcNow;
                
                await _context.SaveChangesAsync();
                
                return Ok(new { message = "Bildirim ayarlarÄ± gÃ¼ncellendi" });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Bildirim ayarlarÄ± gÃ¼ncellenirken hata");
                return StatusCode(500, new { message = "Bildirim ayarlarÄ± gÃ¼ncellenirken bir hata oluÅŸtu." });
            }
        }

        // PUT: api/ayarlar/gizlilik
        // Gizlilik ayarlarÄ±nÄ± toplu gÃ¼ncelle
        [HttpPut("gizlilik")]
        [Authorize]
        public async Task<ActionResult> UpdateGizlilikAyarlari([FromBody] KullaniciAyarlariGuncelleDto dto)
        {
            try
            {
                var currentUserId = GetCurrentUserId();
                
                var ayarlar = await _context.KullaniciAyarlari
                    .FirstOrDefaultAsync(a => a.KullaniciId == currentUserId);
                
                if (ayarlar == null)
                {
                    ayarlar = new KullaniciAyarlari
                    {
                        KullaniciId = currentUserId,
                        OlusturulmaZamani = DateTime.UtcNow
                    };
                    _context.KullaniciAyarlari.Add(ayarlar);
                }
                
                if (dto.ProfilGizli.HasValue)
                    ayarlar.ProfilGizli = dto.ProfilGizli.Value;
                if (dto.AktiviteGizli.HasValue)
                    ayarlar.AktiviteGizli = dto.AktiviteGizli.Value;
                
                ayarlar.GuncellemeZamani = DateTime.UtcNow;
                
                await _context.SaveChangesAsync();
                
                return Ok(new { message = "Gizlilik ayarlarÄ± gÃ¼ncellendi" });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "GiriÅŸ yapmanÄ±z gerekiyor" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Gizlilik ayarlarÄ± gÃ¼ncellenirken hata");
                return StatusCode(500, new { message = "Gizlilik ayarlarÄ± gÃ¼ncellenirken bir hata oluÅŸtu." });
            }
        }
    }
}


========== Saga.Server\Controllers\BaseApiController.cs ==========

using Microsoft.AspNetCore.Mvc;
using System.Security.Claims;

namespace Saga.Server.Controllers
{
    [ApiController]
    public abstract class BaseApiController : ControllerBase
    {
        protected Guid GetCurrentUserId()
        {
            var userIdClaim = User.FindFirst(ClaimTypes.NameIdentifier)?.Value
                              ?? User.FindFirst("sub")?.Value;

            if (string.IsNullOrEmpty(userIdClaim) || !Guid.TryParse(userIdClaim, out var userId))
            {
                throw new UnauthorizedAccessException("KullanÄ±cÄ± kimliÄŸi doÄŸrulanamadÄ±.");
            }

            return userId;
        }

        protected Guid? GetCurrentUserIdOrNull()
        {
            var userIdClaim = User.FindFirst(ClaimTypes.NameIdentifier)?.Value
                              ?? User.FindFirst("sub")?.Value;

            if (Guid.TryParse(userIdClaim, out var userId))
            {
                return userId;
            }

            return null;
        }
    }
}


========== Saga.Server\Controllers\BildirimController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    [Authorize]
    public class BildirimController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<BildirimController> _logger;

        public BildirimController(SagaDbContext context, ILogger<BildirimController> logger)
        {
            _context = context;
            _logger = logger;
        }

        // GET: api/bildirim
        [HttpGet]
    public async Task<ActionResult<BildirimListResponseDto>> GetBildirimler(
            [FromQuery] int sayfa = 1,
            [FromQuery] int limit = 20)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var bildirimler = await _context.Bildirimler
                    .Where(b => b.AliciId == kullaniciId && !b.Silindi)
                    .OrderByDescending(b => b.OlusturulmaZamani)
                    .Skip((sayfa - 1) * limit)
                    .Take(limit)
                    .Include(b => b.Gonderen)
                    .ToListAsync();

                var toplamSayisi = await _context.Bildirimler
                    .Where(b => b.AliciId == kullaniciId && !b.Silindi)
                    .CountAsync();

                var response = new BildirimListResponseDto
                {
                    Bildirimler = bildirimler.Select(b => new BildirimDto
                    {
                        Id = b.Id,
                        Tip = b.Tip,
                        Baslik = b.Baslik,
                        Mesaj = b.Mesaj,
                        LinkUrl = b.LinkUrl,
                        Okundu = b.Okundu,
                        OlusturulmaZamani = b.OlusturulmaZamani,
                        Gonderen = b.Gonderen == null ? null : new BildirimKullaniciDto
                        {
                            Id = b.Gonderen.Id,
                            KullaniciAdi = b.Gonderen.KullaniciAdi,
                            AvatarUrl = b.Gonderen.AvatarUrl
                        }
                    }).ToList(),
                    ToplamSayisi = toplamSayisi,
                    Sayfa = sayfa,
                    ToplamSayfa = (int)Math.Ceiling(toplamSayisi / (double)limit)
                };

                return Ok(response);
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "Yetkisiz eriÅŸim" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Bildirimler getirilirken hata oluÅŸtu");
                return StatusCode(500, new { message = "Bildirimler getirilirken bir hata oluÅŸtu" });
            }
        }

        // GET: api/bildirim/okunmamis
        [HttpGet("okunmamis")]
    public async Task<ActionResult<OkunmamisBildirimlerResponseDto>> GetOkunmamisBildirimler()
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var bildirimler = await _context.Bildirimler
                    .Where(b => b.AliciId == kullaniciId && !b.Okundu && !b.Silindi)
                    .OrderByDescending(b => b.OlusturulmaZamani)
                    .Include(b => b.Gonderen)
                    .ToListAsync();

                var okunmamisSayisi = bildirimler.Count;

                var response = new OkunmamisBildirimlerResponseDto
                {
                    Bildirimler = bildirimler.Select(b => new BildirimDto
                    {
                        Id = b.Id,
                        Tip = b.Tip,
                        Baslik = b.Baslik,
                        Mesaj = b.Mesaj,
                        LinkUrl = b.LinkUrl,
                        Okundu = b.Okundu,
                        OlusturulmaZamani = b.OlusturulmaZamani,
                        Gonderen = b.Gonderen == null ? null : new BildirimKullaniciDto
                        {
                            Id = b.Gonderen.Id,
                            KullaniciAdi = b.Gonderen.KullaniciAdi,
                            AvatarUrl = b.Gonderen.AvatarUrl
                        }
                    }).ToList(),
                    OkunmamisSayisi = okunmamisSayisi
                };

                return Ok(response);
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "Yetkisiz eriÅŸim" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "OkunmamÄ±ÅŸ bildirimler getirilirken hata oluÅŸtu");
                return StatusCode(500, new { message = "Bildirimler getirilirken bir hata oluÅŸtu" });
            }
        }

        // GET: api/bildirim/sayisi
        [HttpGet("sayisi")]
    public async Task<ActionResult<OkunmamisSayisiDto>> GetOkunmamisSayisi()
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var okunmamisSayisi = await _context.Bildirimler
                    .Where(b => b.AliciId == kullaniciId && !b.Okundu && !b.Silindi)
                    .CountAsync();

                return Ok(new OkunmamisSayisiDto { OkunmamisSayisi = okunmamisSayisi });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "Yetkisiz eriÅŸim" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "OkunmamÄ±ÅŸ bildirim sayÄ±sÄ± alÄ±nÄ±rken hata oluÅŸtu");
                return StatusCode(500, new { message = "Bildirim sayÄ±sÄ± alÄ±nÄ±rken bir hata oluÅŸtu" });
            }
        }

        // POST: api/bildirim/{id}/okundu
        [HttpPost("{id}/okundu")]
    public async Task<ActionResult<BildirimIslemSonucDto>> BildirimeOkunduIsaretle(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var bildirim = await _context.Bildirimler
                    .FirstOrDefaultAsync(b => b.Id == id && b.AliciId == kullaniciId);

                if (bildirim == null)
                {
                    return NotFound(new { message = "Bildirim bulunamadÄ±" });
                }

                bildirim.Okundu = true;
                await _context.SaveChangesAsync();

                return Ok(new BildirimIslemSonucDto { Message = "Bildirim okundu olarak iÅŸaretlendi" });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "Yetkisiz eriÅŸim" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Bildirim okundu iÅŸaretlenirken hata oluÅŸtu: {BildirimId}", id);
                return StatusCode(500, new { message = "Bildirim gÃ¼ncellenirken bir hata oluÅŸtu" });
            }
        }

        // POST: api/bildirim/tumunu-okundu-isaretle
        [HttpPost("tumunu-okundu-isaretle")]
    public async Task<ActionResult<BildirimIslemSonucDto>> TumunuOkunduIsaretle()
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                await _context.Bildirimler
                    .Where(b => b.AliciId == kullaniciId && !b.Okundu && !b.Silindi)
                    .ExecuteUpdateAsync(b => b.SetProperty(x => x.Okundu, true));

                return Ok(new BildirimIslemSonucDto { Message = "TÃ¼m bildirimler okundu olarak iÅŸaretlendi" });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "Yetkisiz eriÅŸim" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TÃ¼m bildirimler okundu iÅŸaretlenirken hata oluÅŸtu");
                return StatusCode(500, new { message = "Bildirimler gÃ¼ncellenirken bir hata oluÅŸtu" });
            }
        }

        // DELETE: api/bildirim/{id}
        [HttpDelete("{id}")]
    public async Task<ActionResult<BildirimIslemSonucDto>> BildirimSil(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var bildirim = await _context.Bildirimler
                    .FirstOrDefaultAsync(b => b.Id == id && b.AliciId == kullaniciId);

                if (bildirim == null)
                {
                    return NotFound(new { message = "Bildirim bulunamadÄ±" });
                }

                bildirim.Silindi = true;
                await _context.SaveChangesAsync();

                return Ok(new BildirimIslemSonucDto { Message = "Bildirim silindi" });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "Yetkisiz eriÅŸim" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Bildirim silinirken hata oluÅŸtu: {BildirimId}", id);
                return StatusCode(500, new { message = "Bildirim silinirken bir hata oluÅŸtu" });
            }
        }

        // DELETE: api/bildirim/tumunu-sil
        [HttpDelete("tumunu-sil")]
    public async Task<ActionResult<BildirimIslemSonucDto>> TumBildirimleriSil()
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                await _context.Bildirimler
                    .Where(b => b.AliciId == kullaniciId && !b.Silindi)
                    .ExecuteUpdateAsync(b => b.SetProperty(x => x.Silindi, true));

                return Ok(new BildirimIslemSonucDto { Message = "TÃ¼m bildirimler silindi" });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "Yetkisiz eriÅŸim" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TÃ¼m bildirimler silinirken hata oluÅŸtu");
                return StatusCode(500, new { message = "Bildirimler silinirken bir hata oluÅŸtu" });
            }
        }

        // DELETE: api/bildirim/duplicateleri-temizle - VeritabanÄ±ndaki duplicate bildirimleri temizle
        [HttpDelete("duplicateleri-temizle")]
    public async Task<ActionResult<BildirimIslemSonucDto>> DuplicateBildirimleriTemizle()
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                // AynÄ± kullanÄ±cÄ±ya, aynÄ± gÃ¶nderenden, aynÄ± mesaj ve tipte olan bildirimleri bul
                var duplicateler = await _context.Bildirimler
                    .Where(b => b.AliciId == kullaniciId && !b.Silindi)
                    .GroupBy(b => new { b.GonderenId, b.Mesaj, b.Tip })
                    .Where(g => g.Count() > 1)
                    .SelectMany(g => g.OrderByDescending(b => b.OlusturulmaZamani).Skip(1)) // En yeni hariÃ§ hepsini al
                    .ToListAsync();

                if (duplicateler.Any())
                {
                    foreach (var bildirim in duplicateler)
                    {
                        bildirim.Silindi = true;
                    }
                    await _context.SaveChangesAsync();
                }

                return Ok(new BildirimIslemSonucDto { Message = $"{duplicateler.Count} duplicate bildirim temizlendi" });
            }
            catch (UnauthorizedAccessException)
            {
                return Unauthorized(new { message = "Yetkisiz eriÅŸim" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Duplicate bildirimler temizlenirken hata oluÅŸtu");
                return StatusCode(500, new { message = "Bildirimler temizlenirken bir hata oluÅŸtu" });
            }
        }

        // POST: api/bildirim/test (Development only - test bildirimi oluÅŸtur)
        [HttpPost("test")]
        [Authorize(Roles = "yonetici")]
    public async Task<ActionResult<BildirimIslemSonucDto>> TestBildirimiOlustur([FromBody] TestBildirimDto model)
        {
            try
            {
                var gonderen = GetCurrentUserId();

                var bildirim = new Bildirim
                {
                    AliciId = model.AliciId,
                    GonderenId = gonderen,
                    Tip = model.Tip ?? "genel",
                    Baslik = model.Baslik,
                    Mesaj = model.Mesaj,
                    LinkUrl = model.LinkUrl,
                    OlusturulmaZamani = DateTime.UtcNow
                };

                _context.Bildirimler.Add(bildirim);
                await _context.SaveChangesAsync();

                return Ok(new BildirimIslemSonucDto { Message = "Test bildirimi oluÅŸturuldu" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Test bildirimi oluÅŸturulurken hata oluÅŸtu");
                return StatusCode(500, new { message = "Bildirim oluÅŸturulurken bir hata oluÅŸtu" });
            }
        }
    }
}


========== Saga.Server\Controllers\ExternalApiController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Saga.Server.Services;
using Saga.Server.DTOs;
using Saga.Server.Data;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Models;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class ExternalApiController : ControllerBase
    {
        private readonly ITmdbService _tmdbService;
        private readonly IGoogleBooksService _googleBooksService;
        private readonly ILogger<ExternalApiController> _logger;
        private readonly SagaDbContext _context;

        public ExternalApiController(
            ITmdbService tmdbService,
            IGoogleBooksService googleBooksService,
            ILogger<ExternalApiController> logger,
            SagaDbContext context)
        {
            _tmdbService = tmdbService;
            _googleBooksService = googleBooksService;
            _logger = logger;
            _context = context;
        }

        // SAGA veritabanÄ±ndaki iÃ§eriklerle eÅŸleÅŸtirme
        private async Task EnrichWithSagaRatingsAsync(List<TmdbFilmDto> results)
        {
            if (results == null || !results.Any()) return;

            // TMDB ID'lerini topla - veritabanÄ± formatÄ±na Ã§evir
            // Filmler: "123" (prefix yok)
            // Diziler: "tv:123"
            var hariciIdler = results.Select(r => 
            {
                return r.MediaType == "tv" ? $"tv:{r.Id}" : r.Id;
            }).ToList();

            // VeritabanÄ±ndan eÅŸleÅŸen iÃ§erikleri bul
            var sagaIcerikler = await _context.Icerikler
                .Where(i => i.ApiKaynagi == ApiKaynak.tmdb && hariciIdler.Contains(i.HariciId))
                .Select(i => new { i.HariciId, i.Id, i.OrtalamaPuan })
                .ToListAsync();

            // SonuÃ§larla eÅŸleÅŸtir
            foreach (var result in results)
            {
                var hariciId = result.MediaType == "tv" ? $"tv:{result.Id}" : result.Id;
                var sagaIcerik = sagaIcerikler.FirstOrDefault(s => s.HariciId == hariciId);
                if (sagaIcerik != null)
                {
                    result.SagaOrtalamaPuan = sagaIcerik.OrtalamaPuan;
                    result.SagaIcerikId = (int)sagaIcerik.Id;
                }
            }
        }

        // GET: api/externalapi/tmdb/search?q={query}
        [HttpGet("tmdb/search")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> SearchTmdbFilms([FromQuery] string q, [FromQuery] int sayfa = 1)
        {
            if (string.IsNullOrWhiteSpace(q))
            {
                return BadRequest(new { message = "Arama terimi boÅŸ olamaz." });
            }

            var results = await _tmdbService.SearchFilmsAsync(q, sayfa);
            await EnrichWithSagaRatingsAsync(results);
            return Ok(results);
        }

        // GET: api/externalapi/tmdb/search-tv?q={query}
        [HttpGet("tmdb/search-tv")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> SearchTmdbTvShows([FromQuery] string q, [FromQuery] int sayfa = 1)
        {
            if (string.IsNullOrWhiteSpace(q))
            {
                return BadRequest(new { message = "Arama terimi boÅŸ olamaz." });
            }

            var results = await _tmdbService.SearchTvShowsAsync(q, sayfa);
            await EnrichWithSagaRatingsAsync(results);
            return Ok(results);
        }

        // GET: api/externalapi/tmdb/search-multi?q={query} (Film + Dizi birlikte)
        [HttpGet("tmdb/search-multi")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> SearchTmdbMulti([FromQuery] string q, [FromQuery] int sayfa = 1)
        {
            if (string.IsNullOrWhiteSpace(q))
            {
                return BadRequest(new { message = "Arama terimi boÅŸ olamaz." });
            }

            var results = await _tmdbService.SearchMultiAsync(q, sayfa);
            await EnrichWithSagaRatingsAsync(results);
            return Ok(results);
        }

        // GET: api/externalapi/tmdb/{id}
        [HttpGet("tmdb/{id}")]
        [AllowAnonymous]
        public async Task<ActionResult<TmdbFilmDto>> GetTmdbFilm(string id)
        {
            var film = await _tmdbService.GetFilmByIdAsync(id);
            if (film == null)
            {
                return NotFound(new { message = "Film bulunamadÄ±." });
            }

            return Ok(film);
        }

        // GET: api/externalapi/tmdb/tv/{id}
        [HttpGet("tmdb/tv/{id}")]
        [AllowAnonymous]
        public async Task<ActionResult<TmdbFilmDto>> GetTmdbTvShow(string id)
        {
            var tvShow = await _tmdbService.GetTvShowByIdAsync(id);
            if (tvShow == null)
            {
                return NotFound(new { message = "Dizi bulunamadÄ±." });
            }

            return Ok(tvShow);
        }

        // GET: api/externalapi/tmdb/popular
        [HttpGet("tmdb/popular")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> GetPopularTmdbFilms([FromQuery] int sayfa = 1)
        {
            var films = await _tmdbService.GetPopularFilmsAsync(sayfa);
            await EnrichWithSagaRatingsAsync(films);
            return Ok(films);
        }

        // GET: api/externalapi/tmdb/popular-tv
        [HttpGet("tmdb/popular-tv")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> GetPopularTmdbTvShows([FromQuery] int sayfa = 1)
        {
            var shows = await _tmdbService.GetPopularTvShowsAsync(sayfa);
            await EnrichWithSagaRatingsAsync(shows);
            return Ok(shows);
        }

        // GET: api/externalapi/tmdb/top-rated
        [HttpGet("tmdb/top-rated")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> GetTopRatedTmdbFilms([FromQuery] int sayfa = 1)
        {
            var films = await _tmdbService.GetTopRatedFilmsAsync(sayfa);
            await EnrichWithSagaRatingsAsync(films);
            return Ok(films);
        }

        // GET: api/externalapi/tmdb/top-rated-tv
        [HttpGet("tmdb/top-rated-tv")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> GetTopRatedTmdbTvShows([FromQuery] int sayfa = 1)
        {
            var shows = await _tmdbService.GetTopRatedTvShowsAsync(sayfa);
            await EnrichWithSagaRatingsAsync(shows);
            return Ok(shows);
        }

        // GET: api/externalapi/tmdb/now-playing (Vizyondakiler)
        [HttpGet("tmdb/now-playing")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> GetNowPlayingTmdbFilms([FromQuery] int sayfa = 1)
        {
            var films = await _tmdbService.GetNowPlayingFilmsAsync(sayfa);
            await EnrichWithSagaRatingsAsync(films);
            return Ok(films);
        }

        // GET: api/externalapi/tmdb/on-the-air (YayÄ±ndaki Diziler)
        [HttpGet("tmdb/on-the-air")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> GetOnTheAirTmdbTvShows([FromQuery] int sayfa = 1)
        {
            var shows = await _tmdbService.GetOnTheAirTvShowsAsync(sayfa);
            await EnrichWithSagaRatingsAsync(shows);
            return Ok(shows);
        }

        // GET: api/externalapi/tmdb/trending (Trendler)
        [HttpGet("tmdb/trending")]
        [AllowAnonymous]
        public async Task<ActionResult<List<TmdbFilmDto>>> GetTrendingTmdb(
            [FromQuery] string mediaType = "all", 
            [FromQuery] string timeWindow = "week",
            [FromQuery] int sayfa = 1)
        {
            var results = await _tmdbService.GetTrendingAsync(mediaType, timeWindow, sayfa);
            await EnrichWithSagaRatingsAsync(results);
            return Ok(results);
        }

        // POST: api/externalapi/tmdb/import/{tmdbId}
        [HttpPost("tmdb/import/{tmdbId}")]
        [AllowAnonymous] // GeÃ§ici olarak herkes iÃ§erik ekleyebilir (test iÃ§in)
        public async Task<ActionResult<IcerikDetailDto>> ImportTmdbFilm(string tmdbId)
        {
            try
            {
                var icerik = await _tmdbService.ImportFilmAsync(tmdbId);
                if (icerik == null)
                {
                    return BadRequest(new { message = "Film import edilemedi." });
                }

                var response = new IcerikDetailDto
                {
                    Id = icerik.Id,
                    HariciId = icerik.HariciId,
                    ApiKaynagi = icerik.ApiKaynagi.ToString(),
                    Tur = icerik.Tur.ToString(),
                    Baslik = icerik.Baslik,
                    Aciklama = icerik.Aciklama,
                    PosterUrl = icerik.PosterUrl,
                    YayinTarihi = icerik.YayinTarihi,
                    OrtalamaPuan = icerik.OrtalamaPuan,
                    PuanlamaSayisi = icerik.PuanlamaSayisi,
                    HariciPuan = icerik.HariciPuan,
                    HariciOySayisi = icerik.HariciOySayisi,
                    YorumSayisi = 0,
                    ListeyeEklenmeSayisi = 0,
                    GoruntulemeSayisi = icerik.GoruntulemeSayisi,
                    PopulerlikSkoru = icerik.PopulerlikSkoru,
                    OlusturulmaZamani = icerik.OlusturulmaZamani
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB film import hatasÄ±: {TmdbId}", tmdbId);
                return StatusCode(500, new { message = "Film import edilirken bir hata oluÅŸtu." });
            }
        }

        // POST: api/externalapi/tmdb/import-tv/{tmdbId}
        [HttpPost("tmdb/import-tv/{tmdbId}")]
        [AllowAnonymous] // GeÃ§ici olarak herkes iÃ§erik ekleyebilir (test iÃ§in)
        public async Task<ActionResult<IcerikDetailDto>> ImportTmdbTvShow(string tmdbId)
        {
            try
            {
                var icerik = await _tmdbService.ImportTvShowAsync(tmdbId);
                if (icerik == null)
                {
                    return BadRequest(new { message = "Dizi import edilemedi." });
                }

                var response = new IcerikDetailDto
                {
                    Id = icerik.Id,
                    HariciId = icerik.HariciId,
                    ApiKaynagi = icerik.ApiKaynagi.ToString(),
                    Tur = icerik.Tur.ToString(),
                    Baslik = icerik.Baslik,
                    Aciklama = icerik.Aciklama,
                    PosterUrl = icerik.PosterUrl,
                    YayinTarihi = icerik.YayinTarihi,
                    OrtalamaPuan = icerik.OrtalamaPuan,
                    PuanlamaSayisi = icerik.PuanlamaSayisi,
                    HariciPuan = icerik.HariciPuan,
                    HariciOySayisi = icerik.HariciOySayisi,
                    YorumSayisi = 0,
                    ListeyeEklenmeSayisi = 0,
                    GoruntulemeSayisi = icerik.GoruntulemeSayisi,
                    PopulerlikSkoru = icerik.PopulerlikSkoru,
                    OlusturulmaZamani = icerik.OlusturulmaZamani
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB dizi import hatasÄ±: {TmdbId}", tmdbId);
                return StatusCode(500, new { message = "Dizi import edilirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/externalapi/books/search?q={query}&langRestrict={lang}&filter={filter}
        [HttpGet("books/search")]
        [AllowAnonymous]
        public async Task<ActionResult<GoogleBooksSearchResult>> SearchGoogleBooks(
            [FromQuery] string q, 
            [FromQuery] int baslangic = 0,
            [FromQuery] int limit = 40,
            [FromQuery] string? orderBy = null,
            [FromQuery] string? langRestrict = null,
            [FromQuery] string? filter = null)
        {
            if (string.IsNullOrWhiteSpace(q))
            {
                return BadRequest(new { message = "Arama terimi boÅŸ olamaz." });
            }

            var result = await _googleBooksService.SearchBooksAsync(q, baslangic, limit, orderBy, langRestrict, filter);
            return Ok(result);
        }

        // GET: api/externalapi/books/{id}
        [HttpGet("books/{id}")]
        [AllowAnonymous]
        public async Task<ActionResult<GoogleBookDto>> GetGoogleBook(string id)
        {
            var book = await _googleBooksService.GetBookByIdAsync(id);
            if (book == null)
            {
                return NotFound(new { message = "Kitap bulunamadÄ±." });
            }

            return Ok(book);
        }

        // POST: api/externalapi/books/import/{googleBooksId}
        [HttpPost("books/import/{googleBooksId}")]
        [AllowAnonymous] // GeÃ§ici olarak herkes iÃ§erik ekleyebilir (test iÃ§in)
        public async Task<ActionResult<IcerikDetailDto>> ImportGoogleBook(string googleBooksId)
        {
            try
            {
                var icerik = await _googleBooksService.ImportBookAsync(googleBooksId);
                if (icerik == null)
                {
                    return BadRequest(new { message = "Kitap import edilemedi." });
                }

                var response = new IcerikDetailDto
                {
                    Id = icerik.Id,
                    HariciId = icerik.HariciId,
                    ApiKaynagi = icerik.ApiKaynagi.ToString(),
                    Tur = icerik.Tur.ToString(),
                    Baslik = icerik.Baslik,
                    Aciklama = icerik.Aciklama,
                    PosterUrl = icerik.PosterUrl,
                    YayinTarihi = icerik.YayinTarihi,
                    OrtalamaPuan = icerik.OrtalamaPuan,
                    PuanlamaSayisi = icerik.PuanlamaSayisi,
                    HariciPuan = icerik.HariciPuan,
                    HariciOySayisi = icerik.HariciOySayisi,
                    YorumSayisi = 0,
                    ListeyeEklenmeSayisi = 0,
                    GoruntulemeSayisi = icerik.GoruntulemeSayisi,
                    PopulerlikSkoru = icerik.PopulerlikSkoru,
                    OlusturulmaZamani = icerik.OlusturulmaZamani
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Google Books import hatasÄ±: {GoogleBooksId}", googleBooksId);
                return StatusCode(500, new { message = "Kitap import edilirken bir hata oluÅŸtu." });
            }
        }

        // POST: api/externalapi/tmdb/bulk-import
        [HttpPost("tmdb/bulk-import")]
        [Authorize(Roles = "yonetici,moderator")]
        public async Task<ActionResult> BulkImportTmdbFilms([FromBody] List<string> tmdbIds)
        {
            var imported = 0;
            var failed = 0;

            foreach (var tmdbId in tmdbIds)
            {
                try
                {
                    var result = await _tmdbService.ImportFilmAsync(tmdbId);
                    if (result != null)
                    {
                        imported++;
                    }
                    else
                    {
                        failed++;
                    }
                }
                catch
                {
                    failed++;
                }

                // Rate limiting iÃ§in kÃ¼Ã§Ã¼k bekleme
                await Task.Delay(100);
            }

            return Ok(new
            {
                message = "Toplu import tamamlandÄ±",
                toplam = tmdbIds.Count,
                basarili = imported,
                basarisiz = failed
            });
        }

        // POST: api/externalapi/books/bulk-import
        [HttpPost("books/bulk-import")]
        [Authorize(Roles = "yonetici,moderator")]
        public async Task<ActionResult> BulkImportGoogleBooks([FromBody] List<string> googleBooksIds)
        {
            var imported = 0;
            var failed = 0;

            foreach (var bookId in googleBooksIds)
            {
                try
                {
                    var result = await _googleBooksService.ImportBookAsync(bookId);
                    if (result != null)
                    {
                        imported++;
                    }
                    else
                    {
                        failed++;
                    }
                }
                catch
                {
                    failed++;
                }

                // Rate limiting iÃ§in kÃ¼Ã§Ã¼k bekleme
                await Task.Delay(100);
            }

            return Ok(new
            {
                message = "Toplu import tamamlandÄ±",
                toplam = googleBooksIds.Count,
                basarili = imported,
                basarisiz = failed
            });
        }

    }
}


========== Saga.Server\Controllers\IcerikController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;
using Saga.Server.Services;
using System.Text.Json;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class IcerikController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<IcerikController> _logger;
        private readonly IGoogleBooksService _googleBooksService;

        public IcerikController(SagaDbContext context, ILogger<IcerikController> logger, IGoogleBooksService googleBooksService)
        {
            _context = context;
            _logger = logger;
            _googleBooksService = googleBooksService;
        }

        // GET: api/icerik/{id}
        [HttpGet("{id}")]
        public async Task<ActionResult<IcerikDetailDto>> GetIcerik(long id)
        {
            var icerik = await _context.Icerikler
                .FirstOrDefaultAsync(i => i.Id == id);

            if (icerik == null)
            {
                return NotFound(new { message = "Ä°Ã§erik bulunamadÄ±." });
            }

            // Kitap tÃ¼rÃ¼nde ve aÃ§Ä±klama boÅŸsa, Google Books API'den Ã§ekmeyi dene
            if (icerik.Tur == IcerikTuru.kitap && 
                string.IsNullOrEmpty(icerik.Aciklama) && 
                icerik.ApiKaynagi == ApiKaynak.google_books)
            {
                try
                {
                    string? aciklama = null;
                    
                    // Ã–nce mevcut harici ID ile dene
                    if (!string.IsNullOrEmpty(icerik.HariciId))
                    {
                        var bookDto = await _googleBooksService.GetBookByIdAsync(icerik.HariciId);
                        if (bookDto != null && !string.IsNullOrEmpty(bookDto.Aciklama))
                        {
                            aciklama = bookDto.Aciklama;
                        }
                    }
                    
                    // Harici ID'den aÃ§Ä±klama gelmezse, aynÄ± baÅŸlÄ±k/yazar ile arama yap
                    if (string.IsNullOrEmpty(aciklama))
                    {
                        // Meta veriden yazarÄ± al
                        string? yazar = null;
                        if (!string.IsNullOrEmpty(icerik.MetaVeri))
                        {
                            try
                            {
                                var metaDoc = System.Text.Json.JsonDocument.Parse(icerik.MetaVeri);
                                if (metaDoc.RootElement.TryGetProperty("yazarlar", out var yazarlar) && 
                                    yazarlar.ValueKind == System.Text.Json.JsonValueKind.Array &&
                                    yazarlar.GetArrayLength() > 0)
                                {
                                    yazar = yazarlar[0].GetString();
                                }
                            }
                            catch { }
                        }
                        
                        aciklama = await _googleBooksService.FindDescriptionForBookAsync(icerik.Baslik, yazar);
                    }
                    
                    if (!string.IsNullOrEmpty(aciklama))
                    {
                        icerik.Aciklama = aciklama;
                        await _context.SaveChangesAsync();
                        _logger.LogInformation("ğŸ“š Kitap aÃ§Ä±klamasÄ± API'den gÃ¼ncellendi: {Baslik} (ID: {Id})", icerik.Baslik, icerik.Id);
                    }
                }
                catch (Exception ex)
                {
                    _logger.LogWarning(ex, "Kitap aÃ§Ä±klamasÄ± API'den alÄ±namadÄ±: {Baslik}", icerik.Baslik);
                }
            }

            var kullaniciId = GetCurrentUserIdOrNull();

            // Ä°statistikler zaten Icerik tablosunda trigger ile gÃ¼ncelleniyor, tekrar saymaya gerek yok.
            // var yorumSayisi = await _context.Yorumlar.CountAsync(y => y.IcerikId == id && !y.Silindi);
            // var listeyeEklenmeSayisi = await _context.ListeIcerikleri.CountAsync(li => li.IcerikId == id);

            // OyuncularÄ± tablodan Ã§ek
            var oyuncular = await _context.IcerikOyunculari
                .Include(io => io.Oyuncu)
                .Where(io => io.IcerikId == id)
                .OrderBy(io => io.Sira)
                .Select(io => new OyuncuInfoDto
                {
                    Id = io.Oyuncu.Id,
                    HariciId = io.Oyuncu.HariciId,
                    Ad = io.Oyuncu.Ad,
                    Karakter = io.Karakter,
                    ProfilUrl = io.Oyuncu.ProfilUrl,
                    RolTipi = io.RolTipi
                })
                .ToListAsync();

            // YÃ¶netmeni bul (RolTipi = yonetmen)
            var yonetmenler = oyuncular.Where(o => o.RolTipi == "yonetmen").ToList();
            var oyuncuListesi = oyuncular.Where(o => o.RolTipi == "oyuncu").ToList();

            // KullanÄ±cÄ±nÄ±n puanÄ± ve durumu
            decimal? kullaniciPuani = null;
            string? kullanicininDurumu = null;

            if (kullaniciId.HasValue)
            {
                var puanlama = await _context.Puanlamalar
                    .FirstOrDefaultAsync(p => p.KullaniciId == kullaniciId.Value && p.IcerikId == id && !p.Silindi);
                kullaniciPuani = puanlama?.Puan;

                var kutuphaneDurum = await _context.KutuphaneDurumlari
                    .FirstOrDefaultAsync(k => k.KullaniciId == kullaniciId.Value && k.IcerikId == id && !k.Silindi);
                kullanicininDurumu = kutuphaneDurum?.Durum.ToString();

                // GÃ¶rÃ¼ntÃ¼leme sayÄ±sÄ±nÄ± artÄ±r
                icerik.GoruntulemeSayisi++;
                await _context.SaveChangesAsync();
            }

            var response = new IcerikDetailDto
            {
                Id = icerik.Id,
                HariciId = icerik.HariciId,
                ApiKaynagi = icerik.ApiKaynagi.ToString(),
                Tur = icerik.Tur.ToString(),
                Baslik = icerik.Baslik,
                Aciklama = icerik.Aciklama,
                PosterUrl = icerik.PosterUrl,
                YayinTarihi = icerik.YayinTarihi,
                OrtalamaPuan = icerik.OrtalamaPuan,
                PuanlamaSayisi = icerik.PuanlamaSayisi,
                HariciPuan = icerik.HariciPuan,
                HariciOySayisi = icerik.HariciOySayisi,
                YorumSayisi = icerik.YorumSayisi,
                ListeyeEklenmeSayisi = icerik.ListeyeEklenmeSayisi,
                GoruntulemeSayisi = icerik.GoruntulemeSayisi,
                PopulerlikSkoru = icerik.PopulerlikSkoru,
                OlusturulmaZamani = icerik.OlusturulmaZamani,
                KullaniciPuani = kullaniciPuani,
                KullanicininDurumu = kullanicininDurumu,
                Oyuncular = oyuncuListesi.Any() ? oyuncuListesi : null,
                Yonetmen = yonetmenler.FirstOrDefault()?.Ad
            };

            // Meta veriyi parse et (tÃ¼rler, sÃ¼re vs. iÃ§in)
            if (!string.IsNullOrEmpty(icerik.MetaVeri) && icerik.MetaVeri != "{}")
            {
                try
                {
                    var metaDoc = JsonDocument.Parse(icerik.MetaVeri);
                    var root = metaDoc.RootElement;

                    // EÄŸer tablodan yÃ¶netmen bulunamadÄ±ysa, meta veriden al
                    if (string.IsNullOrEmpty(response.Yonetmen) && 
                        root.TryGetProperty("yonetmen", out var yonetmen) && yonetmen.ValueKind != JsonValueKind.Null)
                    {
                        response.Yonetmen = yonetmen.GetString();
                    }

                    // EÄŸer tablodan oyuncu bulunamadÄ±ysa, meta veriden al (eski veriler iÃ§in)
                    if ((response.Oyuncular == null || !response.Oyuncular.Any()) &&
                        root.TryGetProperty("oyuncular", out var oyuncularJson) && oyuncularJson.ValueKind == JsonValueKind.Array)
                    {
                        response.Oyuncular = new List<OyuncuInfoDto>();
                        foreach (var oyuncu in oyuncularJson.EnumerateArray())
                        {
                            response.Oyuncular.Add(new OyuncuInfoDto
                            {
                                Ad = oyuncu.TryGetProperty("ad", out var ad) ? ad.GetString() ?? "" : "",
                                Karakter = oyuncu.TryGetProperty("karakter", out var karakter) ? karakter.GetString() : null,
                                ProfilUrl = oyuncu.TryGetProperty("profilUrl", out var profil) ? profil.GetString() : null
                            });
                        }
                    }

                    if (root.TryGetProperty("turler", out var turler) && turler.ValueKind == JsonValueKind.Array)
                    {
                        response.Turler = new List<string>();
                        foreach (var tur in turler.EnumerateArray())
                        {
                            var turStr = tur.GetString();
                            if (!string.IsNullOrEmpty(turStr))
                            {
                                response.Turler.Add(turStr);
                            }
                        }
                    }

                    if (root.TryGetProperty("sure", out var sure) && sure.ValueKind == JsonValueKind.Number)
                    {
                        response.Sure = sure.GetInt32();
                    }

                    if (root.TryGetProperty("sezonSayisi", out var sezon) && sezon.ValueKind == JsonValueKind.Number)
                    {
                        response.SezonSayisi = sezon.GetInt32();
                    }

                    if (root.TryGetProperty("bolumSayisi", out var bolum) && bolum.ValueKind == JsonValueKind.Number)
                    {
                        response.BolumSayisi = bolum.GetInt32();
                    }

                    // Kitap meta verileri
                    if (root.TryGetProperty("yazarlar", out var yazarlar) && yazarlar.ValueKind == JsonValueKind.Array)
                    {
                        response.Yazarlar = new List<string>();
                        foreach (var yazar in yazarlar.EnumerateArray())
                        {
                            var yazarStr = yazar.GetString();
                            if (!string.IsNullOrEmpty(yazarStr))
                            {
                                response.Yazarlar.Add(yazarStr);
                            }
                        }
                    }

                    if (root.TryGetProperty("sayfaSayisi", out var sayfa) && sayfa.ValueKind == JsonValueKind.Number)
                    {
                        response.SayfaSayisi = sayfa.GetInt32();
                    }

                    if (root.TryGetProperty("yayinevi", out var yayinevi) && yayinevi.ValueKind != JsonValueKind.Null)
                    {
                        response.Yayinevi = yayinevi.GetString();
                    }

                    if (root.TryGetProperty("isbn", out var isbn) && isbn.ValueKind != JsonValueKind.Null)
                    {
                        response.ISBN = isbn.GetString();
                    }

                    if (root.TryGetProperty("kategoriler", out var kategoriler) && kategoriler.ValueKind == JsonValueKind.Array)
                    {
                        response.Kategoriler = new List<string>();
                        foreach (var kategori in kategoriler.EnumerateArray())
                        {
                            var kategoriStr = kategori.GetString();
                            if (!string.IsNullOrEmpty(kategoriStr))
                            {
                                response.Kategoriler.Add(kategoriStr);
                            }
                        }
                    }
                }
                catch (JsonException ex)
                {
                    _logger.LogWarning(ex, "Meta veri parse edilemedi: IcerikId={IcerikId}", id);
                }
            }

            // Tip dÃ¼zeltmesi: Metadata'ya gÃ¶re iÃ§erik tipini dÃ¼zelt
            if ((response.SezonSayisi > 0 || response.BolumSayisi > 0) && response.Tur != "Dizi")
            {
                response.Tur = "Dizi";
            }
            else if (response.SayfaSayisi > 0 && response.Tur != "Kitap")
            {
                response.Tur = "Kitap";
            }
            else if (response.Sure > 0 && response.SezonSayisi == null && response.BolumSayisi == null && response.Tur != "Film")
            {
                response.Tur = "Film";
            }

            return Ok(response);
        }

        // GET: api/icerik/ara?q={query}
        // PostgreSQL Full-Text Search ile geliÅŸmiÅŸ arama
        [HttpGet("ara")]
        public async Task<ActionResult<List<IcerikSearchDto>>> SearchIcerik(
            [FromQuery] string q,
            [FromQuery] string? tur = null,
            [FromQuery] int sayfa = 1,
            [FromQuery] int limit = 20)
        {
            if (string.IsNullOrWhiteSpace(q) || q.Length < 2)
            {
                return BadRequest(new { message = "Arama terimi en az 2 karakter olmalÄ±dÄ±r." });
            }

            try
            {
                // PostgreSQL Full-Text Search kullan
                var searchQuery = @"
                    SELECT i.* 
                    FROM icerikler i
                    WHERE i.arama_vektoru @@ plainto_tsquery('turkish', {0})
                    ORDER BY ts_rank(i.arama_vektoru, plainto_tsquery('turkish', {0})) DESC
                    LIMIT {1} OFFSET {2}";

                var countQuery = @"
                    SELECT COUNT(*)
                    FROM icerikler i
                    WHERE i.arama_vektoru @@ plainto_tsquery('turkish', {0})";

                var offset = (sayfa - 1) * limit;

                var icerikler = await _context.Icerikler
                    .FromSqlRaw(searchQuery, q, limit, offset)
                    .AsNoTracking()
                    .ToListAsync();

                // TÃ¼r filtresi (PostgreSQL'den geldikten sonra)
                if (!string.IsNullOrEmpty(tur) && Enum.TryParse<IcerikTuru>(tur, true, out var turEnum))
                {
                    icerikler = icerikler.Where(i => i.Tur == turEnum).ToList();
                }

                var toplam = await _context.Icerikler
                    .FromSqlRaw(countQuery, q)
                    .CountAsync();

                var response = icerikler.Select(i => new IcerikSearchDto
                {
                    Id = i.Id,
                    Baslik = i.Baslik,
                    Tur = i.Tur.ToString(),
                    PosterUrl = i.PosterUrl,
                    OrtalamaPuan = i.OrtalamaPuan,
                    HariciPuan = i.HariciPuan,
                    YayinTarihi = i.YayinTarihi,
                    Aciklama = i.Aciklama != null && i.Aciklama.Length > 200
                        ? i.Aciklama.Substring(0, 200) + "..."
                        : i.Aciklama
                }).ToList();

                Response.Headers.Append("X-Toplam-Sayfa", ((toplam + limit - 1) / limit).ToString());
                Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Full-text search hatasÄ±, fallback'e geÃ§iliyor");

                // Fallback: Normal LIKE sorgusu
                var query = _context.Icerikler
                    .Where(i => i.Baslik.Contains(q) || (i.Aciklama != null && i.Aciklama.Contains(q)))
                    .AsNoTracking();

                if (!string.IsNullOrEmpty(tur) && Enum.TryParse<IcerikTuru>(tur, true, out var turEnum))
                {
                    query = query.Where(i => i.Tur == turEnum);
                }

                var toplam = await query.CountAsync();
                var icerikler = await query
                    .OrderByDescending(i => i.PopulerlikSkoru)
                    .Skip((sayfa - 1) * limit)
                    .Take(limit)
                    .ToListAsync();

                var response = icerikler.Select(i => new IcerikSearchDto
                {
                    Id = i.Id,
                    Baslik = i.Baslik,
                    Tur = i.Tur.ToString(),
                    PosterUrl = i.PosterUrl,
                    OrtalamaPuan = i.OrtalamaPuan,
                    HariciPuan = i.HariciPuan,
                    YayinTarihi = i.YayinTarihi,
                    Aciklama = i.Aciklama != null && i.Aciklama.Length > 200
                        ? i.Aciklama.Substring(0, 200) + "..."
                        : i.Aciklama
                }).ToList();

                Response.Headers.Append("X-Toplam-Sayfa", ((toplam + limit - 1) / limit).ToString());
                Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());

                return Ok(response);
            }
        }

        // GET: api/icerik/filtrele
        // Proje Ä°steri 2.1.3: GeliÅŸmiÅŸ Filtreleme (TÃ¼r, YÄ±l, Puan)
        [HttpGet("filtrele")]
        public async Task<ActionResult<List<IcerikListDto>>> FiltreliIcerikler(
            [FromQuery] string? tur = null,
            [FromQuery] int? yil = null,
            [FromQuery] decimal? minPuan = null,
            [FromQuery] decimal? maxPuan = null,
            [FromQuery] int sayfa = 1,
            [FromQuery] int limit = 50)
        {
            var query = _context.Icerikler.AsNoTracking();

            // TÃ¼r filtresi
            if (!string.IsNullOrEmpty(tur) && Enum.TryParse<IcerikTuru>(tur, true, out var turEnum))
            {
                query = query.Where(i => i.Tur == turEnum);
            }

            // YÄ±l filtresi
            if (yil.HasValue)
            {
                query = query.Where(i => i.YayinTarihi.HasValue && i.YayinTarihi.Value.Year == yil.Value);
            }

            // Puan filtresi
            if (minPuan.HasValue)
            {
                query = query.Where(i => i.OrtalamaPuan >= minPuan.Value);
            }

            if (maxPuan.HasValue)
            {
                query = query.Where(i => i.OrtalamaPuan <= maxPuan.Value);
            }

            var toplam = await query.CountAsync();
            var icerikler = await query
                .OrderByDescending(i => i.PopulerlikSkoru)
                .Skip((sayfa - 1) * limit)
                .Take(limit)
                .ToListAsync();

            var response = icerikler.Select(CreateIcerikListDtoWithMeta).ToList();

            Response.Headers.Append("X-Toplam-Sayfa", ((toplam + limit - 1) / limit).ToString());
            Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());

            return Ok(response);
        }

        // GET: api/icerik/en-yuksek-puanlilar
        // Proje Ä°steri 2.1.3: En YÃ¼ksek PuanlÄ±lar Vitrini
        [HttpGet("en-yuksek-puanlilar")]
        public async Task<ActionResult<List<IcerikListDto>>> GetEnYuksekPuanlilar(
            [FromQuery] string? tur = null,
            [FromQuery] int limit = 20)
        {
            var query = _context.Icerikler
                .Where(i => i.PuanlamaSayisi >= 5)  // En az 5 puan almÄ±ÅŸ olmalÄ±
                .AsNoTracking();

            // TÃ¼r filtresi
            if (!string.IsNullOrEmpty(tur) && Enum.TryParse<IcerikTuru>(tur, true, out var turEnum))
            {
                query = query.Where(i => i.Tur == turEnum);
            }

            var icerikler = await query
                .OrderByDescending(i => i.OrtalamaPuan)
                .ThenByDescending(i => i.PuanlamaSayisi)
                .Take(limit)
                .ToListAsync();

            var response = icerikler.Select(CreateIcerikListDtoWithMeta).ToList();

            return Ok(response);
        }

        // GET: api/icerik/populer
        [HttpGet("populer")]
        public async Task<ActionResult<List<IcerikListDto>>> GetPopulerIcerikler(
            [FromQuery] string? tur = null,
            [FromQuery] int limit = 20)
        {
            var query = _context.Icerikler.AsNoTracking();

            // TÃ¼r filtresi
            if (!string.IsNullOrEmpty(tur) && Enum.TryParse<IcerikTuru>(tur, true, out var turEnum))
            {
                query = query.Where(i => i.Tur == turEnum);
            }

            var icerikler = await query
                .OrderByDescending(i => i.PopulerlikSkoru)
                .Take(limit)
                .ToListAsync();

            var response = icerikler.Select(CreateIcerikListDtoWithMeta).ToList();

            return Ok(response);
        }

        // GET: api/icerik/yeni
        [HttpGet("yeni")]
        public async Task<ActionResult<List<IcerikListDto>>> GetYeniIcerikler(
            [FromQuery] string? tur = null,
            [FromQuery] int limit = 20)
        {
            var query = _context.Icerikler.AsNoTracking();

            // TÃ¼r filtresi
            if (!string.IsNullOrEmpty(tur) && Enum.TryParse<IcerikTuru>(tur, true, out var turEnum))
            {
                query = query.Where(i => i.Tur == turEnum);
            }

            var icerikler = await query
                .OrderByDescending(i => i.YayinTarihi ?? DateOnly.MinValue)
                .ThenByDescending(i => i.OlusturulmaZamani)
                .Take(limit)
                .ToListAsync();

            var response = icerikler.Select(CreateIcerikListDtoWithMeta).ToList();

            return Ok(response);
        }

        // GET: api/icerik/onerilenler
        [HttpGet("onerilenler")]
        [Authorize]
        public async Task<ActionResult<List<IcerikListDto>>> GetOnerilenler([FromQuery] int limit = 20)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                // KullanÄ±cÄ±nÄ±n puanladÄ±ÄŸÄ± iÃ§eriklerin tÃ¼rlerini al
                var kullaniciPuanlamalari = await _context.Puanlamalar
                    .Include(p => p.Icerik)
                    .Where(p => p.KullaniciId == kullaniciId && !p.Silindi)
                    .AsNoTracking()
                    .ToListAsync();

                if (!kullaniciPuanlamalari.Any())
                {
                    // Puanlama yoksa, popÃ¼ler iÃ§erikleri dÃ¶ndÃ¼r
                    return await GetPopulerIcerikler(null, limit);
                }

                // KullanÄ±cÄ±nÄ±n ortalama puanÄ±ndan yÃ¼ksek verdiÄŸi iÃ§erikler
                var ortPuan = kullaniciPuanlamalari.Average(p => p.Puan);
                var begenilenTurler = kullaniciPuanlamalari
                    .Where(p => p.Puan >= ortPuan)
                    .Select(p => p.Icerik.Tur)
                    .Distinct()
                    .ToList();

                // KullanÄ±cÄ±nÄ±n zaten puanladÄ±ÄŸÄ± iÃ§erik ID'leri
                var puanlananIcerikIds = kullaniciPuanlamalari.Select(p => p.IcerikId).ToList();

                // BeÄŸenilen tÃ¼rlerden, henÃ¼z puanlanmamÄ±ÅŸ, yÃ¼ksek puanlÄ± iÃ§erikler
                var oneriler = await _context.Icerikler
                    .Where(i => begenilenTurler.Contains(i.Tur) &&
                                !puanlananIcerikIds.Contains(i.Id) &&
                                i.PuanlamaSayisi >= 5 &&
                                i.OrtalamaPuan >= 7.0m)
                    .OrderByDescending(i => i.PopulerlikSkoru)
                    .Take(limit)
                    .AsNoTracking()
                    .ToListAsync();

                var response = oneriler.Select(CreateIcerikListDtoWithMeta).ToList();

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Ã–neri sistemi hatasÄ±");
                return StatusCode(500, new { message = "Ã–neriler yÃ¼klenirken bir hata oluÅŸtu." });
            }
        }

        // POST: api/icerik (Manual ekleme - admin/moderator iÃ§in)
        [HttpPost]
        [Authorize(Roles = "yonetici,moderator")]
        public async Task<ActionResult<IcerikDetailDto>> CreateIcerik([FromBody] IcerikCreateDto dto)
        {
            try
            {
                // ApiKaynak ve IcerikTuru enum'a Ã§evir
                if (!Enum.TryParse<ApiKaynak>(dto.ApiKaynagi, true, out var apiKaynak))
                {
                    return BadRequest(new { message = "GeÃ§ersiz API kaynaÄŸÄ±." });
                }

                if (!Enum.TryParse<IcerikTuru>(dto.Tur, true, out var tur))
                {
                    return BadRequest(new { message = "GeÃ§ersiz iÃ§erik tÃ¼rÃ¼." });
                }

                var icerik = new Icerik
                {
                    HariciId = dto.HariciId,
                    ApiKaynagi = apiKaynak,
                    Tur = tur,
                    Baslik = dto.Baslik,
                    Aciklama = dto.Aciklama,
                    PosterUrl = dto.PosterUrl,
                    YayinTarihi = dto.YayinTarihi,
                    OlusturulmaZamani = DateTime.UtcNow
                };

                _context.Icerikler.Add(icerik);
                await _context.SaveChangesAsync();

                var response = new IcerikDetailDto
                {
                    Id = icerik.Id,
                    HariciId = icerik.HariciId,
                    ApiKaynagi = icerik.ApiKaynagi.ToString(),
                    Tur = icerik.Tur.ToString(),
                    Baslik = icerik.Baslik,
                    Aciklama = icerik.Aciklama,
                    PosterUrl = icerik.PosterUrl,
                    YayinTarihi = icerik.YayinTarihi,
                    OrtalamaPuan = 0,
                    PuanlamaSayisi = 0,
                    YorumSayisi = 0,
                    ListeyeEklenmeSayisi = 0,
                    GoruntulemeSayisi = 0,
                    PopulerlikSkoru = 0,
                    OlusturulmaZamani = icerik.OlusturulmaZamani
                };

                return CreatedAtAction(nameof(GetIcerik), new { id = icerik.Id }, response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Ä°Ã§erik oluÅŸturulurken hata");
                return StatusCode(500, new { message = "Ä°Ã§erik kaydedilirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/icerik/{id}/benzer
        // AkÄ±llÄ± Benzer Ä°Ã§erik AlgoritmasÄ±
        [HttpGet("{id}/benzer")]
        public async Task<ActionResult<IEnumerable<IcerikListDto>>> GetBenzerIcerikler(long id, [FromQuery] int limit = 6)
        {
            try
            {
                var icerik = await _context.Icerikler
                    .AsNoTracking()
                    .FirstOrDefaultAsync(i => i.Id == id);

                if (icerik == null)
                {
                    return NotFound(new { message = "Ä°Ã§erik bulunamadÄ±." });
                }

                // TÃ¼rleri parse et
                var turler = new List<string>();
                if (!string.IsNullOrEmpty(icerik.MetaVeri) && icerik.MetaVeri != "{}")
                {
                    try
                    {
                        var metaDoc = JsonDocument.Parse(icerik.MetaVeri);
                        if (metaDoc.RootElement.TryGetProperty("turler", out var turlerJson) && 
                            turlerJson.ValueKind == JsonValueKind.Array)
                        {
                            foreach (var t in turlerJson.EnumerateArray())
                            {
                                var turStr = t.GetString();
                                if (!string.IsNullOrEmpty(turStr))
                                    turler.Add(turStr.ToLowerInvariant());
                            }
                        }
                    }
                    catch { }
                }

                // YayÄ±n yÄ±lÄ±nÄ± al
                var yayinYili = icerik.YayinTarihi?.Year;

                // TÃ¼m aday iÃ§erikleri Ã§ek (aynÄ± ana tÃ¼r, kendisi hariÃ§)
                var adaylar = await _context.Icerikler
                    .AsNoTracking()
                    .Where(i => i.Id != id && i.Tur == icerik.Tur && !string.IsNullOrEmpty(i.PosterUrl))
                    .Select(i => new
                    {
                        Icerik = i,
                        MetaVeri = i.MetaVeri
                    })
                    .Take(500) // Performans iÃ§in limit
                    .ToListAsync();

                // Benzerlik skoru hesapla
                var skorluAdaylar = adaylar.Select(a =>
                {
                    double skor = 0;
                    var adayTurler = new List<string>();

                    // TÃ¼rleri parse et
                    if (!string.IsNullOrEmpty(a.MetaVeri) && a.MetaVeri != "{}")
                    {
                        try
                        {
                            var metaDoc = JsonDocument.Parse(a.MetaVeri);
                            if (metaDoc.RootElement.TryGetProperty("turler", out var turlerJson) &&
                                turlerJson.ValueKind == JsonValueKind.Array)
                            {
                                foreach (var t in turlerJson.EnumerateArray())
                                {
                                    var turStr = t.GetString();
                                    if (!string.IsNullOrEmpty(turStr))
                                        adayTurler.Add(turStr.ToLowerInvariant());
                                }
                            }
                        }
                        catch { }
                    }

                    // 1. TÃ¼r EÅŸleÅŸmesi (en Ã¶nemli - 50 puan max)
                    if (turler.Any() && adayTurler.Any())
                    {
                        var ortakTurler = turler.Intersect(adayTurler).Count();
                        var toplamTurler = turler.Union(adayTurler).Count();
                        skor += (ortakTurler * 50.0) / Math.Max(turler.Count, 1);
                    }

                    // 2. Puan BenzerliÄŸi (20 puan max)
                    if (icerik.OrtalamaPuan > 0 && a.Icerik.OrtalamaPuan > 0)
                    {
                        var puanFarki = Math.Abs(icerik.OrtalamaPuan - a.Icerik.OrtalamaPuan);
                        skor += Math.Max(0, 20 - (double)puanFarki * 4);
                    }
                    else if (icerik.HariciPuan > 0 && a.Icerik.HariciPuan > 0)
                    {
                        // TMDB puanÄ±nÄ± kullan (10 Ã¼zerinden)
                        var puanFarki = Math.Abs(icerik.HariciPuan - a.Icerik.HariciPuan);
                        skor += Math.Max(0, 20 - (double)puanFarki * 2);
                    }

                    // 3. YayÄ±n YÄ±lÄ± YakÄ±nlÄ±ÄŸÄ± (15 puan max)
                    if (yayinYili.HasValue && a.Icerik.YayinTarihi.HasValue)
                    {
                        var yilFarki = Math.Abs(yayinYili.Value - a.Icerik.YayinTarihi.Value.Year);
                        skor += Math.Max(0, 15 - yilFarki);
                    }

                    // 4. PopÃ¼lerlik Bonusu (15 puan max)
                    var popSkor = (double)a.Icerik.PopulerlikSkoru;
                    skor += Math.Min(15, popSkor / 100.0);

                    return new { a.Icerik, Skor = skor };
                })
                .OrderByDescending(x => x.Skor)
                .Take(limit)
                .Select(x => x.Icerik)
                .ToList();

                var result = skorluAdaylar.Select(CreateIcerikListDtoWithMeta);

                return Ok(result);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Benzer iÃ§erikler alÄ±nÄ±rken hata: {Id}", id);
                return StatusCode(500, new { message = "Benzer iÃ§erikler yÃ¼klenirken hata oluÅŸtu." });
            }
        }

        // Helper Methods BaseApiController Ã¼zerinden gelmektedir.
        
        // Meta veriden sÃ¼re, sezon, bÃ¶lÃ¼m ve sayfa bilgilerini parse et
        private static IcerikListDto CreateIcerikListDtoWithMeta(Icerik icerik)
        {
            var dto = new IcerikListDto
            {
                Id = icerik.Id,
                Baslik = icerik.Baslik,
                Tur = icerik.Tur.ToString(),
                Aciklama = icerik.Aciklama,
                PosterUrl = icerik.PosterUrl,
                OrtalamaPuan = icerik.OrtalamaPuan,
                PuanlamaSayisi = icerik.PuanlamaSayisi,
                HariciPuan = icerik.HariciPuan,
                HariciOySayisi = icerik.HariciOySayisi,
                PopulerlikSkoru = icerik.PopulerlikSkoru,
                YayinTarihi = icerik.YayinTarihi
            };

            // Meta veriden ek bilgileri parse et
            if (!string.IsNullOrEmpty(icerik.MetaVeri) && icerik.MetaVeri != "{}")
            {
                try
                {
                    var metaDoc = JsonDocument.Parse(icerik.MetaVeri);
                    var root = metaDoc.RootElement;

                    if (root.TryGetProperty("sure", out var sure) && sure.ValueKind == JsonValueKind.Number)
                    {
                        dto.Sure = sure.GetInt32();
                    }

                    if (root.TryGetProperty("sezonSayisi", out var sezon) && sezon.ValueKind == JsonValueKind.Number)
                    {
                        dto.SezonSayisi = sezon.GetInt32();
                    }

                    if (root.TryGetProperty("bolumSayisi", out var bolum) && bolum.ValueKind == JsonValueKind.Number)
                    {
                        dto.BolumSayisi = bolum.GetInt32();
                    }

                    if (root.TryGetProperty("sayfaSayisi", out var sayfa) && sayfa.ValueKind == JsonValueKind.Number)
                    {
                        dto.SayfaSayisi = sayfa.GetInt32();
                    }
                }
                catch
                {
                    // Meta veri parse hatasÄ±, devam et
                }
            }

            // Tip dÃ¼zeltmesi: EÄŸer sezon veya bÃ¶lÃ¼m sayÄ±sÄ± varsa, bu bir dizi
            if ((dto.SezonSayisi > 0 || dto.BolumSayisi > 0) && dto.Tur != "Dizi")
            {
                dto.Tur = "Dizi";
            }
            // EÄŸer sayfa sayÄ±sÄ± varsa, bu bir kitap
            else if (dto.SayfaSayisi > 0 && dto.Tur != "Kitap")
            {
                dto.Tur = "Kitap";
            }
            // EÄŸer film sÃ¼resi varsa ve sezon/bÃ¶lÃ¼m yoksa, bu bir film
            else if (dto.Sure > 0 && dto.SezonSayisi == null && dto.BolumSayisi == null && dto.Tur != "Film")
            {
                dto.Tur = "Film";
            }

            return dto;
        }
    }

    // Manual iÃ§erik ekleme iÃ§in DTO (IcerikDtos.cs'e eklenmeli)
    public class IcerikCreateDto
    {
        public string HariciId { get; set; } = null!;
        public string ApiKaynagi { get; set; } = null!; // tmdb, google_books, diger
        public string Tur { get; set; } = null!; // film, kitap
        public string Baslik { get; set; } = null!;
        public string? Aciklama { get; set; }
        public string? PosterUrl { get; set; }
        public DateOnly? YayinTarihi { get; set; }
    }
}


========== Saga.Server\Controllers\KullaniciController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class KullaniciController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<KullaniciController> _logger;

        public KullaniciController(SagaDbContext context, ILogger<KullaniciController> logger)
        {
            _context = context;
            _logger = logger;
        }

        // GET: api/kullanici/profil (Kendi profilim)
        [HttpGet("profil")]
        [Authorize]
        public async Task<ActionResult<ProfilDto>> GetMyProfil()
        {
            var kullaniciId = GetCurrentUserId();
            
            // KullanÄ±cÄ± veritabanÄ±nda yoksa oluÅŸtur (Supabase'den ilk giriÅŸ)
            var kullanici = await _context.Kullanicilar
                .FirstOrDefaultAsync(k => k.Id == kullaniciId && !k.Silindi);
            
            if (kullanici == null)
            {
                // Supabase JWT'den bilgileri al - tÃ¼m claim'leri kontrol et
                var email = User.FindFirst("email")?.Value ?? "";
                
                // user_metadata JWT'de ayrÄ± bir claim olarak gelir
                var userMetadataClaim = User.FindFirst("user_metadata")?.Value;
                string? username = null;
                string? fullName = null;
                
                if (!string.IsNullOrEmpty(userMetadataClaim))
                {
                    try
                    {
                        var metadata = System.Text.Json.JsonSerializer.Deserialize<System.Text.Json.JsonElement>(userMetadataClaim);
                        if (metadata.TryGetProperty("username", out var usernameProp))
                            username = usernameProp.GetString();
                        if (metadata.TryGetProperty("full_name", out var fullNameProp))
                            fullName = fullNameProp.GetString();
                    }
                    catch { /* JSON parse hatasÄ±, fallback kullan */ }
                }
                
                // Fallback deÄŸerler
                username ??= User.FindFirst("preferred_username")?.Value ?? email.Split('@')[0];
                fullName ??= User.FindFirst("name")?.Value;

                kullanici = new Kullanici
                {
                    Id = kullaniciId,
                    Eposta = email,
                    KullaniciAdi = username,
                    GoruntulemeAdi = fullName,
                    Rol = KullaniciRol.kullanici,
                    OlusturulmaZamani = DateTime.UtcNow
                };

                _context.Kullanicilar.Add(kullanici);
                await _context.SaveChangesAsync();
                
                _logger.LogInformation("Yeni kullanÄ±cÄ± oluÅŸturuldu: {KullaniciAdi} ({Id})", username, kullaniciId);
            }
            
            return await GetProfil(kullaniciId);
        }

        // GET: api/kullanici/{id}/profil
        [HttpGet("{id}/profil")]
        public async Task<ActionResult<ProfilDto>> GetProfil(Guid id)
        {
            var kullanici = await _context.Kullanicilar
                .AsNoTracking()
                .FirstOrDefaultAsync(k => k.Id == id && !k.Silindi);

            if (kullanici == null)
            {
                return NotFound(new { message = "KullanÄ±cÄ± bulunamadÄ±." });
            }

            var currentUserId = GetCurrentUserIdOrNull();

            // Ä°statistikleri al
            var toplamPuanlama = await _context.Puanlamalar.CountAsync(p => p.KullaniciId == id && !p.Silindi);
            var toplamYorum = await _context.Yorumlar.CountAsync(y => y.KullaniciId == id && !y.Silindi);
            var toplamListe = await _context.Listeler.CountAsync(l => l.KullaniciId == id && !l.Silindi);
            var takipEdenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdilenId == id);
            var takipEdilenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdenId == id);

            var takipEdiyorMu = currentUserId.HasValue &&
                await _context.Takipler.AnyAsync(t => t.TakipEdenId == currentUserId.Value && t.TakipEdilenId == id);

            var profil = new ProfilDto
            {
                Id = kullanici.Id,
                KullaniciAdi = kullanici.KullaniciAdi,
                Eposta = kullanici.Eposta,
                GoruntulemeAdi = kullanici.GoruntulemeAdi,
                Biyografi = kullanici.Biyografi,
                AvatarUrl = kullanici.AvatarUrl,
                Rol = kullanici.Rol.ToString(),
                OlusturulmaZamani = kullanici.OlusturulmaZamani,
                ToplamPuanlama = toplamPuanlama,
                ToplamYorum = toplamYorum,
                ToplamListe = toplamListe,
                TakipEdenSayisi = takipEdenSayisi,
                TakipEdilenSayisi = takipEdilenSayisi,
                TakipEdiyorMu = takipEdiyorMu
            };

            return Ok(profil);
        }

        // PUT: api/kullanici/profil
        [HttpPut("profil")]
        [Authorize]
        public async Task<ActionResult<ProfilDto>> UpdateProfil([FromBody] ProfilUpdateDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var kullanici = await _context.Kullanicilar
                    .FirstOrDefaultAsync(k => k.Id == kullaniciId);

                if (kullanici == null)
                {
                    return NotFound(new { message = "KullanÄ±cÄ± bulunamadÄ±." });
                }

                // Sadece gÃ¶nderilen deÄŸerleri gÃ¼ncelle, boÅŸ string'leri yoksay
                if (!string.IsNullOrWhiteSpace(dto.GoruntulemeAdi))
                    kullanici.GoruntulemeAdi = dto.GoruntulemeAdi;
                // Biyografi iÃ§in null kontrolÃ¼ - boÅŸ string de kabul edilir (biyografi silme)
                if (dto.Biyografi != null)
                    kullanici.Biyografi = string.IsNullOrWhiteSpace(dto.Biyografi) ? null : dto.Biyografi;
                if (!string.IsNullOrWhiteSpace(dto.AvatarUrl))
                    kullanici.AvatarUrl = dto.AvatarUrl;
                    
                kullanici.GuncellemeZamani = DateTime.UtcNow;

                await _context.SaveChangesAsync();

                // GÃ¼ncel profili dÃ¶ndÃ¼r
                var toplamPuanlama = await _context.Puanlamalar.CountAsync(p => p.KullaniciId == kullaniciId && !p.Silindi);
                var toplamYorum = await _context.Yorumlar.CountAsync(y => y.KullaniciId == kullaniciId && !y.Silindi);
                var toplamListe = await _context.Listeler.CountAsync(l => l.KullaniciId == kullaniciId && !l.Silindi);
                var takipEdenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdilenId == kullaniciId);
                var takipEdilenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdenId == kullaniciId);

                var profil = new ProfilDto
                {
                    Id = kullanici.Id,
                    KullaniciAdi = kullanici.KullaniciAdi,
                    Eposta = kullanici.Eposta,
                    GoruntulemeAdi = kullanici.GoruntulemeAdi,
                    Biyografi = kullanici.Biyografi,
                    AvatarUrl = kullanici.AvatarUrl,
                    Rol = kullanici.Rol.ToString(),
                    OlusturulmaZamani = kullanici.OlusturulmaZamani,
                    ToplamPuanlama = toplamPuanlama,
                    ToplamYorum = toplamYorum,
                    ToplamListe = toplamListe,
                    TakipEdenSayisi = takipEdenSayisi,
                    TakipEdilenSayisi = takipEdilenSayisi,
                    TakipEdiyorMu = false
                };

                return Ok(profil);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Profil gÃ¼ncellenirken hata: {KullaniciId}", GetCurrentUserId());
                return StatusCode(500, new { message = "Profil gÃ¼ncellenirken bir hata oluÅŸtu." });
            }
        }

        // POST: api/kullanici/{id}/takip
        [HttpPost("{id}/takip")]
        [Authorize]
        public async Task<IActionResult> ToggleTakip(Guid id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                // Kendini takip edemez
                if (kullaniciId == id)
                {
                    return BadRequest(new { message = "Kendinizi takip edemezsiniz." });
                }

                // KullanÄ±cÄ± var mÄ±?
                var takipEdilecek = await _context.Kullanicilar.FindAsync(id);
                if (takipEdilecek == null || takipEdilecek.Silindi)
                {
                    return NotFound(new { message = "KullanÄ±cÄ± bulunamadÄ±." });
                }

                var mevcutTakip = await _context.Takipler
                    .FirstOrDefaultAsync(t => t.TakipEdenId == kullaniciId && t.TakipEdilenId == id);

                if (mevcutTakip != null)
                {
                    // Takibi bÄ±rak
                    _context.Takipler.Remove(mevcutTakip);
                    await _context.SaveChangesAsync();
                    return Ok(new { message = "Takip bÄ±rakÄ±ldÄ±", takipEdiyor = false });
                }
                else
                {
                    // Takip et
                    var takip = new Takip
                    {
                        TakipEdenId = kullaniciId,
                        TakipEdilenId = id,
                        OlusturulmaZamani = DateTime.UtcNow
                    };
                    _context.Takipler.Add(takip);
                    await _context.SaveChangesAsync();

                    // NOT: Aktivite kaydÄ± artÄ±k veritabanÄ± trigger'Ä± (trg_akt_takip) tarafÄ±ndan yapÄ±lÄ±yor.
                    // Ã‡ifte kayÄ±t sorununu Ã¶nlemek iÃ§in CreateTakipAktivite Ã§aÄŸrÄ±sÄ± kaldÄ±rÄ±ldÄ±.

                    return Ok(new { message = "KullanÄ±cÄ± takip edildi", takipEdiyor = true });
                }
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Takip iÅŸlemi sÄ±rasÄ±nda hata: {TakipEdilenId}", id);
                return StatusCode(500, new { message = "Takip iÅŸlemi sÄ±rasÄ±nda bir hata oluÅŸtu." });
            }
        }

        // DELETE: api/kullanici/{id}/takipci-cikar - TakipÃ§iyi Ã§Ä±kar (kendi takipÃ§ilerinden birini kaldÄ±r)
        [HttpDelete("{id}/takipci-cikar")]
        [Authorize]
        public async Task<ActionResult> TakipciCikar(Guid id)
        {
            try
            {
                var kullaniciIdStr = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;
                if (!Guid.TryParse(kullaniciIdStr, out var kullaniciId))
                {
                    return Unauthorized(new { message = "KullanÄ±cÄ± kimliÄŸi bulunamadÄ±." });
                }

                // Kendini Ã§Ä±karamaz
                if (kullaniciId == id)
                {
                    return BadRequest(new { message = "Kendinizi takipÃ§ilerinizden Ã§Ä±karamazsÄ±nÄ±z." });
                }

                // Takip kaydÄ±nÄ± bul (id = takipÃ§i, kullaniciId = takip edilen)
                var takip = await _context.Takipler
                    .FirstOrDefaultAsync(t => t.TakipEdenId == id && t.TakipEdilenId == kullaniciId);

                if (takip == null)
                {
                    return NotFound(new { message = "Bu kullanÄ±cÄ± sizi takip etmiyor." });
                }

                _context.Takipler.Remove(takip);
                await _context.SaveChangesAsync();

                return Ok(new { message = "TakipÃ§i Ã§Ä±karÄ±ldÄ±" });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TakipÃ§i Ã§Ä±karma sÄ±rasÄ±nda hata: {TakipciId}", id);
                return StatusCode(500, new { message = "TakipÃ§i Ã§Ä±karma sÄ±rasÄ±nda bir hata oluÅŸtu." });
            }
        }

        // GET: api/kullanici/{id}/takip-edenler
        [HttpGet("{id}/takip-edenler")]
        public async Task<ActionResult<List<KullaniciListDto>>> GetTakipEdenler(Guid id)
        {
            var takipler = await _context.Takipler
                .Include(t => t.TakipEden)
                .Where(t => t.TakipEdilenId == id)
                .OrderByDescending(t => t.OlusturulmaZamani)
                .AsNoTracking()
                .ToListAsync();

            var kullanicilar = new List<KullaniciListDto>();

            foreach (var takip in takipler)
            {
                var toplamPuanlama = await _context.Puanlamalar.CountAsync(p => p.KullaniciId == takip.TakipEdenId && !p.Silindi);
                var takipEdenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdilenId == takip.TakipEdenId);

                kullanicilar.Add(new KullaniciListDto
                {
                    Id = takip.TakipEden.Id,
                    KullaniciAdi = takip.TakipEden.KullaniciAdi,
                    GoruntulemeAdi = takip.TakipEden.GoruntulemeAdi,
                    AvatarUrl = takip.TakipEden.AvatarUrl,
                    TakipEdenSayisi = takipEdenSayisi,
                    ToplamPuanlama = toplamPuanlama
                });
            }

            return Ok(kullanicilar);
        }

        // GET: api/kullanici/{id}/takip-ettikleri
        [HttpGet("{id}/takip-ettikleri")]
        public async Task<ActionResult<List<KullaniciListDto>>> GetTakipEttikleri(Guid id)
        {
            var takipler = await _context.Takipler
                .Include(t => t.TakipEdilen)
                .Where(t => t.TakipEdenId == id)
                .OrderByDescending(t => t.OlusturulmaZamani)
                .AsNoTracking()
                .ToListAsync();

            var kullanicilar = new List<KullaniciListDto>();

            foreach (var takip in takipler)
            {
                var toplamPuanlama = await _context.Puanlamalar.CountAsync(p => p.KullaniciId == takip.TakipEdilenId && !p.Silindi);
                var takipEdenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdilenId == takip.TakipEdilenId);

                kullanicilar.Add(new KullaniciListDto
                {
                    Id = takip.TakipEdilen.Id,
                    KullaniciAdi = takip.TakipEdilen.KullaniciAdi,
                    GoruntulemeAdi = takip.TakipEdilen.GoruntulemeAdi,
                    AvatarUrl = takip.TakipEdilen.AvatarUrl,
                    TakipEdenSayisi = takipEdenSayisi,
                    ToplamPuanlama = toplamPuanlama
                });
            }

            return Ok(kullanicilar);
        }

        // GET: api/kullanici/{id}/istatistik
        [HttpGet("{id}/istatistik")]
        public async Task<ActionResult<KullaniciIstatistikDto>> GetIstatistik(Guid id)
        {
            var kullanici = await _context.Kullanicilar.FindAsync(id);
            if (kullanici == null || kullanici.Silindi)
            {
                return NotFound(new { message = "KullanÄ±cÄ± bulunamadÄ±." });
            }

            var toplamIzlenenFilm = await _context.KutuphaneDurumlari
                .Include(k => k.Icerik)
                .CountAsync(k => k.KullaniciId == id && k.Icerik.Tur == IcerikTuru.film && k.Durum == KutuphaneDurum.izlendi && !k.Silindi);

            var toplamOkunanKitap = await _context.KutuphaneDurumlari
                .Include(k => k.Icerik)
                .CountAsync(k => k.KullaniciId == id && k.Icerik.Tur == IcerikTuru.kitap && k.Durum == KutuphaneDurum.okundu && !k.Silindi);

            var toplamPuanlama = await _context.Puanlamalar.CountAsync(p => p.KullaniciId == id && !p.Silindi);
            var toplamYorum = await _context.Yorumlar.CountAsync(y => y.KullaniciId == id && !y.Silindi);
            var toplamListe = await _context.Listeler.CountAsync(l => l.KullaniciId == id && !l.Silindi);

            var takipEdenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdilenId == id);
            var takipEdilenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdenId == id);

            var puanlamalar = await _context.Puanlamalar
                .Where(p => p.KullaniciId == id && !p.Silindi)
                .ToListAsync();

            var ortalamaPuan = puanlamalar.Any() ? (decimal)puanlamalar.Average(p => p.Puan) : 0;

            var istatistik = new KullaniciIstatistikDto
            {
                KullaniciId = id,
                ToplamIzlenenFilm = toplamIzlenenFilm,
                ToplamOkunanKitap = toplamOkunanKitap,
                ToplamPuanlama = toplamPuanlama,
                ToplamYorum = toplamYorum,
                ToplamListe = toplamListe,
                TakipEdenSayisi = takipEdenSayisi,
                TakipEdilenSayisi = takipEdilenSayisi,
                OrtalamaPuan = ortalamaPuan
            };

            return Ok(istatistik);
        }

        // GET: api/kullanici/id/{id} - ID'ye gÃ¶re kullanÄ±cÄ± getir
        [HttpGet("id/{id}")]
        public async Task<ActionResult<ProfilDto>> GetKullaniciById(Guid id)
        {
            return await GetProfil(id);
        }

        // GET: api/kullanici/username/{kullaniciAdi} - KullanÄ±cÄ± adÄ±na gÃ¶re profil
        [HttpGet("username/{kullaniciAdi}")]
        public async Task<ActionResult<ProfilDto>> GetKullaniciByUsername(string kullaniciAdi)
        {
            var kullanici = await _context.Kullanicilar
                .AsNoTracking()
                .FirstOrDefaultAsync(k => k.KullaniciAdi == kullaniciAdi && !k.Silindi);

            if (kullanici == null)
            {
                return NotFound(new { message = "KullanÄ±cÄ± bulunamadÄ±." });
            }

            return await GetProfil(kullanici.Id);
        }

        // GET: api/kullanici/ara?q={query}
        [HttpGet("ara")]
        public async Task<ActionResult<List<KullaniciListDto>>> SearchKullanicilar([FromQuery] string q)
        {
            if (string.IsNullOrWhiteSpace(q) || q.Length < 2)
            {
                return BadRequest(new { message = "Arama terimi en az 2 karakter olmalÄ±dÄ±r." });
            }

            var kullanicilar = await _context.Kullanicilar
                .Where(k => !k.Silindi &&
                    (k.KullaniciAdi.Contains(q) ||
                     (k.GoruntulemeAdi != null && k.GoruntulemeAdi.Contains(q))))
                .Take(20)
                .AsNoTracking()
                .ToListAsync();

            var result = new List<KullaniciListDto>();

            foreach (var kullanici in kullanicilar)
            {
                var toplamPuanlama = await _context.Puanlamalar.CountAsync(p => p.KullaniciId == kullanici.Id && !p.Silindi);
                var takipEdenSayisi = await _context.Takipler.CountAsync(t => t.TakipEdilenId == kullanici.Id);

                result.Add(new KullaniciListDto
                {
                    Id = kullanici.Id,
                    KullaniciAdi = kullanici.KullaniciAdi,
                    GoruntulemeAdi = kullanici.GoruntulemeAdi,
                    AvatarUrl = kullanici.AvatarUrl,
                    TakipEdenSayisi = takipEdenSayisi,
                    ToplamPuanlama = toplamPuanlama
                });
            }

            return Ok(result);
        }

        // GET: api/kullanici/{id}/aktiviteler
        // Proje Ä°sterler 2.1.5: KullanÄ±cÄ±nÄ±n son aktiviteleri (filtreli)
        [HttpGet("{id}/aktiviteler")]
        public async Task<ActionResult<List<AktiviteDto>>> GetKullaniciAktiviteleri(
            Guid id,
            [FromQuery] string? aktiviteTuru = null,
            [FromQuery] DateTime? baslangic = null,
            [FromQuery] DateTime? bitis = null,
            [FromQuery] int sayfa = 1,
            [FromQuery] int limit = 20)
        {
            var query = _context.Aktiviteler
                .Include(a => a.Kullanici)
                .Include(a => a.Icerik)
                .Include(a => a.Yorum)
                .Include(a => a.Puanlama)
                .Include(a => a.Liste)
                .Where(a => a.KullaniciId == id)
                .AsNoTracking();

            // Aktivite tÃ¼rÃ¼ filtresi
            if (!string.IsNullOrEmpty(aktiviteTuru) && Enum.TryParse<AktiviteTuru>(aktiviteTuru, true, out var tur))
            {
                query = query.Where(a => a.AktiviteTuru == tur);
            }

            // Tarih aralÄ±ÄŸÄ± filtresi
            if (baslangic.HasValue)
            {
                query = query.Where(a => a.OlusturulmaZamani >= baslangic.Value);
            }

            if (bitis.HasValue)
            {
                query = query.Where(a => a.OlusturulmaZamani <= bitis.Value);
            }

            var aktiviteler = await query
                .OrderByDescending(a => a.OlusturulmaZamani)
                .Skip((sayfa - 1) * limit)
                .Take(limit)
                .ToListAsync();

            var response = aktiviteler.Select(a => new AktiviteDto
            {
                Id = a.Id,
                KullaniciId = a.KullaniciId,
                KullaniciAdi = a.Kullanici.KullaniciAdi,
                AvatarUrl = a.Kullanici.AvatarUrl,
                AktiviteTuru = a.AktiviteTuru.ToString(),
                IcerikId = a.IcerikId,
                IcerikBaslik = a.Icerik?.Baslik,
                PosterUrl = a.Icerik?.PosterUrl,
                YorumId = a.YorumId,
                PuanlamaId = a.PuanlamaId,
                Puan = a.Puanlama?.Puan,
                ListeId = a.ListeId,
                ListeAdi = a.Liste?.Ad,
                Veri = a.Veri,
                OlusturulmaZamani = a.OlusturulmaZamani
            }).ToList();

            return Ok(response);
        }

        // CreateTakipAktivite metodu artÄ±k kullanÄ±lmÄ±yor; takip aktiviteleri veritabanÄ± trigger'Ä± (trg_akt_takip) ile oluÅŸturuluyor.
        // private async Task CreateTakipAktivite(Guid takipEdenId, Guid takipEdilenId)
        // {
        //     var aktivite = new Aktivite
        //     {
        //         KullaniciId = takipEdenId,
        //         AktiviteTuru = AktiviteTuru.takip,
        //         Veri = System.Text.Json.JsonSerializer.Serialize(new { takipEdilenId }),
        //         OlusturulmaZamani = DateTime.UtcNow
        //     };
        //     _context.Aktiviteler.Add(aktivite);
        //     await _context.SaveChangesAsync();
        // }

        // DELETE: api/kullanici/hesap
        // KullanÄ±cÄ± hesabÄ±nÄ± ve tÃ¼m iliÅŸkili verileri kalÄ±cÄ± olarak siler
        [HttpDelete("hesap")]
        [Authorize]
        public async Task<IActionResult> DeleteAccount()
        {
            try
            {
                var kullaniciId = GetCurrentUserId();
                
                var kullanici = await _context.Kullanicilar
                    .FirstOrDefaultAsync(k => k.Id == kullaniciId);

                if (kullanici == null)
                {
                    return NotFound(new { message = "KullanÄ±cÄ± bulunamadÄ±." });
                }

                _logger.LogInformation("KullanÄ±cÄ± hesabÄ± siliniyor: {KullaniciId} - {KullaniciAdi}", kullaniciId, kullanici.KullaniciAdi);

                // 1. Aktivite yorum beÄŸenilerini sil
                await _context.AktiviteYorumBegenileri
                    .Where(ayb => ayb.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 2. Aktivite yorumlarÄ±nÄ± sil
                await _context.AktiviteYorumlari
                    .Where(ay => ay.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 3. Aktivite beÄŸenilerini sil
                await _context.AktiviteBegenileri
                    .Where(ab => ab.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 4. Bildirimleri sil (gelen ve gÃ¶nderilen)
                await _context.Bildirimler
                    .Where(b => b.AliciId == kullaniciId || b.GonderenId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 5. Yorum beÄŸenilerini sil
                await _context.YorumBegenileri
                    .Where(yb => yb.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 6. YorumlarÄ± sil
                await _context.Yorumlar
                    .Where(y => y.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 7. PuanlamalarÄ± sil
                await _context.Puanlamalar
                    .Where(p => p.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 8. Liste iÃ§eriklerini sil
                var listeIds = await _context.Listeler
                    .Where(l => l.KullaniciId == kullaniciId)
                    .Select(l => l.Id)
                    .ToListAsync();
                
                await _context.ListeIcerikleri
                    .Where(li => listeIds.Contains(li.ListeId))
                    .ExecuteDeleteAsync();

                // 9. Listeleri sil
                await _context.Listeler
                    .Where(l => l.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 10. KÃ¼tÃ¼phane durumlarÄ±nÄ± sil
                await _context.KutuphaneDurumlari
                    .Where(k => k.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 11. Ä°Ã§erik favorilerini sil
                await _context.IcerikFavorileri
                    .Where(f => f.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 12. Takipleri sil (takip eden ve takip edilen)
                await _context.Takipler
                    .Where(t => t.TakipEdenId == kullaniciId || t.TakipEdilenId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 13. Engelleme kayÄ±tlarÄ±nÄ± sil
                await _context.Engellenenler
                    .Where(e => e.EngelleyenId == kullaniciId || e.EngellenenId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 14. KullanÄ±cÄ± ayarlarÄ±nÄ± sil
                await _context.KullaniciAyarlari
                    .Where(ka => ka.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 15. Aktiviteleri sil
                await _context.Aktiviteler
                    .Where(a => a.KullaniciId == kullaniciId)
                    .ExecuteDeleteAsync();

                // 16. Son olarak kullanÄ±cÄ±yÄ± sil
                _context.Kullanicilar.Remove(kullanici);
                await _context.SaveChangesAsync();

                _logger.LogInformation("KullanÄ±cÄ± hesabÄ± ve tÃ¼m verileri kalÄ±cÄ± olarak silindi: {KullaniciId}", kullaniciId);

                return Ok(new { message = "HesabÄ±nÄ±z ve tÃ¼m verileriniz kalÄ±cÄ± olarak silindi." });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Hesap silinirken hata: {KullaniciId}", GetCurrentUserId());
                return StatusCode(500, new { message = "Hesap silinirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/kullanici/onerilen
        // AkÄ±llÄ± Ã–neri Sistemi: Benzer iÃ§erik tÃ¼rleriyle ilgilenen kullanÄ±cÄ±larÄ± Ã¶ner
        // Algoritma: KullanÄ±cÄ±nÄ±n kÃ¼tÃ¼phanesindeki iÃ§erik tÃ¼rlerini (film/kitap) analiz et
        // ve aynÄ± tÃ¼rlerle ilgilenen, henÃ¼z takip etmediÄŸi kullanÄ±cÄ±larÄ± Ã¶ner
        [HttpGet("onerilen")]
        public async Task<ActionResult<List<OnerilenKullaniciDto>>> GetOnerilenKullanicilar([FromQuery] int limit = 5)
        {
            try
            {
                var currentUserId = GetCurrentUserIdOrNull();

                // Takip edilen kullanÄ±cÄ± ID'leri (giriÅŸ yapmÄ±ÅŸsa)
                var takipEdilenIds = currentUserId.HasValue
                    ? await _context.Takipler
                        .Where(t => t.TakipEdenId == currentUserId.Value)
                        .Select(t => t.TakipEdilenId)
                        .ToListAsync()
                    : new List<Guid>();

                // EÄŸer kullanÄ±cÄ± giriÅŸ yapmÄ±ÅŸsa, akÄ±llÄ± Ã¶neri yap
                if (currentUserId.HasValue)
                {
                    // KullanÄ±cÄ±nÄ±n kÃ¼tÃ¼phanesindeki iÃ§erik ID'lerini al
                    var kullaniciKutuphaneIcerikleri = await _context.KutuphaneDurumlari
                        .Where(k => k.KullaniciId == currentUserId.Value && !k.Silindi)
                        .Select(k => k.IcerikId)
                        .ToListAsync();

                    // KullanÄ±cÄ±nÄ±n ilgilendiÄŸi iÃ§erik tÃ¼rlerini bul (film mi kitap mÄ±)
                    var kullaniciIcerikTurleri = await _context.KutuphaneDurumlari
                        .Include(k => k.Icerik)
                        .Where(k => k.KullaniciId == currentUserId.Value && !k.Silindi)
                        .Select(k => k.Icerik.Tur)
                        .Distinct()
                        .ToListAsync();

                    // KullanÄ±cÄ±nÄ±n puanladÄ±ÄŸÄ± iÃ§eriklerin ID'leri
                    var puanladigiIcerikler = await _context.Puanlamalar
                        .Where(p => p.KullaniciId == currentUserId.Value && !p.Silindi)
                        .Select(p => p.IcerikId)
                        .ToListAsync();

                    // Benzer iÃ§eriklerle ilgilenen kullanÄ±cÄ±larÄ± bul
                    var ortakIcerikKullanicilari = await _context.KutuphaneDurumlari
                        .Where(k => !k.Silindi &&
                                    k.KullaniciId != currentUserId.Value &&
                                    !takipEdilenIds.Contains(k.KullaniciId) &&
                                    (kullaniciKutuphaneIcerikleri.Contains(k.IcerikId) ||
                                     puanladigiIcerikler.Contains(k.IcerikId)))
                        .GroupBy(k => k.KullaniciId)
                        .Select(g => new
                        {
                            KullaniciId = g.Key,
                            OrtakIcerikSayisi = g.Count()
                        })
                        .OrderByDescending(x => x.OrtakIcerikSayisi)
                        .Take(limit * 2) // Daha fazla aday al
                        .ToListAsync();

                    // AynÄ± iÃ§erik tÃ¼rleriyle ilgilenen kullanÄ±cÄ±larÄ± bul
                    var benzerTurKullanicilari = await _context.KutuphaneDurumlari
                        .Include(k => k.Icerik)
                        .Where(k => !k.Silindi &&
                                    k.KullaniciId != currentUserId.Value &&
                                    !takipEdilenIds.Contains(k.KullaniciId) &&
                                    kullaniciIcerikTurleri.Contains(k.Icerik.Tur))
                        .GroupBy(k => k.KullaniciId)
                        .Select(g => new
                        {
                            KullaniciId = g.Key,
                            BenzerTurSayisi = g.Count()
                        })
                        .ToListAsync();

                    // SkorlarÄ± birleÅŸtir
                    var tumAdaylar = ortakIcerikKullanicilari
                        .Select(x => new
                        {
                            x.KullaniciId,
                            Skor = x.OrtakIcerikSayisi * 3 // Ortak iÃ§erik 3x aÄŸÄ±rlÄ±k
                        })
                        .Concat(benzerTurKullanicilari.Select(x => new
                        {
                            x.KullaniciId,
                            Skor = x.BenzerTurSayisi // Benzer tÃ¼r 1x aÄŸÄ±rlÄ±k
                        }))
                        .GroupBy(x => x.KullaniciId)
                        .Select(g => new
                        {
                            KullaniciId = g.Key,
                            ToplamSkor = g.Sum(x => x.Skor)
                        })
                        .OrderByDescending(x => x.ToplamSkor)
                        .Take(limit)
                        .Select(x => x.KullaniciId)
                        .ToList();

                    if (tumAdaylar.Any())
                    {
                        var onerilenler = await _context.Kullanicilar
                            .Where(k => tumAdaylar.Contains(k.Id) && !k.Silindi && k.Aktif)
                            .Select(k => new
                            {
                                Kullanici = k,
                                TakipciSayisi = _context.Takipler.Count(t => t.TakipEdilenId == k.Id),
                                PuanlamaSayisi = _context.Puanlamalar.Count(p => p.KullaniciId == k.Id && !p.Silindi),
                                OrtakIcerik = _context.KutuphaneDurumlari.Count(kd =>
                                    kd.KullaniciId == k.Id && !kd.Silindi &&
                                    (kullaniciKutuphaneIcerikleri.Contains(kd.IcerikId) ||
                                     puanladigiIcerikler.Contains(kd.IcerikId))),
                                // Ortak iÃ§erik tÃ¼rlerini bul
                                FilmIlgisi = _context.KutuphaneDurumlari.Any(kd =>
                                    kd.KullaniciId == k.Id && !kd.Silindi && kd.Icerik.Tur == IcerikTuru.film),
                                KitapIlgisi = _context.KutuphaneDurumlari.Any(kd =>
                                    kd.KullaniciId == k.Id && !kd.Silindi && kd.Icerik.Tur == IcerikTuru.kitap)
                            })
                            .ToListAsync();

                        // Skorlara gÃ¶re sÄ±rala
                        var result = onerilenler
                            .Select(x => new OnerilenKullaniciDto
                            {
                                Id = x.Kullanici.Id,
                                KullaniciAdi = x.Kullanici.KullaniciAdi,
                                GoruntulemeAdi = x.Kullanici.GoruntulemeAdi,
                                AvatarUrl = x.Kullanici.AvatarUrl,
                                TakipEdenSayisi = x.TakipciSayisi,
                                ToplamPuanlama = x.PuanlamaSayisi,
                                OrtakIcerikSayisi = x.OrtakIcerik,
                                OneriNedeni = x.OrtakIcerik > 0
                                    ? $"{x.OrtakIcerik} ortak iÃ§erik"
                                    : (x.FilmIlgisi && x.KitapIlgisi ? "Film ve kitap ilgisi"
                                        : x.FilmIlgisi ? "Film ilgisi"
                                        : x.KitapIlgisi ? "Kitap ilgisi"
                                        : "Aktif kullanÄ±cÄ±")
                            })
                            .OrderByDescending(x => x.OrtakIcerikSayisi)
                            .ThenByDescending(x => x.TakipEdenSayisi)
                            .Take(limit)
                            .ToList();

                        return Ok(result);
                    }
                }

                // Fallback: GiriÅŸ yapmamÄ±ÅŸ veya yeterli veri yoksa, en aktif kullanÄ±cÄ±larÄ± gÃ¶ster
                var query = _context.Kullanicilar
                    .Where(k => !k.Silindi && k.Aktif);

                if (currentUserId.HasValue)
                {
                    query = query.Where(k => k.Id != currentUserId.Value && !takipEdilenIds.Contains(k.Id));
                }

                var kullanicilar = await query
                    .Select(k => new
                    {
                        Kullanici = k,
                        PuanlamaSayisi = _context.Puanlamalar.Count(p => p.KullaniciId == k.Id && !p.Silindi),
                        TakipciSayisi = _context.Takipler.Count(t => t.TakipEdilenId == k.Id)
                    })
                    .OrderByDescending(x => x.TakipciSayisi)
                    .ThenByDescending(x => x.PuanlamaSayisi)
                    .Take(limit)
                    .ToListAsync();

                var fallbackResult = kullanicilar.Select(x => new OnerilenKullaniciDto
                {
                    Id = x.Kullanici.Id,
                    KullaniciAdi = x.Kullanici.KullaniciAdi,
                    GoruntulemeAdi = x.Kullanici.GoruntulemeAdi,
                    AvatarUrl = x.Kullanici.AvatarUrl,
                    TakipEdenSayisi = x.TakipciSayisi,
                    ToplamPuanlama = x.PuanlamaSayisi,
                    OrtakIcerikSayisi = 0,
                    OneriNedeni = "PopÃ¼ler kullanÄ±cÄ±"
                }).ToList();

                return Ok(fallbackResult);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Ã–nerilen kullanÄ±cÄ±lar alÄ±nÄ±rken hata");
                return StatusCode(500, new { message = "Ã–nerilen kullanÄ±cÄ±lar yÃ¼klenirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/kullanici/populer
        // En popÃ¼ler kullanÄ±cÄ±larÄ± getir (en Ã§ok takipÃ§ili)
        [HttpGet("populer")]
        public async Task<ActionResult<List<KullaniciListDto>>> GetPopulerKullanicilar([FromQuery] int limit = 10)
        {
            try
            {
                var kullanicilar = await _context.Kullanicilar
                    .Where(k => !k.Silindi && k.Aktif)
                    .Select(k => new
                    {
                        Kullanici = k,
                        TakipciSayisi = _context.Takipler.Count(t => t.TakipEdilenId == k.Id),
                        PuanlamaSayisi = _context.Puanlamalar.Count(p => p.KullaniciId == k.Id && !p.Silindi)
                    })
                    .OrderByDescending(x => x.TakipciSayisi)
                    .ThenByDescending(x => x.PuanlamaSayisi)
                    .Take(limit)
                    .ToListAsync();

                var result = kullanicilar.Select(x => new KullaniciListDto
                {
                    Id = x.Kullanici.Id,
                    KullaniciAdi = x.Kullanici.KullaniciAdi,
                    GoruntulemeAdi = x.Kullanici.GoruntulemeAdi,
                    AvatarUrl = x.Kullanici.AvatarUrl,
                    TakipEdenSayisi = x.TakipciSayisi,
                    ToplamPuanlama = x.PuanlamaSayisi
                }).ToList();

                return Ok(result);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "PopÃ¼ler kullanÄ±cÄ±lar alÄ±nÄ±rken hata");
                return StatusCode(500, new { message = "PopÃ¼ler kullanÄ±cÄ±lar yÃ¼klenirken bir hata oluÅŸtu." });
            }
        }
    }
}


========== Saga.Server\Controllers\KutuphaneController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class KutuphaneController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<KutuphaneController> _logger;

        public KutuphaneController(SagaDbContext context, ILogger<KutuphaneController> logger)
        {
            _context = context;
            _logger = logger;
        }

        // POST: api/kutuphane
        [HttpPost]
        [Authorize]
        public async Task<ActionResult<KutuphaneDurumDto>> CreateKutuphaneDurum([FromBody] KutuphaneDurumCreateDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                // Durum string'den enum'a Ã§evir
                if (!Enum.TryParse<KutuphaneDurum>(dto.Durum, true, out var durum))
                {
                    return BadRequest(new { message = "GeÃ§ersiz durum. 'izlendi', 'izlenecek', 'okundu', 'okunacak' veya 'devam_ediyor' olmalÄ±dÄ±r." });
                }

                // AynÄ± iÃ§erik iÃ§in zaten durum var mÄ±?
                var mevcutDurum = await _context.KutuphaneDurumlari
                    .FirstOrDefaultAsync(k => k.KullaniciId == kullaniciId && k.IcerikId == dto.IcerikId && !k.Silindi);

                if (mevcutDurum != null)
                {
                    return Conflict(new { message = "Bu iÃ§erik iÃ§in zaten bir kÃ¼tÃ¼phane durumu var. GÃ¼ncelleme iÃ§in PUT endpoint'ini kullanÄ±n." });
                }

                var kutuphaneDurum = new KutuphaneDurumu
                {
                    KullaniciId = kullaniciId,
                    IcerikId = dto.IcerikId,
                    Durum = durum,
                    Ilerleme = dto.Ilerleme,
                    BaslangicTarihi = dto.BaslangicTarihi,
                    BitisTarihi = dto.BitisTarihi,
                    OlusturulmaZamani = DateTime.UtcNow,
                    GuncellemeZamani = DateTime.UtcNow
                };

                _context.KutuphaneDurumlari.Add(kutuphaneDurum);
                await _context.SaveChangesAsync();

                    // TODO: KÃ¼tÃ¼phane durum gÃ¼ncelleme aktiviteleri iÃ§in DB tarafÄ±nda trigger tanÄ±mlandÄ±ÄŸÄ±nda C# tarafÄ±nda manuel Aktivite oluÅŸturma kaldÄ±rÄ±ldÄ±.
                    // Åu anda sadece kutuphane_durumlari tablosu gÃ¼ncelleniyor; feed ihtiyacÄ± artarsa veritabaniyapisi'ne uygun bir trigger eklenmeli.

                var icerik = await _context.Icerikler.FindAsync(dto.IcerikId);

                var response = new KutuphaneDurumDto
                {
                    Id = kutuphaneDurum.Id,
                    KullaniciId = kutuphaneDurum.KullaniciId,
                    IcerikId = kutuphaneDurum.IcerikId,
                    IcerikBaslik = icerik?.Baslik ?? "",
                    IcerikTur = icerik?.Tur.ToString() ?? "",
                    PosterUrl = icerik?.PosterUrl,
                    Durum = kutuphaneDurum.Durum.ToString(),
                    Ilerleme = kutuphaneDurum.Ilerleme,
                    BaslangicTarihi = kutuphaneDurum.BaslangicTarihi,
                    BitisTarihi = kutuphaneDurum.BitisTarihi,
                    OlusturulmaZamani = kutuphaneDurum.OlusturulmaZamani,
                    GuncellemeZamani = kutuphaneDurum.GuncellemeZamani
                };

                return CreatedAtAction(nameof(GetKutuphaneDurum), new { id = kutuphaneDurum.Id }, response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "KÃ¼tÃ¼phane durumu oluÅŸturulurken hata: {IcerikId}", dto.IcerikId);
                return StatusCode(500, new { message = "KÃ¼tÃ¼phane durumu kaydedilirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/kutuphane/{id}
        [HttpGet("{id}")]
        public async Task<ActionResult<KutuphaneDurumDto>> GetKutuphaneDurum(long id)
        {
            var kutuphaneDurum = await _context.KutuphaneDurumlari
                .Include(k => k.Icerik)
                .AsNoTracking()
                .FirstOrDefaultAsync(k => k.Id == id && !k.Silindi);

            if (kutuphaneDurum == null)
            {
                return NotFound(new { message = "KÃ¼tÃ¼phane durumu bulunamadÄ±." });
            }

            var response = new KutuphaneDurumDto
            {
                Id = kutuphaneDurum.Id,
                KullaniciId = kutuphaneDurum.KullaniciId,
                IcerikId = kutuphaneDurum.IcerikId,
                IcerikBaslik = kutuphaneDurum.Icerik.Baslik,
                IcerikTur = kutuphaneDurum.Icerik.Tur.ToString(),
                PosterUrl = kutuphaneDurum.Icerik.PosterUrl,
                Durum = kutuphaneDurum.Durum.ToString(),
                Ilerleme = kutuphaneDurum.Ilerleme,
                BaslangicTarihi = kutuphaneDurum.BaslangicTarihi,
                BitisTarihi = kutuphaneDurum.BitisTarihi,
                OlusturulmaZamani = kutuphaneDurum.OlusturulmaZamani,
                GuncellemeZamani = kutuphaneDurum.GuncellemeZamani
            };

            return Ok(response);
        }

        // PUT: api/kutuphane/{id}
        [HttpPut("{id}")]
        [Authorize]
        public async Task<ActionResult<KutuphaneDurumDto>> UpdateKutuphaneDurum(long id, [FromBody] KutuphaneDurumUpdateDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                // Durum string'den enum'a Ã§evir
                if (!Enum.TryParse<KutuphaneDurum>(dto.Durum, true, out var durum))
                {
                    return BadRequest(new { message = "GeÃ§ersiz durum." });
                }

                var kutuphaneDurum = await _context.KutuphaneDurumlari
                    .Include(k => k.Icerik)
                    .FirstOrDefaultAsync(k => k.Id == id && !k.Silindi);

                if (kutuphaneDurum == null)
                {
                    return NotFound(new { message = "KÃ¼tÃ¼phane durumu bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (kutuphaneDurum.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                kutuphaneDurum.Durum = durum;
                kutuphaneDurum.Ilerleme = dto.Ilerleme;
                kutuphaneDurum.BaslangicTarihi = dto.BaslangicTarihi;
                kutuphaneDurum.BitisTarihi = dto.BitisTarihi;
                kutuphaneDurum.GuncellemeZamani = DateTime.UtcNow;

                await _context.SaveChangesAsync();

                // NOT: Aktivite kaydÄ± artÄ±k veritabanÄ± trigger'larÄ± tarafÄ±ndan yapÄ±lÄ±yor.
                // Ã‡ifte kayÄ±t sorununu Ã¶nlemek iÃ§in CreateAktivite Ã§aÄŸrÄ±sÄ± kaldÄ±rÄ±ldÄ±.

                var response = new KutuphaneDurumDto
                {
                    Id = kutuphaneDurum.Id,
                    KullaniciId = kutuphaneDurum.KullaniciId,
                    IcerikId = kutuphaneDurum.IcerikId,
                    IcerikBaslik = kutuphaneDurum.Icerik.Baslik,
                    IcerikTur = kutuphaneDurum.Icerik.Tur.ToString(),
                    PosterUrl = kutuphaneDurum.Icerik.PosterUrl,
                    Durum = kutuphaneDurum.Durum.ToString(),
                    Ilerleme = kutuphaneDurum.Ilerleme,
                    BaslangicTarihi = kutuphaneDurum.BaslangicTarihi,
                    BitisTarihi = kutuphaneDurum.BitisTarihi,
                    OlusturulmaZamani = kutuphaneDurum.OlusturulmaZamani,
                    GuncellemeZamani = kutuphaneDurum.GuncellemeZamani
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "KÃ¼tÃ¼phane durumu gÃ¼ncellenirken hata: {Id}", id);
                return StatusCode(500, new { message = "GÃ¼ncelleme sÄ±rasÄ±nda bir hata oluÅŸtu." });
            }
        }

        // DELETE: api/kutuphane/{id}
        [HttpDelete("{id}")]
        [Authorize]
        public async Task<IActionResult> DeleteKutuphaneDurum(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var kutuphaneDurum = await _context.KutuphaneDurumlari
                    .FirstOrDefaultAsync(k => k.Id == id);

                if (kutuphaneDurum == null)
                {
                    return NotFound(new { message = "KÃ¼tÃ¼phane durumu bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (kutuphaneDurum.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                // Soft delete
                kutuphaneDurum.Silindi = true;
                kutuphaneDurum.GuncellemeZamani = DateTime.UtcNow;
                await _context.SaveChangesAsync();

                return NoContent();
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "KÃ¼tÃ¼phane durumu silinirken hata: {Id}", id);
                return StatusCode(500, new { message = "Silme sÄ±rasÄ±nda bir hata oluÅŸtu." });
            }
        }

        // DELETE: api/kutuphane/icerik/{icerikId}
        // Frontend iÃ§in icerikId ile kÃ¼tÃ¼phaneden kaldÄ±rma
        [HttpDelete("icerik/{icerikId}")]
        [Authorize]
        public async Task<IActionResult> DeleteKutuphaneDurumByIcerikId(long icerikId)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var kutuphaneDurum = await _context.KutuphaneDurumlari
                    .FirstOrDefaultAsync(k => k.KullaniciId == kullaniciId && k.IcerikId == icerikId && !k.Silindi);

                if (kutuphaneDurum == null)
                {
                    return NotFound(new { message = "Bu iÃ§erik iÃ§in kÃ¼tÃ¼phane durumu bulunamadÄ±." });
                }

                // Soft delete
                kutuphaneDurum.Silindi = true;
                kutuphaneDurum.GuncellemeZamani = DateTime.UtcNow;
                await _context.SaveChangesAsync();

                return NoContent();
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "KÃ¼tÃ¼phane durumu silinirken hata (icerikId): {IcerikId}", icerikId);
                return StatusCode(500, new { message = "Silme sÄ±rasÄ±nda bir hata oluÅŸtu." });
            }
        }

        // GET: api/kutuphane/kullanici/{kullaniciId}
        [HttpGet("kullanici/{kullaniciId}")]
        public async Task<ActionResult<List<KutuphaneListDto>>> GetKullaniciKutuphanesi(
            Guid kullaniciId,
            [FromQuery] string? durum = null,
            [FromQuery] string? tur = null)
        {
            var query = _context.KutuphaneDurumlari
                .Include(k => k.Icerik)
                .Where(k => k.KullaniciId == kullaniciId && !k.Silindi)
                .AsNoTracking();

            // Durum filtresi
            if (!string.IsNullOrEmpty(durum) && Enum.TryParse<KutuphaneDurum>(durum, true, out var durumEnum))
            {
                query = query.Where(k => k.Durum == durumEnum);
            }

            // TÃ¼r filtresi (film/kitap)
            if (!string.IsNullOrEmpty(tur) && Enum.TryParse<IcerikTuru>(tur, true, out var turEnum))
            {
                query = query.Where(k => k.Icerik.Tur == turEnum);
            }

            var kutuphaneDurumlari = await query
                .OrderByDescending(k => k.GuncellemeZamani)
                .ToListAsync();

            var response = kutuphaneDurumlari.Select(k => new KutuphaneListDto
            {
                IcerikId = k.IcerikId,
                Baslik = k.Icerik.Baslik,
                Tur = k.Icerik.Tur.ToString(),
                PosterUrl = k.Icerik.PosterUrl,
                OrtalamaPuan = k.Icerik.OrtalamaPuan,
                Durum = k.Durum.ToString(),
                Ilerleme = k.Ilerleme,
                GuncellemeZamani = k.GuncellemeZamani
            }).ToList();

            return Ok(response);
        }

        // GET: api/kutuphane/icerik/{icerikId}
        // Frontend service iÃ§in authenticated user'Ä±n bu iÃ§erik iÃ§in kÃ¼tÃ¼phane durumunu getir
        [HttpGet("icerik/{icerikId}")]
        [Authorize]
        public async Task<ActionResult<KutuphaneDurumDto>> GetKullaniciIcerikDurumu(long icerikId)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var kutuphaneDurum = await _context.KutuphaneDurumlari
                    .Include(k => k.Icerik)
                    .AsNoTracking()
                    .FirstOrDefaultAsync(k => k.KullaniciId == kullaniciId && k.IcerikId == icerikId && !k.Silindi);

                if (kutuphaneDurum == null)
                {
                    return NotFound(new { message = "Bu iÃ§erik iÃ§in kÃ¼tÃ¼phane durumu bulunamadÄ±." });
                }

                var response = new KutuphaneDurumDto
                {
                    Id = kutuphaneDurum.Id,
                    KullaniciId = kutuphaneDurum.KullaniciId,
                    IcerikId = kutuphaneDurum.IcerikId,
                    IcerikBaslik = kutuphaneDurum.Icerik.Baslik,
                    IcerikTur = kutuphaneDurum.Icerik.Tur.ToString(),
                    PosterUrl = kutuphaneDurum.Icerik.PosterUrl,
                    Durum = kutuphaneDurum.Durum.ToString(),
                    Ilerleme = kutuphaneDurum.Ilerleme,
                    BaslangicTarihi = kutuphaneDurum.BaslangicTarihi,
                    BitisTarihi = kutuphaneDurum.BitisTarihi,
                    OlusturulmaZamani = kutuphaneDurum.OlusturulmaZamani,
                    GuncellemeZamani = kutuphaneDurum.GuncellemeZamani
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "KullanÄ±cÄ± kÃ¼tÃ¼phane durumu getirilemedi: {IcerikId}", icerikId);
                return StatusCode(500, new { message = "KÃ¼tÃ¼phane durumu getirilemedi." });
            }
        }

        // GET: api/kutuphane/kullanici/{kullaniciId}/istatistik
        [HttpGet("kullanici/{kullaniciId}/istatistik")]
        public async Task<ActionResult<KutuphaneIstatistikDto>> GetKullaniciIstatistik(Guid kullaniciId)
        {
            var kutuphaneDurumlari = await _context.KutuphaneDurumlari
                .Include(k => k.Icerik)
                .Where(k => k.KullaniciId == kullaniciId && !k.Silindi)
                .AsNoTracking()
                .ToListAsync();

            var filmler = kutuphaneDurumlari.Where(k => k.Icerik.Tur == IcerikTuru.film).ToList();
            var kitaplar = kutuphaneDurumlari.Where(k => k.Icerik.Tur == IcerikTuru.kitap).ToList();

            var istatistik = new KutuphaneIstatistikDto
            {
                KullaniciId = kullaniciId,
                ToplamFilm = filmler.Count,
                IzlenenFilm = filmler.Count(f => f.Durum == KutuphaneDurum.izlendi),
                IzlenecekFilm = filmler.Count(f => f.Durum == KutuphaneDurum.izlenecek),
                DevamEdenFilm = filmler.Count(f => f.Durum == KutuphaneDurum.devam_ediyor),
                ToplamKitap = kitaplar.Count,
                OkunanKitap = kitaplar.Count(k => k.Durum == KutuphaneDurum.okundu),
                OkunacakKitap = kitaplar.Count(k => k.Durum == KutuphaneDurum.okunacak),
                DevamEdenKitap = kitaplar.Count(k => k.Durum == KutuphaneDurum.devam_ediyor)
            };

            return Ok(istatistik);
        }

        // Helper Methods BaseApiController'dan gelmektedir.
        // CreateAktivite metodu kaldÄ±rÄ±ldÄ± - veritabanÄ± trigger'larÄ± aktivite kaydÄ±nÄ± otomatik yapÄ±yor.
    }
}


========== Saga.Server\Controllers\ListeController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class ListeController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<ListeController> _logger;

        public ListeController(SagaDbContext context, ILogger<ListeController> logger)
        {
            _context = context;
            _logger = logger;
        }

        // GET: api/liste/populer
        // KeÅŸfet sayfasÄ± iÃ§in popÃ¼ler/Ã¶ne Ã§Ä±kan listeler
        [HttpGet("populer")]
        [AllowAnonymous]
        public async Task<ActionResult<List<PopulerListeDto>>> GetPopulerListeler([FromQuery] int limit = 6)
        {
            try
            {
                // Herkese aÃ§Ä±k, en az 3 iÃ§erikli listeleri getir
                // Ä°Ã§erik sayÄ±sÄ±na ve oluÅŸturulma tarihine gÃ¶re sÄ±rala
                var listeler = await _context.Listeler
                    .Include(l => l.Kullanici)
                    .Include(l => l.Icerikler)
                        .ThenInclude(li => li.Icerik)
                    .Where(l => l.HerkeseAcik && !l.Silindi && l.IcerikSayisi >= 3)
                    .OrderByDescending(l => l.IcerikSayisi)
                    .ThenByDescending(l => l.OlusturulmaZamani)
                    .Take(limit)
                    .AsNoTracking()
                    .ToListAsync();

                var response = listeler.Select(l => new PopulerListeDto
                {
                    Id = l.Id,
                    Ad = l.Ad,
                    Aciklama = l.Aciklama,
                    IcerikSayisi = l.IcerikSayisi,
                    BegeniSayisi = 0, // TODO: BeÄŸeni sistemi eklenince gÃ¼ncelle
                    KullaniciId = l.KullaniciId,
                    KullaniciAdi = l.Kullanici?.KullaniciAdi ?? "Anonim",
                    KullaniciAvatar = l.Kullanici?.AvatarUrl,
                    Onaylandi = l.Tur == ListeTuru.sistem, // Sistem listeleri editÃ¶r onaylÄ± sayÄ±lÄ±r
                    OlusturulmaZamani = l.OlusturulmaZamani,
                    KapakGorselleri = l.Icerikler
                        .OrderBy(li => li.Sira)
                        .Take(3)
                        .Select(li => li.Icerik?.PosterUrl ?? "")
                        .Where(url => !string.IsNullOrEmpty(url))
                        .ToList()
                }).ToList();

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "PopÃ¼ler listeler getirilirken hata oluÅŸtu");
                return StatusCode(500, new { message = "Listeler yÃ¼klenirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/liste
        // KullanÄ±cÄ±nÄ±n kendi listelerini getir
        [HttpGet]
        [Authorize]
        public async Task<ActionResult<List<ListeListDto>>> GetMyLists()
        {
            var kullaniciId = GetCurrentUserId();

            var listeler = await _context.Listeler
                .Include(l => l.Kullanici)
                .Where(l => l.KullaniciId == kullaniciId && !l.Silindi)
                .AsNoTracking()
                .OrderByDescending(l => l.GuncellemeZamani)
                .ToListAsync();

            var response = listeler.Select(l => new ListeListDto
            {
                Id = l.Id,
                KullaniciAdi = l.Kullanici.KullaniciAdi,
                Ad = l.Ad,
                Tur = l.Tur.ToString(),
                IcerikSayisi = l.IcerikSayisi,
                HerkeseAcik = l.HerkeseAcik,
                OlusturulmaZamani = l.OlusturulmaZamani
            }).ToList();

            return Ok(response);
        }

        // POST: api/liste
        [HttpPost]
        [Authorize]
        public async Task<ActionResult<ListeDetailDto>> CreateListe([FromBody] ListeCreateDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                // Tur string'ten enum'a Ã§evir
                if (!Enum.TryParse<ListeTuru>(dto.Tur, true, out var listeTuru))
                {
                    return BadRequest(new { message = "GeÃ§ersiz liste tÃ¼rÃ¼. 'ozel' veya 'sistem' olmalÄ±dÄ±r." });
                }

                var liste = new Liste
                {
                    KullaniciId = kullaniciId,
                    Ad = dto.Ad,
                    Tur = listeTuru,
                    Aciklama = dto.Aciklama,
                    HerkeseAcik = dto.HerkeseAcik,
                    OlusturulmaZamani = DateTime.UtcNow,
                    GuncellemeZamani = DateTime.UtcNow
                };

                _context.Listeler.Add(liste);
                await _context.SaveChangesAsync();

                // Aktivite kaydÄ±
                    // TODO: Listeye ekleme aktiviteleri iÃ§in DB tarafÄ±nda trigger tanÄ±mlandÄ±ÄŸÄ±nda C# tarafÄ±nda manuel Aktivite oluÅŸturma kaldÄ±rÄ±ldÄ±.
                    // Åu anda sadece istatistikler gÃ¼ncelleniyor; feed ihtiyacÄ± artarsa veritabaniyapisi'ne uygun bir trigger eklenmeli.

                var kullanici = await _context.Kullanicilar.FindAsync(kullaniciId);

                var response = new ListeDetailDto
                {
                    Id = liste.Id,
                    KullaniciId = liste.KullaniciId,
                    KullaniciAdi = kullanici?.KullaniciAdi ?? "",
                    Ad = liste.Ad,
                    Tur = liste.Tur.ToString(),
                    Aciklama = liste.Aciklama,
                    HerkeseAcik = liste.HerkeseAcik,
                    IcerikSayisi = 0,
                    OlusturulmaZamani = liste.OlusturulmaZamani,
                    GuncellemeZamani = liste.GuncellemeZamani,
                    Icerikler = new List<ListeIcerikItemDto>()
                };

                return CreatedAtAction(nameof(GetListe), new { id = liste.Id }, response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Liste oluÅŸturulurken hata");
                return StatusCode(500, new { message = "Liste kaydedilirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/liste/{id}
        [HttpGet("{id}")]
        public async Task<ActionResult<ListeDetailDto>> GetListe(long id)
        {
            var kullaniciId = GetCurrentUserIdOrNull();

            var liste = await _context.Listeler
                .Include(l => l.Kullanici)
                .Include(l => l.Icerikler)
                    .ThenInclude(li => li.Icerik)
                .AsNoTracking()
                .FirstOrDefaultAsync(l => l.Id == id && !l.Silindi);

            if (liste == null)
            {
                return NotFound(new { message = "Liste bulunamadÄ±." });
            }

            // Yetki kontrolÃ¼: Ã¶zel liste ise sadece sahibi gÃ¶rebilir
            if (!liste.HerkeseAcik && (!kullaniciId.HasValue || liste.KullaniciId != kullaniciId.Value))
            {
                return Forbid();
            }

            var response = new ListeDetailDto
            {
                Id = liste.Id,
                KullaniciId = liste.KullaniciId,
                KullaniciAdi = liste.Kullanici.KullaniciAdi,
                Ad = liste.Ad,
                Tur = liste.Tur.ToString(),
                Aciklama = liste.Aciklama,
                HerkeseAcik = liste.HerkeseAcik,
                IcerikSayisi = liste.IcerikSayisi,
                OlusturulmaZamani = liste.OlusturulmaZamani,
                GuncellemeZamani = liste.GuncellemeZamani,
                Icerikler = liste.Icerikler
                    .OrderBy(li => li.Sira)
                    .Select(li => new ListeIcerikItemDto
                    {
                        IcerikId = li.IcerikId,
                        Baslik = li.Icerik.Baslik,
                        Tur = li.Icerik.Tur.ToString(),
                        PosterUrl = li.Icerik.PosterUrl,
                        OrtalamaPuan = li.Icerik.OrtalamaPuan,
                        Sira = li.Sira,
                        NotMetni = li.NotMetni,
                        EklenmeZamani = li.EklenmeZamani
                    }).ToList()
            };

            return Ok(response);
        }

        // PUT: api/liste/{id}
        [HttpPut("{id}")]
        [Authorize]
        public async Task<ActionResult<ListeDetailDto>> UpdateListe(long id, [FromBody] ListeUpdateDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var liste = await _context.Listeler
                    .Include(l => l.Kullanici)
                    .Include(l => l.Icerikler)
                        .ThenInclude(li => li.Icerik)
                    .FirstOrDefaultAsync(l => l.Id == id && !l.Silindi);

                if (liste == null)
                {
                    return NotFound(new { message = "Liste bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (liste.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                liste.Ad = dto.Ad;
                liste.Aciklama = dto.Aciklama;
                liste.HerkeseAcik = dto.HerkeseAcik;
                liste.GuncellemeZamani = DateTime.UtcNow;

                await _context.SaveChangesAsync();

                var response = new ListeDetailDto
                {
                    Id = liste.Id,
                    KullaniciId = liste.KullaniciId,
                    KullaniciAdi = liste.Kullanici.KullaniciAdi,
                    Ad = liste.Ad,
                    Tur = liste.Tur.ToString(),
                    Aciklama = liste.Aciklama,
                    HerkeseAcik = liste.HerkeseAcik,
                    IcerikSayisi = liste.IcerikSayisi,
                    OlusturulmaZamani = liste.OlusturulmaZamani,
                    GuncellemeZamani = liste.GuncellemeZamani,
                    Icerikler = liste.Icerikler
                        .OrderBy(li => li.Sira)
                        .Select(li => new ListeIcerikItemDto
                        {
                            IcerikId = li.IcerikId,
                            Baslik = li.Icerik.Baslik,
                            Tur = li.Icerik.Tur.ToString(),
                            PosterUrl = li.Icerik.PosterUrl,
                            OrtalamaPuan = li.Icerik.OrtalamaPuan,
                            Sira = li.Sira,
                            NotMetni = li.NotMetni,
                            EklenmeZamani = li.EklenmeZamani
                        }).ToList()
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Liste gÃ¼ncellenirken hata: {Id}", id);
                return StatusCode(500, new { message = "Liste gÃ¼ncellenirken bir hata oluÅŸtu." });
            }
        }

        // DELETE: api/liste/{id}
        [HttpDelete("{id}")]
        [Authorize]
        public async Task<IActionResult> DeleteListe(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var liste = await _context.Listeler
                    .FirstOrDefaultAsync(l => l.Id == id);

                if (liste == null)
                {
                    return NotFound(new { message = "Liste bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (liste.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                // Soft delete
                liste.Silindi = true;
                liste.GuncellemeZamani = DateTime.UtcNow;
                await _context.SaveChangesAsync();

                return NoContent();
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Liste silinirken hata: {Id}", id);
                return StatusCode(500, new { message = "Liste silinirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/liste/kullanici/{kullaniciId}
        [HttpGet("kullanici/{kullaniciId}")]
        public async Task<ActionResult<List<ListeListDto>>> GetKullaniciListeleri(Guid kullaniciId)
        {
            var currentUserId = GetCurrentUserIdOrNull();

            var query = _context.Listeler
                .Include(l => l.Kullanici)
                .Where(l => l.KullaniciId == kullaniciId && !l.Silindi)
                .AsNoTracking();

            // EÄŸer baÅŸka kullanÄ±cÄ±nÄ±n listelerine bakÄ±lÄ±yorsa, sadece herkese aÃ§Ä±k olanlarÄ± gÃ¶ster
            if (!currentUserId.HasValue || currentUserId.Value != kullaniciId)
            {
                query = query.Where(l => l.HerkeseAcik);
            }

            var listeler = await query
                .OrderByDescending(l => l.GuncellemeZamani)
                .ToListAsync();

            var response = listeler.Select(l => new ListeListDto
            {
                Id = l.Id,
                KullaniciAdi = l.Kullanici.KullaniciAdi,
                Ad = l.Ad,
                Tur = l.Tur.ToString(),
                IcerikSayisi = l.IcerikSayisi,
                HerkeseAcik = l.HerkeseAcik,
                OlusturulmaZamani = l.OlusturulmaZamani
            }).ToList();

            return Ok(response);
        }

        // GET: api/liste/icerik/{icerikId}
        // Belirli bir iÃ§eriÄŸin hangi listelerde olduÄŸunu getir
        [HttpGet("icerik/{icerikId}")]
        [Authorize]
        public async Task<ActionResult<List<ListeListDto>>> GetIcerikListeleri(long icerikId)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                // KullanÄ±cÄ±nÄ±n listelerinden bu iÃ§eriÄŸi iÃ§erenleri getir
                var listeler = await _context.Listeler
                    .Include(l => l.Kullanici)
                    .Include(l => l.Icerikler)
                    .Where(l => l.KullaniciId == kullaniciId && !l.Silindi && l.Icerikler.Any(li => li.IcerikId == icerikId))
                    .AsNoTracking()
                    .OrderByDescending(l => l.GuncellemeZamani)
                    .ToListAsync();

                var response = listeler.Select(l => new ListeListDto
                {
                    Id = l.Id,
                    KullaniciAdi = l.Kullanici.KullaniciAdi,
                    Ad = l.Ad,
                    Tur = l.Tur.ToString(),
                    IcerikSayisi = l.IcerikSayisi,
                    HerkeseAcik = l.HerkeseAcik,
                    OlusturulmaZamani = l.OlusturulmaZamani
                }).ToList();

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Ä°Ã§erik listeleri getirilemedi: {IcerikId}", icerikId);
                return StatusCode(500, new { message = "Ä°Ã§erik listeleri getirilemedi." });
            }
        }

        // POST: api/liste/{id}/icerik
        [HttpPost("{id}/icerik")]
        [Authorize]
        public async Task<IActionResult> AddIcerikToListe(long id, [FromBody] ListeIcerikEkleDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var liste = await _context.Listeler
                    .Include(l => l.Icerikler)
                    .FirstOrDefaultAsync(l => l.Id == id && !l.Silindi);

                if (liste == null)
                {
                    return NotFound(new { message = "Liste bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (liste.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                // Ä°Ã§erik zaten listede mi? (AnyAsync ile optimize edildi)
                var icerikListedeMi = await _context.ListeIcerikleri
                    .AnyAsync(li => li.ListeId == id && li.IcerikId == dto.IcerikId);
                if (icerikListedeMi)
                {
                    return Conflict(new { message = "Bu iÃ§erik zaten listede mevcut." });
                }

                // Ä°Ã§erik var mÄ± kontrol et
                var icerikVarMi = await _context.Icerikler.AnyAsync(i => i.Id == dto.IcerikId);
                if (!icerikVarMi)
                {
                    return NotFound(new { message = "Ä°Ã§erik bulunamadÄ±." });
                }

                var listeIcerigi = new ListeIcerigi
                {
                    ListeId = id,
                    IcerikId = dto.IcerikId,
                    Sira = dto.Sira,
                    NotMetni = dto.NotMetni,
                    EklenmeZamani = DateTime.UtcNow
                };

                _context.ListeIcerikleri.Add(listeIcerigi);
                
                // Ä°Ã§erik sayÄ±sÄ±nÄ± artÄ±r
                liste.IcerikSayisi++;
                liste.GuncellemeZamani = DateTime.UtcNow;

                await _context.SaveChangesAsync();

                // NOT: Aktivite kaydÄ± artÄ±k veritabanÄ± trigger'Ä± (trg_akt_liste) tarafÄ±ndan yapÄ±lÄ±yor.
                // Ã‡ifte kayÄ±t sorununu Ã¶nlemek iÃ§in CreateListeIcerikAktivite Ã§aÄŸrÄ±sÄ± kaldÄ±rÄ±ldÄ±.

                return Ok(new { message = "Ä°Ã§erik listeye eklendi.", icerikSayisi = liste.IcerikSayisi });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Listeye iÃ§erik eklenirken hata: {ListeId}, {IcerikId}", id, dto.IcerikId);
                return StatusCode(500, new { message = "Ä°Ã§erik eklenirken bir hata oluÅŸtu." });
            }
        }

        // PUT: api/liste/{id}/icerik/{icerikId}
        [HttpPut("{id}/icerik/{icerikId}")]
        [Authorize]
        public async Task<IActionResult> UpdateListeIcerik(long id, long icerikId, [FromBody] ListeIcerikGuncelleDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var liste = await _context.Listeler
                    .Include(l => l.Icerikler)
                    .FirstOrDefaultAsync(l => l.Id == id && !l.Silindi);

                if (liste == null)
                {
                    return NotFound(new { message = "Liste bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (liste.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                var listeIcerigi = liste.Icerikler.FirstOrDefault(li => li.IcerikId == icerikId);
                if (listeIcerigi == null)
                {
                    return NotFound(new { message = "Ä°Ã§erik listede bulunamadÄ±." });
                }

                listeIcerigi.Sira = dto.Sira;
                listeIcerigi.NotMetni = dto.NotMetni;
                liste.GuncellemeZamani = DateTime.UtcNow;

                await _context.SaveChangesAsync();

                return Ok(new { message = "Liste iÃ§eriÄŸi gÃ¼ncellendi." });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Liste iÃ§eriÄŸi gÃ¼ncellenirken hata: {ListeId}, {IcerikId}", id, icerikId);
                return StatusCode(500, new { message = "GÃ¼ncelleme sÄ±rasÄ±nda bir hata oluÅŸtu." });
            }
        }

        // DELETE: api/liste/{id}/icerik/{icerikId}
        [HttpDelete("{id}/icerik/{icerikId}")]
        [Authorize]
        public async Task<IActionResult> RemoveIcerikFromListe(long id, long icerikId)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var liste = await _context.Listeler
                    .Include(l => l.Icerikler)
                    .FirstOrDefaultAsync(l => l.Id == id && !l.Silindi);

                if (liste == null)
                {
                    return NotFound(new { message = "Liste bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (liste.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                var listeIcerigi = liste.Icerikler.FirstOrDefault(li => li.IcerikId == icerikId);
                if (listeIcerigi == null)
                {
                    return NotFound(new { message = "Ä°Ã§erik listede bulunamadÄ±." });
                }

                _context.ListeIcerikleri.Remove(listeIcerigi);
                
                // Ä°Ã§erik sayÄ±sÄ±nÄ± azalt
                liste.IcerikSayisi = Math.Max(0, liste.IcerikSayisi - 1);
                liste.GuncellemeZamani = DateTime.UtcNow;

                await _context.SaveChangesAsync();

                return Ok(new { message = "Ä°Ã§erik listeden Ã§Ä±karÄ±ldÄ±.", icerikSayisi = liste.IcerikSayisi });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Listeden iÃ§erik Ã§Ä±karÄ±lÄ±rken hata: {ListeId}, {IcerikId}", id, icerikId);
                return StatusCode(500, new { message = "Ä°Ã§erik Ã§Ä±karÄ±lÄ±rken bir hata oluÅŸtu." });
            }
        }

        // POST: api/liste/{id}/paylas
        // Proje Ä°sterleri 2.1.5: Liste paylaÅŸÄ±m linki
        [HttpPost("{id}/paylas")]
        [Authorize]
        public async Task<ActionResult<ListePaylasildiDto>> GetShareLink(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var liste = await _context.Listeler
                    .Include(l => l.Kullanici)
                    .AsNoTracking()
                    .FirstOrDefaultAsync(l => l.Id == id && !l.Silindi);

                if (liste == null)
                {
                    return NotFound(new { message = "Liste bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (liste.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                // Listeyi herkese aÃ§Ä±k yap (paylaÅŸÄ±m iÃ§in gerekli)
                if (!liste.HerkeseAcik)
                {
                    var listeEntity = await _context.Listeler.FindAsync(id);
                    if (listeEntity != null)
                    {
                        listeEntity.HerkeseAcik = true;
                        listeEntity.GuncellemeZamani = DateTime.UtcNow;
                        await _context.SaveChangesAsync();
                    }
                }

                // PaylaÅŸÄ±m URL'i oluÅŸtur (frontend URL'i ile)
                var baseUrl = $"{Request.Scheme}://{Request.Host}";
                var shareUrl = $"{baseUrl}/liste/{id}";

                var response = new ListePaylasildiDto
                {
                    ListeId = id,
                    ListeAdi = liste.Ad,
                    KullaniciAdi = liste.Kullanici.KullaniciAdi,
                    PaylasilmaUrl = shareUrl,
                    HerkeseAcik = true,
                    IcerikSayisi = liste.IcerikSayisi
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Liste paylaÅŸÄ±lÄ±rken hata: {ListeId}", id);
                return StatusCode(500, new { message = "PaylaÅŸÄ±m linki oluÅŸturulurken bir hata oluÅŸtu." });
            }
        }

        // POST: api/liste/{id}/gizlilik
        // Proje Ä°sterleri 2.1.5: Liste gizlilik ayarÄ± toggle
        [HttpPost("{id}/gizlilik")]
        [Authorize]
        public async Task<IActionResult> TogglePrivacy(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var liste = await _context.Listeler
                    .FirstOrDefaultAsync(l => l.Id == id && !l.Silindi);

                if (liste == null)
                {
                    return NotFound(new { message = "Liste bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (liste.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                // Gizlilik ayarÄ±nÄ± deÄŸiÅŸtir
                liste.HerkeseAcik = !liste.HerkeseAcik;
                liste.GuncellemeZamani = DateTime.UtcNow;
                await _context.SaveChangesAsync();

                return Ok(new
                {
                    message = liste.HerkeseAcik ? "Liste herkese aÃ§Ä±k yapÄ±ldÄ±" : "Liste gizli yapÄ±ldÄ±",
                    herkeseAcik = liste.HerkeseAcik
                });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Liste gizlilik ayarÄ± deÄŸiÅŸtirilirken hata: {ListeId}", id);
                return StatusCode(500, new { message = "Gizlilik ayarÄ± deÄŸiÅŸtirilirken bir hata oluÅŸtu." });
            }
        }

        // Helper Methods BaseApiController'dan gelmektedir.
        // CreateAktivite ve CreateListeIcerikAktivite metodlarÄ± artÄ±k kullanÄ±lmÄ±yor;
        // Liste aktiviteleri veritabanÄ± trigger'Ä± (trg_akt_liste) ile oluÅŸturuluyor.
    }
}


========== Saga.Server\Controllers\PuanlamaController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class PuanlamaController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<PuanlamaController> _logger;

        public PuanlamaController(SagaDbContext context, ILogger<PuanlamaController> logger)
        {
            _context = context;
            _logger = logger;
        }

        // Ä°Ã§eriÄŸin ortalama puanÄ±nÄ± gÃ¼ncelle
        private async Task UpdateIcerikOrtalamaPuanAsync(long icerikId)
        {
            var ortalama = await _context.Puanlamalar
                .Where(p => p.IcerikId == icerikId)
                .AverageAsync(p => (decimal?)p.Puan) ?? 0;

            var icerik = await _context.Icerikler.FindAsync(icerikId);
            if (icerik != null)
            {
                icerik.OrtalamaPuan = Math.Round(ortalama, 1);
                await _context.SaveChangesAsync();
            }
        }

        // POST: api/puanlama
        [HttpPost]
        [Authorize]
        public async Task<ActionResult<PuanlamaResponseDto>> CreatePuanlama([FromBody] PuanlamaCreateDto dto)
        {
            try
            {
                // KullanÄ±cÄ± ID'sini JWT'den al (ÅŸimdilik placeholder)
                var kullaniciId = GetCurrentUserId();

                // AynÄ± iÃ§erik iÃ§in daha Ã¶nce puanlama var mÄ± kontrol et
                var mevcutPuanlama = await _context.Puanlamalar
                    .FirstOrDefaultAsync(p => p.KullaniciId == kullaniciId && p.IcerikId == dto.IcerikId);

                if (mevcutPuanlama != null)
                {
                    return Conflict(new { message = "Bu iÃ§erik iÃ§in zaten bir puanlama yaptÄ±nÄ±z. GÃ¼ncelleme iÃ§in PUT endpoint'ini kullanÄ±n." });
                }

                var puanlama = new Puanlama
                {
                    KullaniciId = kullaniciId,
                    IcerikId = dto.IcerikId,
                    Puan = dto.Puan,
                    OlusturulmaZamani = DateTime.UtcNow,
                    GuncellemeZamani = DateTime.UtcNow
                };

                _context.Puanlamalar.Add(puanlama);
                await _context.SaveChangesAsync();

                // Ä°Ã§eriÄŸin ortalama puanÄ±nÄ± gÃ¼ncelle
                await UpdateIcerikOrtalamaPuanAsync(dto.IcerikId);

                // Aktivite kaydÄ± artÄ±k PostgreSQL trigger'Ä± ile otomatik oluÅŸturuluyor (veritabaniyapisi -> aktivite_ekle_puanlama)
                // Bu yÃ¼zden burada manuel Aktivite eklemiyoruz ki Ã§ift kayÄ±t oluÅŸmasÄ±n.

                var response = new PuanlamaResponseDto
                {
                    Id = puanlama.Id,
                    IcerikId = puanlama.IcerikId,
                    KullaniciId = puanlama.KullaniciId,
                    KullaniciAdi = "", // TODO: Join ile doldurulacak
                    IcerikBaslik = "", // TODO: Join ile doldurulacak
                    Puan = puanlama.Puan,
                    OlusturulmaZamani = puanlama.OlusturulmaZamani,
                    GuncellemeZamani = puanlama.GuncellemeZamani
                };

                return CreatedAtAction(nameof(GetPuanlama), new { id = puanlama.Id }, response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Puanlama oluÅŸturulurken hata: {IcerikId}", dto.IcerikId);
                return StatusCode(500, new { message = "Puanlama kaydedilirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/puanlama/{id}
        [HttpGet("{id}")]
        public async Task<ActionResult<PuanlamaResponseDto>> GetPuanlama(long id)
        {
            var puanlama = await _context.Puanlamalar
                .Include(p => p.Kullanici)
                .Include(p => p.Icerik)
                .AsNoTracking()
                .FirstOrDefaultAsync(p => p.Id == id);

            if (puanlama == null)
            {
                return NotFound(new { message = "Puanlama bulunamadÄ±." });
            }

            var response = new PuanlamaResponseDto
            {
                Id = puanlama.Id,
                IcerikId = puanlama.IcerikId,
                KullaniciId = puanlama.KullaniciId,
                KullaniciAdi = puanlama.Kullanici.KullaniciAdi,
                IcerikBaslik = puanlama.Icerik.Baslik,
                Puan = puanlama.Puan,
                OlusturulmaZamani = puanlama.OlusturulmaZamani,
                GuncellemeZamani = puanlama.GuncellemeZamani
            };

            return Ok(response);
        }

        // PUT: api/puanlama/{id}
        [HttpPut("{id}")]
        [Authorize]
        public async Task<ActionResult<PuanlamaResponseDto>> UpdatePuanlama(long id, [FromBody] PuanlamaUpdateDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var puanlama = await _context.Puanlamalar
                    .Include(p => p.Kullanici)
                    .Include(p => p.Icerik)
                    .FirstOrDefaultAsync(p => p.Id == id);

                if (puanlama == null)
                {
                    return NotFound(new { message = "Puanlama bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼: sadece kendi puanlamasÄ±nÄ± gÃ¼ncelleyebilir
                if (puanlama.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                puanlama.Puan = dto.Puan;
                puanlama.GuncellemeZamani = DateTime.UtcNow;

                await _context.SaveChangesAsync();

                // Ä°Ã§eriÄŸin ortalama puanÄ±nÄ± gÃ¼ncelle
                await UpdateIcerikOrtalamaPuanAsync(puanlama.IcerikId);

                var response = new PuanlamaResponseDto
                {
                    Id = puanlama.Id,
                    IcerikId = puanlama.IcerikId,
                    KullaniciId = puanlama.KullaniciId,
                    KullaniciAdi = puanlama.Kullanici.KullaniciAdi,
                    IcerikBaslik = puanlama.Icerik.Baslik,
                    Puan = puanlama.Puan,
                    OlusturulmaZamani = puanlama.OlusturulmaZamani,
                    GuncellemeZamani = puanlama.GuncellemeZamani
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Puanlama gÃ¼ncellenirken hata: {Id}", id);
                return StatusCode(500, new { message = "Puanlama gÃ¼ncellenirken bir hata oluÅŸtu." });
            }
        }

        // DELETE: api/puanlama/{id}
        [HttpDelete("{id}")]
        [Authorize]
        public async Task<IActionResult> DeletePuanlama(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var puanlama = await _context.Puanlamalar
                    .FirstOrDefaultAsync(p => p.Id == id);

                if (puanlama == null)
                {
                    return NotFound(new { message = "Puanlama bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (puanlama.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                var icerikId = puanlama.IcerikId;
                _context.Puanlamalar.Remove(puanlama);
                await _context.SaveChangesAsync();

                // Ä°Ã§eriÄŸin ortalama puanÄ±nÄ± gÃ¼ncelle
                await UpdateIcerikOrtalamaPuanAsync(icerikId);

                return NoContent();
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Puanlama silinirken hata: {Id}", id);
                return StatusCode(500, new { message = "Puanlama silinirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/puanlama/icerik/{icerikId}/istatistik
        [HttpGet("icerik/{icerikId}/istatistik")]
        public async Task<ActionResult<PuanlamaIstatistikDto>> GetIcerikIstatistik(long icerikId)
        {
            var puanlamalar = await _context.Puanlamalar
                .AsNoTracking()
                .Where(p => p.IcerikId == icerikId && !p.Silindi)
                .ToListAsync();

            if (!puanlamalar.Any())
            {
                return Ok(new PuanlamaIstatistikDto
                {
                    IcerikId = icerikId,
                    ToplamPuanlama = 0,
                    OrtalamaPuan = 0,
                    Puan1Sayisi = 0,
                    Puan2Sayisi = 0,
                    Puan3Sayisi = 0,
                    Puan4Sayisi = 0,
                    Puan5Sayisi = 0,
                    Puan6Sayisi = 0,
                    Puan7Sayisi = 0,
                    Puan8Sayisi = 0,
                    Puan9Sayisi = 0,
                    Puan10Sayisi = 0
                });
            }

            var gruplar = puanlamalar
                .GroupBy(p => (int)Math.Floor(p.Puan))
                .ToDictionary(g => g.Key, g => g.Count());

            var istatistik = new PuanlamaIstatistikDto
            {
                IcerikId = icerikId,
                ToplamPuanlama = puanlamalar.Count,
                OrtalamaPuan = (decimal)puanlamalar.Average(p => p.Puan),
                Puan1Sayisi = gruplar.GetValueOrDefault(1, 0),
                Puan2Sayisi = gruplar.GetValueOrDefault(2, 0),
                Puan3Sayisi = gruplar.GetValueOrDefault(3, 0),
                Puan4Sayisi = gruplar.GetValueOrDefault(4, 0),
                Puan5Sayisi = gruplar.GetValueOrDefault(5, 0),
                Puan6Sayisi = gruplar.GetValueOrDefault(6, 0),
                Puan7Sayisi = gruplar.GetValueOrDefault(7, 0),
                Puan8Sayisi = gruplar.GetValueOrDefault(8, 0),
                Puan9Sayisi = gruplar.GetValueOrDefault(9, 0),
                Puan10Sayisi = gruplar.GetValueOrDefault(10, 0)
            };

            return Ok(istatistik);
        }

        // GET: api/puanlama/icerik/{icerikId}/benim
        // Proje Ä°sterler 2.1.4: KullanÄ±cÄ±nÄ±n bu iÃ§erik iÃ§in verdiÄŸi puanÄ± getir
        [HttpGet("icerik/{icerikId}/benim")]
        [Authorize]
        public async Task<ActionResult<PuanlamaResponseDto>> GetKullaniciIcerikPuani(long icerikId)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var puanlama = await _context.Puanlamalar
                    .Include(p => p.Kullanici)
                    .Include(p => p.Icerik)
                    .AsNoTracking()
                    .FirstOrDefaultAsync(p => p.KullaniciId == kullaniciId && p.IcerikId == icerikId && !p.Silindi);

                if (puanlama == null)
                {
                    return NotFound(new { message = "Bu iÃ§erik iÃ§in henÃ¼z puanlama yapmadÄ±nÄ±z." });
                }

                var response = new PuanlamaResponseDto
                {
                    Id = puanlama.Id,
                    IcerikId = puanlama.IcerikId,
                    KullaniciId = puanlama.KullaniciId,
                    KullaniciAdi = puanlama.Kullanici.KullaniciAdi,
                    IcerikBaslik = puanlama.Icerik.Baslik,
                    Puan = puanlama.Puan,
                    OlusturulmaZamani = puanlama.OlusturulmaZamani,
                    GuncellemeZamani = puanlama.GuncellemeZamani
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "KullanÄ±cÄ± puanlamasÄ± getirilemedi: {IcerikId}", icerikId);
                return StatusCode(500, new { message = "Puanlama getirilemedi." });
            }
        }

        // GET: api/puanlama/kullanici/{kullaniciId}
        [HttpGet("kullanici/{kullaniciId}")]
        public async Task<ActionResult<List<PuanlamaResponseDto>>> GetKullaniciPuanlamalari(Guid kullaniciId)
        {
            var puanlamalar = await _context.Puanlamalar
                .Include(p => p.Kullanici)
                .Include(p => p.Icerik)
                .AsNoTracking()
                .Where(p => p.KullaniciId == kullaniciId && !p.Silindi)
                .OrderByDescending(p => p.GuncellemeZamani ?? p.OlusturulmaZamani)
                .Take(100)
                .ToListAsync();

            var response = puanlamalar.Select(p => new PuanlamaResponseDto
            {
                Id = p.Id,
                IcerikId = p.IcerikId,
                KullaniciId = p.KullaniciId,
                KullaniciAdi = p.Kullanici.KullaniciAdi,
                IcerikBaslik = p.Icerik.Baslik,
                Puan = p.Puan,
                OlusturulmaZamani = p.OlusturulmaZamani,
                GuncellemeZamani = p.GuncellemeZamani
            }).ToList();

            return Ok(response);
        }

        // POST: api/puanlama/sync-averages (Mevcut tÃ¼m iÃ§eriklerin ortalama puanlarÄ±nÄ± gÃ¼ncelle - bir kerelik kullanÄ±m)
        [HttpPost("sync-averages")]
        [Authorize]
        public async Task<ActionResult> SyncAllAverages()
        {
            try
            {
                // PuanlanmÄ±ÅŸ tÃ¼m iÃ§eriklerin ID'lerini al
                var icerikIds = await _context.Puanlamalar
                    .Where(p => !p.Silindi)
                    .Select(p => p.IcerikId)
                    .Distinct()
                    .ToListAsync();

                foreach (var icerikId in icerikIds)
                {
                    await UpdateIcerikOrtalamaPuanAsync(icerikId);
                }

                return Ok(new { message = $"{icerikIds.Count} iÃ§eriÄŸin ortalama puanÄ± gÃ¼ncellendi." });
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Ortalama puanlar senkronize edilirken hata");
                return StatusCode(500, new { message = "Ortalama puanlar gÃ¼ncellenirken bir hata oluÅŸtu." });
            }
        }

        // Helper Methods
        // GetCurrentUserId BaseApiController'dan gelmektedir.

        // CreateAktivite metodu artÄ±k kullanÄ±lmÄ±yor; puanlama aktiviteleri veritabanÄ± trigger'Ä± ile oluÅŸturuluyor.
    }
}


========== Saga.Server\Controllers\SeedController.cs ==========

using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Newtonsoft.Json.Linq;
using Saga.Server.Data;   // Namespace'ine dikkat et (Data klasöründe Context olmalı)
using Saga.Server.Models; // Modellerin burada
using Saga.Server.Services;
using System.Text.Json;

namespace Saga.Server.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class SeedController : ControllerBase
    {
        private readonly SagaDbContext _context; // Context ismin SagaDbContext olmalı
        private readonly IConfiguration _config;
        private readonly HttpClient _httpClient;
        private readonly ITmdbService _tmdbService;
        private readonly IGoogleBooksService _googleBooksService;

        public SeedController(SagaDbContext context, IConfiguration config, ITmdbService tmdbService, IGoogleBooksService googleBooksService)
        {
            _context = context;
            _config = config;
            _httpClient = new HttpClient();
            _tmdbService = tmdbService;
            _googleBooksService = googleBooksService;
            // TMDb bazen User-Agent olmadan cevap vermez, takılma sebebi bu olabilir:
            _httpClient.DefaultRequestHeaders.Add("User-Agent", "Saga-StudentProject");
        }

        [HttpPost("movies")]
        public async Task<IActionResult> SeedMovies()
        {
            Console.WriteLine("🚀 [1] Seed işlemi tetiklendi...");

            try
            {
                // ADIM 1: VERİTABANI KONTROLÜ
                Console.WriteLine("⏳ [2] Veritabanı bağlantısı test ediliyor...");
                if (!await _context.Database.CanConnectAsync())
                {
                    Console.WriteLine("❌ [HATA] Veritabanına bağlanılamadı!");
                    return StatusCode(500, "Veritabanı bağlantısı yok.");
                }
                Console.WriteLine("✅ [3] Veritabanı bağlantısı BAŞARILI.");

                // ADIM 2: TMDB İSTEĞİ
                string apiKey = "eec2662a9ba4e82f840e3bdb7bbc4e48"; // Test key
                string url = $"https://api.themoviedb.org/3/movie/popular?api_key={apiKey}&language=tr-TR&page=1";

                Console.WriteLine($"⏳ [4] TMDb API'ye istek atılıyor... ({url})");

                // Timeout koyalım ki sonsuza kadar beklemesin (10 saniye)
                _httpClient.Timeout = TimeSpan.FromSeconds(10);
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    Console.WriteLine($"❌ [HATA] TMDb cevap vermedi. Kod: {response.StatusCode}");
                    return BadRequest($"TMDb Hatası: {response.StatusCode}");
                }
                Console.WriteLine("✅ [5] TMDb'den cevap geldi.");

                // ADIM 3: VERİYİ İŞLEME
                var jsonString = await response.Content.ReadAsStringAsync();
                var json = JObject.Parse(jsonString);
                var results = json["results"];
                Console.WriteLine($"✅ [6] {results?.Count() ?? 0} adet film verisi ayrıştırıldı.");

                int eklenen = 0;
                if (results != null)
                {
                    foreach (var item in results)
                    {
                        string hariciId = item["id"]?.ToString() ?? "0";

                        // Var mı kontrolü
                        bool varMi = await _context.Icerikler.AnyAsync(x => x.HariciId == hariciId);
                        if (!varMi)
                        {
                            var film = new Icerik
                            {
                                HariciId = hariciId,
                                ApiKaynagi = ApiKaynak.tmdb,
                                Tur = IcerikTuru.film,
                                Baslik = item["title"]?.ToString() ?? "Adsız",
                                Aciklama = item["overview"]?.ToString(),
                                PosterUrl = item["poster_path"] != null
                                    ? $"https://image.tmdb.org/t/p/w500{item["poster_path"]}"
                                    : null,
                                OrtalamaPuan = (decimal)(item["vote_average"]?.ToObject<double>() ?? 0),
                                MetaVeri = item.ToString(),
                                OlusturulmaZamani = DateTime.UtcNow
                            };
                            _context.Icerikler.Add(film);
                            eklenen++;
                        }
                    }
                }
                Console.WriteLine($"📦 [7] {eklenen} yeni film hafızaya alındı.");

                // ADIM 4: KAYIT
                Console.WriteLine("⏳ [8] Veritabanına kaydediliyor (SaveChanges)...");
                await _context.SaveChangesAsync();
                Console.WriteLine("✅✅✅ [9] İŞLEM TAMAMLANDI! ✅✅✅");

                return Ok(new { message = $"{eklenen} film başarıyla eklendi." });
            }
            catch (Exception ex)
            {
                Console.WriteLine($"🔥🔥🔥 [KRİTİK HATA]: {ex.Message}");
                if (ex.InnerException != null) Console.WriteLine($"[DETAY]: {ex.InnerException.Message}");
                return StatusCode(500, ex.Message);
            }
        }

        /// <summary>
        /// Mevcut içeriklerin meta verilerini günceller (oyuncular, yönetmen, türler vb.)
        /// </summary>
        [HttpPost("update-metadata")]
        public async Task<IActionResult> UpdateMetadata([FromQuery] int limit = 50)
        {
            Console.WriteLine("🔄 [1] Meta veri güncelleme başlatıldı...");
            
            try
            {
                int guncellenen = 0;
                int hatali = 0;

                // TMDB filmlerini güncelle
                var tmdbFilmler = await _context.Icerikler
                    .Where(i => i.ApiKaynagi == ApiKaynak.tmdb && i.Tur == IcerikTuru.film && !i.HariciId.StartsWith("tv:"))
                    .Take(limit)
                    .ToListAsync();

                Console.WriteLine($"📹 [2] {tmdbFilmler.Count} adet film bulundu.");

                foreach (var film in tmdbFilmler)
                {
                    try
                    {
                        var filmDto = await _tmdbService.GetFilmByIdAsync(film.HariciId);
                        if (filmDto != null)
                        {
                            var metaVeri = new
                            {
                                yonetmen = filmDto.Yonetmen,
                                oyuncular = filmDto.Oyuncular?.Select(o => new { ad = o.Ad, karakter = o.Karakter, profilUrl = o.ProfilUrl }),
                                turler = filmDto.Turler,
                                sure = filmDto.Sure,
                                mediaType = filmDto.MediaType
                            };
                            film.MetaVeri = JsonSerializer.Serialize(metaVeri);
                            guncellenen++;
                            Console.WriteLine($"✅ Film güncellendi: {film.Baslik}");
                        }
                        // Rate limiting - TMDB için bekle
                        await Task.Delay(250);
                    }
                    catch (Exception ex)
                    {
                        Console.WriteLine($"⚠️ Film güncellenemedi ({film.Baslik}): {ex.Message}");
                        hatali++;
                    }
                }

                // TMDB dizilerini güncelle
                var tmdbDiziler = await _context.Icerikler
                    .Where(i => i.ApiKaynagi == ApiKaynak.tmdb && i.HariciId.StartsWith("tv:"))
                    .Take(limit)
                    .ToListAsync();

                Console.WriteLine($"📺 [3] {tmdbDiziler.Count} adet dizi bulundu.");

                foreach (var dizi in tmdbDiziler)
                {
                    try
                    {
                        var tmdbId = dizi.HariciId.Replace("tv:", "");
                        var diziDto = await _tmdbService.GetTvShowByIdAsync(tmdbId);
                        if (diziDto != null)
                        {
                            var metaVeri = new
                            {
                                yonetmen = diziDto.Yonetmen,
                                oyuncular = diziDto.Oyuncular?.Select(o => new { ad = o.Ad, karakter = o.Karakter, profilUrl = o.ProfilUrl }),
                                turler = diziDto.Turler,
                                sezonSayisi = diziDto.SezonSayisi,
                                bolumSayisi = diziDto.BolumSayisi,
                                mediaType = diziDto.MediaType
                            };
                            dizi.MetaVeri = JsonSerializer.Serialize(metaVeri);
                            guncellenen++;
                            Console.WriteLine($"✅ Dizi güncellendi: {dizi.Baslik}");
                        }
                        await Task.Delay(250);
                    }
                    catch (Exception ex)
                    {
                        Console.WriteLine($"⚠️ Dizi güncellenemedi ({dizi.Baslik}): {ex.Message}");
                        hatali++;
                    }
                }

                // Google Books kitaplarını güncelle
                var kitaplar = await _context.Icerikler
                    .Where(i => i.ApiKaynagi == ApiKaynak.google_books && i.Tur == IcerikTuru.kitap)
                    .Take(limit)
                    .ToListAsync();

                Console.WriteLine($"📚 [4] {kitaplar.Count} adet kitap bulundu.");

                foreach (var kitap in kitaplar)
                {
                    try
                    {
                        var kitapDto = await _googleBooksService.GetBookByIdAsync(kitap.HariciId);
                        if (kitapDto != null)
                        {
                            var metaVeri = new
                            {
                                yazarlar = kitapDto.Yazarlar,
                                sayfaSayisi = kitapDto.SayfaSayisi,
                                yayinevi = kitapDto.Yayinevi,
                                isbn = kitapDto.ISBN,
                                kategoriler = kitapDto.Kategoriler
                            };
                            kitap.MetaVeri = JsonSerializer.Serialize(metaVeri);
                            guncellenen++;
                            Console.WriteLine($"✅ Kitap güncellendi: {kitap.Baslik}");
                        }
                        await Task.Delay(100);
                    }
                    catch (Exception ex)
                    {
                        Console.WriteLine($"⚠️ Kitap güncellenemedi ({kitap.Baslik}): {ex.Message}");
                        hatali++;
                    }
                }

                await _context.SaveChangesAsync();

                Console.WriteLine($"✅✅✅ Meta veri güncelleme tamamlandı! Güncellenen: {guncellenen}, Hatalı: {hatali}");

                return Ok(new { 
                    message = "Meta veri güncelleme tamamlandı",
                    guncellenen,
                    hatali,
                    filmSayisi = tmdbFilmler.Count,
                    diziSayisi = tmdbDiziler.Count,
                    kitapSayisi = kitaplar.Count
                });
            }
            catch (Exception ex)
            {
                Console.WriteLine($"🔥 Meta veri güncelleme hatası: {ex.Message}");
                return StatusCode(500, ex.Message);
            }
        }

        // POST: api/seed/fix-tur
        // HariciId'si "tv:" ile başlayan içeriklerin türünü "dizi" olarak düzelt
        [HttpPost("fix-tur")]
        public async Task<IActionResult> FixContentTypes()
        {
            Console.WriteLine("🔧 İçerik türleri düzeltiliyor...");

            try
            {
                // tv: ile başlayan ama film olarak işaretli içerikleri bul
                var yanlisIcerikler = await _context.Icerikler
                    .Where(i => i.HariciId.StartsWith("tv:") && i.Tur == IcerikTuru.film)
                    .ToListAsync();

                Console.WriteLine($"📌 {yanlisIcerikler.Count} adet yanlış türlü içerik bulundu.");

                foreach (var icerik in yanlisIcerikler)
                {
                    Console.WriteLine($"  - {icerik.Baslik} ({icerik.HariciId}): film -> dizi");
                    icerik.Tur = IcerikTuru.dizi;
                }

                await _context.SaveChangesAsync();

                Console.WriteLine($"✅ {yanlisIcerikler.Count} içerik düzeltildi.");

                return Ok(new
                {
                    message = "İçerik türleri düzeltildi",
                    duzeltilen = yanlisIcerikler.Count,
                    icerikler = yanlisIcerikler.Select(i => new { i.Id, i.Baslik, i.HariciId }).ToList()
                });
            }
            catch (Exception ex)
            {
                Console.WriteLine($"🔥 Tür düzeltme hatası: {ex.Message}");
                return StatusCode(500, ex.Message);
            }
        }
    }
}

========== Saga.Server\Controllers\YorumController.cs ==========

using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.DTOs;
using Saga.Server.Models;

namespace Saga.Server.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class YorumController : BaseApiController
    {
        private readonly SagaDbContext _context;
        private readonly ILogger<YorumController> _logger;

        public YorumController(SagaDbContext context, ILogger<YorumController> logger)
        {
            _context = context;
            _logger = logger;
        }

        // POST: api/yorum
        [HttpPost]
        [Authorize]
        public async Task<ActionResult<YorumResponseDto>> CreateYorum([FromBody] YorumCreateDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var yorum = new Yorum
                {
                    KullaniciId = kullaniciId,
                    IcerikId = dto.IcerikId,
                    Baslik = dto.Baslik,
                    IcerikMetni = dto.Icerik,
                    Puan = dto.Puan,
                    SpoilerIceriyor = dto.SpoilerIceriyor,
                    OlusturulmaZamani = DateTime.UtcNow,
                    UstYorumId = dto.UstYorumId
                };

                _context.Yorumlar.Add(yorum);
                await _context.SaveChangesAsync();

                // Aktivite kaydÄ± artÄ±k PostgreSQL trigger'Ä± ile otomatik oluÅŸturuluyor (veritabaniyapisi -> aktivite_ekle_yorum)
                // Bu yÃ¼zden burada manuel Aktivite eklemiyoruz ki Ã§ift kayÄ±t oluÅŸmasÄ±n.

                var kullanici = await _context.Kullanicilar.FindAsync(kullaniciId);

                // YanÄ±t ise Ã¼st yorum sahibine bildirim gÃ¶nder
                if (dto.UstYorumId.HasValue)
                {
                    var ustYorum = await _context.Yorumlar
                        .Include(y => y.Kullanici)
                        .FirstOrDefaultAsync(y => y.Id == dto.UstYorumId);
                    
                    if (ustYorum != null && ustYorum.KullaniciId != kullaniciId)
                    {
                        var bildirim = new Bildirim
                        {
                            AliciId = ustYorum.KullaniciId,
                            GonderenId = kullaniciId,
                            Tip = "yorum_yanit",
                            Baslik = "Yorumunuza YanÄ±t",
                            Mesaj = $"{kullanici?.KullaniciAdi ?? "Birisi"} yorumunuza yanÄ±t verdi",
                            IcerikId = dto.IcerikId,
                            YorumId = yorum.Id,
                            LinkUrl = $"/icerik/{dto.IcerikId}",
                            OlusturulmaZamani = DateTime.UtcNow
                        };
                        _context.Bildirimler.Add(bildirim);
                        await _context.SaveChangesAsync();
                    }
                }

                var response = new YorumResponseDto
                {
                    Id = yorum.Id,
                    IcerikId = yorum.IcerikId,
                    KullaniciId = yorum.KullaniciId,
                    KullaniciAdi = kullanici?.KullaniciAdi ?? "",
                    KullaniciAvatar = kullanici?.AvatarUrl,
                    Baslik = yorum.Baslik,
                    Icerik = yorum.IcerikMetni,
                    Puan = yorum.Puan,
                    SpoilerIceriyor = yorum.SpoilerIceriyor,
                    BegeniSayisi = 0,
                    OlusturulmaZamani = yorum.OlusturulmaZamani,
                    GuncellemeZamani = yorum.GuncellemeZamani,
                    KullaniciBegendiMi = false,
                    UstYorumId = yorum.UstYorumId
                };

                return CreatedAtAction(nameof(GetYorum), new { id = yorum.Id }, response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Yorum oluÅŸturulurken hata: {IcerikId}", dto.IcerikId);
                return StatusCode(500, new { message = "Yorum kaydedilirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/yorum/{id}
        [HttpGet("{id}")]
        public async Task<ActionResult<YorumResponseDto>> GetYorum(long id)
        {
            var yorum = await _context.Yorumlar
                .Include(y => y.Kullanici)
                .Include(y => y.Begenenler)
                .AsNoTracking()
                .FirstOrDefaultAsync(y => y.Id == id && !y.Silindi);

            if (yorum == null)
            {
                return NotFound(new { message = "Yorum bulunamadÄ±." });
            }

            var kullaniciId = GetCurrentUserIdOrNull();
            var kullanicininBegendigi = kullaniciId.HasValue &&
                yorum.Begenenler.Any(b => b.KullaniciId == kullaniciId.Value);

            var response = new YorumResponseDto
            {
                Id = yorum.Id,
                IcerikId = yorum.IcerikId,
                KullaniciId = yorum.KullaniciId,
                KullaniciAdi = yorum.Kullanici.KullaniciAdi,
                KullaniciAvatar = yorum.Kullanici.AvatarUrl,
                Baslik = yorum.Baslik,
                Icerik = yorum.IcerikMetni,
                Puan = yorum.Puan,
                SpoilerIceriyor = yorum.SpoilerIceriyor,
                BegeniSayisi = yorum.Begenenler.Count,
                OlusturulmaZamani = yorum.OlusturulmaZamani,
                GuncellemeZamani = yorum.GuncellemeZamani,
                KullaniciBegendiMi = kullanicininBegendigi
            };

            return Ok(response);
        }

        // PUT: api/yorum/{id}
        [HttpPut("{id}")]
        [Authorize]
        public async Task<ActionResult<YorumResponseDto>> UpdateYorum(long id, [FromBody] YorumUpdateDto dto)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var yorum = await _context.Yorumlar
                    .Include(y => y.Kullanici)
                    .Include(y => y.Begenenler)
                    .FirstOrDefaultAsync(y => y.Id == id && !y.Silindi);

                if (yorum == null)
                {
                    return NotFound(new { message = "Yorum bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (yorum.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                yorum.Baslik = dto.Baslik;
                yorum.IcerikMetni = dto.Icerik;
                yorum.Puan = dto.Puan;
                yorum.SpoilerIceriyor = dto.SpoilerIceriyor;
                yorum.GuncellemeZamani = DateTime.UtcNow;

                await _context.SaveChangesAsync();

                var response = new YorumResponseDto
                {
                    Id = yorum.Id,
                    IcerikId = yorum.IcerikId,
                    KullaniciId = yorum.KullaniciId,
                    KullaniciAdi = yorum.Kullanici.KullaniciAdi,
                    KullaniciAvatar = yorum.Kullanici.AvatarUrl,
                    Baslik = yorum.Baslik,
                    Icerik = yorum.IcerikMetni,
                    Puan = yorum.Puan,
                    SpoilerIceriyor = yorum.SpoilerIceriyor,
                    BegeniSayisi = yorum.Begenenler.Count,
                    OlusturulmaZamani = yorum.OlusturulmaZamani,
                    GuncellemeZamani = yorum.GuncellemeZamani,
                    KullaniciBegendiMi = true
                };

                return Ok(response);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Yorum gÃ¼ncellenirken hata: {Id}", id);
                return StatusCode(500, new { message = "Yorum gÃ¼ncellenirken bir hata oluÅŸtu." });
            }
        }

        // DELETE: api/yorum/{id}
        [HttpDelete("{id}")]
        [Authorize]
        public async Task<IActionResult> DeleteYorum(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var yorum = await _context.Yorumlar
                    .FirstOrDefaultAsync(y => y.Id == id);

                if (yorum == null)
                {
                    return NotFound(new { message = "Yorum bulunamadÄ±." });
                }

                // Yetki kontrolÃ¼
                if (yorum.KullaniciId != kullaniciId)
                {
                    return Forbid();
                }

                // Soft delete
                yorum.Silindi = true;
                yorum.GuncellemeZamani = DateTime.UtcNow;
                await _context.SaveChangesAsync();

                return NoContent();
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Yorum silinirken hata: {Id}", id);
                return StatusCode(500, new { message = "Yorum silinirken bir hata oluÅŸtu." });
            }
        }

        // GET: api/yorum/icerik/{icerikId}
        [HttpGet("icerik/{icerikId}")]
        public async Task<ActionResult<List<YorumListDto>>> GetIcerikYorumlari(
            long icerikId,
            [FromQuery] int sayfa = 1,
            [FromQuery] int sayfaBoyutu = 20)
        {
            var kullaniciId = GetCurrentUserIdOrNull();

            var query = _context.Yorumlar
                .Include(y => y.Kullanici)
                .Include(y => y.Begenenler)
                .Include(y => y.Yanitlar)
                    .ThenInclude(r => r.Kullanici)
                .Include(y => y.Yanitlar)
                    .ThenInclude(r => r.Begenenler)
                .Where(y => y.IcerikId == icerikId && !y.Silindi && y.UstYorumId == null)
                .OrderByDescending(y => y.OlusturulmaZamani)
                .AsNoTracking();

            var toplam = await query.CountAsync();
            var yorumlar = await query
                .Skip((sayfa - 1) * sayfaBoyutu)
                .Take(sayfaBoyutu)
                .ToListAsync();

            var response = yorumlar.Select(y => new YorumListDto
            {
                Id = y.Id,
                KullaniciId = y.KullaniciId,
                KullaniciAdi = y.Kullanici.KullaniciAdi,
                KullaniciAvatar = y.Kullanici.AvatarUrl,
                Baslik = y.Baslik,
                Icerik = y.IcerikMetni,
                IcerikOzet = y.IcerikMetni.Length > 150 ? y.IcerikMetni.Substring(0, 150) + "..." : y.IcerikMetni,
                Puan = y.Puan,
                SpoilerIceriyor = y.SpoilerIceriyor,
                BegeniSayisi = y.Begenenler.Count,
                KullaniciBegendiMi = kullaniciId.HasValue && y.Begenenler.Any(b => b.KullaniciId == kullaniciId.Value),
                OlusturulmaZamani = y.OlusturulmaZamani,
                UstYorumId = y.UstYorumId,
                Yanitlar = y.Yanitlar
                    .Where(r => !r.Silindi)
                    .OrderBy(r => r.OlusturulmaZamani)
                    .Select(r => new YorumListDto
                    {
                        Id = r.Id,
                        KullaniciId = r.KullaniciId,
                        KullaniciAdi = r.Kullanici.KullaniciAdi,
                        KullaniciAvatar = r.Kullanici.AvatarUrl,
                        Baslik = r.Baslik,
                        Icerik = r.IcerikMetni,
                        IcerikOzet = r.IcerikMetni,
                        Puan = r.Puan,
                        SpoilerIceriyor = r.SpoilerIceriyor,
                        BegeniSayisi = r.Begenenler.Count,
                        KullaniciBegendiMi = kullaniciId.HasValue && r.Begenenler.Any(b => b.KullaniciId == kullaniciId.Value),
                        OlusturulmaZamani = r.OlusturulmaZamani,
                        UstYorumId = r.UstYorumId
                    }).ToList()
            }).ToList();

            Response.Headers.Append("X-Toplam-Sayfa", ((toplam + sayfaBoyutu - 1) / sayfaBoyutu).ToString());
            Response.Headers.Append("X-Toplam-Kayit", toplam.ToString());

            return Ok(response);
        }

        // POST: api/yorum/{id}/begeni
        [HttpPost("{id}/begeni")]
        [Authorize]
        public async Task<IActionResult> ToggleBegeni(long id)
        {
            try
            {
                var kullaniciId = GetCurrentUserId();

                var yorum = await _context.Yorumlar
                    .Include(y => y.Begenenler)
                    .Include(y => y.Kullanici)
                    .FirstOrDefaultAsync(y => y.Id == id && !y.Silindi);

                if (yorum == null)
                {
                    return NotFound(new { message = "Yorum bulunamadÄ±." });
                }

                var mevcutBegeni = yorum.Begenenler
                    .FirstOrDefault(b => b.KullaniciId == kullaniciId);

                if (mevcutBegeni != null)
                {
                    // BeÄŸeniyi kaldÄ±r
                    _context.YorumBegenileri.Remove(mevcutBegeni);
                    await _context.SaveChangesAsync();
                    var yeniBegeniSayisi = await _context.YorumBegenileri.CountAsync(b => b.YorumId == id);
                    return Ok(new { message = "BeÄŸeni kaldÄ±rÄ±ldÄ±", begendi = false, begeniSayisi = yeniBegeniSayisi });
                }
                else
                {
                    // BeÄŸeni ekle
                    var begeni = new YorumBegeni
                    {
                        YorumId = id,
                        KullaniciId = kullaniciId,
                        OlusturulmaZamani = DateTime.UtcNow
                    };
                    _context.YorumBegenileri.Add(begeni);
                    
                    // Bildirim oluÅŸtur (kendi yorumunu beÄŸendiyse hariÃ§)
                    if (yorum.KullaniciId != kullaniciId)
                    {
                        var begenen = await _context.Kullanicilar.FindAsync(kullaniciId);
                        var bildirim = new Bildirim
                        {
                            AliciId = yorum.KullaniciId,
                            GonderenId = kullaniciId,
                            Tip = "yorum_begeni",
                            Baslik = "Yorumunuz BeÄŸenildi",
                            Mesaj = $"{begenen?.KullaniciAdi ?? "Birisi"} yorumunuzu beÄŸendi",
                            IcerikId = yorum.IcerikId,
                            YorumId = yorum.Id,
                            LinkUrl = $"/icerik/{yorum.IcerikId}",
                            OlusturulmaZamani = DateTime.UtcNow
                        };
                        _context.Bildirimler.Add(bildirim);
                    }
                    
                    await _context.SaveChangesAsync();
                    var guncelBegeniSayisi = await _context.YorumBegenileri.CountAsync(b => b.YorumId == id);
                    return Ok(new { message = "Yorum beÄŸenildi", begendi = true, begeniSayisi = guncelBegeniSayisi });
                }
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "BeÄŸeni iÅŸlenirken hata: {YorumId}", id);
                return StatusCode(500, new { message = "BeÄŸeni iÅŸlenirken bir hata oluÅŸtu." });
            }
        }

        // Helper Methods BaseApiController'dan gelmektedir.
        private async Task CreateAktivite(Guid kullaniciId, long yorumId)
        {
            var aktivite = new Aktivite
            {
                KullaniciId = kullaniciId,
                AktiviteTuru = AktiviteTuru.yorum,
                YorumId = yorumId,
                OlusturulmaZamani = DateTime.UtcNow
            };

            _context.Aktiviteler.Add(aktivite);
            await _context.SaveChangesAsync();
        }
    }
}


========== Saga.Server\Data\SagaDbContext.cs ==========

using Microsoft.EntityFrameworkCore;
using Saga.Server.Models;
using Npgsql; // Bu kütüphane şart!

namespace Saga.Server.Data
{
    public class SagaDbContext : DbContext
    {
        public SagaDbContext(DbContextOptions<SagaDbContext> options) : base(options)
        {
            // PostgreSQL tarih formatı sorunu için
            AppContext.SetSwitch("Npgsql.EnableLegacyTimestampBehavior", true);
        }

        // Tüm Tabloların Tanımı
        public DbSet<Kullanici> Kullanicilar { get; set; }
        public DbSet<Icerik> Icerikler { get; set; }
        public DbSet<Aktivite> Aktiviteler { get; set; }
        public DbSet<Puanlama> Puanlamalar { get; set; }
        public DbSet<Yorum> Yorumlar { get; set; }
        public DbSet<Takip> Takipler { get; set; }
        public DbSet<Liste> Listeler { get; set; }
        public DbSet<ListeIcerigi> ListeIcerikleri { get; set; }
        public DbSet<YorumBegeni> YorumBegenileri { get; set; }
        public DbSet<KutuphaneDurumu> KutuphaneDurumlari { get; set; }
        public DbSet<Bildirim> Bildirimler { get; set; }
        
        // Yeni tablolar
        public DbSet<AktiviteBegeni> AktiviteBegenileri { get; set; }
        public DbSet<AktiviteYorum> AktiviteYorumlari { get; set; }
        public DbSet<AktiviteYorumBegeni> AktiviteYorumBegenileri { get; set; }
        public DbSet<KullaniciAyarlari> KullaniciAyarlari { get; set; }
        public DbSet<Engellenen> Engellenenler { get; set; }
        public DbSet<IcerikFavori> IcerikFavorileri { get; set; }
        
        // Oyuncu tabloları
        public DbSet<Oyuncu> Oyuncular { get; set; }
        public DbSet<IcerikOyuncu> IcerikOyunculari { get; set; }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            // 1. COMPOSITE KEYS (Çoklu Anahtarlar)
            // Bu tabloların tek bir ID'si yok, iki kolon birleşip anahtar oluyor.
            modelBuilder.Entity<Takip>()
                .HasKey(t => new { t.TakipEdenId, t.TakipEdilenId });

            modelBuilder.Entity<ListeIcerigi>()
                .HasKey(li => new { li.ListeId, li.IcerikId });

            modelBuilder.Entity<YorumBegeni>()
                .HasKey(yb => new { yb.KullaniciId, yb.YorumId });
            
            // Yeni composite key'ler
            modelBuilder.Entity<AktiviteBegeni>()
                .HasKey(ab => new { ab.KullaniciId, ab.AktiviteId });
            
            modelBuilder.Entity<AktiviteYorumBegeni>()
                .HasKey(ayb => new { ayb.KullaniciId, ayb.YorumId });
            
            modelBuilder.Entity<Engellenen>()
                .HasKey(e => new { e.EngelleyenId, e.EngellenenId });
            
            modelBuilder.Entity<IcerikFavori>()
                .HasKey(f => new { f.KullaniciId, f.IcerikId });

            // 2. JSONB AYARLARI
            // Bu kolonlar veritabanında JSON olarak saklanıyor
            modelBuilder.Entity<Icerik>()
                .Property(b => b.MetaVeri)
                .HasColumnType("jsonb");

            modelBuilder.Entity<Aktivite>()
                .Property(b => b.Veri)
                .HasColumnType("jsonb");
            
            modelBuilder.Entity<Bildirim>()
                .Property(b => b.MetaVeri)
                .HasColumnType("jsonb");

            // 3. ENUM AYARLARI (Hata almamak için string mapliyoruz)
            // SQL'de ENUM olsa bile C# tarafında string olarak çalışacağız.
            // Npgsql'in kafası karışmasın diye açıkça tip belirtiyoruz.

            modelBuilder.Entity<Icerik>(entity => {
                entity.Property(e => e.ApiKaynagi).HasColumnType("api_kaynak");
                entity.Property(e => e.Tur).HasColumnType("icerik_turu");
            });

            modelBuilder.Entity<Kullanici>(entity => {
                entity.Property(e => e.Rol).HasColumnType("kullanici_rol");
            });

            modelBuilder.Entity<Aktivite>(entity => {
                entity.Property(e => e.AktiviteTuru).HasColumnType("aktivite_turu");
            });

            modelBuilder.Entity<Liste>(entity => {
                entity.Property(e => e.Tur).HasColumnType("liste_turu");
            });

            modelBuilder.Entity<KutuphaneDurumu>(entity => {
                entity.Property(e => e.Durum).HasColumnType("kutuphane_durum");
            });

            // 4. İLİŞKİLER (Relationships)
            
            // Takip ilişkisi (self-referencing many-to-many)
            // TakipEden -> Takipler (kimin takip listesi)
            // TakipEdilen -> TakipEdenler (kimin takipçileri)
            modelBuilder.Entity<Kullanici>()
                .HasMany(k => k.Takipler)
                .WithOne(t => t.TakipEden)
                .HasForeignKey(t => t.TakipEdenId)
                .OnDelete(DeleteBehavior.Restrict);

            modelBuilder.Entity<Kullanici>()
                .HasMany(k => k.TakipEdenler)
                .WithOne(t => t.TakipEdilen)
                .HasForeignKey(t => t.TakipEdilenId)
                .OnDelete(DeleteBehavior.Restrict);

            modelBuilder.Entity<Aktivite>()
                .HasOne(a => a.Kullanici)
                .WithMany()
                .HasForeignKey(a => a.KullaniciId);

            modelBuilder.Entity<Yorum>()
                .HasOne(y => y.Kullanici)
                .WithMany(k => k.Yorumlari)
                .HasForeignKey(y => y.KullaniciId)
                .OnDelete(DeleteBehavior.Cascade);
            
            // Kullanıcı Ayarları ilişkisi (1-1)
            modelBuilder.Entity<Kullanici>()
                .HasOne(k => k.Ayarlar)
                .WithOne(a => a.Kullanici)
                .HasForeignKey<KullaniciAyarlari>(a => a.KullaniciId);
            
            // Aktivite Beğeni ilişkileri
            modelBuilder.Entity<AktiviteBegeni>()
                .HasOne(ab => ab.Aktivite)
                .WithMany(a => a.Begeniler)
                .HasForeignKey(ab => ab.AktiviteId);
            
            modelBuilder.Entity<AktiviteBegeni>()
                .HasOne(ab => ab.Kullanici)
                .WithMany()
                .HasForeignKey(ab => ab.KullaniciId);
            
            // Aktivite Yorum ilişkileri
            modelBuilder.Entity<AktiviteYorum>()
                .HasOne(ay => ay.Aktivite)
                .WithMany(a => a.AktiviteYorumlari)
                .HasForeignKey(ay => ay.AktiviteId);
            
            modelBuilder.Entity<AktiviteYorum>()
                .HasOne(ay => ay.Kullanici)
                .WithMany()
                .HasForeignKey(ay => ay.KullaniciId);
            
            // Aktivite Yorum yanıtları (self-referencing)
            modelBuilder.Entity<AktiviteYorum>()
                .HasOne(ay => ay.UstYorum)
                .WithMany(ay => ay.Yanitlar)
                .HasForeignKey(ay => ay.UstYorumId)
                .OnDelete(DeleteBehavior.Cascade);
            
            // Aktivite Yorum Beğeni ilişkileri
            modelBuilder.Entity<AktiviteYorumBegeni>()
                .HasOne(ayb => ayb.Yorum)
                .WithMany(ay => ay.Begeniler)
                .HasForeignKey(ayb => ayb.YorumId);
            
            modelBuilder.Entity<AktiviteYorumBegeni>()
                .HasOne(ayb => ayb.Kullanici)
                .WithMany()
                .HasForeignKey(ayb => ayb.KullaniciId);
            
            // İçerik Oyuncu ilişkileri
            modelBuilder.Entity<IcerikOyuncu>()
                .HasOne(io => io.Icerik)
                .WithMany(i => i.IcerikOyunculari)
                .HasForeignKey(io => io.IcerikId)
                .OnDelete(DeleteBehavior.Cascade);
            
            modelBuilder.Entity<IcerikOyuncu>()
                .HasOne(io => io.Oyuncu)
                .WithMany(o => o.IcerikOyunculari)
                .HasForeignKey(io => io.OyuncuId)
                .OnDelete(DeleteBehavior.Cascade);
            
            // Oyuncu için unique constraint (harici_id)
            modelBuilder.Entity<Oyuncu>()
                .HasIndex(o => o.HariciId)
                .IsUnique();
        }
    }
}

========== Saga.Server\DTOs\AktiviteDtos.cs ==========

namespace Saga.Server.DTOs
{
    // Basit aktivite DTO (kullanÄ±cÄ± profili iÃ§in)
    public class AktiviteDto
    {
        public long Id { get; set; }
        public Guid KullaniciId { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string? AvatarUrl { get; set; }
        public string AktiviteTuru { get; set; } = null!;
        public long? IcerikId { get; set; }
        public string? IcerikBaslik { get; set; }
        public string? PosterUrl { get; set; }
        public long? YorumId { get; set; }
        public long? PuanlamaId { get; set; }
        public decimal? Puan { get; set; }
        public long? ListeId { get; set; }
        public string? ListeAdi { get; set; }
        public string? Veri { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
    }

    // Feed iÃ§in aktivite item'Ä±
    public class AktiviteFeedDto
    {
        public long Id { get; set; }
        public Guid KullaniciId { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string? KullaniciAvatar { get; set; }
        public string AktiviteTuru { get; set; } = null!; // puanlama, yorum, listeye_ekleme, takip, durum_guncelleme
        public long? IcerikId { get; set; }
        public string? IcerikTur { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
        
        // Ä°statistikler
        public int BegeniSayisi { get; set; } = 0;
        public int YorumSayisi { get; set; } = 0;
        public int PaylasimSayisi { get; set; } = 0;
        public bool Begendim { get; set; } = false; // KullanÄ±cÄ± bu aktiviteyi beÄŸenmiÅŸ mi
        
        // Aktivite verileri (JSONB'den parse edilmiÅŸ)
        public AktiviteVeriDto? Veri { get; set; }
    }

    // Aktivite veri yapÄ±sÄ±
    public class AktiviteVeriDto
    {
        // Ortak alanlar
        public string? Baslik { get; set; }
        public string? PosterUrl { get; set; }
        public string? Tur { get; set; }
        
        // Puanlama iÃ§in
        public decimal? Puan { get; set; }
        
        // Platform ve harici puanlar
        public decimal? OrtalamaPuan { get; set; } // Saga platform ortalamasÄ±
        public decimal? HariciPuan { get; set; } // TMDB/IMDB puanÄ±
        
        // Yorum iÃ§in
        public string? YorumOzet { get; set; }
        public bool? SpoilerIceriyor { get; set; }
        public long? YorumId { get; set; }
        public int? YorumTamUzunluk { get; set; } // Tam yorum uzunluÄŸu
        
        // Liste iÃ§in
        public string? ListeAdi { get; set; }
        
        // Takip iÃ§in
        public string? TakipEdilenKullaniciAdi { get; set; }
        public string? TakipEdilenAvatar { get; set; }
        
        // Durum gÃ¼ncelleme iÃ§in
        public string? Durum { get; set; }
        
        // Detay bilgileri (feed.html ile uyumlu)
        public int? Yil { get; set; }
        public string? Sure { get; set; }
        public int? SezonSayisi { get; set; }
        public int? BolumSayisi { get; set; }
        public int? SayfaSayisi { get; set; }
        public string? Yazar { get; set; }
    }

    // Aktivite yanÄ±tÄ±
    public class AktiviteResponseDto
    {
        public long Id { get; set; }
        public Guid KullaniciId { get; set; }
        public string AktiviteTuru { get; set; } = null!;
        public long? IcerikId { get; set; }
        public long? PuanlamaId { get; set; }
        public long? YorumId { get; set; }
        public long? ListeId { get; set; }
        public string Veri { get; set; } = "{}";
        public DateTime OlusturulmaZamani { get; set; }
    }

    // Feed filtreleme iÃ§in query params
    public class FeedFilterDto
    {
        public Guid? KullaniciId { get; set; } // Belirli bir kullanÄ±cÄ±nÄ±n aktiviteleri
        public string? AktiviteTuru { get; set; } // Belirli bir aktivite tÃ¼rÃ¼
        public bool SadeceTabipEdilenler { get; set; } = false; // Sadece takip edilenlerin aktiviteleri
        public int Page { get; set; } = 1;
        public int Limit { get; set; } = 20;
    }
    
    // Aktivite beÄŸeni iÃ§in
    public class AktiviteBegeniDto
    {
        public long AktiviteId { get; set; }
        public Guid KullaniciId { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string? AvatarUrl { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
    }
    
    // Aktivite yorumu iÃ§in
    public class AktiviteYorumDto
    {
        public long Id { get; set; }
        public long AktiviteId { get; set; }
        public Guid KullaniciId { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string? KullaniciAvatar { get; set; }
        public string Icerik { get; set; } = null!;
        public long? UstYorumId { get; set; }
        public int BegeniSayisi { get; set; } = 0;
        public bool Begendim { get; set; } = false;
        public DateTime OlusturulmaZamani { get; set; }
        public List<AktiviteYorumDto> Yanitlar { get; set; } = new();
    }
    
    // Aktivite yorum oluÅŸturma
    public class AktiviteYorumOlusturDto
    {
        public string Icerik { get; set; } = null!;
        public long? UstYorumId { get; set; }
    }
}


========== Saga.Server\DTOs\AuthDtos.cs ==========

using System.ComponentModel.DataAnnotations;

namespace Saga.Server.DTOs
{
    public class RegisterDto
    {
        [Required(ErrorMessage = "Kullanıcı adı gereklidir")]
        [StringLength(50, MinimumLength = 3, ErrorMessage = "Kullanıcı adı 3-50 karakter arasında olmalıdır")]
        public string KullaniciAdi { get; set; } = string.Empty;

        [Required(ErrorMessage = "E-posta gereklidir")]
        [EmailAddress(ErrorMessage = "Geçerli bir e-posta adresi giriniz")]
        public string Eposta { get; set; } = string.Empty;

        [Required(ErrorMessage = "Şifre gereklidir")]
        [StringLength(100, MinimumLength = 6, ErrorMessage = "Şifre en az 6 karakter olmalıdır")]
        public string Sifre { get; set; } = string.Empty;

        [Required(ErrorMessage = "Şifre tekrarı gereklidir")]
        [Compare("Sifre", ErrorMessage = "Şifreler eşleşmiyor")]
        public string SifreTekrar { get; set; } = string.Empty;
    }

    public class LoginDto
    {
        [Required(ErrorMessage = "E-posta gereklidir")]
        [EmailAddress(ErrorMessage = "Geçerli bir e-posta adresi giriniz")]
        public string Eposta { get; set; } = string.Empty;

        [Required(ErrorMessage = "Şifre gereklidir")]
        public string Sifre { get; set; } = string.Empty;
    }

    public class ForgotPasswordDto
    {
        [Required(ErrorMessage = "E-posta gereklidir")]
        [EmailAddress(ErrorMessage = "Geçerli bir e-posta adresi giriniz")]
        public string Eposta { get; set; } = string.Empty;
    }

    public class ResetPasswordDto
    {
        [Required(ErrorMessage = "Token gereklidir")]
        public string Token { get; set; } = string.Empty;

        [Required(ErrorMessage = "Yeni şifre gereklidir")]
        [StringLength(100, MinimumLength = 6, ErrorMessage = "Şifre en az 6 karakter olmalıdır")]
        public string YeniSifre { get; set; } = string.Empty;

        [Required(ErrorMessage = "Şifre tekrarı gereklidir")]
        [Compare("YeniSifre", ErrorMessage = "Şifreler eşleşmiyor")]
        public string YeniSifreTekrar { get; set; } = string.Empty;
    }

    public class RefreshTokenDto
    {
        [Required(ErrorMessage = "Refresh token gereklidir")]
        public string RefreshToken { get; set; } = string.Empty;
    }

    public class AuthResponseDto
    {
        public string? AccessToken { get; set; }
        public string? RefreshToken { get; set; }
        public UserDto? User { get; set; }
    }

    public class UserDto
    {
        public Guid Id { get; set; }
        public string Eposta { get; set; } = string.Empty;
        public string KullaniciAdi { get; set; } = string.Empty;
        public string? GoruntulemeAdi { get; set; }
        public string? AvatarUrl { get; set; }
    }
}

========== Saga.Server\DTOs\AyarlarDtos.cs ==========

namespace Saga.Server.DTOs
{
    // KullanÄ±cÄ± ayarlarÄ± gÃ¶rÃ¼ntÃ¼leme
    public class KullaniciAyarlariDto
    {
        public bool BildirimYeniTakipci { get; set; } = true;
        public bool BildirimYorumlar { get; set; } = true;
        public bool BildirimBegeniler { get; set; } = true;
        public bool BildirimOneriler { get; set; } = false;
        public bool BildirimEmail { get; set; } = false;
        public bool ProfilGizli { get; set; } = false;
        public bool AktiviteGizli { get; set; } = false;
        public string Tema { get; set; } = "sistem";
        public string Dil { get; set; } = "tr";
    }
    
    // Ayar gÃ¼ncelleme
    public class KullaniciAyarlariGuncelleDto
    {
        public bool? BildirimYeniTakipci { get; set; }
        public bool? BildirimYorumlar { get; set; }
        public bool? BildirimBegeniler { get; set; }
        public bool? BildirimOneriler { get; set; }
        public bool? BildirimEmail { get; set; }
        public bool? ProfilGizli { get; set; }
        public bool? AktiviteGizli { get; set; }
        public string? Tema { get; set; }
        public string? Dil { get; set; }
    }
    
    // GÃ¼venlik ayarlarÄ± gÃ¼ncelleme
    public class GuvenlikAyarlariDto
    {
        public string? MevcutSifre { get; set; }
        public string? YeniSifre { get; set; }
        public string? YeniSifreTekrar { get; set; }
    }
    
    // Hesap silme
    public class HesapSilDto
    {
        public string Sifre { get; set; } = null!;
        public string Onay { get; set; } = null!; // "SÄ°L" yazmalÄ±
    }
}


========== Saga.Server\DTOs\BildirimDtos.cs ==========

using Saga.Server.Models;

namespace Saga.Server.DTOs
{
    public class BildirimKullaniciDto
    {
        public Guid Id { get; set; }
        public string KullaniciAdi { get; set; } = string.Empty;
        public string? AvatarUrl { get; set; }
    }

    public class BildirimDto
    {
        public long Id { get; set; }
        public string Tip { get; set; } = string.Empty;
        public string? Baslik { get; set; }
        public string? Mesaj { get; set; }
        public string? LinkUrl { get; set; }
        public bool Okundu { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
        public BildirimKullaniciDto? Gonderen { get; set; }
    }

    public class BildirimListResponseDto
    {
        public List<BildirimDto> Bildirimler { get; set; } = new();
        public int ToplamSayisi { get; set; }
        public int Sayfa { get; set; }
        public int ToplamSayfa { get; set; }
    }

    public class OkunmamisBildirimlerResponseDto
    {
        public List<BildirimDto> Bildirimler { get; set; } = new();
        public int OkunmamisSayisi { get; set; }
    }

    public class OkunmamisSayisiDto
    {
        public int OkunmamisSayisi { get; set; }
    }

    public class BildirimIslemSonucDto
    {
        public string Message { get; set; } = string.Empty;
    }

    public class TestBildirimDto
    {
        public Guid AliciId { get; set; }
        public string? Tip { get; set; }
        public string Baslik { get; set; } = string.Empty;
        public string Mesaj { get; set; } = string.Empty;
        public string? LinkUrl { get; set; }
    }
}


========== Saga.Server\DTOs\IcerikDtos.cs ==========

using Saga.Server.Models;

namespace Saga.Server.DTOs
{
    // Liste gÃ¶rÃ¼nÃ¼mÃ¼ iÃ§in hafif DTO
    public class IcerikListDto
    {
        public long Id { get; set; }
        public string Baslik { get; set; } = null!;
        public string Tur { get; set; } = null!;
        public string? Aciklama { get; set; }
        public string? PosterUrl { get; set; }
        public decimal OrtalamaPuan { get; set; } // Platform kullanÄ±cÄ± puanÄ±
        public int PuanlamaSayisi { get; set; }
        public decimal HariciPuan { get; set; } // TMDB/IMDB puanÄ±
        public int HariciOySayisi { get; set; }
        public decimal PopulerlikSkoru { get; set; }
        public DateOnly? YayinTarihi { get; set; }
        // SÃ¼re ve bÃ¶lÃ¼m bilgileri
        public int? Sure { get; set; } // Film sÃ¼resi (dakika)
        public int? SezonSayisi { get; set; } // Diziler iÃ§in sezon sayÄ±sÄ±
        public int? BolumSayisi { get; set; } // Diziler iÃ§in bÃ¶lÃ¼m sayÄ±sÄ±
        public int? SayfaSayisi { get; set; } // Kitaplar iÃ§in sayfa sayÄ±sÄ±
    }

    // Detay sayfasÄ± iÃ§in tam DTO
    public class IcerikDetailDto
    {
        public long Id { get; set; }
        public string HariciId { get; set; } = null!;
        public string ApiKaynagi { get; set; } = null!;
        public string Tur { get; set; } = null!;
        public string Baslik { get; set; } = null!;
        public string? Aciklama { get; set; }
        public string? PosterUrl { get; set; }
        public DateOnly? YayinTarihi { get; set; }
        public decimal OrtalamaPuan { get; set; } // Platform kullanÄ±cÄ± puanÄ±
        public int PuanlamaSayisi { get; set; }
        public decimal HariciPuan { get; set; } // TMDB/IMDB puanÄ±
        public int HariciOySayisi { get; set; }
        public int YorumSayisi { get; set; }
        public int ListeyeEklenmeSayisi { get; set; }
        public int GoruntulemeSayisi { get; set; }
        public decimal PopulerlikSkoru { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
        
        // KullanÄ±cÄ±nÄ±n bu iÃ§erikle iliÅŸkisi (varsa)
        public decimal? KullaniciPuani { get; set; }
        public string? KullanicininDurumu { get; set; } // izlendi, izlenecek vs.
        
        // Film/Dizi iÃ§in meta veriler
        public string? Yonetmen { get; set; }
        public List<OyuncuInfoDto>? Oyuncular { get; set; }
        public List<string>? Turler { get; set; }
        public int? Sure { get; set; } // Dakika
        public int? SezonSayisi { get; set; }
        public int? BolumSayisi { get; set; }
        
        // Kitap iÃ§in meta veriler
        public List<string>? Yazarlar { get; set; }
        public int? SayfaSayisi { get; set; }
        public string? Yayinevi { get; set; }
        public string? ISBN { get; set; }
        public List<string>? Kategoriler { get; set; }
    }
    
    // Oyuncu bilgisi DTO (iÃ§erik detayÄ±nda kullanÄ±lÄ±r)
    public class OyuncuInfoDto
    {
        public long? Id { get; set; } // VeritabanÄ±ndaki ID (varsa)
        public string? HariciId { get; set; } // TMDB person ID
        public string Ad { get; set; } = null!;
        public string? Karakter { get; set; }
        public string? ProfilUrl { get; set; }
        public string? RolTipi { get; set; } // oyuncu, yonetmen, yapimci, senarist
    }
    
    // Oyuncu detay DTO (oyuncu sayfasÄ± iÃ§in)
    public class OyuncuDetailDto
    {
        public long Id { get; set; }
        public string? HariciId { get; set; }
        public string Ad { get; set; } = null!;
        public string? ProfilUrl { get; set; }
        public string? Biyografi { get; set; }
        public DateOnly? DogumTarihi { get; set; }
        public string? DogumYeri { get; set; }
        public int? Cinsiyet { get; set; }
        public List<OyuncuFilmografiDto>? Filmografi { get; set; }
    }
    
    // Oyuncunun filmografisi iÃ§in DTO
    public class OyuncuFilmografiDto
    {
        public long IcerikId { get; set; }
        public string Baslik { get; set; } = null!;
        public string? PosterUrl { get; set; }
        public string? Karakter { get; set; }
        public string Tur { get; set; } = null!;
        public DateOnly? YayinTarihi { get; set; }
        public decimal OrtalamaPuan { get; set; }
    }

    // Arama sonuÃ§larÄ± iÃ§in
    public class IcerikSearchDto
    {
        public long Id { get; set; }
        public string Baslik { get; set; } = null!;
        public string Tur { get; set; } = null!;
        public string? PosterUrl { get; set; }
        public decimal OrtalamaPuan { get; set; }
        public decimal HariciPuan { get; set; }
        public DateOnly? YayinTarihi { get; set; }
        public string? Aciklama { get; set; }
    }

    // Filtreleme iÃ§in query parametreleri
    public class IcerikFilterDto
    {
        public string? Tur { get; set; } // film, kitap
        public string? Siralama { get; set; } // populerlik, puan, tarih
        public int? MinPuan { get; set; }
        public int? MinYil { get; set; }
        public int? MaxYil { get; set; }
        public int Page { get; set; } = 1;
        public int Limit { get; set; } = 20;
    }
}


========== Saga.Server\DTOs\KullaniciDtos.cs ==========

using System.ComponentModel.DataAnnotations;

namespace Saga.Server.DTOs
{
    // KullanÄ±cÄ± profil gÃ¶rÃ¼nÃ¼mÃ¼
    public class ProfilDto
    {
        public Guid Id { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string Eposta { get; set; } = null!;
        public string? GoruntulemeAdi { get; set; }
        public string? Biyografi { get; set; }
        public string? AvatarUrl { get; set; }
        public string Rol { get; set; } = null!;
        public DateTime OlusturulmaZamani { get; set; }
        
        // Ä°statistikler
        public int ToplamPuanlama { get; set; }
        public int ToplamYorum { get; set; }
        public int ToplamListe { get; set; }
        public int TakipEdenSayisi { get; set; }
        public int TakipEdilenSayisi { get; set; }
        
        // Mevcut kullanÄ±cÄ± bu kullanÄ±cÄ±yÄ± takip ediyor mu?
        public bool TakipEdiyorMu { get; set; }
    }

    // Profil gÃ¼ncelleme
    public class ProfilUpdateDto
    {
        [MaxLength(100)]
        public string? GoruntulemeAdi { get; set; }

        [MaxLength(500)]
        public string? Biyografi { get; set; }

        [Url(ErrorMessage = "GeÃ§erli bir URL giriniz.")]
        [MaxLength(500)]
        public string? AvatarUrl { get; set; }
    }

    // KullanÄ±cÄ± listesi iÃ§in hafif DTO
    public class KullaniciListDto
    {
        public Guid Id { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string? GoruntulemeAdi { get; set; }
        public string? AvatarUrl { get; set; }
        public int TakipEdenSayisi { get; set; }
        public int ToplamPuanlama { get; set; }
    }

    // Takip yanÄ±tÄ±
    public class TakipDto
    {
        public Guid TakipEdenId { get; set; }
        public string TakipEdenKullaniciAdi { get; set; } = null!;
        public string? TakipEdenAvatar { get; set; }
        public Guid TakipEdilenId { get; set; }
        public string TakipEdilenKullaniciAdi { get; set; } = null!;
        public string? TakipEdilenAvatar { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
    }

    // KullanÄ±cÄ± istatistikleri
    public class KullaniciIstatistikDto
    {
        public Guid KullaniciId { get; set; }
        public int ToplamIzlenenFilm { get; set; }
        public int ToplamOkunanKitap { get; set; }
        public int ToplamPuanlama { get; set; }
        public int ToplamYorum { get; set; }
        public int ToplamListe { get; set; }
        public int TakipEdenSayisi { get; set; }
        public int TakipEdilenSayisi { get; set; }
        public decimal OrtalamaPuan { get; set; }
    }

    // AkÄ±llÄ± Ã–neri Sistemi iÃ§in DTO
    // Benzer iÃ§erik tÃ¼rleriyle ilgilenen kullanÄ±cÄ± Ã¶nerileri
    public class OnerilenKullaniciDto
    {
        public Guid Id { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string? GoruntulemeAdi { get; set; }
        public string? AvatarUrl { get; set; }
        public int TakipEdenSayisi { get; set; }
        public int ToplamPuanlama { get; set; }
        public int OrtakIcerikSayisi { get; set; }
        public string OneriNedeni { get; set; } = null!; // "5 ortak iÃ§erik", "Film ilgisi", "Kitap ilgisi" vb.
    }
}


========== Saga.Server\DTOs\KutuphaneDtos.cs ==========

using System.ComponentModel.DataAnnotations;

namespace Saga.Server.DTOs
{
    // KÃ¼tÃ¼phane durumu oluÅŸturma/gÃ¼ncelleme
    public class KutuphaneDurumCreateDto
    {
        [Required]
        public long IcerikId { get; set; }

        [Required]
        public string Durum { get; set; } = null!; // izlendi, izlenecek, okundu, okunacak, devam_ediyor

        [Range(0, 100)]
        public decimal Ilerleme { get; set; } = 0;

        public DateOnly? BaslangicTarihi { get; set; }

        public DateOnly? BitisTarihi { get; set; }
    }

    // KÃ¼tÃ¼phane durumu gÃ¼ncelleme
    public class KutuphaneDurumUpdateDto
    {
        [Required]
        public string Durum { get; set; } = null!;

        [Range(0, 100)]
        public decimal Ilerleme { get; set; }

        public DateOnly? BaslangicTarihi { get; set; }

        public DateOnly? BitisTarihi { get; set; }
    }

    // KÃ¼tÃ¼phane durumu yanÄ±tÄ±
    public class KutuphaneDurumDto
    {
        public long Id { get; set; }
        public Guid KullaniciId { get; set; }
        public long IcerikId { get; set; }
        public string IcerikBaslik { get; set; } = null!;
        public string IcerikTur { get; set; } = null!;
        public string? PosterUrl { get; set; }
        public string Durum { get; set; } = null!;
        public decimal Ilerleme { get; set; }
        public DateOnly? BaslangicTarihi { get; set; }
        public DateOnly? BitisTarihi { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
        public DateTime GuncellemeZamani { get; set; }
    }

    // KÃ¼tÃ¼phane listesi iÃ§in
    public class KutuphaneListDto
    {
        public long IcerikId { get; set; }
        public string Baslik { get; set; } = null!;
        public string Tur { get; set; } = null!;
        public string? PosterUrl { get; set; }
        public decimal OrtalamaPuan { get; set; }
        public string Durum { get; set; } = null!;
        public decimal Ilerleme { get; set; }
        public DateTime GuncellemeZamani { get; set; }
    }

    // KÃ¼tÃ¼phane istatistikleri
    public class KutuphaneIstatistikDto
    {
        public Guid KullaniciId { get; set; }
        public int ToplamFilm { get; set; }
        public int IzlenenFilm { get; set; }
        public int IzlenecekFilm { get; set; }
        public int DevamEdenFilm { get; set; }
        public int ToplamKitap { get; set; }
        public int OkunanKitap { get; set; }
        public int OkunacakKitap { get; set; }
        public int DevamEdenKitap { get; set; }
    }
}


========== Saga.Server\DTOs\ListeDtos.cs ==========

using System.ComponentModel.DataAnnotations;

namespace Saga.Server.DTOs
{
    // Yeni liste oluÅŸturma
    public class ListeCreateDto
    {
        [Required]
        [MaxLength(200)]
        public string Ad { get; set; } = null!;

        public string? Aciklama { get; set; }

        public bool HerkeseAcik { get; set; } = true;

        // "sistem" veya "ozel"
        public string Tur { get; set; } = "ozel";
    }

    // Liste gÃ¼ncelleme
    public class ListeUpdateDto
    {
        [Required]
        [MaxLength(200)]
        public string Ad { get; set; } = null!;

        public string? Aciklama { get; set; }

        public bool HerkeseAcik { get; set; }
    }

    // Liste detayÄ± (iÃ§erikleriyle birlikte)
    public class ListeDetailDto
    {
        public long Id { get; set; }
        public Guid KullaniciId { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string Ad { get; set; } = null!;
        public string Tur { get; set; } = null!;
        public string? Aciklama { get; set; }
        public bool HerkeseAcik { get; set; }
        public int IcerikSayisi { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
        public DateTime GuncellemeZamani { get; set; }
        
        // Liste iÃ§indeki iÃ§erikler
        public List<ListeIcerikItemDto> Icerikler { get; set; } = new();
    }

    // Listedeki iÃ§erik itemi
    public class ListeIcerikItemDto
    {
        public long IcerikId { get; set; }
        public string Baslik { get; set; } = null!;
        public string Tur { get; set; } = null!;
        public string? PosterUrl { get; set; }
        public decimal OrtalamaPuan { get; set; }
        public int Sira { get; set; }
        public string? NotMetni { get; set; }
        public DateTime EklenmeZamani { get; set; }
    }

    // Liste listesi iÃ§in hafif DTO
    public class ListeListDto
    {
        public long Id { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string Ad { get; set; } = null!;
        public string Tur { get; set; } = null!;
        public int IcerikSayisi { get; set; }
        public bool HerkeseAcik { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
    }

    // Listeye iÃ§erik ekleme
    public class ListeIcerikEkleDto
    {
        [Required]
        public long IcerikId { get; set; }

        public int Sira { get; set; } = 0;

        [MaxLength(500)]
        public string? NotMetni { get; set; }
    }

    // Listedeki iÃ§erik gÃ¼ncelleme (sÄ±ra/not)
    public class ListeIcerikGuncelleDto
    {
        public int Sira { get; set; }

        [MaxLength(500)]
        public string? NotMetni { get; set; }
    }

    // Liste paylaÅŸÄ±m response
    public class ListePaylasildiDto
    {
        public long ListeId { get; set; }
        public string ListeAdi { get; set; } = null!;
        public string KullaniciAdi { get; set; } = null!;
        public string PaylasilmaUrl { get; set; } = null!;
        public bool HerkeseAcik { get; set; }
        public int IcerikSayisi { get; set; }
    }

    // PopÃ¼ler liste kartÄ± iÃ§in DTO
    public class PopulerListeDto
    {
        public long Id { get; set; }
        public string Ad { get; set; } = null!;
        public string? Aciklama { get; set; }
        public int IcerikSayisi { get; set; }
        public int BegeniSayisi { get; set; }
        public Guid KullaniciId { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string? KullaniciAvatar { get; set; }
        public bool Onaylandi { get; set; } // EditÃ¶r onaylÄ± mÄ±
        public DateTime OlusturulmaZamani { get; set; }
        // Ä°lk 3 iÃ§eriÄŸin poster URL'leri (kapak gÃ¶rselleri iÃ§in)
        public List<string> KapakGorselleri { get; set; } = new();
    }
}



========== Saga.Server\DTOs\PuanlamaDtos.cs ==========

using System.ComponentModel.DataAnnotations;

namespace Saga.Server.DTOs
{
    // Yeni puanlama oluÅŸturma
    public class PuanlamaCreateDto
    {
        [Required]
        public long IcerikId { get; set; }

        [Required]
        [Range(1.0, 10.0, ErrorMessage = "Puan 1.0 ile 10.0 arasÄ±nda olmalÄ±dÄ±r")]
        public decimal Puan { get; set; }
    }

    // Puanlama gÃ¼ncelleme
    public class PuanlamaUpdateDto
    {
        [Required]
        [Range(1.0, 10.0, ErrorMessage = "Puan 1.0 ile 10.0 arasÄ±nda olmalÄ±dÄ±r")]
        public decimal Puan { get; set; }
    }

    // Puanlama yanÄ±tÄ±
    public class PuanlamaResponseDto
    {
        public long Id { get; set; }
        public Guid KullaniciId { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public long IcerikId { get; set; }
        public string IcerikBaslik { get; set; } = null!;
        public decimal Puan { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
        public DateTime? GuncellemeZamani { get; set; }
    }

    // Ä°Ã§erik iÃ§in puanlama istatistikleri
    public class PuanlamaIstatistikDto
    {
        public long IcerikId { get; set; }
        public decimal OrtalamaPuan { get; set; }
        public int ToplamPuanlama { get; set; }
        public int Puan10Sayisi { get; set; }
        public int Puan9Sayisi { get; set; }
        public int Puan8Sayisi { get; set; }
        public int Puan7Sayisi { get; set; }
        public int Puan6Sayisi { get; set; }
        public int Puan5Sayisi { get; set; }
        public int Puan4Sayisi { get; set; }
        public int Puan3Sayisi { get; set; }
        public int Puan2Sayisi { get; set; }
        public int Puan1Sayisi { get; set; }
    }
}


========== Saga.Server\DTOs\YorumDtos.cs ==========

using System.ComponentModel.DataAnnotations;

namespace Saga.Server.DTOs
{
    // Yeni yorum oluÅŸturma
    public class YorumCreateDto
    {
        [Required]
        public long IcerikId { get; set; }

        [MaxLength(255)]
        public string? Baslik { get; set; }

        [Required]
        [MaxLength(5000)]
        public string Icerik { get; set; } = null!;

        [Range(1.0, 10.0)]
        public decimal? Puan { get; set; }

        public bool SpoilerIceriyor { get; set; } = false;

        public long? UstYorumId { get; set; }
    }

    // Yorum gÃ¼ncelleme
    public class YorumUpdateDto
    {
        [MaxLength(255)]
        public string? Baslik { get; set; }

        [Required]
        [MaxLength(5000)]
        public string Icerik { get; set; } = null!;

        [Range(1.0, 10.0)]
        public decimal? Puan { get; set; }

        public bool SpoilerIceriyor { get; set; }
    }

    // Yorum yanÄ±tÄ±
    public class YorumResponseDto
    {
        public long Id { get; set; }
        public Guid KullaniciId { get; set; }
        public string KullaniciAdi { get; set; } = null!;
        public string? KullaniciAvatar { get; set; }
        public long IcerikId { get; set; }
        public string? Baslik { get; set; }
        public string Icerik { get; set; } = null!;
        public decimal? Puan { get; set; }
        public int BegeniSayisi { get; set; }
        public bool SpoilerIceriyor { get; set; }
        public DateTime OlusturulmaZamani { get; set; }
        public DateTime? GuncellemeZamani { get; set; }
        
        // KullanÄ±cÄ± bu yorumu beÄŸendi mi?
        public bool KullaniciBegendiMi { get; set; }

        public long? UstYorumId { get; set; }
        public List<YorumResponseDto> Yanitlar { get; set; } = new();
    }

    // Yorum listesi iÃ§in hafif DTO
    public class YorumListDto
    {
        public long Id { get; set; }
        public Guid KullaniciId { get; set; } // Added
        public string KullaniciAdi { get; set; } = null!;
        public string? KullaniciAvatar { get; set; }
        public string? Baslik { get; set; }
        public string Icerik { get; set; } = null!; // Tam iÃ§erik
        public string IcerikOzet { get; set; } = null!; // Ä°lk 150 karakter
        public decimal? Puan { get; set; }
        public int BegeniSayisi { get; set; }
        public bool KullaniciBegendiMi { get; set; } // Added
        public bool SpoilerIceriyor { get; set; }
        public DateTime OlusturulmaZamani { get; set; }

        public long? UstYorumId { get; set; }
        public List<YorumListDto> Yanitlar { get; set; } = new();
    }
}


========== Saga.Server\Middleware\ExceptionHandlingMiddleware.cs ==========

using System.Net;
using System.Text.Json;
using Microsoft.AspNetCore.Http;
using Microsoft.Extensions.Logging;

namespace Saga.Server.Middleware
{
    public class ExceptionHandlingMiddleware
    {
        private readonly RequestDelegate _next;
        private readonly ILogger<ExceptionHandlingMiddleware> _logger;

        public ExceptionHandlingMiddleware(RequestDelegate next, ILogger<ExceptionHandlingMiddleware> logger)
        {
            _next = next;
            _logger = logger;
        }

        public async Task InvokeAsync(HttpContext context)
        {
            try
            {
                await _next(context);
            }
            catch (Exception ex)
            {
                await HandleExceptionAsync(context, ex);
            }
        }

        private async Task HandleExceptionAsync(HttpContext context, Exception exception)
        {
            var traceId = context.TraceIdentifier;

            _logger.LogError(exception, "Unhandled exception occurred. TraceId: {TraceId}", traceId);

            var statusCode = HttpStatusCode.InternalServerError;

            if (exception is UnauthorizedAccessException)
            {
                statusCode = HttpStatusCode.Unauthorized;
            }

            context.Response.ContentType = "application/json";
            context.Response.StatusCode = (int)statusCode;

            var problem = new
            {
                traceId,
                status = context.Response.StatusCode,
                message = statusCode == HttpStatusCode.InternalServerError
                    ? "Beklenmeyen bir hata oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin."
                    : exception.Message
            };

            var json = JsonSerializer.Serialize(problem);
            await context.Response.WriteAsync(json);
        }
    }
}


========== Saga.Server\Migrations\20251125194947_AddYorumReplies.cs ==========

using System;
using Microsoft.EntityFrameworkCore.Migrations;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using Saga.Server.Models;

#nullable disable

namespace Saga.Server.Migrations
{
    /// <inheritdoc />
    public partial class AddYorumReplies : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.AddColumn<long>(
                name: "ust_yorum_id",
                table: "yorumlar",
                type: "bigint",
                nullable: true);

            migrationBuilder.CreateIndex(
                name: "IX_yorumlar_ust_yorum_id",
                table: "yorumlar",
                column: "ust_yorum_id");

            migrationBuilder.AddForeignKey(
                name: "FK_yorumlar_yorumlar_ust_yorum_id",
                table: "yorumlar",
                column: "ust_yorum_id",
                principalTable: "yorumlar",
                principalColumn: "id");
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropForeignKey(
                name: "FK_yorumlar_yorumlar_ust_yorum_id",
                table: "yorumlar");

            migrationBuilder.DropIndex(
                name: "IX_yorumlar_ust_yorum_id",
                table: "yorumlar");

            migrationBuilder.DropColumn(
                name: "ust_yorum_id",
                table: "yorumlar");
        }
    }
}


========== Saga.Server\Migrations\20251125194947_AddYorumReplies.Designer.cs ==========

// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using Saga.Server.Data;
using Saga.Server.Models;

#nullable disable

namespace Saga.Server.Migrations
{
    [DbContext(typeof(SagaDbContext))]
    [Migration("20251125194947_AddYorumReplies")]
    partial class AddYorumReplies
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "8.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("Saga.Server.Models.Aktivite", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<AktiviteTuru>("AktiviteTuru")
                        .HasColumnType("aktivite_turu")
                        .HasColumnName("aktivite_turu");

                    b.Property<long?>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<long?>("ListeId")
                        .HasColumnType("bigint")
                        .HasColumnName("liste_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<long?>("PuanlamaId")
                        .HasColumnType("bigint")
                        .HasColumnName("puanlama_id");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<string>("Veri")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("veri");

                    b.Property<long?>("YorumId")
                        .HasColumnType("bigint")
                        .HasColumnName("yorum_id");

                    b.HasKey("Id");

                    b.HasIndex("IcerikId");

                    b.HasIndex("KullaniciId");

                    b.HasIndex("ListeId");

                    b.HasIndex("PuanlamaId");

                    b.HasIndex("YorumId");

                    b.ToTable("aktiviteler");
                });

            modelBuilder.Entity("Saga.Server.Models.Bildirim", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<Guid>("AliciId")
                        .HasColumnType("uuid")
                        .HasColumnName("alici_id");

                    b.Property<string>("Baslik")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("baslik");

                    b.Property<Guid?>("GonderenId")
                        .HasColumnType("uuid")
                        .HasColumnName("gonderen_id");

                    b.Property<string>("LinkUrl")
                        .HasColumnType("text")
                        .HasColumnName("link_url");

                    b.Property<string>("Mesaj")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("mesaj");

                    b.Property<bool>("Okundu")
                        .HasColumnType("boolean")
                        .HasColumnName("okundu");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<string>("Tip")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("tip");

                    b.HasKey("Id");

                    b.HasIndex("AliciId");

                    b.HasIndex("GonderenId");

                    b.ToTable("bildirimler");
                });

            modelBuilder.Entity("Saga.Server.Models.Icerik", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Aciklama")
                        .HasColumnType("text")
                        .HasColumnName("aciklama");

                    b.Property<ApiKaynak>("ApiKaynagi")
                        .HasColumnType("api_kaynak")
                        .HasColumnName("api_kaynagi");

                    b.Property<string>("Baslik")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("baslik");

                    b.Property<int>("GoruntulemeSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("goruntuleme_sayisi");

                    b.Property<DateTime>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<string>("HariciId")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("harici_id");

                    b.Property<int>("ListeyeEklenmeSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("listeye_eklenme_sayisi");

                    b.Property<string>("MetaVeri")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("meta_veri");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<decimal>("OrtalamaPuan")
                        .HasColumnType("numeric")
                        .HasColumnName("ortalama_puan");

                    b.Property<decimal>("PopulerlikSkoru")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("numeric")
                        .HasColumnName("populerlik_skoru");

                    b.Property<string>("PosterUrl")
                        .HasColumnType("text")
                        .HasColumnName("poster_url");

                    b.Property<int>("PuanlamaSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("puanlama_sayisi");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<IcerikTuru>("Tur")
                        .HasColumnType("icerik_turu")
                        .HasColumnName("tur");

                    b.Property<DateOnly?>("YayinTarihi")
                        .HasColumnType("date")
                        .HasColumnName("yayin_tarihi");

                    b.Property<int>("YorumSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("yorum_sayisi");

                    b.HasKey("Id");

                    b.ToTable("icerikler");
                });

            modelBuilder.Entity("Saga.Server.Models.Kullanici", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<bool>("Aktif")
                        .HasColumnType("boolean")
                        .HasColumnName("aktif");

                    b.Property<string>("AvatarUrl")
                        .HasColumnType("text")
                        .HasColumnName("avatar_url");

                    b.Property<string>("Biyografi")
                        .HasColumnType("text")
                        .HasColumnName("biyografi");

                    b.Property<string>("Eposta")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("eposta");

                    b.Property<int>("GirisSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("giris_sayisi");

                    b.Property<string>("GoruntulemeAdi")
                        .HasColumnType("text")
                        .HasColumnName("goruntuleme_adi");

                    b.Property<DateTime>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<string>("KullaniciAdi")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("kullanici_adi");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<KullaniciRol>("Rol")
                        .HasColumnType("kullanici_rol")
                        .HasColumnName("rol");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<DateTime?>("SonGirisZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("son_giris_zamani");

                    b.HasKey("Id");

                    b.ToTable("kullanicilar");
                });

            modelBuilder.Entity("Saga.Server.Models.KutuphaneDurumu", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateOnly?>("BaslangicTarihi")
                        .HasColumnType("date")
                        .HasColumnName("baslangic_tarihi");

                    b.Property<DateOnly?>("BitisTarihi")
                        .HasColumnType("date")
                        .HasColumnName("bitis_tarihi");

                    b.Property<KutuphaneDurum>("Durum")
                        .HasColumnType("kutuphane_durum")
                        .HasColumnName("durum");

                    b.Property<DateTime>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<long>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id");

                    b.Property<decimal>("Ilerleme")
                        .HasColumnType("numeric")
                        .HasColumnName("ilerleme");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.HasKey("Id");

                    b.HasIndex("IcerikId");

                    b.HasIndex("KullaniciId");

                    b.ToTable("kutuphane_durumlari");
                });

            modelBuilder.Entity("Saga.Server.Models.Liste", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Aciklama")
                        .HasColumnType("text")
                        .HasColumnName("aciklama");

                    b.Property<string>("Ad")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("ad");

                    b.Property<DateTime>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<bool>("HerkeseAcik")
                        .HasColumnType("boolean")
                        .HasColumnName("herkese_acik");

                    b.Property<int>("IcerikSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("icerik_sayisi");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<ListeTuru>("Tur")
                        .HasColumnType("liste_turu")
                        .HasColumnName("tur");

                    b.HasKey("Id");

                    b.HasIndex("KullaniciId");

                    b.ToTable("listeler");
                });

            modelBuilder.Entity("Saga.Server.Models.ListeIcerigi", b =>
                {
                    b.Property<long>("ListeId")
                        .HasColumnType("bigint")
                        .HasColumnName("liste_id")
                        .HasColumnOrder(0);

                    b.Property<long>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id")
                        .HasColumnOrder(1);

                    b.Property<DateTime>("EklenmeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("eklenme_zamani");

                    b.Property<string>("NotMetni")
                        .HasColumnType("text")
                        .HasColumnName("not_metni");

                    b.Property<int>("Sira")
                        .HasColumnType("integer")
                        .HasColumnName("sira");

                    b.HasKey("ListeId", "IcerikId");

                    b.HasIndex("IcerikId");

                    b.ToTable("liste_icerikleri");
                });

            modelBuilder.Entity("Saga.Server.Models.Puanlama", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime?>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<long>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<decimal>("Puan")
                        .HasColumnType("numeric")
                        .HasColumnName("puan");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.HasKey("Id");

                    b.HasIndex("IcerikId");

                    b.HasIndex("KullaniciId");

                    b.ToTable("puanlamalar");
                });

            modelBuilder.Entity("Saga.Server.Models.Takip", b =>
                {
                    b.Property<Guid>("TakipEdenId")
                        .HasColumnType("uuid")
                        .HasColumnName("takip_eden_id")
                        .HasColumnOrder(0);

                    b.Property<Guid>("TakipEdilenId")
                        .HasColumnType("uuid")
                        .HasColumnName("takip_edilen_id")
                        .HasColumnOrder(1);

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.HasKey("TakipEdenId", "TakipEdilenId");

                    b.HasIndex("TakipEdilenId");

                    b.ToTable("takipler");
                });

            modelBuilder.Entity("Saga.Server.Models.Yorum", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Baslik")
                        .HasColumnType("text")
                        .HasColumnName("baslik");

                    b.Property<int>("BegeniSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("begeni_sayisi");

                    b.Property<DateTime?>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<long>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id");

                    b.Property<string>("IcerikMetni")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("icerik");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<decimal?>("Puan")
                        .HasColumnType("numeric")
                        .HasColumnName("puan");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<bool>("SpoilerIceriyor")
                        .HasColumnType("boolean")
                        .HasColumnName("spoiler_iceriyor");

                    b.Property<long?>("UstYorumId")
                        .HasColumnType("bigint")
                        .HasColumnName("ust_yorum_id");

                    b.HasKey("Id");

                    b.HasIndex("IcerikId");

                    b.HasIndex("KullaniciId");

                    b.HasIndex("UstYorumId");

                    b.ToTable("yorumlar");
                });

            modelBuilder.Entity("Saga.Server.Models.YorumBegeni", b =>
                {
                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id")
                        .HasColumnOrder(0);

                    b.Property<long>("YorumId")
                        .HasColumnType("bigint")
                        .HasColumnName("yorum_id")
                        .HasColumnOrder(1);

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.HasKey("KullaniciId", "YorumId");

                    b.HasIndex("YorumId");

                    b.ToTable("yorum_begenileri");
                });

            modelBuilder.Entity("Saga.Server.Models.Aktivite", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId");

                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany()
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Liste", "Liste")
                        .WithMany()
                        .HasForeignKey("ListeId");

                    b.HasOne("Saga.Server.Models.Puanlama", "Puanlama")
                        .WithMany()
                        .HasForeignKey("PuanlamaId");

                    b.HasOne("Saga.Server.Models.Yorum", "Yorum")
                        .WithMany()
                        .HasForeignKey("YorumId");

                    b.Navigation("Icerik");

                    b.Navigation("Kullanici");

                    b.Navigation("Liste");

                    b.Navigation("Puanlama");

                    b.Navigation("Yorum");
                });

            modelBuilder.Entity("Saga.Server.Models.Bildirim", b =>
                {
                    b.HasOne("Saga.Server.Models.Kullanici", "Alici")
                        .WithMany()
                        .HasForeignKey("AliciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "Gonderen")
                        .WithMany()
                        .HasForeignKey("GonderenId");

                    b.Navigation("Alici");

                    b.Navigation("Gonderen");
                });

            modelBuilder.Entity("Saga.Server.Models.KutuphaneDurumu", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany()
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Icerik");

                    b.Navigation("Kullanici");
                });

            modelBuilder.Entity("Saga.Server.Models.Liste", b =>
                {
                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany("Listeleri")
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Kullanici");
                });

            modelBuilder.Entity("Saga.Server.Models.ListeIcerigi", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Liste", "Liste")
                        .WithMany("Icerikler")
                        .HasForeignKey("ListeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Icerik");

                    b.Navigation("Liste");
                });

            modelBuilder.Entity("Saga.Server.Models.Puanlama", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany("Puanlamalari")
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Icerik");

                    b.Navigation("Kullanici");
                });

            modelBuilder.Entity("Saga.Server.Models.Takip", b =>
                {
                    b.HasOne("Saga.Server.Models.Kullanici", "TakipEden")
                        .WithMany("Takipler")
                        .HasForeignKey("TakipEdenId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "TakipEdilen")
                        .WithMany("TakipEdenler")
                        .HasForeignKey("TakipEdilenId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("TakipEden");

                    b.Navigation("TakipEdilen");
                });

            modelBuilder.Entity("Saga.Server.Models.Yorum", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany("Yorumlari")
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Yorum", "UstYorum")
                        .WithMany("Yanitlar")
                        .HasForeignKey("UstYorumId");

                    b.Navigation("Icerik");

                    b.Navigation("Kullanici");

                    b.Navigation("UstYorum");
                });

            modelBuilder.Entity("Saga.Server.Models.YorumBegeni", b =>
                {
                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany()
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Yorum", "Yorum")
                        .WithMany("Begenenler")
                        .HasForeignKey("YorumId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Kullanici");

                    b.Navigation("Yorum");
                });

            modelBuilder.Entity("Saga.Server.Models.Kullanici", b =>
                {
                    b.Navigation("Listeleri");

                    b.Navigation("Puanlamalari");

                    b.Navigation("TakipEdenler");

                    b.Navigation("Takipler");

                    b.Navigation("Yorumlari");
                });

            modelBuilder.Entity("Saga.Server.Models.Liste", b =>
                {
                    b.Navigation("Icerikler");
                });

            modelBuilder.Entity("Saga.Server.Models.Yorum", b =>
                {
                    b.Navigation("Begenenler");

                    b.Navigation("Yanitlar");
                });
#pragma warning restore 612, 618
        }
    }
}


========== Saga.Server\Migrations\SagaDbContextModelSnapshot.cs ==========

// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using Saga.Server.Data;
using Saga.Server.Models;

#nullable disable

namespace Saga.Server.Migrations
{
    [DbContext(typeof(SagaDbContext))]
    partial class SagaDbContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "8.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("Saga.Server.Models.Aktivite", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<AktiviteTuru>("AktiviteTuru")
                        .HasColumnType("aktivite_turu")
                        .HasColumnName("aktivite_turu");

                    b.Property<long?>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<long?>("ListeId")
                        .HasColumnType("bigint")
                        .HasColumnName("liste_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<long?>("PuanlamaId")
                        .HasColumnType("bigint")
                        .HasColumnName("puanlama_id");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<string>("Veri")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("veri");

                    b.Property<long?>("YorumId")
                        .HasColumnType("bigint")
                        .HasColumnName("yorum_id");

                    b.HasKey("Id");

                    b.HasIndex("IcerikId");

                    b.HasIndex("KullaniciId");

                    b.HasIndex("ListeId");

                    b.HasIndex("PuanlamaId");

                    b.HasIndex("YorumId");

                    b.ToTable("aktiviteler");
                });

            modelBuilder.Entity("Saga.Server.Models.Bildirim", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<Guid>("AliciId")
                        .HasColumnType("uuid")
                        .HasColumnName("alici_id");

                    b.Property<string>("Baslik")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("baslik");

                    b.Property<Guid?>("GonderenId")
                        .HasColumnType("uuid")
                        .HasColumnName("gonderen_id");

                    b.Property<string>("LinkUrl")
                        .HasColumnType("text")
                        .HasColumnName("link_url");

                    b.Property<string>("Mesaj")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("mesaj");

                    b.Property<bool>("Okundu")
                        .HasColumnType("boolean")
                        .HasColumnName("okundu");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<string>("Tip")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("tip");

                    b.HasKey("Id");

                    b.HasIndex("AliciId");

                    b.HasIndex("GonderenId");

                    b.ToTable("bildirimler");
                });

            modelBuilder.Entity("Saga.Server.Models.Icerik", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Aciklama")
                        .HasColumnType("text")
                        .HasColumnName("aciklama");

                    b.Property<ApiKaynak>("ApiKaynagi")
                        .HasColumnType("api_kaynak")
                        .HasColumnName("api_kaynagi");

                    b.Property<string>("Baslik")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("baslik");

                    b.Property<int>("GoruntulemeSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("goruntuleme_sayisi");

                    b.Property<DateTime>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<string>("HariciId")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("harici_id");

                    b.Property<int>("ListeyeEklenmeSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("listeye_eklenme_sayisi");

                    b.Property<string>("MetaVeri")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasColumnName("meta_veri");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<decimal>("OrtalamaPuan")
                        .HasColumnType("numeric")
                        .HasColumnName("ortalama_puan");

                    b.Property<decimal>("PopulerlikSkoru")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("numeric")
                        .HasColumnName("populerlik_skoru");

                    b.Property<string>("PosterUrl")
                        .HasColumnType("text")
                        .HasColumnName("poster_url");

                    b.Property<int>("PuanlamaSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("puanlama_sayisi");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<IcerikTuru>("Tur")
                        .HasColumnType("icerik_turu")
                        .HasColumnName("tur");

                    b.Property<DateOnly?>("YayinTarihi")
                        .HasColumnType("date")
                        .HasColumnName("yayin_tarihi");

                    b.Property<int>("YorumSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("yorum_sayisi");

                    b.HasKey("Id");

                    b.ToTable("icerikler");
                });

            modelBuilder.Entity("Saga.Server.Models.Kullanici", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<bool>("Aktif")
                        .HasColumnType("boolean")
                        .HasColumnName("aktif");

                    b.Property<string>("AvatarUrl")
                        .HasColumnType("text")
                        .HasColumnName("avatar_url");

                    b.Property<string>("Biyografi")
                        .HasColumnType("text")
                        .HasColumnName("biyografi");

                    b.Property<string>("Eposta")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("eposta");

                    b.Property<int>("GirisSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("giris_sayisi");

                    b.Property<string>("GoruntulemeAdi")
                        .HasColumnType("text")
                        .HasColumnName("goruntuleme_adi");

                    b.Property<DateTime>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<string>("KullaniciAdi")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("kullanici_adi");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<KullaniciRol>("Rol")
                        .HasColumnType("kullanici_rol")
                        .HasColumnName("rol");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<DateTime?>("SonGirisZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("son_giris_zamani");

                    b.HasKey("Id");

                    b.ToTable("kullanicilar");
                });

            modelBuilder.Entity("Saga.Server.Models.KutuphaneDurumu", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateOnly?>("BaslangicTarihi")
                        .HasColumnType("date")
                        .HasColumnName("baslangic_tarihi");

                    b.Property<DateOnly?>("BitisTarihi")
                        .HasColumnType("date")
                        .HasColumnName("bitis_tarihi");

                    b.Property<KutuphaneDurum>("Durum")
                        .HasColumnType("kutuphane_durum")
                        .HasColumnName("durum");

                    b.Property<DateTime>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<long>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id");

                    b.Property<decimal>("Ilerleme")
                        .HasColumnType("numeric")
                        .HasColumnName("ilerleme");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.HasKey("Id");

                    b.HasIndex("IcerikId");

                    b.HasIndex("KullaniciId");

                    b.ToTable("kutuphane_durumlari");
                });

            modelBuilder.Entity("Saga.Server.Models.Liste", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Aciklama")
                        .HasColumnType("text")
                        .HasColumnName("aciklama");

                    b.Property<string>("Ad")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("ad");

                    b.Property<DateTime>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<bool>("HerkeseAcik")
                        .HasColumnType("boolean")
                        .HasColumnName("herkese_acik");

                    b.Property<int>("IcerikSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("icerik_sayisi");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<ListeTuru>("Tur")
                        .HasColumnType("liste_turu")
                        .HasColumnName("tur");

                    b.HasKey("Id");

                    b.HasIndex("KullaniciId");

                    b.ToTable("listeler");
                });

            modelBuilder.Entity("Saga.Server.Models.ListeIcerigi", b =>
                {
                    b.Property<long>("ListeId")
                        .HasColumnType("bigint")
                        .HasColumnName("liste_id")
                        .HasColumnOrder(0);

                    b.Property<long>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id")
                        .HasColumnOrder(1);

                    b.Property<DateTime>("EklenmeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("eklenme_zamani");

                    b.Property<string>("NotMetni")
                        .HasColumnType("text")
                        .HasColumnName("not_metni");

                    b.Property<int>("Sira")
                        .HasColumnType("integer")
                        .HasColumnName("sira");

                    b.HasKey("ListeId", "IcerikId");

                    b.HasIndex("IcerikId");

                    b.ToTable("liste_icerikleri");
                });

            modelBuilder.Entity("Saga.Server.Models.Puanlama", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime?>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<long>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<decimal>("Puan")
                        .HasColumnType("numeric")
                        .HasColumnName("puan");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.HasKey("Id");

                    b.HasIndex("IcerikId");

                    b.HasIndex("KullaniciId");

                    b.ToTable("puanlamalar");
                });

            modelBuilder.Entity("Saga.Server.Models.Takip", b =>
                {
                    b.Property<Guid>("TakipEdenId")
                        .HasColumnType("uuid")
                        .HasColumnName("takip_eden_id")
                        .HasColumnOrder(0);

                    b.Property<Guid>("TakipEdilenId")
                        .HasColumnType("uuid")
                        .HasColumnName("takip_edilen_id")
                        .HasColumnOrder(1);

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.HasKey("TakipEdenId", "TakipEdilenId");

                    b.HasIndex("TakipEdilenId");

                    b.ToTable("takipler");
                });

            modelBuilder.Entity("Saga.Server.Models.Yorum", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasColumnName("id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Baslik")
                        .HasColumnType("text")
                        .HasColumnName("baslik");

                    b.Property<int>("BegeniSayisi")
                        .HasColumnType("integer")
                        .HasColumnName("begeni_sayisi");

                    b.Property<DateTime?>("GuncellemeZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("guncelleme_zamani");

                    b.Property<long>("IcerikId")
                        .HasColumnType("bigint")
                        .HasColumnName("icerik_id");

                    b.Property<string>("IcerikMetni")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("icerik");

                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id");

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.Property<decimal?>("Puan")
                        .HasColumnType("numeric")
                        .HasColumnName("puan");

                    b.Property<bool>("Silindi")
                        .HasColumnType("boolean")
                        .HasColumnName("silindi");

                    b.Property<bool>("SpoilerIceriyor")
                        .HasColumnType("boolean")
                        .HasColumnName("spoiler_iceriyor");

                    b.Property<long?>("UstYorumId")
                        .HasColumnType("bigint")
                        .HasColumnName("ust_yorum_id");

                    b.HasKey("Id");

                    b.HasIndex("IcerikId");

                    b.HasIndex("KullaniciId");

                    b.HasIndex("UstYorumId");

                    b.ToTable("yorumlar");
                });

            modelBuilder.Entity("Saga.Server.Models.YorumBegeni", b =>
                {
                    b.Property<Guid>("KullaniciId")
                        .HasColumnType("uuid")
                        .HasColumnName("kullanici_id")
                        .HasColumnOrder(0);

                    b.Property<long>("YorumId")
                        .HasColumnType("bigint")
                        .HasColumnName("yorum_id")
                        .HasColumnOrder(1);

                    b.Property<DateTime>("OlusturulmaZamani")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("olusturulma_zamani");

                    b.HasKey("KullaniciId", "YorumId");

                    b.HasIndex("YorumId");

                    b.ToTable("yorum_begenileri");
                });

            modelBuilder.Entity("Saga.Server.Models.Aktivite", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId");

                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany()
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Liste", "Liste")
                        .WithMany()
                        .HasForeignKey("ListeId");

                    b.HasOne("Saga.Server.Models.Puanlama", "Puanlama")
                        .WithMany()
                        .HasForeignKey("PuanlamaId");

                    b.HasOne("Saga.Server.Models.Yorum", "Yorum")
                        .WithMany()
                        .HasForeignKey("YorumId");

                    b.Navigation("Icerik");

                    b.Navigation("Kullanici");

                    b.Navigation("Liste");

                    b.Navigation("Puanlama");

                    b.Navigation("Yorum");
                });

            modelBuilder.Entity("Saga.Server.Models.Bildirim", b =>
                {
                    b.HasOne("Saga.Server.Models.Kullanici", "Alici")
                        .WithMany()
                        .HasForeignKey("AliciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "Gonderen")
                        .WithMany()
                        .HasForeignKey("GonderenId");

                    b.Navigation("Alici");

                    b.Navigation("Gonderen");
                });

            modelBuilder.Entity("Saga.Server.Models.KutuphaneDurumu", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany()
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Icerik");

                    b.Navigation("Kullanici");
                });

            modelBuilder.Entity("Saga.Server.Models.Liste", b =>
                {
                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany("Listeleri")
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Kullanici");
                });

            modelBuilder.Entity("Saga.Server.Models.ListeIcerigi", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Liste", "Liste")
                        .WithMany("Icerikler")
                        .HasForeignKey("ListeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Icerik");

                    b.Navigation("Liste");
                });

            modelBuilder.Entity("Saga.Server.Models.Puanlama", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany("Puanlamalari")
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Icerik");

                    b.Navigation("Kullanici");
                });

            modelBuilder.Entity("Saga.Server.Models.Takip", b =>
                {
                    b.HasOne("Saga.Server.Models.Kullanici", "TakipEden")
                        .WithMany("Takipler")
                        .HasForeignKey("TakipEdenId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "TakipEdilen")
                        .WithMany("TakipEdenler")
                        .HasForeignKey("TakipEdilenId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("TakipEden");

                    b.Navigation("TakipEdilen");
                });

            modelBuilder.Entity("Saga.Server.Models.Yorum", b =>
                {
                    b.HasOne("Saga.Server.Models.Icerik", "Icerik")
                        .WithMany()
                        .HasForeignKey("IcerikId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany("Yorumlari")
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Yorum", "UstYorum")
                        .WithMany("Yanitlar")
                        .HasForeignKey("UstYorumId");

                    b.Navigation("Icerik");

                    b.Navigation("Kullanici");

                    b.Navigation("UstYorum");
                });

            modelBuilder.Entity("Saga.Server.Models.YorumBegeni", b =>
                {
                    b.HasOne("Saga.Server.Models.Kullanici", "Kullanici")
                        .WithMany()
                        .HasForeignKey("KullaniciId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Saga.Server.Models.Yorum", "Yorum")
                        .WithMany("Begenenler")
                        .HasForeignKey("YorumId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Kullanici");

                    b.Navigation("Yorum");
                });

            modelBuilder.Entity("Saga.Server.Models.Kullanici", b =>
                {
                    b.Navigation("Listeleri");

                    b.Navigation("Puanlamalari");

                    b.Navigation("TakipEdenler");

                    b.Navigation("Takipler");

                    b.Navigation("Yorumlari");
                });

            modelBuilder.Entity("Saga.Server.Models.Liste", b =>
                {
                    b.Navigation("Icerikler");
                });

            modelBuilder.Entity("Saga.Server.Models.Yorum", b =>
                {
                    b.Navigation("Begenenler");

                    b.Navigation("Yanitlar");
                });
#pragma warning restore 612, 618
        }
    }
}


========== Saga.Server\Models\Aktivite.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("aktiviteler")]
    public class Aktivite
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("aktivite_turu")]
        public AktiviteTuru AktiviteTuru { get; set; }

        [Column("icerik_id")]
        public long? IcerikId { get; set; }
        public Icerik? Icerik { get; set; }

        [Column("puanlama_id")]
        public long? PuanlamaId { get; set; }
        public Puanlama? Puanlama { get; set; }

        [Column("yorum_id")]
        public long? YorumId { get; set; }
        public Yorum? Yorum { get; set; }

        [Column("liste_id")]
        public long? ListeId { get; set; }
        public Liste? Liste { get; set; }

        [Column("veri", TypeName = "jsonb")]
        public string Veri { get; set; } = "{}";

        // İstatistik alanları
        [Column("begeni_sayisi")]
        public int BegeniSayisi { get; set; } = 0;

        [Column("yorum_sayisi")]
        public int YorumSayisi { get; set; } = 0;

        [Column("paylasim_sayisi")]
        public int PaylasimSayisi { get; set; } = 0;

        [Column("silindi")]
        public bool Silindi { get; set; } = false;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        // Navigation properties
        public ICollection<AktiviteBegeni> Begeniler { get; set; } = new List<AktiviteBegeni>();
        public ICollection<AktiviteYorum> AktiviteYorumlari { get; set; } = new List<AktiviteYorum>();
    }
}

========== Saga.Server\Models\AktiviteBegeni.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("aktivite_begenileri")]
    public class AktiviteBegeni
    {
        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("aktivite_id")]
        public long AktiviteId { get; set; }
        public Aktivite Aktivite { get; set; } = null!;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;
    }
}


========== Saga.Server\Models\AktiviteYorum.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("aktivite_yorumlari")]
    public class AktiviteYorum
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("aktivite_id")]
        public long AktiviteId { get; set; }
        public Aktivite Aktivite { get; set; } = null!;

        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("icerik")]
        public string Icerik { get; set; } = null!;

        [Column("ust_yorum_id")]
        public long? UstYorumId { get; set; }
        public AktiviteYorum? UstYorum { get; set; }
        public ICollection<AktiviteYorum> Yanitlar { get; set; } = new List<AktiviteYorum>();

        [Column("begeni_sayisi")]
        public int BegeniSayisi { get; set; } = 0;

        [Column("silindi")]
        public bool Silindi { get; set; } = false;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        [Column("guncelleme_zamani")]
        public DateTime GuncellemeZamani { get; set; } = DateTime.UtcNow;

        // Navigation
        public ICollection<AktiviteYorumBegeni> Begeniler { get; set; } = new List<AktiviteYorumBegeni>();
    }
}


========== Saga.Server\Models\AktiviteYorumBegeni.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("aktivite_yorum_begenileri")]
    public class AktiviteYorumBegeni
    {
        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("yorum_id")]
        public long YorumId { get; set; }
        public AktiviteYorum Yorum { get; set; } = null!;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;
    }
}


========== Saga.Server\Models\Bildirim.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("bildirimler")]
    public class Bildirim
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("alici_id")]
        public Guid AliciId { get; set; }
        public Kullanici Alici { get; set; } = null!;

        [Column("gonderen_id")]
        public Guid? GonderenId { get; set; }
        public Kullanici? Gonderen { get; set; }

        [Column("tip")]
        public string Tip { get; set; } = null!;

        [Column("baslik")]
        public string Baslik { get; set; } = null!;

        [Column("mesaj")]
        public string Mesaj { get; set; } = null!;

        [Column("link_url")]
        public string? LinkUrl { get; set; }

        [Column("icerik_id")]
        public long? IcerikId { get; set; }
        public Icerik? Icerik { get; set; }

        [Column("aktivite_id")]
        public long? AktiviteId { get; set; }
        public Aktivite? Aktivite { get; set; }

        [Column("yorum_id")]
        public long? YorumId { get; set; }
        public Yorum? BildirimYorum { get; set; }

        [Column("meta_veri", TypeName = "jsonb")]
        public string MetaVeri { get; set; } = "{}";

        [Column("okundu")]
        public bool Okundu { get; set; } = false;

        [Column("silindi")]
        public bool Silindi { get; set; } = false;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;
    }
}

========== Saga.Server\Models\Engellenen.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("engellenenler")]
    public class Engellenen
    {
        [Column("engelleyen_id")]
        public Guid EngellenenId { get; set; }
        public Kullanici EngellenenKullanici { get; set; } = null!;

        [Column("engellenen_id")]
        public Guid EngelleyenId { get; set; }
        public Kullanici EngelleyenKullanici { get; set; } = null!;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;
    }
}


========== Saga.Server\Models\Enum.cs ==========

namespace Saga.Server.Models
{
    // Veritabanındaki isimlerle birebir aynı (küçük harf) olmalı
    public enum ApiKaynak
    {
        tmdb,
        google_books,
        diger
    }

    public enum IcerikTuru
    {
        film,
        dizi,
        kitap
    }

    public enum KullaniciRol
    {
        yonetici,
        moderator,
        kullanici
    }

    public enum AktiviteTuru
    {
        puanlama,
        yorum,
        listeye_ekleme,
        takip,
        durum_guncelleme
    }

    public enum ListeTuru
    {
        sistem,
        ozel
    }

    public enum KutuphaneDurum
    {
        izlendi,
        izlenecek,
        okundu,
        okunacak,
        devam_ediyor
    }
}

========== Saga.Server\Models\Icerik.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("icerikler")]
    public class Icerik
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("harici_id")]
        public string HariciId { get; set; } = null!;

        [Column("api_kaynagi")]
        public ApiKaynak ApiKaynagi { get; set; }

        [Column("tur")]
        public IcerikTuru Tur { get; set; }

        [Column("baslik")]
        public string Baslik { get; set; } = null!;

        [Column("aciklama")]
        public string? Aciklama { get; set; }

        [Column("poster_url")]
        public string? PosterUrl { get; set; }

        [Column("yayin_tarihi")]
        public DateOnly? YayinTarihi { get; set; }

        [Column("ortalama_puan")]
        public decimal OrtalamaPuan { get; set; }

        [Column("puanlama_sayisi")]
        public int PuanlamaSayisi { get; set; }

        [Column("harici_puan")]
        public decimal HariciPuan { get; set; }

        [Column("harici_oy_sayisi")]
        public int HariciOySayisi { get; set; }

        [Column("yorum_sayisi")]
        public int YorumSayisi { get; set; }

        [Column("listeye_eklenme_sayisi")]
        public int ListeyeEklenmeSayisi { get; set; }

        [Column("goruntuleme_sayisi")]
        public int GoruntulemeSayisi { get; set; }

        [Column("populerlik_skoru")]
        [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
        public decimal PopulerlikSkoru { get; set; }

        // Generated tsvector column - EF tarafından ignore edilir
        [NotMapped]
        public string? AramaVektoru { get; set; }

        [Column("silindi")]
        public bool Silindi { get; set; }

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        [Column("guncelleme_zamani")]
        public DateTime GuncellemeZamani { get; set; } = DateTime.UtcNow;

        [Column("meta_veri", TypeName = "jsonb")]
        public string MetaVeri { get; set; } = "{}";

        // Navigation
        public ICollection<IcerikOyuncu> IcerikOyunculari { get; set; } = new List<IcerikOyuncu>();
    }
}

========== Saga.Server\Models\IcerikFavori.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("icerik_favorileri")]
    public class IcerikFavori
    {
        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("icerik_id")]
        public long IcerikId { get; set; }
        public Icerik Icerik { get; set; } = null!;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;
    }
}


========== Saga.Server\Models\IcerikOyuncu.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("icerik_oyunculari")]
    public class IcerikOyuncu
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("icerik_id")]
        public long IcerikId { get; set; }

        [Column("oyuncu_id")]
        public long OyuncuId { get; set; }

        [Column("karakter")]
        public string? Karakter { get; set; } // OynadÄ±ÄŸÄ± karakter adÄ±

        [Column("sira")]
        public int Sira { get; set; } // Kredilerde sÄ±ralama (cast order)

        [Column("rol_tipi")]
        public string RolTipi { get; set; } = "oyuncu"; // oyuncu, yonetmen, yapimci, senarist

        // Navigation
        [ForeignKey("IcerikId")]
        public Icerik Icerik { get; set; } = null!;

        [ForeignKey("OyuncuId")]
        public Oyuncu Oyuncu { get; set; } = null!;
    }
}


========== Saga.Server\Models\Kullanici.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("kullanicilar")]
    public class Kullanici
    {
        [Key]
        [Column("id")]
        public Guid Id { get; set; }

        [Column("kullanici_adi")]
        public string KullaniciAdi { get; set; } = null!;

        [Column("eposta")]
        public string Eposta { get; set; } = null!;

        [Column("goruntuleme_adi")]
        public string? GoruntulemeAdi { get; set; }

        [Column("biyografi")]
        public string? Biyografi { get; set; }

        [Column("avatar_url")]
        public string? AvatarUrl { get; set; }

        [Column("kapak_resmi_url")]
        public string? KapakResmiUrl { get; set; }

        [Column("web_sitesi")]
        public string? WebSitesi { get; set; }

        [Column("konum")]
        public string? Konum { get; set; }

        [Column("dogum_tarihi")]
        public DateTime? DogumTarihi { get; set; }

        [Column("cinsiyet")]
        public string? Cinsiyet { get; set; }

        [Column("rol")]
        public KullaniciRol Rol { get; set; } = KullaniciRol.kullanici;

        [Column("aktif")]
        public bool Aktif { get; set; } = true;

        [Column("silindi")]
        public bool Silindi { get; set; } = false;

        [Column("son_giris_zamani")]
        public DateTime? SonGirisZamani { get; set; }

        [Column("giris_sayisi")]
        public int GirisSayisi { get; set; }

        // İstatistik alanları (cache)
        [Column("takipci_sayisi")]
        public int TakipciSayisi { get; set; } = 0;

        [Column("takip_edilen_sayisi")]
        public int TakipEdilenSayisi { get; set; } = 0;

        [Column("toplam_puan")]
        public int ToplamPuan { get; set; } = 0;

        [Column("toplam_yorum")]
        public int ToplamYorum { get; set; } = 0;

        [Column("toplam_liste")]
        public int ToplamListe { get; set; } = 0;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; }

        [Column("guncelleme_zamani")]
        public DateTime GuncellemeZamani { get; set; }

        // Navigation properties
        public ICollection<Takip> Takipler { get; set; } = new List<Takip>(); // Takip ettikleri
        public ICollection<Takip> TakipEdenler { get; set; } = new List<Takip>(); // Onu takip edenler
        public ICollection<Puanlama> Puanlamalari { get; set; } = new List<Puanlama>();
        public ICollection<Yorum> Yorumlari { get; set; } = new List<Yorum>();
        public ICollection<Liste> Listeleri { get; set; } = new List<Liste>();
        public KullaniciAyarlari? Ayarlar { get; set; }
    }
}

========== Saga.Server\Models\KullaniciAyarlari.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("kullanici_ayarlari")]
    public class KullaniciAyarlari
    {
        [Key]
        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("bildirim_yeni_takipci")]
        public bool BildirimYeniTakipci { get; set; } = true;

        [Column("bildirim_yorumlar")]
        public bool BildirimYorumlar { get; set; } = true;

        [Column("bildirim_begeniler")]
        public bool BildirimBegeniler { get; set; } = true;

        [Column("bildirim_oneriler")]
        public bool BildirimOneriler { get; set; } = false;

        [Column("bildirim_email")]
        public bool BildirimEmail { get; set; } = false;

        [Column("profil_gizli")]
        public bool ProfilGizli { get; set; } = false;

        [Column("aktivite_gizli")]
        public bool AktiviteGizli { get; set; } = false;

        [Column("tema")]
        public string Tema { get; set; } = "sistem";

        [Column("dil")]
        public string Dil { get; set; } = "tr";

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        [Column("guncelleme_zamani")]
        public DateTime GuncellemeZamani { get; set; } = DateTime.UtcNow;
    }
}


========== Saga.Server\Models\KutuphaneDurumu.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("kutuphane_durumlari")]
    public class KutuphaneDurumu
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("icerik_id")]
        public long IcerikId { get; set; }
        public Icerik Icerik { get; set; } = null!;

        [Column("durum")]
        public KutuphaneDurum Durum { get; set; }

        [Column("ilerleme")]
        public decimal Ilerleme { get; set; } = 0;

        [Column("baslangic_tarihi")]
        public DateOnly? BaslangicTarihi { get; set; }

        [Column("bitis_tarihi")]
        public DateOnly? BitisTarihi { get; set; }

        [Column("silindi")]
        public bool Silindi { get; set; } = false;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        [Column("guncelleme_zamani")]
        public DateTime GuncellemeZamani { get; set; } = DateTime.UtcNow;
    }
}

========== Saga.Server\Models\Liste.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("listeler")]
    public class Liste
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("ad")]
        public string Ad { get; set; } = null!;

        [Column("tur")]
        public ListeTuru Tur { get; set; } = ListeTuru.ozel;

        [Column("aciklama")]
        public string? Aciklama { get; set; }

        [Column("herkese_acik")]
        public bool HerkeseAcik { get; set; } = true;

        [Column("icerik_sayisi")]
        public int IcerikSayisi { get; set; } = 0;

        [Column("silindi")]
        public bool Silindi { get; set; } = false;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        [Column("guncelleme_zamani")]
        public DateTime GuncellemeZamani { get; set; } = DateTime.UtcNow;

        // Navigation properties
        public ICollection<ListeIcerigi> Icerikler { get; set; } = new List<ListeIcerigi>();
    }
}

========== Saga.Server\Models\ListeIcerigi.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("liste_icerikleri")]
    public class ListeIcerigi
    {
        [Key]
        [Column("liste_id", Order = 0)]
        public long ListeId { get; set; }
        public Liste Liste { get; set; } = null!;

        [Key]
        [Column("icerik_id", Order = 1)]
        public long IcerikId { get; set; }
        public Icerik Icerik { get; set; } = null!;

        [Column("sira")]
        public int Sira { get; set; } = 0;

        [Column("not_metni")]
        public string? NotMetni { get; set; }

        [Column("eklenme_zamani")]
        public DateTime EklenmeZamani { get; set; } = DateTime.UtcNow;
    }
}

========== Saga.Server\Models\Oyuncu.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("oyuncular")]
    public class Oyuncu
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("harici_id")]
        public string? HariciId { get; set; } // TMDB person ID

        [Column("ad")]
        public string Ad { get; set; } = null!;

        [Column("profil_url")]
        public string? ProfilUrl { get; set; }

        [Column("biyografi")]
        public string? Biyografi { get; set; }

        [Column("dogum_tarihi")]
        public DateOnly? DogumTarihi { get; set; }

        [Column("dogum_yeri")]
        public string? DogumYeri { get; set; }

        [Column("cinsiyet")]
        public int? Cinsiyet { get; set; } // 0: belirtilmemiÅŸ, 1: kadÄ±n, 2: erkek

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        // Navigation
        public ICollection<IcerikOyuncu> IcerikOyunculari { get; set; } = new List<IcerikOyuncu>();
    }
}


========== Saga.Server\Models\Puanlama.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("puanlamalar")]
    public class Puanlama
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("icerik_id")]
        public long IcerikId { get; set; }
        public Icerik Icerik { get; set; } = null!;

        [Column("puan")]
        public decimal Puan { get; set; }

        [Column("silindi")]
        public bool Silindi { get; set; } = false;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        [Column("guncelleme_zamani")]
        public DateTime? GuncellemeZamani { get; set; }
    }
}

========== Saga.Server\Models\Takip.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("takipler")]
    public class Takip
    {
        [Key]
        [Column("takip_eden_id", Order = 0)]
        public Guid TakipEdenId { get; set; }
        public Kullanici TakipEden { get; set; } = null!;

        [Key]
        [Column("takip_edilen_id", Order = 1)]
        public Guid TakipEdilenId { get; set; }
        public Kullanici TakipEdilen { get; set; } = null!;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;
    }
}

========== Saga.Server\Models\Yorum.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("yorumlar")]
    public class Yorum
    {
        [Key]
        [Column("id")]
        public long Id { get; set; }

        [Column("kullanici_id")]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Column("icerik_id")]
        public long IcerikId { get; set; }
        public Icerik Icerik { get; set; } = null!;

        [Column("baslik")]
        public string? Baslik { get; set; }

        [Column("icerik")]
        public string IcerikMetni { get; set; } = null!;

        [Column("puan")]
        public decimal? Puan { get; set; }

        [Column("begeni_sayisi")]
        public int BegeniSayisi { get; set; } = 0;

        [Column("spoiler_iceriyor")]
        public bool SpoilerIceriyor { get; set; } = false;

        [Column("silindi")]
        public bool Silindi { get; set; } = false;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;

        [Column("guncelleme_zamani")]
        public DateTime? GuncellemeZamani { get; set; }

        [Column("ust_yorum_id")]
        public long? UstYorumId { get; set; }

        [ForeignKey("UstYorumId")]
        public Yorum? UstYorum { get; set; }

        public ICollection<Yorum> Yanitlar { get; set; } = new List<Yorum>();

        // Navigation properties
        public ICollection<YorumBegeni> Begenenler { get; set; } = new List<YorumBegeni>();
    }
}

========== Saga.Server\Models\YorumBegeni.cs ==========

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Saga.Server.Models
{
    [Table("yorum_begenileri")]
    public class YorumBegeni
    {
        [Key]
        [Column("kullanici_id", Order = 0)]
        public Guid KullaniciId { get; set; }
        public Kullanici Kullanici { get; set; } = null!;

        [Key]
        [Column("yorum_id", Order = 1)]
        public long YorumId { get; set; }
        public Yorum Yorum { get; set; } = null!;

        [Column("olusturulma_zamani")]
        public DateTime OlusturulmaZamani { get; set; } = DateTime.UtcNow;
    }
}

========== Saga.Server\Properties\launchSettings.json ==========

{
  "$schema": "http://json.schemastore.org/launchsettings.json",
  "iisSettings": {
    "windowsAuthentication": false,
    "anonymousAuthentication": true,
    "iisExpress": {
      "applicationUrl": "http://localhost:15770",
      "sslPort": 44327
    }
  },
  "profiles": {
    "http": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "launchUrl": "swagger",
      "applicationUrl": "http://localhost:5054",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "https": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "launchUrl": "swagger",
      "applicationUrl": "https://localhost:7284;http://localhost:5054",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "IIS Express": {
      "commandName": "IISExpress",
      "launchBrowser": true,
      "launchUrl": "swagger",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}



========== Saga.Server\Services\GoogleBooksService.cs ==========

using Saga.Server.Data;
using Saga.Server.Models;
using System.Text.Json;
using System.Text.RegularExpressions;

namespace Saga.Server.Services
{
    public class GoogleBooksService : IGoogleBooksService
    {
        private readonly HttpClient _httpClient;
        private readonly SagaDbContext _context;
        private readonly ILogger<GoogleBooksService> _logger;
        private readonly string[] _apiKeys;
        private int _currentKeyIndex = 0;
        private readonly object _keyLock = new();
        private const string BaseUrl = "https://www.googleapis.com/books/v1";

        public GoogleBooksService(
            HttpClient httpClient,
            SagaDbContext context,
            ILogger<GoogleBooksService> logger,
            IConfiguration configuration)
        {
            _httpClient = httpClient;
            _context = context;
            _logger = logger;
            
            // Ã–nce ApiKeys array'ini dene, yoksa tek ApiKey'i al
            var apiKeys = configuration.GetSection("GoogleBooks:ApiKeys").Get<string[]>();
            if (apiKeys != null && apiKeys.Length > 0)
            {
                _apiKeys = apiKeys;
                _logger.LogInformation("ğŸ”‘ Google Books API: {Count} adet API key yÃ¼klendi", _apiKeys.Length);
            }
            else
            {
                var singleKey = configuration["GoogleBooks:ApiKey"];
                _apiKeys = !string.IsNullOrEmpty(singleKey) ? new[] { singleKey } : Array.Empty<string>();
            }
        }

        /// <summary>
        /// HTML taglarÄ±nÄ± temizleyen yardÄ±mcÄ± metot
        /// </summary>
        private static string StripHtmlTags(string? html)
        {
            if (string.IsNullOrEmpty(html)) return "";
            
            // <br> ve </p> taglarÄ±nÄ± satÄ±r sonuna Ã§evir
            var text = Regex.Replace(html, @"<br\s*/?>", "\n", RegexOptions.IgnoreCase);
            text = Regex.Replace(text, @"</p>", "\n", RegexOptions.IgnoreCase);
            
            // DiÄŸer HTML taglarÄ±nÄ± kaldÄ±r
            text = Regex.Replace(text, @"<[^>]*>", "");
            
            // HTML entities decode
            text = text.Replace("&amp;", "&")
                       .Replace("&lt;", "<")
                       .Replace("&gt;", ">")
                       .Replace("&quot;", "\"")
                       .Replace("&#39;", "'")
                       .Replace("&nbsp;", " ");
            
            // Birden fazla satÄ±r sonunu dÃ¼zenle
            text = Regex.Replace(text, @"\n{3,}", "\n\n");
            
            // SatÄ±r baÅŸÄ±/sonu boÅŸluklarÄ± temizle
            var lines = text.Split('\n').Select(l => l.Trim());
            text = string.Join("\n", lines).Trim();
            
            return text;
        }

        private string GetCurrentApiKey()
        {
            lock (_keyLock)
            {
                if (_apiKeys.Length == 0) return "";
                return _apiKeys[_currentKeyIndex];
            }
        }

        private bool SwitchToNextKey()
        {
            lock (_keyLock)
            {
                if (_apiKeys.Length <= 1) return false;
                
                var oldIndex = _currentKeyIndex;
                _currentKeyIndex = (_currentKeyIndex + 1) % _apiKeys.Length;
                _logger.LogWarning("ğŸ”„ API Key deÄŸiÅŸtirildi: Key {OldIndex} â†’ Key {NewIndex}", oldIndex + 1, _currentKeyIndex + 1);
                return true;
            }
        }

        public async Task<GoogleBookDto?> GetBookByIdAsync(string googleBooksId)
        {
            try
            {
                var apiKey = GetCurrentApiKey();
                var url = string.IsNullOrEmpty(apiKey)
                    ? $"{BaseUrl}/volumes/{googleBooksId}"
                    : $"{BaseUrl}/volumes/{googleBooksId}?key={apiKey}";

                var response = await _httpClient.GetAsync(url);

                // Rate limit durumunda diÄŸer key'e geÃ§ ve tekrar dene
                if (response.StatusCode == System.Net.HttpStatusCode.TooManyRequests && SwitchToNextKey())
                {
                    apiKey = GetCurrentApiKey();
                    url = string.IsNullOrEmpty(apiKey)
                        ? $"{BaseUrl}/volumes/{googleBooksId}"
                        : $"{BaseUrl}/volumes/{googleBooksId}?key={apiKey}";
                    response = await _httpClient.GetAsync(url);
                }

                if (!response.IsSuccessStatusCode)
                {
                    _logger.LogWarning("Google Books API hatasÄ±: {StatusCode} - Book ID: {GoogleBooksId}", 
                        response.StatusCode, googleBooksId);
                    return null;
                }

                var content = await response.Content.ReadAsStringAsync();
                var bookData = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseBookData(bookData);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Google Books kitap bilgisi alÄ±nÄ±rken hata: {GoogleBooksId}", googleBooksId);
                return null;
            }
        }

        public async Task<GoogleBooksSearchResult> SearchBooksAsync(string query, int startIndex = 0, int maxResults = 20, string? orderBy = null, string? langRestrict = null, string? filter = null)
        {
            const int maxRetries = 3;
            int retryCount = 0;
            int keySwitchCount = 0;
            int maxKeySwitches = _apiKeys.Length; // Her key iÃ§in bir ÅŸans
            
            while (retryCount < maxRetries)
            {
                try
                {
                    var apiKey = GetCurrentApiKey();
                    var encodedQuery = Uri.EscapeDataString(query);
                    // orderBy: relevance (varsayÄ±lan) veya newest
                    var order = string.IsNullOrEmpty(orderBy) ? "relevance" : orderBy;
                    // Dil filtresi (tr, en, de, fr, vb.) - q parametresinden BAÄIMSIZ
                    var langParam = !string.IsNullOrEmpty(langRestrict) ? $"&langRestrict={langRestrict}" : "";
                    // Filter: paid-ebooks (ticari kitaplar), free-ebooks, full, partial, ebooks
                    var filterParam = !string.IsNullOrEmpty(filter) ? $"&filter={filter}" : "";
                    // printType: books (dergileri vs. ele)
                    var printTypeParam = "&printType=books";
                    
                    var url = string.IsNullOrEmpty(apiKey)
                        ? $"{BaseUrl}/volumes?q={encodedQuery}&startIndex={startIndex}&maxResults={maxResults}&orderBy={order}{langParam}{filterParam}{printTypeParam}"
                        : $"{BaseUrl}/volumes?q={encodedQuery}&startIndex={startIndex}&maxResults={maxResults}&orderBy={order}{langParam}{filterParam}{printTypeParam}&key={apiKey}";

                    _logger.LogInformation("ğŸ“š Google Books API isteÄŸi (Key {KeyIndex}): startIndex={StartIndex}", _currentKeyIndex + 1, startIndex);

                    var response = await _httpClient.GetAsync(url);

                    // Rate limit (429) hatasÄ± - Ã¶nce diÄŸer key'e geÃ§
                    if (response.StatusCode == System.Net.HttpStatusCode.TooManyRequests)
                    {
                        // DiÄŸer key'e geÃ§meyi dene
                        if (keySwitchCount < maxKeySwitches && SwitchToNextKey())
                        {
                            keySwitchCount++;
                            _logger.LogWarning("âš ï¸ Rate limit! DiÄŸer API key'e geÃ§ildi ({KeySwitch}/{MaxSwitch})", keySwitchCount, maxKeySwitches);
                            continue; // Hemen diÄŸer key ile dene
                        }
                        
                        // TÃ¼m key'ler rate limited, exponential backoff ile bekle
                        retryCount++;
                        if (retryCount < maxRetries)
                        {
                            var delay = (int)Math.Pow(2, retryCount) * 1000; // 2s, 4s, 8s
                            _logger.LogWarning("â³ TÃ¼m key'ler rate limited, {RetryCount}. deneme, {Delay}ms bekleniyor...", retryCount, delay);
                            await Task.Delay(delay);
                            keySwitchCount = 0; // Key switch sayacÄ±nÄ± sÄ±fÄ±rla
                            continue;
                        }
                        _logger.LogWarning("âŒ Google Books rate limit aÅŸÄ±ldÄ±, maksimum deneme sayÄ±sÄ±na ulaÅŸÄ±ldÄ±");
                        return new GoogleBooksSearchResult { Items = new List<GoogleBookDto>(), TotalItems = 0 };
                    }

                    if (!response.IsSuccessStatusCode)
                    {
                        _logger.LogWarning("Google Books arama hatasÄ±: {StatusCode}", response.StatusCode);
                        return new GoogleBooksSearchResult { Items = new List<GoogleBookDto>(), TotalItems = 0 };
                    }

                    var content = await response.Content.ReadAsStringAsync();
                    var searchData = JsonSerializer.Deserialize<JsonElement>(content);

                    var results = new List<GoogleBookDto>();
                    int totalItems = 0;

                    // totalItems'Ä± al
                    if (searchData.TryGetProperty("totalItems", out var totalItemsElement))
                    {
                        totalItems = totalItemsElement.GetInt32();
                    }

                    if (searchData.TryGetProperty("items", out var itemsArray))
                    {
                        foreach (var item in itemsArray.EnumerateArray())
                        {
                            var bookDto = ParseBookData(item);
                            if (bookDto != null)
                            {
                                results.Add(bookDto);
                            }
                        }
                    }

                    _logger.LogInformation("âœ… Google Books sonuÃ§: {Count} kitap, toplam: {Total}, startIndex: {StartIndex}", results.Count, totalItems, startIndex);
                    return new GoogleBooksSearchResult { Items = results, TotalItems = totalItems };
                }
                catch (Exception ex)
                {
                    _logger.LogError(ex, "Google Books aramasÄ± sÄ±rasÄ±nda hata: {Query}", query);
                    return new GoogleBooksSearchResult { Items = new List<GoogleBookDto>(), TotalItems = 0 };
                }
            }
            
            return new GoogleBooksSearchResult { Items = new List<GoogleBookDto>(), TotalItems = 0 };
        }

        public async Task<Icerik?> ImportBookAsync(string googleBooksId)
        {
            try
            {
                // Ã–nce veritabanÄ±nda var mÄ± kontrol et
                var mevcutIcerik = _context.Icerikler
                    .FirstOrDefault(i => i.HariciId == googleBooksId && i.ApiKaynagi == ApiKaynak.google_books);

                // Google Books'tan bilgileri al
                var bookDto = await GetBookByIdAsync(googleBooksId);
                if (bookDto == null)
                {
                    // API'den alÄ±namadÄ±ysa ve veritabanÄ±nda varsa mevcut olanÄ± dÃ¶ndÃ¼r
                    if (mevcutIcerik != null)
                    {
                        return mevcutIcerik;
                    }
                    return null;
                }

                if (mevcutIcerik != null)
                {
                    // Mevcut kayÄ±t varsa, eksik alanlarÄ± gÃ¼ncelle
                    bool updated = false;
                    
                    if (string.IsNullOrEmpty(mevcutIcerik.Aciklama) && !string.IsNullOrEmpty(bookDto.Aciklama))
                    {
                        mevcutIcerik.Aciklama = bookDto.Aciklama;
                        updated = true;
                        _logger.LogInformation("ğŸ“ Kitap aÃ§Ä±klamasÄ± gÃ¼ncellendi: {GoogleBooksId}", googleBooksId);
                    }
                    
                    if (string.IsNullOrEmpty(mevcutIcerik.PosterUrl) && !string.IsNullOrEmpty(bookDto.PosterUrl))
                    {
                        mevcutIcerik.PosterUrl = bookDto.PosterUrl;
                        updated = true;
                    }
                    
                    if (updated)
                    {
                        await _context.SaveChangesAsync();
                    }
                    
                    _logger.LogInformation("Kitap zaten mevcut: {GoogleBooksId}", googleBooksId);
                    return mevcutIcerik;
                }

                // Meta veriyi JSON olarak hazÄ±rla
                var metaVeri = new
                {
                    yazarlar = bookDto.Yazarlar,
                    sayfaSayisi = bookDto.SayfaSayisi,
                    kategoriler = bookDto.Kategoriler,
                    yayinevi = bookDto.Yayinevi,
                    isbn = bookDto.ISBN,
                    dil = bookDto.Dil
                };

                // VeritabanÄ±na kaydet
                var icerik = new Icerik
                {
                    HariciId = googleBooksId,
                    ApiKaynagi = ApiKaynak.google_books,
                    Tur = IcerikTuru.kitap,
                    Baslik = bookDto.Baslik,
                    Aciklama = bookDto.Aciklama,
                    PosterUrl = bookDto.PosterUrl,
                    YayinTarihi = ParseDateOnly(bookDto.YayinTarihi),
                    HariciPuan = bookDto.OrtalamaPuan.HasValue ? (decimal)(bookDto.OrtalamaPuan.Value * 2) : 0, // 5 Ã¼zerinden 10'a Ã§evir
                    HariciOySayisi = bookDto.OySayisi ?? 0,
                    MetaVeri = JsonSerializer.Serialize(metaVeri),
                    OlusturulmaZamani = DateTime.UtcNow
                };

                _context.Icerikler.Add(icerik);
                await _context.SaveChangesAsync();

                _logger.LogInformation("Kitap baÅŸarÄ±yla import edildi: {Title} (Google Books ID: {GoogleBooksId})", 
                    icerik.Baslik, googleBooksId);
                return icerik;
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Kitap import edilirken hata: {GoogleBooksId}", googleBooksId);
                return null;
            }
        }

        private GoogleBookDto? ParseBookData(JsonElement bookData)
        {
            try
            {
                var id = bookData.GetProperty("id").GetString();
                if (string.IsNullOrEmpty(id))
                    return null;

                var volumeInfo = bookData.GetProperty("volumeInfo");

                var dto = new GoogleBookDto
                {
                    Id = id,
                    Baslik = volumeInfo.TryGetProperty("title", out var title) ? title.GetString() ?? "" : "",
                    Aciklama = volumeInfo.TryGetProperty("description", out var desc) ? StripHtmlTags(desc.GetString()) : null,
                    YayinTarihi = volumeInfo.TryGetProperty("publishedDate", out var date) ? date.GetString() : null,
                    Dil = volumeInfo.TryGetProperty("language", out var lang) ? lang.GetString() : null,
                    SayfaSayisi = volumeInfo.TryGetProperty("pageCount", out var pages) ? pages.GetInt32() : null
                };

                // Authors
                if (volumeInfo.TryGetProperty("authors", out var authors))
                {
                    dto.Yazarlar = new List<string>();
                    foreach (var author in authors.EnumerateArray())
                    {
                        var authorName = author.GetString();
                        if (!string.IsNullOrEmpty(authorName))
                        {
                            dto.Yazarlar.Add(authorName);
                        }
                    }
                }

                // Categories
                if (volumeInfo.TryGetProperty("categories", out var categories))
                {
                    dto.Kategoriler = new List<string>();
                    foreach (var category in categories.EnumerateArray())
                    {
                        var categoryName = category.GetString();
                        if (!string.IsNullOrEmpty(categoryName))
                        {
                            dto.Kategoriler.Add(categoryName);
                        }
                    }
                }

                // Image
                if (volumeInfo.TryGetProperty("imageLinks", out var imageLinks))
                {
                    if (imageLinks.TryGetProperty("thumbnail", out var thumbnail))
                    {
                        dto.PosterUrl = thumbnail.GetString();
                    }
                    else if (imageLinks.TryGetProperty("smallThumbnail", out var smallThumbnail))
                    {
                        dto.PosterUrl = smallThumbnail.GetString();
                    }
                }

                // Ratings
                dto.OrtalamaPuan = volumeInfo.TryGetProperty("averageRating", out var avgRating) 
                    ? avgRating.GetDouble() 
                    : null;
                dto.OySayisi = volumeInfo.TryGetProperty("ratingsCount", out var ratingsCount) 
                    ? ratingsCount.GetInt32() 
                    : null;

                // YayÄ±nevi
                dto.Yayinevi = volumeInfo.TryGetProperty("publisher", out var publisher) 
                    ? publisher.GetString() 
                    : null;

                // ISBN
                if (volumeInfo.TryGetProperty("industryIdentifiers", out var identifiers))
                {
                    foreach (var identifier in identifiers.EnumerateArray())
                    {
                        if (identifier.TryGetProperty("type", out var type) && 
                            (type.GetString() == "ISBN_13" || type.GetString() == "ISBN_10"))
                        {
                            dto.ISBN = identifier.TryGetProperty("identifier", out var isbn) ? isbn.GetString() : null;
                            if (type.GetString() == "ISBN_13") break; // ISBN_13'Ã¼ tercih et
                        }
                    }
                }

                return dto;
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Google Books veri parse edilirken hata");
                return null;
            }
        }

        private DateOnly? ParseDateOnly(string? dateString)
        {
            if (string.IsNullOrWhiteSpace(dateString))
                return null;

            // Google Books bazen sadece yÄ±l dÃ¶ner (Ã¶rn: "2020")
            if (dateString.Length == 4 && int.TryParse(dateString, out var year))
            {
                return new DateOnly(year, 1, 1);
            }

            // Tam tarih formatÄ±
            if (DateOnly.TryParse(dateString, out var date))
                return date;

            // YYYY-MM formatÄ±
            if (dateString.Length == 7 && dateString.Contains('-'))
            {
                var parts = dateString.Split('-');
                if (int.TryParse(parts[0], out var y) && int.TryParse(parts[1], out var m))
                {
                    return new DateOnly(y, m, 1);
                }
            }

            return null;
        }

        /// <summary>
        /// Kitap baÅŸlÄ±ÄŸÄ± ve yazar ile arama yaparak aÃ§Ä±klamasÄ± olan bir edisyon bulur.
        /// TÃ¼rkÃ§e aÃ§Ä±klamayÄ± Ã¶nceliklendirir.
        /// </summary>
        public async Task<string?> FindDescriptionForBookAsync(string title, string? author)
        {
            try
            {
                // FarklÄ± arama stratejileri dene
                var searchQueries = new List<string>();
                
                // 1. BaÅŸlÄ±k + yazar
                if (!string.IsNullOrEmpty(author))
                {
                    searchQueries.Add($"intitle:{title}+inauthor:{author}");
                    searchQueries.Add($"{title} {author}");
                }
                
                // 2. Sadece baÅŸlÄ±k
                searchQueries.Add($"intitle:{title}");
                searchQueries.Add(title);
                
                string? turkceAciklama = null;
                string? digerAciklama = null;
                
                foreach (var searchQuery in searchQueries)
                {
                    var searchResult = await SearchBooksAsync(searchQuery, maxResults: 15);
                    
                    if (searchResult.Items != null)
                    {
                        // BaÅŸlÄ±ÄŸÄ± benzer olan ve aÃ§Ä±klamasÄ± olan kitaplarÄ± bul
                        var normalizedTitle = NormalizeTitle(title);
                        
                        var booksWithDescription = searchResult.Items
                            .Where(b => !string.IsNullOrEmpty(b.Aciklama))
                            .Where(b => NormalizeTitle(b.Baslik).Contains(normalizedTitle) || 
                                        normalizedTitle.Contains(NormalizeTitle(b.Baslik)))
                            .ToList();
                        
                        foreach (var book in booksWithDescription)
                        {
                            // TÃ¼rkÃ§e karakter iÃ§eren aÃ§Ä±klamayÄ± tercih et
                            if (ContainsTurkishChars(book.Aciklama!))
                            {
                                turkceAciklama = book.Aciklama;
                                _logger.LogInformation("ğŸ“– TÃ¼rkÃ§e aÃ§Ä±klama bulundu: {Title} -> {FoundTitle}", 
                                    title, book.Baslik);
                                break;
                            }
                            else if (digerAciklama == null)
                            {
                                digerAciklama = book.Aciklama;
                            }
                        }
                        
                        if (turkceAciklama != null) break;
                    }
                }
                
                // TÃ¼rkÃ§e aÃ§Ä±klama varsa onu, yoksa diÄŸer dildeki aÃ§Ä±klamayÄ± dÃ¶ndÃ¼r
                if (turkceAciklama != null)
                {
                    return turkceAciklama;
                }
                
                if (digerAciklama != null)
                {
                    _logger.LogInformation("ğŸ“– YabancÄ± dilde aÃ§Ä±klama bulundu: {Title}", title);
                    return digerAciklama;
                }
                
                _logger.LogWarning("ğŸ“– AÃ§Ä±klama bulunamadÄ±: {Title} - {Author}", title, author);
                return null;
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Kitap aÃ§Ä±klamasÄ± aranÄ±rken hata: {Title}", title);
                return null;
            }
        }

        private static bool ContainsTurkishChars(string text)
        {
            // TÃ¼rkÃ§e karakterler: Ã§, ÄŸ, Ä±, Ä°, Ã¶, ÅŸ, Ã¼, Ã‡, Ä, Ã–, Å, Ãœ
            return text.Any(c => "Ã§ÄŸÄ±Ä°Ã¶ÅŸÃ¼Ã‡ÄÃ–ÅÃœ".Contains(c));
        }

        private static string NormalizeTitle(string title)
        {
            if (string.IsNullOrEmpty(title)) return "";
            return title.ToLowerInvariant()
                .Replace("Ä±", "i")
                .Replace("ÄŸ", "g")
                .Replace("Ã¼", "u")
                .Replace("ÅŸ", "s")
                .Replace("Ã¶", "o")
                .Replace("Ã§", "c")
                .Trim();
        }
    }
}


========== Saga.Server\Services\IExternalApiServices.cs ==========

using Saga.Server.Models;

namespace Saga.Server.Services
{
    public interface ITmdbService
    {
        Task<TmdbFilmDto?> GetFilmByIdAsync(string tmdbId);
        Task<TmdbFilmDto?> GetTvShowByIdAsync(string tmdbId);
        Task<List<TmdbFilmDto>> SearchFilmsAsync(string query, int page = 1);
        Task<List<TmdbFilmDto>> SearchTvShowsAsync(string query, int page = 1);
        Task<List<TmdbFilmDto>> SearchMultiAsync(string query, int page = 1);
        Task<List<TmdbFilmDto>> GetPopularFilmsAsync(int page = 1);
        Task<List<TmdbFilmDto>> GetPopularTvShowsAsync(int page = 1);
        Task<List<TmdbFilmDto>> GetTopRatedFilmsAsync(int page = 1);
        Task<List<TmdbFilmDto>> GetTopRatedTvShowsAsync(int page = 1);
        Task<List<TmdbFilmDto>> GetNowPlayingFilmsAsync(int page = 1);
        Task<List<TmdbFilmDto>> GetOnTheAirTvShowsAsync(int page = 1);
        Task<List<TmdbFilmDto>> GetTrendingAsync(string mediaType = "all", string timeWindow = "week", int page = 1);
        Task<Icerik?> ImportFilmAsync(string tmdbId);
        Task<Icerik?> ImportTvShowAsync(string tmdbId);
    }

    public interface IGoogleBooksService
    {
        Task<GoogleBookDto?> GetBookByIdAsync(string googleBooksId);
        Task<GoogleBooksSearchResult> SearchBooksAsync(string query, int startIndex = 0, int maxResults = 20, string? orderBy = null, string? langRestrict = null, string? filter = null);
        Task<Icerik?> ImportBookAsync(string googleBooksId);
        Task<string?> FindDescriptionForBookAsync(string title, string? author);
    }

    // Google Books Arama Sonucu (totalItems ile birlikte)
    public class GoogleBooksSearchResult
    {
        public List<GoogleBookDto> Items { get; set; } = new();
        public int TotalItems { get; set; }
    }

    // TMDB Film/Dizi DTO
    public class TmdbFilmDto
    {
        public string Id { get; set; } = null!;
        public string Baslik { get; set; } = null!;
        public string? Aciklama { get; set; }
        public string? PosterUrl { get; set; }
        public string? ArkaplanUrl { get; set; }
        public string? YayinTarihi { get; set; }
        public double Puan { get; set; }
        public int OySayisi { get; set; }
        public string? OrijinalDil { get; set; }
        public List<int>? TurIds { get; set; }
        public List<string>? Turler { get; set; } // TÃ¼r adlarÄ±
        public string? Yonetmen { get; set; }
        public List<OyuncuDto>? Oyuncular { get; set; }
        public int? Sure { get; set; } // Dakika cinsinden
        public int? SezonSayisi { get; set; } // Diziler iÃ§in
        public int? BolumSayisi { get; set; } // Diziler iÃ§in
        public string MediaType { get; set; } = "movie"; // movie veya tv
        
        // SAGA platformundaki ortalama puan (veritabanÄ±nda kayÄ±tlÄ±ysa)
        public decimal? SagaOrtalamaPuan { get; set; }
        public int? SagaIcerikId { get; set; } // VeritabanÄ±ndaki iÃ§erik ID'si
    }

    // Oyuncu DTO
    public class OyuncuDto
    {
        public string? HariciId { get; set; } // TMDB person ID
        public string Ad { get; set; } = null!;
        public string? Karakter { get; set; }
        public string? ProfilUrl { get; set; }
        public int Sira { get; set; } // Kredilerde sÄ±ralama
    }

    // Google Books DTO
    public class GoogleBookDto
    {
        public string Id { get; set; } = null!;
        public string Baslik { get; set; } = null!;
        public List<string>? Yazarlar { get; set; }
        public string? Aciklama { get; set; }
        public string? YayinTarihi { get; set; }
        public string? PosterUrl { get; set; }
        public string? Dil { get; set; }
        public int? SayfaSayisi { get; set; }
        public List<string>? Kategoriler { get; set; }
        public double? OrtalamaPuan { get; set; }
        public int? OySayisi { get; set; }
        public string? Yayinevi { get; set; }
        public string? ISBN { get; set; }
    }
}


========== Saga.Server\Services\TmdbService.cs ==========

using Microsoft.EntityFrameworkCore;
using Saga.Server.Data;
using Saga.Server.Models;
using System.Net.Http.Json;
using System.Text.Json;

namespace Saga.Server.Services
{
    public class TmdbService : ITmdbService
    {
        private readonly HttpClient _httpClient;
        private readonly SagaDbContext _context;
        private readonly ILogger<TmdbService> _logger;
        private readonly string _apiKey;
        private readonly string _bearerToken;
        private const string BaseUrl = "https://api.themoviedb.org/3";
        private const string ImageBaseUrl = "https://image.tmdb.org/t/p/w500";

        public TmdbService(
            HttpClient httpClient,
            SagaDbContext context,
            ILogger<TmdbService> logger,
            IConfiguration configuration)
        {
            _httpClient = httpClient;
            _context = context;
            _logger = logger;
            _apiKey = configuration["TMDB:ApiKey"] ?? throw new InvalidOperationException("TMDB API Key bulunamadÄ±!");
            _bearerToken = configuration["TMDB:BearerToken"] ?? "";
            
            // Bearer token varsa Authorization header ekle
            if (!string.IsNullOrEmpty(_bearerToken))
            {
                _httpClient.DefaultRequestHeaders.Authorization = 
                    new System.Net.Http.Headers.AuthenticationHeaderValue("Bearer", _bearerToken);
            }
        }

        private string BuildUrl(string endpoint)
        {
            return !string.IsNullOrEmpty(_bearerToken)
                ? $"{BaseUrl}{endpoint}{(endpoint.Contains("?") ? "&" : "?")}language=tr-TR"
                : $"{BaseUrl}{endpoint}{(endpoint.Contains("?") ? "&" : "?")}api_key={_apiKey}&language=tr-TR";
        }

        public async Task<TmdbFilmDto?> GetFilmByIdAsync(string tmdbId)
        {
            try
            {
                // Film detayÄ± + credits bilgisini tek istekle al
                var url = BuildUrl($"/movie/{tmdbId}?append_to_response=credits");
                var response = await _httpClient.GetAsync(url);
                
                if (!response.IsSuccessStatusCode)
                {
                    _logger.LogWarning("TMDB API hatasÄ±: {StatusCode} - Film ID: {TmdbId}", response.StatusCode, tmdbId);
                    return null;
                }

                var content = await response.Content.ReadAsStringAsync();
                var movieData = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseSingleMovieWithCredits(movieData, "movie");
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB film bilgisi alÄ±nÄ±rken hata: {TmdbId}", tmdbId);
                return null;
            }
        }

        public async Task<TmdbFilmDto?> GetTvShowByIdAsync(string tmdbId)
        {
            try
            {
                // Dizi detayÄ± + credits bilgisini tek istekle al
                var url = BuildUrl($"/tv/{tmdbId}?append_to_response=credits");
                var response = await _httpClient.GetAsync(url);
                
                if (!response.IsSuccessStatusCode)
                {
                    _logger.LogWarning("TMDB API hatasÄ±: {StatusCode} - TV ID: {TmdbId}", response.StatusCode, tmdbId);
                    return null;
                }

                var content = await response.Content.ReadAsStringAsync();
                var tvData = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseSingleTvShowWithCredits(tvData);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB dizi bilgisi alÄ±nÄ±rken hata: {TmdbId}", tmdbId);
                return null;
            }
        }

        public async Task<List<TmdbFilmDto>> SearchFilmsAsync(string query, int page = 1)
        {
            try
            {
                var encodedQuery = Uri.EscapeDataString(query);
                var url = BuildUrl($"/search/movie?query={encodedQuery}&page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    _logger.LogWarning("TMDB arama hatasÄ±: {StatusCode}", response.StatusCode);
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var searchData = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseMovieResults(searchData, "movie");
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB film aramasÄ± sÄ±rasÄ±nda hata: {Query}", query);
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> SearchTvShowsAsync(string query, int page = 1)
        {
            try
            {
                var encodedQuery = Uri.EscapeDataString(query);
                var url = BuildUrl($"/search/tv?query={encodedQuery}&page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var searchData = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseTvResults(searchData);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB dizi aramasÄ± sÄ±rasÄ±nda hata: {Query}", query);
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> SearchMultiAsync(string query, int page = 1)
        {
            try
            {
                var encodedQuery = Uri.EscapeDataString(query);
                var url = BuildUrl($"/search/multi?query={encodedQuery}&page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var searchData = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseMultiResults(searchData);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB multi aramasÄ± sÄ±rasÄ±nda hata: {Query}", query);
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> GetPopularFilmsAsync(int page = 1)
        {
            try
            {
                var url = BuildUrl($"/movie/popular?page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var data = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseMovieResults(data, "movie");
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB popÃ¼ler filmler alÄ±nÄ±rken hata");
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> GetPopularTvShowsAsync(int page = 1)
        {
            try
            {
                var url = BuildUrl($"/tv/popular?page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var data = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseTvResults(data);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB popÃ¼ler diziler alÄ±nÄ±rken hata");
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> GetTopRatedFilmsAsync(int page = 1)
        {
            try
            {
                var url = BuildUrl($"/movie/top_rated?page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var data = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseMovieResults(data, "movie");
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB en iyi filmler alÄ±nÄ±rken hata");
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> GetTopRatedTvShowsAsync(int page = 1)
        {
            try
            {
                var url = BuildUrl($"/tv/top_rated?page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var data = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseTvResults(data);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB en iyi diziler alÄ±nÄ±rken hata");
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> GetNowPlayingFilmsAsync(int page = 1)
        {
            try
            {
                var url = BuildUrl($"/movie/now_playing?page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var data = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseMovieResults(data, "movie");
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB vizyondaki filmler alÄ±nÄ±rken hata");
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> GetOnTheAirTvShowsAsync(int page = 1)
        {
            try
            {
                var url = BuildUrl($"/tv/on_the_air?page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var data = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseTvResults(data);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB yayÄ±ndaki diziler alÄ±nÄ±rken hata");
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<List<TmdbFilmDto>> GetTrendingAsync(string mediaType = "all", string timeWindow = "week", int page = 1)
        {
            try
            {
                var url = BuildUrl($"/trending/{mediaType}/{timeWindow}?page={page}");
                var response = await _httpClient.GetAsync(url);

                if (!response.IsSuccessStatusCode)
                {
                    return new List<TmdbFilmDto>();
                }

                var content = await response.Content.ReadAsStringAsync();
                var data = JsonSerializer.Deserialize<JsonElement>(content);

                return ParseMultiResults(data);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "TMDB trending alÄ±nÄ±rken hata");
                return new List<TmdbFilmDto>();
            }
        }

        public async Task<Icerik?> ImportFilmAsync(string tmdbId)
        {
            try
            {
                // Ã–nce veritabanÄ±nda var mÄ± kontrol et
                var mevcutIcerik = _context.Icerikler
                    .FirstOrDefault(i => i.HariciId == tmdbId && i.ApiKaynagi == ApiKaynak.tmdb);

                if (mevcutIcerik != null)
                {
                    _logger.LogInformation("Film zaten mevcut: {TmdbId}", tmdbId);
                    return mevcutIcerik;
                }

                // TMDB'den bilgileri al
                var filmDto = await GetFilmByIdAsync(tmdbId);
                if (filmDto == null)
                {
                    return null;
                }

                // Meta veriyi JSON olarak hazÄ±rla
                var metaVeri = new
                {
                    yonetmen = filmDto.Yonetmen,
                    turler = filmDto.Turler,
                    sure = filmDto.Sure,
                    mediaType = filmDto.MediaType
                };

                // VeritabanÄ±na kaydet
                var icerik = new Icerik
                {
                    HariciId = tmdbId,
                    ApiKaynagi = ApiKaynak.tmdb,
                    Tur = IcerikTuru.film,
                    Baslik = filmDto.Baslik,
                    Aciklama = filmDto.Aciklama,
                    PosterUrl = filmDto.PosterUrl,
                    YayinTarihi = ParseDateOnly(filmDto.YayinTarihi),
                    HariciPuan = (decimal)filmDto.Puan,
                    HariciOySayisi = filmDto.OySayisi,
                    MetaVeri = JsonSerializer.Serialize(metaVeri),
                    OlusturulmaZamani = DateTime.UtcNow
                };

                _context.Icerikler.Add(icerik);
                await _context.SaveChangesAsync();

                // OyuncularÄ± ayrÄ± tabloya kaydet
                if (filmDto.Oyuncular != null && filmDto.Oyuncular.Count > 0)
                {
                    await SaveActorsAsync(icerik.Id, filmDto.Oyuncular, filmDto.Yonetmen);
                }

                _logger.LogInformation("Film baÅŸarÄ±yla import edildi: {Title} (TMDB ID: {TmdbId})", icerik.Baslik, tmdbId);
                return icerik;
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Film import edilirken hata: {TmdbId}", tmdbId);
                return null;
            }
        }

        public async Task<Icerik?> ImportTvShowAsync(string tmdbId)
        {
            try
            {
                // Ã–nce veritabanÄ±nda var mÄ± kontrol et - tv: prefix ile kaydet
                var hariciId = $"tv:{tmdbId}";
                var mevcutIcerik = _context.Icerikler
                    .FirstOrDefault(i => i.HariciId == hariciId && i.ApiKaynagi == ApiKaynak.tmdb);

                if (mevcutIcerik != null)
                {
                    _logger.LogInformation("Dizi zaten mevcut: {TmdbId}", tmdbId);
                    return mevcutIcerik;
                }

                // TMDB'den bilgileri al
                var tvDto = await GetTvShowByIdAsync(tmdbId);
                if (tvDto == null)
                {
                    return null;
                }

                // Meta veriyi JSON olarak hazÄ±rla
                var metaVeri = new
                {
                    yonetmen = tvDto.Yonetmen,
                    turler = tvDto.Turler,
                    sezonSayisi = tvDto.SezonSayisi,
                    bolumSayisi = tvDto.BolumSayisi,
                    mediaType = tvDto.MediaType
                };

                // VeritabanÄ±na kaydet
                var icerik = new Icerik
                {
                    HariciId = hariciId,
                    ApiKaynagi = ApiKaynak.tmdb,
                    Tur = IcerikTuru.dizi, // Diziler iÃ§in dizi tÃ¼rÃ¼
                    Baslik = tvDto.Baslik,
                    Aciklama = tvDto.Aciklama,
                    PosterUrl = tvDto.PosterUrl,
                    YayinTarihi = ParseDateOnly(tvDto.YayinTarihi),
                    HariciPuan = (decimal)tvDto.Puan,
                    HariciOySayisi = tvDto.OySayisi,
                    MetaVeri = JsonSerializer.Serialize(metaVeri),
                    OlusturulmaZamani = DateTime.UtcNow
                };

                _context.Icerikler.Add(icerik);
                await _context.SaveChangesAsync();

                // OyuncularÄ± ayrÄ± tabloya kaydet
                if (tvDto.Oyuncular != null && tvDto.Oyuncular.Count > 0)
                {
                    await SaveActorsAsync(icerik.Id, tvDto.Oyuncular, tvDto.Yonetmen);
                }

                _logger.LogInformation("Dizi baÅŸarÄ±yla import edildi: {Title} (TMDB ID: {TmdbId})", icerik.Baslik, tmdbId);
                return icerik;
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Dizi import edilirken hata: {TmdbId}", tmdbId);
                return null;
            }
        }

        private TmdbFilmDto? ParseSingleMovie(JsonElement movieData, string mediaType)
        {
            return new TmdbFilmDto
            {
                Id = movieData.GetProperty("id").GetInt32().ToString(),
                Baslik = movieData.TryGetProperty("title", out var title) ? title.GetString() ?? "" : "",
                Aciklama = movieData.TryGetProperty("overview", out var overview) ? overview.GetString() : null,
                PosterUrl = movieData.TryGetProperty("poster_path", out var poster) && !poster.ValueEquals("null")
                    ? ImageBaseUrl + poster.GetString()
                    : null,
                ArkaplanUrl = movieData.TryGetProperty("backdrop_path", out var backdrop) && !backdrop.ValueEquals("null")
                    ? "https://image.tmdb.org/t/p/original" + backdrop.GetString()
                    : null,
                YayinTarihi = movieData.TryGetProperty("release_date", out var date) ? date.GetString() : null,
                Puan = movieData.TryGetProperty("vote_average", out var avg) ? avg.GetDouble() : 0,
                OySayisi = movieData.TryGetProperty("vote_count", out var count) ? count.GetInt32() : 0,
                OrijinalDil = movieData.TryGetProperty("original_language", out var lang) ? lang.GetString() : null,
                MediaType = mediaType
            };
        }

        private TmdbFilmDto? ParseSingleMovieWithCredits(JsonElement movieData, string mediaType)
        {
            var dto = new TmdbFilmDto
            {
                Id = movieData.GetProperty("id").GetInt32().ToString(),
                Baslik = movieData.TryGetProperty("title", out var title) ? title.GetString() ?? "" : "",
                Aciklama = movieData.TryGetProperty("overview", out var overview) ? overview.GetString() : null,
                PosterUrl = movieData.TryGetProperty("poster_path", out var poster) && !poster.ValueEquals("null")
                    ? ImageBaseUrl + poster.GetString()
                    : null,
                ArkaplanUrl = movieData.TryGetProperty("backdrop_path", out var backdrop) && !backdrop.ValueEquals("null")
                    ? "https://image.tmdb.org/t/p/original" + backdrop.GetString()
                    : null,
                YayinTarihi = movieData.TryGetProperty("release_date", out var date) ? date.GetString() : null,
                Puan = movieData.TryGetProperty("vote_average", out var avg) ? avg.GetDouble() : 0,
                OySayisi = movieData.TryGetProperty("vote_count", out var count) ? count.GetInt32() : 0,
                OrijinalDil = movieData.TryGetProperty("original_language", out var lang) ? lang.GetString() : null,
                Sure = movieData.TryGetProperty("runtime", out var runtime) ? runtime.GetInt32() : null,
                MediaType = mediaType
            };

            // TÃ¼rleri parse et
            if (movieData.TryGetProperty("genres", out var genres))
            {
                dto.Turler = new List<string>();
                foreach (var genre in genres.EnumerateArray())
                {
                    if (genre.TryGetProperty("name", out var genreName))
                    {
                        dto.Turler.Add(genreName.GetString() ?? "");
                    }
                }
            }

            // Credits bilgilerini parse et
            if (movieData.TryGetProperty("credits", out var credits))
            {
                // Oyuncular (ilk 15)
                if (credits.TryGetProperty("cast", out var cast))
                {
                    dto.Oyuncular = new List<OyuncuDto>();
                    int actorCount = 0;
                    foreach (var actor in cast.EnumerateArray())
                    {
                        if (actorCount >= 15) break;
                        dto.Oyuncular.Add(new OyuncuDto
                        {
                            HariciId = actor.TryGetProperty("id", out var actorId) ? actorId.GetInt32().ToString() : null,
                            Ad = actor.TryGetProperty("name", out var actorName) ? actorName.GetString() ?? "" : "",
                            Karakter = actor.TryGetProperty("character", out var character) ? character.GetString() : null,
                            ProfilUrl = actor.TryGetProperty("profile_path", out var profile) && !profile.ValueEquals("null")
                                ? "https://image.tmdb.org/t/p/w185" + profile.GetString()
                                : null,
                            Sira = actorCount
                        });
                        actorCount++;
                    }
                }

                // YÃ¶netmen
                if (credits.TryGetProperty("crew", out var crew))
                {
                    foreach (var member in crew.EnumerateArray())
                    {
                        if (member.TryGetProperty("job", out var job) && job.GetString() == "Director")
                        {
                            dto.Yonetmen = member.TryGetProperty("name", out var dirName) ? dirName.GetString() : null;
                            break;
                        }
                    }
                }
            }

            return dto;
        }

        private TmdbFilmDto? ParseSingleTvShow(JsonElement tvData)
        {
            return new TmdbFilmDto
            {
                Id = tvData.GetProperty("id").GetInt32().ToString(),
                Baslik = tvData.TryGetProperty("name", out var name) ? name.GetString() ?? "" : "",
                Aciklama = tvData.TryGetProperty("overview", out var overview) ? overview.GetString() : null,
                PosterUrl = tvData.TryGetProperty("poster_path", out var poster) && !poster.ValueEquals("null")
                    ? ImageBaseUrl + poster.GetString()
                    : null,
                ArkaplanUrl = tvData.TryGetProperty("backdrop_path", out var backdrop) && !backdrop.ValueEquals("null")
                    ? "https://image.tmdb.org/t/p/original" + backdrop.GetString()
                    : null,
                YayinTarihi = tvData.TryGetProperty("first_air_date", out var date) ? date.GetString() : null,
                Puan = tvData.TryGetProperty("vote_average", out var avg) ? avg.GetDouble() : 0,
                OySayisi = tvData.TryGetProperty("vote_count", out var count) ? count.GetInt32() : 0,
                OrijinalDil = tvData.TryGetProperty("original_language", out var lang) ? lang.GetString() : null,
                MediaType = "tv"
            };
        }

        private TmdbFilmDto? ParseSingleTvShowWithCredits(JsonElement tvData)
        {
            var dto = new TmdbFilmDto
            {
                Id = tvData.GetProperty("id").GetInt32().ToString(),
                Baslik = tvData.TryGetProperty("name", out var name) ? name.GetString() ?? "" : "",
                Aciklama = tvData.TryGetProperty("overview", out var overview) ? overview.GetString() : null,
                PosterUrl = tvData.TryGetProperty("poster_path", out var poster) && !poster.ValueEquals("null")
                    ? ImageBaseUrl + poster.GetString()
                    : null,
                ArkaplanUrl = tvData.TryGetProperty("backdrop_path", out var backdrop) && !backdrop.ValueEquals("null")
                    ? "https://image.tmdb.org/t/p/original" + backdrop.GetString()
                    : null,
                YayinTarihi = tvData.TryGetProperty("first_air_date", out var date) ? date.GetString() : null,
                Puan = tvData.TryGetProperty("vote_average", out var avg) ? avg.GetDouble() : 0,
                OySayisi = tvData.TryGetProperty("vote_count", out var count) ? count.GetInt32() : 0,
                OrijinalDil = tvData.TryGetProperty("original_language", out var lang) ? lang.GetString() : null,
                SezonSayisi = tvData.TryGetProperty("number_of_seasons", out var seasons) ? seasons.GetInt32() : null,
                BolumSayisi = tvData.TryGetProperty("number_of_episodes", out var episodes) ? episodes.GetInt32() : null,
                MediaType = "tv"
            };

            // TÃ¼rleri parse et
            if (tvData.TryGetProperty("genres", out var genres))
            {
                dto.Turler = new List<string>();
                foreach (var genre in genres.EnumerateArray())
                {
                    if (genre.TryGetProperty("name", out var genreName))
                    {
                        dto.Turler.Add(genreName.GetString() ?? "");
                    }
                }
            }

            // Credits bilgilerini parse et
            if (tvData.TryGetProperty("credits", out var credits))
            {
                // Oyuncular (ilk 15)
                if (credits.TryGetProperty("cast", out var cast))
                {
                    dto.Oyuncular = new List<OyuncuDto>();
                    int actorCount = 0;
                    foreach (var actor in cast.EnumerateArray())
                    {
                        if (actorCount >= 15) break;
                        dto.Oyuncular.Add(new OyuncuDto
                        {
                            HariciId = actor.TryGetProperty("id", out var actorId) ? actorId.GetInt32().ToString() : null,
                            Ad = actor.TryGetProperty("name", out var actorName) ? actorName.GetString() ?? "" : "",
                            Karakter = actor.TryGetProperty("character", out var character) ? character.GetString() : null,
                            ProfilUrl = actor.TryGetProperty("profile_path", out var profile) && !profile.ValueEquals("null")
                                ? "https://image.tmdb.org/t/p/w185" + profile.GetString()
                                : null,
                            Sira = actorCount
                        });
                        actorCount++;
                    }
                }

                // YÃ¶netmen/Creator - dizilerde "created_by" alanÄ± kullanÄ±lÄ±r
                if (tvData.TryGetProperty("created_by", out var createdBy))
                {
                    foreach (var creator in createdBy.EnumerateArray())
                    {
                        dto.Yonetmen = creator.TryGetProperty("name", out var creatorName) ? creatorName.GetString() : null;
                        break; // Ä°lk yaratÄ±cÄ±yÄ± al
                    }
                }
            }

            return dto;
        }

        private List<TmdbFilmDto> ParseMovieResults(JsonElement data, string mediaType)
        {
            var results = new List<TmdbFilmDto>();

            if (data.TryGetProperty("results", out var resultsArray))
            {
                foreach (var movie in resultsArray.EnumerateArray())
                {
                    // Genre IDs parse
                    List<int>? genreIds = null;
                    if (movie.TryGetProperty("genre_ids", out var genreIdsArray))
                    {
                        genreIds = genreIdsArray.EnumerateArray().Select(g => g.GetInt32()).ToList();
                    }

                    results.Add(new TmdbFilmDto
                    {
                        Id = movie.GetProperty("id").GetInt32().ToString(),
                        Baslik = movie.TryGetProperty("title", out var title) ? title.GetString() ?? "" : "",
                        Aciklama = movie.TryGetProperty("overview", out var overview) ? overview.GetString() : null,
                        PosterUrl = movie.TryGetProperty("poster_path", out var poster) && !poster.ValueEquals("null")
                            ? ImageBaseUrl + poster.GetString()
                            : null,
                        YayinTarihi = movie.TryGetProperty("release_date", out var date) ? date.GetString() : null,
                        Puan = movie.TryGetProperty("vote_average", out var avg) ? avg.GetDouble() : 0,
                        OySayisi = movie.TryGetProperty("vote_count", out var count) ? count.GetInt32() : 0,
                        TurIds = genreIds,
                        MediaType = mediaType
                    });
                }
            }

            return results;
        }

        private List<TmdbFilmDto> ParseTvResults(JsonElement data)
        {
            var results = new List<TmdbFilmDto>();

            if (data.TryGetProperty("results", out var resultsArray))
            {
                foreach (var tv in resultsArray.EnumerateArray())
                {
                    // Genre IDs parse
                    List<int>? genreIds = null;
                    if (tv.TryGetProperty("genre_ids", out var genreIdsArray))
                    {
                        genreIds = genreIdsArray.EnumerateArray().Select(g => g.GetInt32()).ToList();
                    }

                    results.Add(new TmdbFilmDto
                    {
                        Id = tv.GetProperty("id").GetInt32().ToString(),
                        Baslik = tv.TryGetProperty("name", out var name) ? name.GetString() ?? "" : "",
                        Aciklama = tv.TryGetProperty("overview", out var overview) ? overview.GetString() : null,
                        PosterUrl = tv.TryGetProperty("poster_path", out var poster) && !poster.ValueEquals("null")
                            ? ImageBaseUrl + poster.GetString()
                            : null,
                        YayinTarihi = tv.TryGetProperty("first_air_date", out var date) ? date.GetString() : null,
                        Puan = tv.TryGetProperty("vote_average", out var avg) ? avg.GetDouble() : 0,
                        OySayisi = tv.TryGetProperty("vote_count", out var count) ? count.GetInt32() : 0,
                        TurIds = genreIds,
                        MediaType = "tv"
                    });
                }
            }

            return results;
        }

        private List<TmdbFilmDto> ParseMultiResults(JsonElement data)
        {
            var results = new List<TmdbFilmDto>();

            if (data.TryGetProperty("results", out var resultsArray))
            {
                foreach (var item in resultsArray.EnumerateArray())
                {
                    var mediaType = item.TryGetProperty("media_type", out var mt) ? mt.GetString() : "movie";
                    
                    // KiÅŸileri atla
                    if (mediaType == "person") continue;

                    var isMovie = mediaType == "movie";

                    // Genre IDs parse
                    List<int>? genreIds = null;
                    if (item.TryGetProperty("genre_ids", out var genreIdsArray))
                    {
                        genreIds = genreIdsArray.EnumerateArray().Select(g => g.GetInt32()).ToList();
                    }
                    
                    results.Add(new TmdbFilmDto
                    {
                        Id = item.GetProperty("id").GetInt32().ToString(),
                        Baslik = isMovie 
                            ? (item.TryGetProperty("title", out var title) ? title.GetString() ?? "" : "")
                            : (item.TryGetProperty("name", out var name) ? name.GetString() ?? "" : ""),
                        Aciklama = item.TryGetProperty("overview", out var overview) ? overview.GetString() : null,
                        PosterUrl = item.TryGetProperty("poster_path", out var poster) && !poster.ValueEquals("null")
                            ? ImageBaseUrl + poster.GetString()
                            : null,
                        YayinTarihi = isMovie 
                            ? (item.TryGetProperty("release_date", out var releaseDate) ? releaseDate.GetString() : null)
                            : (item.TryGetProperty("first_air_date", out var airDate) ? airDate.GetString() : null),
                        Puan = item.TryGetProperty("vote_average", out var avg) ? avg.GetDouble() : 0,
                        OySayisi = item.TryGetProperty("vote_count", out var count) ? count.GetInt32() : 0,
                        TurIds = genreIds,
                        MediaType = mediaType ?? "movie"
                    });
                }
            }

            return results;
        }

        private DateOnly? ParseDateOnly(string? dateString)
        {
            if (string.IsNullOrWhiteSpace(dateString))
                return null;

            if (DateOnly.TryParse(dateString, out var date))
                return date;

            return null;
        }

        /// <summary>
        /// OyuncularÄ± ve yÃ¶netmeni ayrÄ± tablolara kaydeder
        /// </summary>
        private async Task SaveActorsAsync(long icerikId, List<OyuncuDto> oyuncular, string? yonetmen)
        {
            try
            {
                foreach (var oyuncuDto in oyuncular)
                {
                    if (string.IsNullOrEmpty(oyuncuDto.HariciId) || oyuncuDto.HariciId == "0") continue;

                    // Oyuncu zaten var mÄ± kontrol et (HariciId ile)
                    var mevcutOyuncu = await _context.Oyuncular
                        .FirstOrDefaultAsync(o => o.HariciId == oyuncuDto.HariciId);

                    Oyuncu oyuncu;
                    if (mevcutOyuncu != null)
                    {
                        oyuncu = mevcutOyuncu;
                    }
                    else
                    {
                        // Yeni oyuncu oluÅŸtur
                        oyuncu = new Oyuncu
                        {
                            HariciId = oyuncuDto.HariciId,
                            Ad = oyuncuDto.Ad,
                            ProfilUrl = oyuncuDto.ProfilUrl
                        };
                        _context.Oyuncular.Add(oyuncu);
                        await _context.SaveChangesAsync();
                    }

                    // Ä°Ã§erik-oyuncu iliÅŸkisi zaten var mÄ± kontrol et
                    var mevcutIliski = await _context.IcerikOyunculari
                        .FirstOrDefaultAsync(io => io.IcerikId == icerikId && io.OyuncuId == oyuncu.Id);

                    if (mevcutIliski == null)
                    {
                        // Ä°liÅŸki oluÅŸtur
                        var icerikOyuncu = new IcerikOyuncu
                        {
                            IcerikId = icerikId,
                            OyuncuId = oyuncu.Id,
                            Karakter = oyuncuDto.Karakter,
                            Sira = oyuncuDto.Sira,
                            RolTipi = "oyuncu"
                        };
                        _context.IcerikOyunculari.Add(icerikOyuncu);
                    }
                }

                // YÃ¶netmeni de kaydet (eÄŸer varsa)
                if (!string.IsNullOrWhiteSpace(yonetmen))
                {
                    // YÃ¶netmen iÃ§in basit bir oyuncu kaydÄ± oluÅŸtur (HariciId = null, sadece isim)
                    var mevcutYonetmen = await _context.Oyuncular
                        .FirstOrDefaultAsync(o => o.Ad == yonetmen && o.HariciId == null);

                    Oyuncu yonetmenOyuncu;
                    if (mevcutYonetmen != null)
                    {
                        yonetmenOyuncu = mevcutYonetmen;
                    }
                    else
                    {
                        yonetmenOyuncu = new Oyuncu
                        {
                            HariciId = null,
                            Ad = yonetmen,
                            ProfilUrl = null
                        };
                        _context.Oyuncular.Add(yonetmenOyuncu);
                        await _context.SaveChangesAsync();
                    }

                    // Ä°liÅŸki var mÄ± kontrol et
                    var mevcutYonetmenIliski = await _context.IcerikOyunculari
                        .FirstOrDefaultAsync(io => io.IcerikId == icerikId && io.OyuncuId == yonetmenOyuncu.Id);

                    if (mevcutYonetmenIliski == null)
                    {
                        var icerikYonetmen = new IcerikOyuncu
                        {
                            IcerikId = icerikId,
                            OyuncuId = yonetmenOyuncu.Id,
                            Karakter = null,
                            Sira = 0,
                            RolTipi = "yonetmen"
                        };
                        _context.IcerikOyunculari.Add(icerikYonetmen);
                    }
                }

                await _context.SaveChangesAsync();
                _logger.LogInformation("Ä°Ã§erik {IcerikId} iÃ§in {Count} oyuncu kaydedildi", icerikId, oyuncular.Count);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Oyuncular kaydedilirken hata: Ä°Ã§erik {IcerikId}", icerikId);
            }
        }
    }
}


========== Saga.Server\Services\TokenService.cs ==========

using System.IdentityModel.Tokens.Jwt;
using System.Security.Claims;
using System.Text;
using Microsoft.IdentityModel.Tokens;
using Saga.Server.Models;

namespace Saga.Server.Services // <--- BURASI ÖNEMLİ
{
    public class TokenService
    {
        private readonly IConfiguration _config;

        public TokenService(IConfiguration config)
        {
            _config = config;
        }

        public string CreateToken(Kullanici user)
        {
            var claims = new List<Claim>
            {
                new Claim(ClaimTypes.NameIdentifier, user.Id.ToString()),
                new Claim(ClaimTypes.Name, user.KullaniciAdi),
                new Claim(ClaimTypes.Email, user.Eposta)
            };

            var key = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(_config["Jwt:Key"] ?? "saga_super_gizli_anahtar_32_karakter_olmali"));
            var creds = new SigningCredentials(key, SecurityAlgorithms.HmacSha512Signature);

            var tokenDescriptor = new SecurityTokenDescriptor
            {
                Subject = new ClaimsIdentity(claims),
                Expires = DateTime.Now.AddDays(7),
                SigningCredentials = creds,
                Issuer = _config["Jwt:Issuer"],
                Audience = _config["Jwt:Audience"]
            };

            var tokenHandler = new JwtSecurityTokenHandler();
            var token = tokenHandler.CreateToken(tokenDescriptor);

            return tokenHandler.WriteToken(token);
        }
    }
}

========== Saga.Server\appsettings.json ==========

{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "Supabase": {
    "Url": "https://iabkzwsosqpcghjqkbzt.supabase.co",
    "AnonKey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYmt6d3Nvc3FwY2doanFrYnp0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5MjA3NDcsImV4cCI6MjA3OTQ5Njc0N30.hx0HKqE3tM2N1YpYp_LdrvvG7E3MlNPuofKoQN5Q_kw",
    "ServiceRoleKey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYmt6d3Nvc3FwY2doanFrYnp0Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMjUzNzM2NywiZXhwIjoyMDQ4MTEzMzY3fQ.2_Ql9oZ4Lz1o1RpH-qTkUGlJWB9T94YZtSQ7lJWaKMM",
    "JwtSecret": "EWMfcFxzT+JNI+Jpf3nShZ5eU5S+oF3i34yXhlZV/dfTVQBpAickPNI6IaD4wR2UJFYI+TcifpSig3miq6zBoA=="
  },
  "TMDB": {
    "ApiKey": "eec2662a9ba4e82f840e3bdb7bbc4e48",
    "BearerToken": "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlZWMyNjYyYTliYTRlODJmODQwZTNiZGI3YmJjNGU0OCIsIm5iZiI6MTc2MzkwODg5Mi43MTYsInN1YiI6IjY5MjMxZDFjNzdiMGM4ZTY5YTc2OGExNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.PCt4GwzJpddh_PyACBNoSJt6yad93WNw5kIy91YVhCw"
  },
  "GoogleBooks": {
    "ApiKeys": [
      "AIzaSyAPjXG3Yzi8-z0VsN5sAas8cjUyta3Xa-c",
      "AIzaSyBDM_DNXzv2U8BlKn9Kdy-DEsLoqYhm14U"
    ]
  },
  "ConnectionStrings": {
    "DefaultConnection": "Host=aws-1-eu-west-1.pooler.supabase.com;Port=6543;Database=postgres;Username=postgres.iabkzwsosqpcghjqkbzt;Password=jKrbg1WPV4av0D7O;Ssl Mode=Require;Trust Server Certificate=true;Pooling=true;Keepalive=30;CommandTimeout=300;No Reset On Close=true"
  }
}

========== Saga.Server\Program.cs ==========

using Microsoft.AspNetCore.Authentication.JwtBearer;
using Microsoft.EntityFrameworkCore;
using Microsoft.IdentityModel.Tokens;
using Npgsql;
using Saga.Server.Data;
using Saga.Server.Models;
using Saga.Server.Services;
using Saga.Server.Middleware;
using System.Text;

var builder = WebApplication.CreateBuilder(args);

// 1. VERİTABANI BAĞLANTISI (SADE VE TEMİZ)
var connectionString = builder.Configuration.GetConnectionString("DefaultConnection");

// DataSourceBuilder ile Enum mapleme yapıyoruz
var dataSourceBuilder = new NpgsqlDataSourceBuilder(connectionString);
dataSourceBuilder.MapEnum<ApiKaynak>("api_kaynak");
dataSourceBuilder.MapEnum<IcerikTuru>("icerik_turu");
dataSourceBuilder.MapEnum<KullaniciRol>("kullanici_rol");
dataSourceBuilder.MapEnum<AktiviteTuru>("aktivite_turu");
dataSourceBuilder.MapEnum<ListeTuru>("liste_turu");
dataSourceBuilder.MapEnum<KutuphaneDurum>("kutuphane_durum");
var dataSource = dataSourceBuilder.Build();

builder.Services.AddDbContext<SagaDbContext>(options =>
    options.UseNpgsql(dataSource));

// 2. TOKEN SERVİSİ
builder.Services.AddScoped<TokenService>();

// 2.1. EXTERNAL API SERVİSLERİ
builder.Services.AddHttpClient<ITmdbService, TmdbService>();
builder.Services.AddHttpClient<IGoogleBooksService, GoogleBooksService>();

// 3. CORS
builder.Services.AddCors(options =>
{
    options.AddPolicy("ReactAppPolicy", policy =>
    {
        policy.AllowAnyOrigin()
              .AllowAnyMethod()
              .AllowAnyHeader()
              .WithExposedHeaders("X-Toplam-Sayfa", "X-Toplam-Kayit", "X-Mevcut-Sayfa");
    });
});

// 4. AUTH - SUPABASE JWT VALIDATION
var supabaseUrl = builder.Configuration["Supabase:Url"] ?? throw new Exception("Supabase URL bulunamadı!");
var supabaseJwtSecret = builder.Configuration["Supabase:JwtSecret"] ?? throw new Exception("Supabase JWT Secret bulunamadı!");
var supabaseProjectRef = new Uri(supabaseUrl).Host.Split('.')[0]; // iabkzwsosqpcghjqkbzt

builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
    .AddJwtBearer(options =>
    {
        options.TokenValidationParameters = new TokenValidationParameters
        {
            ValidateIssuerSigningKey = true,
            IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(supabaseJwtSecret)),
            ValidateIssuer = true,
            ValidIssuer = $"{supabaseUrl}/auth/v1",
            ValidateAudience = true,
            ValidAudience = "authenticated",
            ValidateLifetime = true,
            ClockSkew = TimeSpan.FromMinutes(5),
            NameClaimType = "sub" // Supabase'de user ID "sub" claim'inde
        };
        
        // Debug için JWT hatalarını loglayalım
        options.Events = new JwtBearerEvents
        {
            OnAuthenticationFailed = context =>
            {
                Console.WriteLine($"🔴 JWT Authentication failed: {context.Exception.Message}");
                return Task.CompletedTask;
            },
            OnTokenValidated = context =>
            {
                Console.WriteLine($"✅ JWT Token validated successfully for user: {context.Principal?.FindFirst("sub")?.Value}");
                return Task.CompletedTask;
            },
            OnMessageReceived = context =>
            {
                var token = context.Request.Headers["Authorization"].ToString();
                if (!string.IsNullOrEmpty(token))
                {
                    Console.WriteLine($"📩 Received token: {token.Substring(0, Math.Min(50, token.Length))}...");
                }
                return Task.CompletedTask;
            }
        };
    });

builder.Services.AddControllers();
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

var app = builder.Build();

// DB TEST
using (var scope = app.Services.CreateScope())
{
    var db = scope.ServiceProvider.GetRequiredService<SagaDbContext>();
    try
    {
        if (db.Database.CanConnect())
            Console.WriteLine("✅✅✅ BAŞARILI: Saga Veritabanına Bağlanıldı! ✅✅✅");
    }
    catch (Exception ex)
    {
        Console.WriteLine($"❌❌❌ DB Hatası: {ex.Message}");
    }
}

app.UseDefaultFiles();
app.UseStaticFiles();

// Global exception handling
app.UseMiddleware<ExceptionHandlingMiddleware>();

app.UseSwagger();
app.UseSwaggerUI();

app.UseCors("ReactAppPolicy");
app.UseAuthentication();
app.UseAuthorization();

app.MapControllers();

// SPA fallback disabled for API-only testing
// app.MapFallbackToFile("/index.html");

app.Run();
